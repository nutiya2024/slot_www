window.__require=function t(e,n,i){function o(c,a){if(!n[c]){if(!e[c]){var r=c.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return o(e[c][1][t]||t)},u,u.exports,t,e,n,i)}return n[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<i.length;c++)o(i[c]);return o}({LockyFortuneActiveSymbols:[function(t,e){"use strict";cc._RF.push(e,"88679VL4ERKBobB8/k7k9y5","LockyFortuneActiveSymbols");var n=t("LockySFortuneActiveSymbols");cc.Class({extends:n,onLoad:function(){this._super();for(var t=0;t<this.itemList.length;t++)this.itemList[t].scaleX=1.7,this.itemList[t].scaleY=1.7;this.node.active=!1},show:function(){this.node.active=!0,this.node.scaleX=0,this.node.scaleY=0,cc.tween(this.node).to(.3,{scaleX:1,scaleY:1},{easing:"expoOut"}).start()},hide:function(){var t=this;cc.tween(this.node).to(.3,{scaleX:0,scaleY:0},{easing:"backIn"}).call(function(){t.node.active=!1}).start()},onUpdateBet:function(){if(this._super(),this.node.active)return this.unschedule(this.hide),void this.scheduleOnce(this.hide,3);this.show(),this.scheduleOnce(this.hide,3)}}),cc._RF.pop()},{LockySFortuneActiveSymbols:"LockySFortuneActiveSymbols"}],LockyFortuneAnimation:[function(t,e){"use strict";cc._RF.push(e,"6d0db0ZnBNNLZ0pKOZF+3Gn","LockyFortuneAnimation");var n=t("LockyFortuneEventConfig"),i=t("LockyFortuneEventManager");cc.Class({extends:cc.Component,properties:{pnlLightCircle:cc.Node,imgEffect:cc.Node,imgCircle:cc.Node},runLightCircle:function(t){var e=cc.instantiate(this.pnlLightCircle);this.node.addChild(e),e.setPosition(this.node.convertToNodeSpaceAR(t.or));var n=e.getChildByName("imgEffect"),i=e.getChildByName("imgCircle");cc.log(t.color),i.color=(new cc.Color).fromHEX(t.color),i.active=!1,cc.tween(e).to(.5,{position:this.node.convertToNodeSpaceAR(t.to)}).call(function(){n.active=!1,i.active=!0,cc.tween(i).to(.3,{scaleX:1.4,scaleY:1.4,opacity:150}).call(function(){e.removeFromParent(),t.callback()}).start()}).start()},onEnable:function(){i.addEventListener(n.CONVICE_VALUE,this.runLightCircle,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager"}],LockyFortuneAudio:[function(t,e){"use strict";cc._RF.push(e,"eea2aeBnNBB4L6Uel87mfH/","LockyFortuneAudio");var n=t("LockyFortuneEventConfig"),i=t("LockyFortuneEventManager");t("LockyFortuneUserData"),t("LockyFortuneGameData"),cc.Class({extends:cc.Component,properties:{bgmAudio:{type:cc.AudioClip,default:[]},startwheel:cc.AudioClip,stopWheel:cc.AudioClip,btnShow:cc.AudioClip,btnhide:cc.AudioClip,inFreeTime:cc.AudioClip,bonusEnd:cc.AudioClip,bonusGet:cc.AudioClip,showLine:cc.AudioClip,winLine:cc.AudioClip,rollOver:cc.AudioClip,convert:cc.AudioClip,showSelectGame:cc.AudioClip,hideSelectGame:cc.AudioClip,addFree:cc.AudioClip,itemMove:cc.AudioClip},onLoad:function(){this.pInfo=t("PlayerInfo").getInstant,this.bgmID=0},start:function(){cc.audioEngine.stopAll(),this.playBgm({id:0,isFrist:!0})},stopAudio:function(){cc.audioEngine.stopAll()},playBgm:function(t){0!=this.pInfo.musicControl&&(this.bgmID!=t.id||t.isFrist)&&(this.bgmID=t.id,cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(this.bgmAudio[t.id],!0))},playEf:function(t){if(0!=this.pInfo.soundEffectControl)switch(t){case"startwheel":this.callAudioPlayEff(this.startwheel);break;case"stopWheel":this.callAudioPlayEff(this.stopWheel);break;case"btnShow":this.callAudioPlayEff(this.btnShow);break;case"btnhide":this.callAudioPlayEff(this.btnhide);break;case"inFreeTime":this.callAudioPlayEff(this.inFreeTime);break;case"bonusEnd":this.callAudioPlayEff(this.bonusEnd);break;case"bonusGet":this.callAudioPlayEff(this.bonusGet);break;case"showLine":this.callAudioPlayEff(this.showLine);break;case"winLine":this.callAudioPlayEff(this.winLine);break;case"rollOver":this.callAudioPlayEff(this.rollOver);break;case"convert":this.callAudioPlayEff(this.convert);break;case"showSelectGame":this.callAudioPlayEff(this.showSelectGame);break;case"hideSelectGame":this.callAudioPlayEff(this.hideSelectGame);break;case"addFree":this.callAudioPlayEff(this.addFree);break;case"itemMove":this.callAudioPlayEff(this.itemMove);break;default:cc.log("\u627e\u4e0d\u5230\u58f0\u97f3\u6587\u4ef6 =\u300b\u300b\u300b\u300b",t)}},callAudioPlayEff:function(t){cc.audioEngine.playEffect(t)},onEnable:function(){i.addEventListener(n.PLAY_AUDIO_BGM,this.playBgm,this),i.addEventListener(n.PLAY_AUDIO_EF,this.playEf,this),i.addEventListener(n.STOP_AUDIO,this.stopAudio,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData",PlayerInfo:void 0}],LockyFortuneBigWin:[function(t,e){"use strict";cc._RF.push(e,"44bdeNhsQpM8YhPq0daz5z7","LockyFortuneBigWin");var n=t("LockyFortuneEventConfig"),i=t("LockyFortuneEventManager"),o=t("LockyFortuneUtil"),s=[cc.v2(-308,175),cc.v2(-115,100),cc.v2(10,170),cc.v2(314,92),cc.v2(46,90)],c=[cc.v2(-321,174),cc.v2(-154,114),cc.v2(20,175),cc.v2(324,92),cc.v2(104,90)],a=[cc.v2(-416,215),cc.v2(-200,129),cc.v2(80,200),cc.v2(389,98),cc.v2(34,112)];cc.Class({extends:cc.Component,properties:{lblWinCoin:{default:null,type:cc.Label,displayName:"\u8d62\u5f97"},nodeCoin:{default:null,type:cc.Node,displayName:"\u91d1\u5e01\u52a8\u753b\u8282\u70b9"},effectCoins:{default:null,type:cc.Node,displayName:"\u91d1\u5e01"},effectLignt:{default:[],type:cc.Node,displayName:"\u5149\u6548"},pnlWin:cc.Node,imgWin:{default:null,type:cc.Node,displayName:"\u8d62\u8282\u70b9"},imgBigWin:{default:null,type:cc.Node,displayName:"\u5927\u8d62\u8282\u70b9"},bigWinEffect:cc.Node,imgMegaWin:{default:null,type:cc.Node,displayName:"\u5de8\u8d62\u8282\u70b9"},megaWinEffect:cc.Node},onLoad:function(){this.coinsGroup=[this.effectCoins];for(var t=0;t<60;t++){var e=cc.instantiate(this.effectCoins);this.nodeCoin.addChild(e),this.coinsGroup.push(e),e.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Loop}this.initTween(),this.addEventListener(),cc.find("New Sprite",this.node).on("click",this.hide,this)},initTween:function(){this.initWinTween(),this.initBigWinTween(),this.initMegaWinTween(),this.initLightPointTween()},initLightPointTween:function(){for(var t=0;t<this.effectLignt.length;t++){var e=cc.tween;e(this.effectLignt[t]).repeatForever(e().parallel(e().by(.5,{angle:90}).by(.5,{angle:90}),e().to(.5,{scaleX:1,scaleY:1}).to(.5,{scaleX:.5,scaleY:.5}))).start(),this.effectLignt[t].active=!1}},initWinTween:function(){this.WinTween=cc.tween(this.pnlWin).repeatForever(cc.tween().to(.5,{scaleX:1,scaleY:1}).to(.5,{scaleX:.9,scaleY:.9}))},initBigWinTween:function(){var t=this;this.bigWinTween=cc.tween(this.bigWinEffect).repeatForever(cc.tween().delay(.5).call(function(){t.bigWinEffect.opacity=255,t.bigWinEffect.scaleX=2,t.bigWinEffect.scaleY=2}).to(.5,{scaleX:2.2,scaleY:2.2,opacity:0}))},initMegaWinTween:function(){var t=this;this.MegaWinTween=cc.tween(this.megaWinEffect).repeatForever(cc.tween().delay(.5).call(function(){t.megaWinEffect.opacity=255,t.megaWinEffect.scaleX=1,t.megaWinEffect.scaleY=1}).to(.5,{scaleX:1.1,scaleY:1.1,opacity:0}))},playWin:function(){this.imgWin.active=!0;for(var t=0;t<this.effectLignt.length;t++)this.effectLignt[t].setPosition(s[t]),this.effectLignt[t].active=!0},playBigWin:function(){this.imgBigWin.active=!0,this.bigWinEffect.active=!0,this.bigWinTween.start();for(var t=0;t<this.effectLignt.length;t++)this.effectLignt[t].setPosition(c[t]),this.effectLignt[t].active=!0},playMegaWin:function(){this.imgMegaWin.active=!0,this.megaWinEffect.active=!0,this.megaWinEffect.opacity=0,this.MegaWinTween.start();for(var t=0;t<this.effectLignt.length;t++)this.effectLignt[t].setPosition(a[t]),this.effectLignt[t].active=!0},show:function(t,e){this.node.active=!0,e>=50?this.playMegaWin():e>=20?this.playBigWin():this.playWin();var n=Math.ceil(t/70);this.lblWinCoin.string=o.formattingCoins(0),this.nowCoins=0,this.winCoins=t,this.addCoins=n,this.schedule(this.addNowCoinsAction,.1,69),this.coinsPool=this.coinsGroup.concat([]),this.schedule(this.playCoins,.3,1/0),this.playCoins(),this.WinTween.start(),this.scheduleOnce(this.hide,10)},addNowCoinsAction:function(){this.nowCoins+=this.addCoins,this.nowCoins=this.nowCoins>this.winCoins?this.winCoins:this.nowCoins,this.lblWinCoin.string=o.formattingCoins(this.nowCoins)},hide:function(){i.emit(n.HIDE_BIG_WIN),this.unschedule(this.playCoins),this.unschedule(this.addNowCoinsAction),this.unschedule(this.hide),this.resetCoins(),this.WinTween.stop(),this.bigWinTween.stop(),this.MegaWinTween.stop(),this.lblWinCoin.string=0,this.imgWin.active=!1,this.imgBigWin.active=!1,this.bigWinEffect.active=!1,this.imgMegaWin.active=!1,this.megaWinEffect.active=!1,this.node.active=!1},resetCoins:function(){for(var t=0;t<this.coinsGroup.length;t++)this.coinsGroup[t].tweenAction&&(this.coinsGroup[t].tweenAction.stop(),this.coinsGroup[t].setPosition(0,-400))},playCoins:function(){for(var t=this,e=function(){var e=t.coinsPool.shift();t.scheduleOnce(function(){t.rundCoinsAction(e)},1*Math.random())};this.coinsPool.length>0;)e()},rundCoinsAction:function(t){var e=this,n=1800*Math.random()-900,i=400*Math.random()-200+n,o=400*Math.random()+400,s=i-n>0,c=400*Math.random(),a=s?i+c:i-c,r=400*Math.random(),l=s?a+r:a-r;t.angle=360*Math.random(),t.setPosition(n,-400),t.tweenAction=cc.tween(t).bezierTo(1,cc.v2(i,o),cc.v2(a,o),cc.v2(l,-400)).call(function(){e.coinsPool.push(t)}).start()},onShowBigWin:function(t){this.show(t.coins,t.rate)},addEventListener:function(){i.addEventListener(n.SHOW_BIG_WIN,this.onShowBigWin,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneUtil:"LockyFortuneUtil"}],LockyFortuneDownUI:[function(t,e){"use strict";cc._RF.push(e,"771ddQPYVFOlK/p3s99BHRn","LockyFortuneDownUI");var n=t("LockyFortuneUserData"),i=t("LockyFortuneGameData"),o=t("LockyFortuneEventConfig"),s=t("LockyFortuneEventManager"),c=t("PlayerInfo"),a=t("LockyFortuneUtil");cc.Class({extends:cc.Component,properties:{labEntries:cc.Label,labWinning:cc.Label,labGameWin:cc.Label,labTotal:cc.Label,btnAdd:cc.Node,btnDec:cc.Node,btnRoll:cc.Node,btnAuto:cc.Node,imgAutoOnImg:cc.Node,imgAutoEffect:cc.Node,spAtlas:cc.SpriteAtlas,imgAddCoinsEffect:cc.Node,imgAddCoinsHand:cc.Node,pnlAddCoins:cc.Node,btnAddCoins:cc.Node,btnAddGroup:{default:[],type:cc.Button}},onLoad:function(){resizeWinX(this),this.initHandTween(),this.initAutoTween(),this.initUserCoin(),this.labGameWin.string=a.formattingCoins(0),cc.find("pnl_entries/btn_add",this.node).active=!1,cc.find("pnl_winning",this.node).active=!1,n.LoginGameResultData&&this.onLoginGameResult(n.LoginGameResultData)},initBetData:function(){var t=c.getInstant.maxBet/n.Line;this.betLimit=n.slotBetList.length-1;for(var e=0;e<n.slotBetList.length;e++)if(t<n.slotBetList[e]){this.betLimit=e-1;break}this.updateBet()},initHandTween:function(){this.addCoinsTween=cc.tween(this.imgAddCoinsEffect).repeatForever(cc.tween().to(.5,{opacity:0}).to(.5,{opacity:255})),this.addCoinsHandTween=cc.tween(this.imgAddCoinsHand).repeatForever(cc.tween().to(.5,{x:127.5,y:124.5}).to(.5,{x:53,y:50}))},initUserCoin:function(){this.labEntries.string=a.formattingCoins(c.getInstant.playerCoin)},initAutoTween:function(){cc.tween(this.imgAutoEffect).repeatForever(cc.tween().by(1,{angle:180})).start()},onCLick:function(t,e){switch(e){case"auto":if(!a.isNormalGame())return;n.IsAuto?(this.enterAuto(!1),s.emit(o.PLAY_AUDIO_EF,"btnhide")):(this.enterAuto(!0),s.emit(o.PLAY_AUDIO_EF,"btnShow"));break;case"roll":if(n.Status==i.GAME_STATE.LEISURE){if(!this.checkCoinsEntries())return void this.playNoMenyTween();n.Status=i.GAME_STATE.REQUEST,s.emit(o.START_ROLL),this.setRollBan(!1),s.emit(o.PLAY_AUDIO_EF,"startwheel")}else n.Status==i.GAME_STATE.ROLL_END&&(s.emit(o.STOP_IMMEDIATELY),this.setRollBan(!1),s.emit(o.PLAY_AUDIO_EF,"stopWheel"));break;case"add":this.bet+=1,this.bet=this.bet>this.betLimit?0:this.bet,this.updateBet(),s.emit(o.PLAY_AUDIO_EF,"btnShow"),this.stopNoMenyTween();break;case"dec":this.bet-=1,this.bet=this.bet<0?this.betLimit:this.bet,this.updateBet(),s.emit(o.PLAY_AUDIO_EF,"btnhide"),this.stopNoMenyTween()}},onClickAddCoins:function(t,e){switch(e){case"show":this.showAddCoins();break;case"1":this.chargeSum(1);break;case"10":this.chargeSum(10);break;case"50":this.chargeSum(50);break;case"100":this.chargeSum(100);break;case"ALL":this.chargeSum(0);break;case"close":this.pnlAddCoins.active=!1}},playNoMenyTween:function(){this.imgAddCoinsEffect.active=!0,this.imgAddCoinsHand.active=!0,this.addCoinsTween.start(),this.addCoinsHandTween.start(),s.emit(o.HAVE_NO_MONEY)},stopNoMenyTween:function(){this.addCoinsTween.stop(),this.addCoinsHandTween.stop(),this.imgAddCoinsEffect.active=!1,this.imgAddCoinsHand.active=!1},showAddCoins:function(){},chargeSum:function(t){this.pnlAddCoins.active=!1;var e=0==t?{}:{sum:t};s.emit(o.ADD_USER_COINS,e)},updateBet:function(){cc.log("updateBet",n.slotBetList),n.BetIndex=this.bet,n.BetValue=n.slotBetList[this.bet],this.labTotal.string=a.formattingCoins(n.BetValue),s.emit(o.UPDATE_BET),s.emit(o.ON_PUSH_GAMBLING_WIN_POOL,n.BetValue)},setBtnState:function(t){this.btnRoll.getComponent(cc.Sprite).spriteFrame=this.spAtlas.getSpriteFrame(t?"Mob_DownUI_But_Stop":"Mob_DownUI_But_RevealPlus")},setRollBan:function(t){this.btnRoll.getComponent(cc.Button).interactable=t},setAutoBan:function(t){this.btnAuto.getComponent(cc.Button).interactable=t},banButton:function(t){t&&n.IsAuto||(this.btnAdd.getComponent(cc.Button).interactable=t,this.btnDec.getComponent(cc.Button).interactable=t)},enterAuto:function(t){n.IsAuto=t,this.imgAutoOnImg.active=t,this.imgAutoEffect.active=t,t?(this.setRollBan(!1),this.banButton(!1),n.Status==i.GAME_STATE.LEISURE&&s.emit(o.START_ROLL)):n.Status==i.GAME_STATE.LEISURE&&(this.setRollBan(!0),this.setBtnState(!1))},onStartRoll:function(){this.banButton(!1),a.isNormalGame()&&(this.labGameWin.string=a.formattingCoins(0)),a.isNormalGame()&&(c.getInstant.playerCoin-=n.BetValue,this.labEntries.string=a.formattingCoins(c.getInstant.playerCoin))},checkCoinsEntries:function(){return c.getInstant.playerCoin>=n.BetValue},onChargeAllResult:function(t){t&&(c.getInstant.playerCoin=t.score?t.score:0,this.labEntries.string=a.formattingCoins(c.getInstant.playerCoin),this.stopNoMenyTween())},onUpdateGameWin:function(t){var e=this;if(0!=t){c.getInstant.playerCoin+=t;var i=a.isNormalGame()?0:n.FreeWinCoins,o=a.isNormalGame()?t:n.FreeWinCoins+t,s=Math.ceil(o/20);this.schedule(function(){(i+=s)>o&&(i=o),e.labGameWin.string=a.formattingCoins(i),e.labEntries.string=a.formattingCoins(c.getInstant.playerCoin-o+i)},.02,20),a.isNormalGame()||(n.FreeWinCoins+=t)}},onLotteryResult:function(){n.IsAuto||(this.setBtnState(!0),this.setRollBan(!0))},onChangeGameStatus:function(){n.Status==i.GAME_STATE.RESULT?this.enterResult():n.Status==i.GAME_STATE.LEISURE?this.enterLeisure():n.Status==i.GAME_STATE.SELECT&&this.enterSelect()},onSetWinningValue:function(){},onSetBetValue:function(t){for(var e=t/i.LINES,o=0;o<n.slotBetList.length;o++)if(n.slotBetList[o]==e){this.bet=o;break}this.updateBet()},enterSelect:function(){this.enterAuto(!1),this.banButton(!1),this.setRollBan(!1)},onShowSelectGame:function(t){t&&t.isOut||(this.labGameWin.string=a.formattingCoins(0))},enterLeisure:function(){this.checkCoinsEntries()||(this.playNoMenyTween(),this.enterAuto(!1)),a.isNormalGame()?(this.banButton(!0),n.IsAuto||(this.setRollBan(!0),this.setBtnState(!1)),n.IsAuto&&s.emit(o.START_ROLL)):n.IsAuto?s.emit(o.START_ROLL):this.enterAuto(!0)},onChangeGameMode:function(){n.GameMode==i.GAME_MODE.NORMAL||n.GameMode==i.GAME_MODE.FREE&&(this.pnlAddCoins.active=!1),this.btnAddCoins.getComponent(cc.Button).interactable=n.GameMode==i.GAME_MODE.NORMAL},enterResult:function(){n.IsAuto||this.setRollBan(!1)},onLoginGameResult:function(t){if(cc.log("onLoginGameResult"),t.Obj&&t.Obj.betList&&(n.slotBetList=t.Obj.betList),this.bet=0,t.Obj&&t.Obj.betDefault)for(var e=0;e<t.Obj.betList.length;e++)if(t.Obj.betList[e]==t.Obj.betDefault){this.bet=e;break}this.initBetData()},UPDATE_COIN:function(){this.labEntries&&(this.labEntries.string=a.formattingCoins(c.getInstant.playerCoin)),this.labBalance&&(this.labBalance.string=a.formattingCoins(c.getInstant.playerCoin))},onEnable:function(){s.addEventListener("UPDATE_COIN",this.UPDATE_COIN,this),s.addEventListener(o.CHANGE_GAME_MODE,this.onChangeGameMode,this),s.addEventListener(o.SHOW_SELECT_GAME,this.onShowSelectGame,this),s.addEventListener(o.ON_CHARGE_ALL_RESULT,this.onChargeAllResult,this),s.addEventListener(o.SET_BET_VALUE,this.onSetBetValue,this),s.addEventListener(o.SET_WINNING_VALUE,this.onSetWinningValue,this),s.addEventListener(o.ON_LOTTERY_RESULT,this.onLotteryResult,this),s.addEventListener(o.UPDATE_GAME_WIN,this.onUpdateGameWin,this),s.addEventListener(o.START_ROLL,this.onStartRoll,this),s.addEventListener(o.CHANGE_GAME_STATUS,this.onChangeGameStatus,this),s.addEventListener(o.ON_LOGIN_GAME_RESULT,this.onLoginGameResult,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData",LockyFortuneUtil:"LockyFortuneUtil",PlayerInfo:void 0}],LockyFortuneEventConfig:[function(t,e){"use strict";cc._RF.push(e,"860fejhVPZG0I6AxDiDztIH","LockyFortuneEventConfig"),e.exports={ON_LOGIN_GAME_RESULT:"ON_LOGIN_GAME_RESULT",ON_LOTTERY_RESULT:"ON_LOTTERY_RESULT",ON_LOTTERY_RESULT_ERR:"ON_LOTTERY_RESULT_ERR",ON_LOGIN_FREE_COUNT_RESULT:"ON_LOGIN_FREE_COUNT_RESULT",ON_PUSH_GAMBLING_WIN_POOL:"ON_PUSH_GAMBLING_WIN_POOL",ON_CHARGE_ALL_RESULT:"ON_CHARGE_ALL_RESULT",UPDATE_POOL:"UPDATE_POOL",UPDATE_GAME_WIN:"UPDATE_GAME_WIN",HAVE_NO_MONEY:"HAVE_NO_MONEY",SHOW_TIP_VIEW:"SHOW_TIP_VIEW",ADD_USER_COINS:"ADD_USER_COINS",SET_WINNING_VALUE:"SET_WINNING_VALUE",SET_BET_VALUE:"SET_BET_VALUE",UPDATE_BET:"UPDATE_BET",UPDATE_FREE_TIME_NOW:"UPDATE_FREE_TIME_NOW",UPDATE_FREE_TIME_ALL:"UPDATE_FREE_TIME_ALL",UPDATE_FU_XING:"UPDATE_FU_XING",UPDATE_BONUS_WIN:"UPDATE_BONUS_WIN",UPDATE_WILL_WIN:"UPDATE_WILL_WIN",START_ROLL:"START_ROLL",STOP_IMMEDIATELY:"STOP_IMMEDIATELY",RESET_WHEEL:"RESET_WHEEL",ON_WHEEL_ROLL_END:"ON_WHEEL_ROLL_END",OUT_GAME:"OUT_GAME",CHANGE_GAME_MODE:"CHANGE_GAME_MODE",CHANGE_GAME_STATUS:"CHANGE_GAME_STATUS",SHOW_TOTAL_WIN_ADD:"SHOW_TOTAL_WIN_ADD",SHOW_TOTAL_WIN:"SHOW_TOTAL_WIN",HIDE_TOTAL_WIN:"HIDE_TOTAL_WIN",SHOW_SELECT_GAME:"SHOW_SELECT_GAME",HIDE_SELECT_GAME:"HIDE_SELECT_GAME",FREE_TIME_OVER:"FREE_TIME_OVER",SHOW_BIG_WIN:"SHOW_BIG_WIN",HIDE_BIG_WIN:"HIDE_BIG_WIN",SELECT_GAME:"SELECT_GAME",OUT_FREE_TIME:"OUT_FREE_TIME",PLAY_PARTICLE_ANI:"PLAY_PARTICLE_ANI",PLAY_PARTICLE_SHIFT_ANI:"PLAY_PARTICLE_SHIFT_ANI",PLAY_AUDIO_BGM:"PLAY_AUDIO_BGM",PLAY_AUDIO_EF:"PLAY_AUDIO_EF",STOP_AUDIO:"STOP_AUDIO",TEST_DATA:"TEST_DATA"},cc._RF.pop()},{}],LockyFortuneEventManager:[function(t,e){"use strict";function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}cc._RF.push(e,"98788y3Yi1MY4baFAONj1ag","LockyFortuneEventManager");var s={_eventListeners:[],destroy:function(){s._eventListeners=[]},getEventListenersIndex:function(t,e,n){for(var i=-1,o=0;o<s._eventListeners[t].length;o++){var c=s._eventListeners[t][o];if(c.callBack==e&&(!n||c.target==n)){i=o;break}}return i},addEventListener:function(t,e,n){if(t){if(null==e)return cc.log("addEventListener callBack is nil"),!1;var i={callBack:e,target:n};return null==s._eventListeners[t]?s._eventListeners[t]=[i]:-1==s.getEventListenersIndex(t,e,n)&&s._eventListeners[t].push(i),!0}cc.warn("eventName is empty"+t)},removeEventListener:function(t,e,n){if(null!=s._eventListeners[t]){var i=s.getEventListenersIndex(t,e,n);-1!=i&&s._eventListeners[t].splice(i,1)}},emit:function(t,e){if(null!=s._eventListeners[t]){for(var i,o=[],c=n(s._eventListeners[t]);!(i=c()).done;){var a=i.value;o.push({callBack:a.callBack,target:a.target})}for(var r=function(){var t=u[l];new Promise(function(){t.callBack.call(t.target,e)})},l=0,u=o;l<u.length;l++)r()}}};e.exports=s,cc._RF.pop()},{}],LockyFortuneFreeFree:[function(t,e){"use strict";cc._RF.push(e,"c85e7DQPAFM4oGjDGtE9uRT","LockyFortuneFreeFree");var n=t("LockyFortuneFreeTime"),i=t("LockyFortuneUserData"),o=t("LockyFortuneEventConfig"),s=t("LockyFortuneEventManager");cc.Class({extends:n,properties:{labWillWin:cc.Label},onLoad:function(){this._super()},onUpdateWillWin:function(t){var e=this,n=0,o=Math.ceil(t/20);this.labWillWin.string=i.WillWin;var s=0;this.schedule(function(){(n+=o)>t&&(n=t),e.labWillWin.string=n+i.WillWin,21==++s&&(i.WillWin+=t)},.02,20)},getWildPos:function(){return this.labWillWin.node.parent.convertToWorldSpaceAR(this.labWillWin.node.getPosition())},onEnable:function(){this._super(),s.addEventListener(o.UPDATE_WILL_WIN,this.onUpdateWillWin,this)},onDisable:function(){this._super(),s.removeEventListener(o.UPDATE_WILL_WIN,this.onUpdateWillWin,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneFreeTime:"LockyFortuneFreeTime",LockyFortuneUserData:"LockyFortuneUserData"}],LockyFortuneFreeTime:[function(t,e){"use strict";cc._RF.push(e,"325b7gv+PFLK6yZKLn2DCMJ","LockyFortuneFreeTime");var n=t("LockyFortuneUserData"),i=(t("LockyFortuneGameData"),t("LockyFortuneEventConfig")),o=t("LockyFortuneEventManager");cc.Class({extends:cc.Component,properties:{labNow:cc.Label,labAll:cc.Label,labFuXing:cc.Label},onLoad:function(){this.initLabelTime()},initLabelTime:function(){this.labNow.string=n.FreeTimeNow,this.labAll.string=n.FreeTimeAll},onUpdateFreeTimeNow:function(){this.labNow.string=n.FreeTimeNow},onUpdateFreeTimeAll:function(){var t=this;cc.tween(this.labAll.node).to(.15,{scaleX:.3,scaleY:.3},{easing:"backOut"}).call(function(){t.labAll.string=n.FreeTimeAll}).to(.15,{scaleX:1,scaleY:1},{easing:"backOut"}).start()},getFreeTimePos:function(){return this.labAll.node.parent.convertToWorldSpaceAR(this.labAll.node.getPosition())},getFuxingPos:function(){return this.labFuXing.node.parent.convertToWorldSpaceAR(this.labFuXing.node.getPosition())},onUpdateFuXing:function(){this.labFuXing.string=n.FuXing},onEnable:function(){o.addEventListener(i.UPDATE_FREE_TIME_NOW,this.onUpdateFreeTimeNow,this),o.addEventListener(i.UPDATE_FREE_TIME_ALL,this.onUpdateFreeTimeAll,this),o.addEventListener(i.UPDATE_FU_XING,this.onUpdateFuXing,this)},onDisable:function(){o.removeEventListener(i.UPDATE_FREE_TIME_NOW,this.onUpdateFreeTimeNow,this),o.removeEventListener(i.UPDATE_FREE_TIME_ALL,this.onUpdateFreeTimeAll,this),o.removeEventListener(i.UPDATE_FU_XING,this.onUpdateFuXing,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData"}],LockyFortuneFreeUp:[function(t,e){"use strict";cc._RF.push(e,"a4465lfTepGZY8FfzCS2yeY","LockyFortuneFreeUp");var n=t("LockyFortuneFreeTime"),i=t("LockyFortuneUserData"),o=t("LockyFortuneEventConfig"),s=t("LockyFortuneEventManager");cc.Class({extends:n,properties:{labBonusWin:cc.Label,pnlFree:cc.Node,pnlFuxing:cc.Node},onLoad:function(){this._super(),this.pnlFuxing.active=!1,this.pnlFree.active=!0},onUpdateBonusWin:function(){this.labBonusWin.string=i.BonusWin},onFreeTimeOver:function(){this.pnlFree.active=!1,this.pnlFuxing.active=!0,this.pnlFuxing.scaleX=0,this.pnlFuxing.scaleY=0,cc.tween(this.pnlFuxing).to(.3,{scaleX:1,scaleY:1},{easing:"backOut"}).start()},onEnable:function(){this._super(),s.addEventListener(o.UPDATE_BONUS_WIN,this.onUpdateBonusWin,this),s.addEventListener(o.FREE_TIME_OVER,this.onFreeTimeOver,this)},onDisable:function(){this._super(),s.removeEventListener(o.UPDATE_BONUS_WIN,this.onUpdateBonusWin,this),s.removeEventListener(o.FREE_TIME_OVER,this.onFreeTimeOver,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneFreeTime:"LockyFortuneFreeTime",LockyFortuneUserData:"LockyFortuneUserData"}],LockyFortuneGameData:[function(t,e){"use strict";cc._RF.push(e,"ff324IWcMVLc7B2BP22Zbfx","LockyFortuneGameData");var n=[];n[15]=5,n[16]=10,n[17]=20,n[18]=40,n[19]=80;var i=[];i[20]=[1,3,5,7,8],i[40]=[1,3,5,6,8],i[60]=[1,3,4,6,8],i[80]=[1,2,4,6,8],i[100]=[0,2,4,6,8];var o={GAME_STATE:{INIT:0,LEISURE:1,REQUEST:2,ROLL_END:3,RESULT:4,SELECT:5},GAME_MODE:{NORMAL:0,UP_UP:1,FREE:2,SELECT:5},BONUS_WIN_RATE:50,BET:[1,2,3,4,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100],LINES:20,ITEM_HEIGHT:150,ITEM_COM_NAME:"LockyFortuneItem",BONUS_VAL:n,ITEM_CONFIG:i,BONUS_ID_RED:[15,16,17,18,19],BONUS_ID_GOLD:12,BONUS_ID_GREEN:13,VERTICAL_ITEM_COUNT:3,WILD_ID:13,MAX_RATE:100,EXCHANGE_RATE:.01,BUNDLE_NAME:"LockyFortune",ADD_ID:14};e.exports=o,cc._RF.pop()},{}],LockyFortuneItem:[function(t,e){"use strict";cc._RF.push(e,"034f0z59YZOZbQSd0RGbzoO","LockyFortuneItem");var n=t("LockyFortuneGameData"),i=t("LockyFortuneUserData"),o=t("LockyFortuneEventConfig"),s=t("LockyFortuneEventManager"),c=t("LockyFortuneUtil"),a=[];a[0]="slice23_23.png",a[1]="slice32_32.png",a[2]="slice40_40.png",a[3]="slice34_34.png",a[4]="slice26_26.png",a[5]="slice35_35.png",a[6]="slice36_36.png",a[7]="slice03_03.png",a[8]="slice15_15.png",a[9]="slice44_44.png",a[10]="slice38_38.png",a[11]="slice06_06.png",a[n.BONUS_ID_GOLD]="slice10_10.png",a[50]="slice30_30.png",a[51]="slice12_12.png",a[14]="slice50.png",a[15]="slice07_07.png",a[16]="slice07_07.png",a[17]="slice07_07.png",a[18]="slice07_07.png",a[19]="slice07_07.png";var r=[];r[0]="slice24_24.png",r[1]="slice24_24.png",r[2]="slice41_41.png",r[3]="slice41_41.png",r[4]="slice27_27.png",r[5]="slice27_27.png",r[6]="slice37_37.png",r[7]="slice37_37.png",r[8]="slice42_42.png",r[9]="slice46_46.png",r[10]="slice45_45.png",r[11]="slice11_11.png",r[n.BONUS_ID_GOLD]="slice10_10.png",r[50]="slice30_30.png",r[14]="slice50.png",cc.Class({extends:cc.Component,properties:{itemImg:cc.Node,itemAni:cc.Node,nodeAdd:cc.Node,imgEffect:cc.Node,itemFrame:cc.Node,labBonus:cc.Node,spAtlas:cc.SpriteAtlas,itemID:cc.Integer,wheelID:cc.Integer,verticalPos:cc.Integer},onLoad:function(){this.itemAni.getComponent(cc.Animation).on("finished",this.onFinished,this),this.bonusVal=0,this.randImg()},reset:function(){this.itemAni.active=!1,this.itemImg.active=!0,this.itemFrame.active=!1},closeShine:function(){this.itemAni.active=!1,this.itemImg.active=!0,this.itemFrame.active=!1},randImg:function(){this.changeItem(c.getRandItemID(!0))},changeItem:function(t){this.reset(),this.labBonus.active=!1,this.bonusVal=0,this.itemID=t;var e=a;this.isBonusItem()?this.showBonusLabel():i.GameMode==n.GAME_MODE.UP_UP?(e=r,14==t&&(t=n.BONUS_ID_GREEN,this.nodeAdd.active=!0)):i.GameMode==n.GAME_MODE.FREE&&this.isGreenBounsItem()&&this.showBonusLabel(i.WillWin),13==t&&(t=i.GameMode==n.GAME_MODE.NORMAL?51:50),this.itemImg.getComponent(cc.Sprite).spriteFrame=this.spAtlas.getSpriteFrame(e[t])},showBonusLabel:function(t){t|=c.getBonusVal(this.itemID),this.labBonus.active=!0,this.labBonus.getComponent(cc.Label).string=t,this.bonusVal=t},addBonusVal:function(t){this.labBonus.active=!0,this.bonusVal+=t,this.labBonus.getComponent(cc.Label).string=this.bonusVal},hideBonusLabel:function(){this.labBonus.active=!1},setSelect:function(){this.itemFrame.active=!0},getitemID:function(){return this.itemID},getBonusVal:function(){return this.bonusVal},setItemWheelID:function(t){this.wheelID=t},setItemVericalPos:function(t){this.verticalPos=t},getItemWheelID:function(){return this.wheelID},getItemVerticalPos:function(){return this.verticalPos},isAddItem:function(){return 14==this.itemID},isWildItem:function(){return 13==this.itemID},isGoldBounsItem:function(){return this.itemID==n.BONUS_ID_GOLD},isGreenBounsItem:function(){return this.itemID==n.BONUS_ID_GREEN},isBonusItem:function(){for(var t=0;t<n.BONUS_ID_RED.length;t++)if(this.itemID==n.BONUS_ID_RED[t])return!0;return!1},isInGameView:function(){return this.verticalPos>=0&&this.verticalPos<n.VERTICAL_ITEM_COUNT},rollEnd:function(){this.isInGameView()&&(this.isBonusItem()&&this.playAniBonusEnd(),this.isWildItem()&&i.GameMode==n.GAME_MODE.NORMAL&&this.playAniWildEnd())},playItemAni:function(t,e){this.itemAni.active=!0,this.itemImg.active=!1,this.itemAni.getComponent(cc.Animation).play(t).repeatCount=e},onFinished:function(){this.itemAni.active=!1,this.itemImg.active=!0},playDecTween:function(){var t=this,e=this.bonusVal,n=Math.ceil(this.bonusVal/20);this.schedule(function(){(e-=n)<0&&(e=0,t.labBonus.active=!1,t.bonusVal=0),t.labBonus.getComponent(cc.Label).string=e},.02,20)},showAddTween:function(){var t=this;this.nodeAdd.active=!0,cc.tween(this.nodeAdd).to(.3,{scaleX:1.4,scaleY:1.4},{easing:"backOut"}).delay(.5).to(.3,{scaleX:1,scaleY:1}).call(function(){t.nodeAdd.active=!1,t.itemImg.getComponent(cc.Sprite).spriteFrame=t.spAtlas.getSpriteFrame("slice19_19.png")}).start(),s.emit(o.PLAY_AUDIO_EF,"addFree")},playAddToBonusTween1:function(){var t=this;cc.tween(this.nodeAdd).to(.3,{scaleX:1.4,scaleY:1.4},{easing:"backOut"}).delay(.5).to(.3,{scaleX:0,scaleY:0}).call(function(){t.nodeAdd.active=!1,t.nodeAdd.scaleX=1,t.nodeAdd.scaleY=1}).start(),s.emit(o.PLAY_AUDIO_EF,"addFree")},playAddToBonusTween:function(){var t,e=this;t=this.isBonusItem()?"slice29_29.png":this.isGreenBounsItem()?"slice02_02.png":"slice20_20.png",this.imgEffect.active=!0,this.imgEffect.getComponent(cc.Sprite).spriteFrame=this.spAtlas.getSpriteFrame(t),cc.tween(this.imgEffect).to(.3,{scaleX:1.1,scaleY:1.1}).delay(1).to(.3,{scaleX:1,scaleY:1}).call(function(){e.imgEffect.active=!1}).start()},playGetBonusTween:function(t){var e=this,n=0,i=Math.ceil(t/20);this.labBonus.active=!0,this.labBonus.getComponent(cc.Label).string=this.bonusVal;var o=0;this.schedule(function(){(n+=i)>t&&(n=t),e.labBonus.getComponent(cc.Label).string=n+e.bonusVal,21==++o&&(e.bonusVal+=n)},.02,20)},playAniBonus:function(){this.playItemAni("bonus_ani",1),this.labBonus.active=!0,cc.tween(this.labBonus).to(.2,{scaleX:0,scaleY:1.2}).to(.2,{scaleX:1,scaleY:1}).start()},playAniBonusEnd:function(){this.playItemAni("bonus_end_ani",1),s.emit(o.PLAY_AUDIO_EF,"bonusEnd")},playAniWild:function(){this.playItemAni("wlld_ani",1)},playAniWildEnd:function(){this.playItemAni("wlld_end_ani",1)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData",LockyFortuneUtil:"LockyFortuneUtil"}],LockyFortuneMain:[function(t,e){"use strict";cc._RF.push(e,"a3e4953zypEvZTipIWYOKMs","LockyFortuneMain");var n=t("LockyFortuneGameData"),i=t("LockyFortuneUserData"),o=t("LockyFortuneEventConfig"),s=t("LockyFortuneEventManager"),c=t("LockyFortuneUtil");t("PlayerInfo"),cc.Class({extends:cc.Component,properties:{pnlSFortune:cc.Node,preSFortune:cc.Prefab,pnlFortune:cc.Node,preFortune:cc.Prefab,pnlWheel:cc.Node,preWheel:cc.Prefab,pnlFree:cc.Node,preFreeSpins:cc.Prefab,preFreeUp:cc.Prefab},onLoad:function(){i.Status=n.GAME_STATE.INIT,i.GameMode=n.GAME_MODE.NORMAL,this.resultList=[],this.retainItemList=[],this.initSFortune(),this.initFortune(),this.initWheel(),this.scheduleOnce(function(){},2)},start:function(){},closeShine:function(){for(var t=0;t<this.resultList.length;t++)this.resultList[t].active=!0,this.wheelUpItemList[t].getComponent(n.ITEM_COM_NAME).closeShine(),this.wheelUpItemList[t].active=!1,this.wheelMaskItemlist[t].active=!1;this.unschedule(this.onLineSchedUleCallBack)},resetItem:function(){if(i.GameMode!=n.GAME_MODE.UP_UP)for(var t=0;t<this.resultList.length;t++){var e=this.resultList[t].getComponent(n.ITEM_COM_NAME);this.resultList[t].active=!0,e.reset(),this.wheelUpItemList[t].getComponent(n.ITEM_COM_NAME).reset(),this.wheelUpItemList[t].active=!1,this.wheelMaskItemlist[t].active=!1}},resetItemInUp:function(){for(var t=0;t<this.resultList.length;t++)this.wheelMaskItemlist[t].active=!1,this.resultList[t].getComponent(n.ITEM_COM_NAME).isBonusItem()||(this.wheelUpItemList[t].active=!1,this.wheelUpItemList[t].getComponent(n.ITEM_COM_NAME).reset(),this.resultList[t].active=!0)},resetItemInFree:function(){for(var t=0;t<this.resultList.length;t++)this.wheelMaskItemlist[t].active=!1,this.wheelUpItemList[t].active=!1,this.wheelUpItemList[t].getComponent(n.ITEM_COM_NAME).reset(),this.resultList[t].active=!0},stateCallBack:function(){if(i.Status==n.GAME_STATE.ROLL_END){this.unschedule(this.stateCallBack),i.Status=n.GAME_STATE.RESULT,s.emit(o.CHANGE_GAME_STATUS),this.resultList=[];for(var t=n.VERTICAL_ITEM_COUNT-1;t>=0;t--)for(var e=0;e<this.wheelComList.length;e++){var c=this.wheelComList[e].getResultList();this.resultList.push(c[t])}this.showResult()}},showResult:function(){if(i.GameMode!=n.GAME_MODE.UP_UP)if(i.GameMode!=n.GAME_MODE.FREE){if(i.LotteryRes.winscore>0)return cc.log("\u4e2d\u5956\u4e86=\u300b",i.LotteryRes.winscore),s.emit(o.UPDATE_GAME_WIN,i.LotteryRes.winscore),this.playWinAnim(),void s.emit(o.PLAY_AUDIO_EF,"winLine");cc.log("\u6ca1\u4e2d=\u300b"),this.toGameOver()}else this.playFreeWinAnim();else this.playUpWinAnim()},playFreeWinAnim:function(){for(var t=i.LotteryRes.viewarray.nWinCards,e=!1,c=0;c<this.resultList.length;c++){var a=this.resultList[c].getComponent(n.ITEM_COM_NAME);t&&t[c]&&!a.isGreenBounsItem()?(this.wheelUpItemList[c].active=!0,this.wheelUpItemList[c].getComponent(n.ITEM_COM_NAME).changeItem(a.getitemID()),this.wheelUpItemList[c].getComponent(n.ITEM_COM_NAME).setSelect(),this.resultList[c].active=!1,e=!0):this.wheelMaskItemlist[c].active=!0}var r=this,l=function(){r.resetItemInFree();for(var t=0,e=0;e<r.resultList.length;e++)r.resultList[e].getComponent(n.ITEM_COM_NAME).isGreenBounsItem()&&function(){var c={};c.or=r.resultList[e].parent.convertToWorldSpaceAR(r.resultList[e].getPosition()),c.to=r.freeNode.getComponent(n.BUNDLE_NAME+"FreeFree").getFuxingPos(),c.callback=function(){i.FuXing+=i.WillWin,s.emit(o.UPDATE_FU_XING,i.WillWin)},r.scheduleOnce(function(){s.emit(o.PLAY_PARTICLE_ANI,c)},1*t),t++}();r.scheduleOnce(function(){r.toGameOver()},1*t+(t>0?2:0))};s.emit(o.UPDATE_GAME_WIN,i.LotteryRes.winscore),e?(this.scheduleOnce(function(){l()},2),s.emit(o.PLAY_AUDIO_EF,"winLine")):l()},playUpWinAnim:function(){var t=this,e=i.LotteryRes.viewarray.nHandCards,c=[],a=!1;for(var r in e)if(e[r]==n.ADD_ID){this.resultList[r].getComponent(n.BUNDLE_NAME+"Item").showAddTween();var l={};l.or=this.resultList[r].parent.convertToWorldSpaceAR(this.resultList[r].getPosition()),l.to=this.stepNode.getComponent(n.BUNDLE_NAME+"FreeUp").getFreeTimePos(),l.callback=function(){i.FreeTimeAll++,s.emit(o.UPDATE_FREE_TIME_ALL)},s.emit(o.PLAY_PARTICLE_ANI,l),a=!0}for(var u=0;u<e.length;u++)if(e[u]==n.BONUS_ID_GREEN){var h=this.wheelUpItemList[u];h.active=!0,h.getComponent(n.ITEM_COM_NAME).changeItem(e[u]),c.push(h)}for(var E=0;E<e.length;E++)if(e[E]==n.BONUS_ID_GOLD){var L=this.wheelUpItemList[E];L.active=!0,L.getComponent(n.ITEM_COM_NAME).changeItem(e[E]),c.push(L)}for(var d=0,m=a?2:0,_=function(e){for(var i=c[e].getComponent(n.ITEM_COM_NAME),a=function(a){var r=t.retainItemList[a].getComponent(n.ITEM_COM_NAME);(i.isGreenBounsItem()&&r.isBonusItem()||i.isGoldBounsItem()&&(r.isBonusItem()||r.isGreenBounsItem()||r.isGoldBounsItem()))&&(t.scheduleOnce(function(){var i={};i.or=t.retainItemList[a].parent.convertToWorldSpaceAR(t.retainItemList[a].getPosition()),i.to=c[e].parent.convertToWorldSpaceAR(c[e].getPosition()),i.callback=function(){c[e].getComponent(n.ITEM_COM_NAME).addBonusVal(r.getBonusVal())},s.emit(o.PLAY_PARTICLE_SHIFT_ANI,i)},.5*d+m),d++)},r=0;r<t.retainItemList.length;r++)a(r)},g=0;g<c.length;g++)_(g);for(var p=0;p<e.length;p++)if(e[p]==n.BONUS_ID_GREEN){var f=this.wheelUpItemList[p];this.retainItemList.push(f)}for(var A=0;A<e.length;A++)if(e[A]==n.BONUS_ID_GOLD){var I=this.wheelUpItemList[A];this.retainItemList.push(I)}15==this.retainItemList.length&&(i.BetValue>=n.MAX_RATE&&(i.BonusWin=i.BonusWin+i.BetValue*n.BONUS_WIN_RATE,s.emit(o.UPDATE_BONUS_WIN)),i.LotteryRes.freeCount=0),c.length>0?this.scheduleOnce(function(){t.toGameOver()},.5*d+1+m):a?this.scheduleOnce(function(){t.toGameOver()},2):this.toGameOver()},playWinAnim:function(){for(var t=this,e=c.convertNetData(i.LotteryRes.viewarray.nWinCards),a=c.convertNetData(i.LotteryRes.viewarray.nHandCards),r=function t(i,o,s){if(i!=e.length){for(var r=0;r<e[i].length;r++){if(a[i][r]==o&&!e[i][r])return;if(a[i][r]==n.WILD_ID&&!e[i][r])return;a[i][r]!=o&&a[i][r]!=n.WILD_ID||s.push(c.reconvertNetData(i,r))}t(i+1,o,s)}},l=[],u=0;u<e[0].length;u++)e[0][u]&&(l[a[0][u]]||(l[a[0][u]]=[]),l[a[0][u]].push(c.reconvertNetData(0,u)),r(1,a[0][u],l[a[0][u]]));for(var h=[],E=0;E<i.LotteryRes.viewarray.nWinCards.length;E++)i.LotteryRes.viewarray.nWinCards[E]&&h.push(E);l.unshift(h),this.linesList=l,l.length>0?this.scheduleOnce(function(){s.emit(o.PLAY_AUDIO_EF,"showLine"),c.checkBigWin(i.LotteryRes.winscore)?t.scheduleOnce(function(){t.showBigWin(i.LotteryRes.winscore)},1):t.toGameOver()},1):this.scheduleOnce(function(){t.toGameOver()},1),this.lineSchedIndex=0,this.schedule(this.onLineSchedUleCallBack,2),this.onLineSchedUleCallBack(0,!0)},onLineSchedUleCallBack:function(){var t=this.linesList[this.lineSchedIndex];if(!t)return this.lineSchedIndex++,this.lineSchedIndex>=this.linesList.length&&(this.lineSchedIndex=0),void this.onLineSchedUleCallBack();this.resetItem();for(var e=0;e<this.resultList.length;e++){var i=this.resultList[e].getComponent(n.ITEM_COM_NAME);t.includes(e)?(this.wheelUpItemList[e].active=!0,this.wheelUpItemList[e].getComponent(n.ITEM_COM_NAME).changeItem(i.getitemID()),this.wheelUpItemList[e].getComponent(n.ITEM_COM_NAME).setSelect(),this.resultList[e].active=!1):this.wheelMaskItemlist[e].active=!0}this.lineSchedIndex++,this.lineSchedIndex>=this.linesList.length&&(this.lineSchedIndex=0)},toGameOver:function(){if(i.LotteryRes.viewarray.getFreeTime&&i.LotteryRes.viewarray.getFreeTime.bFlag&&5==i.LotteryRes.viewarray.getFreeTime.freeType)return cc.log("\u8fdb\u5165\u514d\u8d39\u8f6c=\u300b"),this.closeShine(),void this.playGetBonusTween();this.onGameOver()},playGetBonusTween:function(){var t=this;s.emit(o.PLAY_AUDIO_EF,"inFreeTime"),this.scheduleOnce(function(){for(var e=0;e<t.resultList.length;e++){var i=t.resultList[e].getComponent(n.ITEM_COM_NAME);i.isBonusItem()&&i.playAniBonus()}s.emit(o.PLAY_AUDIO_EF,"bonusGet"),t.scheduleOnce(function(){t.enterSelectGame()},2)},2)},onGameOver:function(){i.GameMode==n.GAME_MODE.NORMAL||i.FreeSoltRes[i.FreeSoltIndex]?(i.Status=n.GAME_STATE.LEISURE,s.emit(o.CHANGE_GAME_STATUS)):this.stopFreeTimes()},enterSelectGame:function(t){i.GameMode=n.GAME_MODE.SELECT,i.initFreeData(),this.retainItemList=[],s.emit(o.SHOW_SELECT_GAME,t)},stopFreeTimes:function(){cc.log("\u9000\u51fa\u514d\u8d39\u300b\u300b\u300b"),i.IsFreeSolt=!1,this.unschedule(this.onLineSchedUleCallBack),i.GameMode==n.GAME_MODE.UP_UP?this.outFreeUp():(cc.log("UserData.FreeWinCoins=>",i.FreeWinCoins),cc.log("UserData.FuXing=>",i.FuXing),s.emit(o.SHOW_TOTAL_WIN_ADD,{valFuXing:i.FuXing,valWin:i.FreeWinCoins}),this.scheduleOnce(function(){s.emit(o.UPDATE_GAME_WIN,i.FuXing)},3))},outFreeUp:function(){var t=this;s.emit(o.FREE_TIME_OVER),i.IsFreeSolt=!1;for(var e=0,c=function(c){var a=t.retainItemList[c].getComponent(n.ITEM_COM_NAME);if(!a.isGoldBounsItem()&&!a.isGreenBounsItem()&&!a.isBonusItem())return"continue";t.scheduleOnce(function(){var e={};e.or=t.retainItemList[c].parent.convertToWorldSpaceAR(t.retainItemList[c].getPosition()),e.to=t.stepNode.getComponent(n.BUNDLE_NAME+"FreeUp").getFuxingPos(),e.callback=function(){i.FuXing+=a.getBonusVal(),s.emit(o.UPDATE_FU_XING)},a.hideBonusLabel(),s.emit(o.PLAY_PARTICLE_ANI,e)},.8*e),e++},a=0;a<this.retainItemList.length;a++)c(a);this.scheduleOnce(function(){s.emit(o.SHOW_TOTAL_WIN,i.FuXing),s.emit(o.UPDATE_GAME_WIN,i.FuXing)},.8*e+1)},showBigWin:function(t){cc.log("show big win");var e=t/i.BetValue;s.emit(o.SHOW_BIG_WIN,{coins:t,rate:e}),s.emit(o.PLAY_AUDIO_BGM,{id:3})},onStartRoll:function(){this.resetItem(),this.stopImmediately=!1,c.isNormalGame()||(i.FreeTimeNow++,s.emit(o.UPDATE_FREE_TIME_NOW)),this.unschedule(this.onLineSchedUleCallBack)},onStopImmediately:function(){for(var t=0;t<this.wheelComList.length;t++)this.wheelComList[t].onGetNetData(this.wheelNetData[t]);this.stopImmediately=!0},onLoginGameResult:function(){i.Status=n.GAME_STATE.LEISURE,s.emit(o.CHANGE_GAME_STATUS)},onLoginFreeCountResult:function(t){s.emit(o.SET_BET_VALUE,t.gameDict.betsum),this.enterSelectGame(t)},onLotteryResult:function(){i.Status=n.GAME_STATE.ROLL_END,s.emit(o.CHANGE_GAME_STATUS),this.wheelNetData=c.convertNetData(i.LotteryRes.viewarray.nHandCards),this.wheelComList[0].onGetNetData(this.wheelNetData[0])},onLotteryErrResult:function(t){cc.log(t),s.emit(o.RESET_WHEEL),i.Status=n.GAME_STATE.LEISURE,s.emit(o.CHANGE_GAME_STATUS)},onChangeGameMode:function(t){i.GameMode==n.GAME_MODE.NORMAL?this.enterNormal():i.GameMode==n.GAME_MODE.FREE?this.enterFree(t):i.GameMode==n.GAME_MODE.UP_UP&&this.enterUpUp(t)},enterNormal:function(){this.pnlFree.removeAllChildren()},enterFree:function(t){this.freeNode=cc.instantiate(this.preFreeSpins),this.pnlFree.addChild(this.freeNode),t.gameDict&&(this.addFreeModelWillWin(t.gameDict.link.starts),i.Status!=n.GAME_STATE.SELECT&&(i.Status=n.GAME_STATE.LEISURE,s.emit(o.CHANGE_GAME_STATUS)))},addFreeModelWillWin:function(t){for(var e=0,n=0;n<t.length;n++)e+=c.getBonusVal(t[n][1]+1);s.emit(o.UPDATE_WILL_WIN,e)},enterUpUp:function(t){if(this.stepNode=cc.instantiate(this.preFreeUp),this.pnlFree.addChild(this.stepNode),i.BonusWin=i.BetValue*n.BONUS_WIN_RATE,s.emit(o.UPDATE_BONUS_WIN),t.gameDict)this.addItemToRetainList(t.gameDict.link.starts),i.Status!=n.GAME_STATE.SELECT&&(i.Status=n.GAME_STATE.LEISURE,s.emit(o.CHANGE_GAME_STATUS));else for(var e=0;e<this.resultList.length;e++){var c=this.resultList[e];c.getComponent(n.ITEM_COM_NAME).isBonusItem()?(this.wheelUpItemList[e].active=!0,this.wheelUpItemList[e].getComponent(n.ITEM_COM_NAME).changeItem(c.getComponent(n.ITEM_COM_NAME).getitemID()),this.retainItemList.push(this.wheelUpItemList[e])):(this.wheelUpItemList[e].active=!1,this.wheelUpItemList[e].getComponent(n.ITEM_COM_NAME).reset(),this.resultList[e].active=!0),this.wheelMaskItemlist[e].active=!1}},addItemToRetainList:function(t){for(var e=0;e<t.length;e++){var i=this.wheelUpItemList[t[e][0]];i.getComponent(n.ITEM_COM_NAME).changeItem(t[e][1]+1),i.active=!0,this.retainItemList.push(i)}for(var o=0;o<this.wheelNormalItemList.length;o++)this.wheelNormalItemList[o].getComponent(n.ITEM_COM_NAME).randImg();for(var s=0;s<this.retainItemList.length;s++){var a=this.retainItemList[s].getComponent(n.ITEM_COM_NAME);a.isGreenBounsItem()?a.showBonusLabel(c.getBonusGreenSum(this.retainItemList)):a.isGoldBounsItem()&&a.showBonusLabel(c.getBonusGoldSum(this.retainItemList))}},onHideBigWin:function(){s.emit(o.PLAY_AUDIO_BGM,{id:0}),this.toGameOver()},onHideTotalWin:function(){cc.log("UserData.FreeWinCoins=>",i.FreeWinCoins),s.emit(o.SHOW_SELECT_GAME,{isOut:!0})},onHideSelectGame:function(t){i.GameMode==n.GAME_MODE.UP_UP?(s.emit(o.PLAY_AUDIO_BGM,{id:2}),i.Status=n.GAME_STATE.LEISURE,s.emit(o.CHANGE_GAME_STATUS)):i.GameMode==n.GAME_MODE.FREE?(s.emit(o.PLAY_AUDIO_BGM,{id:1}),this.playEnterFreeAction()):i.GameMode==n.GAME_MODE.NORMAL&&s.emit(o.PLAY_AUDIO_BGM,{id:0}),t&&this.outFreeGame()},playEnterFreeAction:function(){for(var t=this,e=0,c=function(i){var c=t.resultList[i],a=c.getComponent(n.ITEM_COM_NAME);if(a.isBonusItem()){var r={};r.or=c.parent.convertToWorldSpaceAR(c.getPosition()),r.to=t.freeNode.getComponent(n.BUNDLE_NAME+"FreeFree").getWildPos(),r.callback=function(){s.emit(o.UPDATE_WILL_WIN,a.getBonusVal())},t.scheduleOnce(function(){s.emit(o.PLAY_PARTICLE_ANI,r)},1*e),e++}},a=0;a<this.resultList.length;a++)c(a);this.scheduleOnce(function(){i.Status=n.GAME_STATE.LEISURE,s.emit(o.CHANGE_GAME_STATUS)},1*e+2)},outFreeGame:function(){cc.log("UserData.FreeWinCoins=>",i.FreeWinCoins),c.checkBigWin(i.FreeWinCoins)?this.showBigWin(i.FreeWinCoins):(s.emit(o.PLAY_AUDIO_BGM,{id:0}),this.toGameOver())},onWheelRollEnd:function(t){if(this.stopImmediately)return t==this.wheelComList.length-1?void this.stateCallBack():void 0;t!=this.wheelComList.length-1?this.wheelComList[t+1].onGetNetData(this.wheelNetData[t+1]):this.stateCallBack()},onEnable:function(){s.addEventListener(o.ON_WHEEL_ROLL_END,this.onWheelRollEnd,this),s.addEventListener(o.HIDE_BIG_WIN,this.onHideBigWin,this),s.addEventListener(o.HIDE_SELECT_GAME,this.onHideSelectGame,this),s.addEventListener(o.HIDE_TOTAL_WIN,this.onHideTotalWin,this),s.addEventListener(o.CHANGE_GAME_MODE,this.onChangeGameMode,this),s.addEventListener(o.START_ROLL,this.onStartRoll,this),s.addEventListener(o.STOP_IMMEDIATELY,this.onStopImmediately,this),s.addEventListener(o.ON_LOGIN_GAME_RESULT,this.onLoginGameResult,this),s.addEventListener(o.ON_LOTTERY_RESULT,this.onLotteryResult,this),s.addEventListener(o.ON_LOTTERY_RESULT_ERR,this.onLotteryErrResult,this),s.addEventListener(o.ON_LOGIN_FREE_COUNT_RESULT,this.onLoginFreeCountResult,this)},initSFortune:function(){var t=cc.instantiate(this.preSFortune);this.pnlSFortune.addChild(t),this.sFortuneCom=t.getComponent("LockySFortuneActiveSymbols")},initFortune:function(){var t=cc.instantiate(this.preFortune);this.pnlFortune.addChild(t),this.fortuneCom=t.getComponent("LockyFortuneActiveSymbols")},initWheel:function(){this.wheelComList=[],this.wheelNormalItemList=[];for(var t=0;t<5;t++){var e=cc.instantiate(this.preWheel);this.pnlWheel.addChild(e);var i=e.getComponent("LockyFortuneWheel");this.wheelComList.push(i),i.setWheelData(t);for(var o=i.getItemlist(),s=0;s<o.length;s++)this.wheelNormalItemList.push(o[s])}this.wheelUpItemList=[],this.wheelMaskItemlist=[];for(var c=n.VERTICAL_ITEM_COUNT-1;c>=0;c--)for(var a=0;a<this.wheelComList.length;a++){var r=this.wheelComList[a].getItemUplist();this.wheelUpItemList.push(r[c]);var l=this.wheelComList[a].getItemMaskList();this.wheelMaskItemlist.push(l[c])}}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData",LockyFortuneUtil:"LockyFortuneUtil",PlayerInfo:void 0}],LockyFortuneMenu:[function(t,e){"use strict";cc._RF.push(e,"a4124oZLslJVY3bvkOolxyS","LockyFortuneMenu");var n=t("LockyFortuneEventConfig"),i=t("LockyFortuneEventManager"),o=t("LockyFortuneUserData"),s=t("LockyFortuneGameData"),c=t("PlayerInfo");cc.Class({extends:cc.Component,properties:{menuMask:cc.Node,pnlMenu:cc.Node,imgMenuEffect:cc.Node,pnlMenuMain:cc.Node,imgSoundOn:cc.Node,imgSoundOff:cc.Node,pnlHelp:cc.Node},onLoad:function(){this.isRunActioning=!1,this.initMenuEffect()},initMenuEffect:function(){cc.tween(this.imgMenuEffect).repeatForever(cc.tween().to(1,{opacity:0}).to(1,{opacity:255})).start()},onCLick:function(t,e){switch(e){case"help":this.pnlHelp.active=!0,i.emit(n.PLAY_AUDIO_EF,"btnShow");break;case"closeHelp":this.pnlHelp.active=!1,i.emit(n.PLAY_AUDIO_EF,"btnhide");break;case"esc":i.emit(n.PLAY_AUDIO_EF,"btnhide"),i.emit(n.SHOW_TIP_VIEW,{callback:function(){i.emit(n.OUT_GAME)},type:0});break;case"menu":this.show(),i.emit(n.PLAY_AUDIO_EF,"btnShow");break;case"closeMenu":this.hide(),i.emit(n.PLAY_AUDIO_EF,"btnhide");break;case"audio":c.getInstant.musicControl=!c.getInstant.musicControl,this.imgSoundOn.active=c.getInstant.musicControl,this.imgSoundOff.active=!c.getInstant.musicControl,c.getInstant.musicControl?(s.GAME_MODE.NORMAL==o.GameMode?i.emit(n.PLAY_AUDIO_BGM,{id:0,isFrist:!0}):s.GAME_MODE.UP_UP==o.GameMode?i.emit(n.PLAY_AUDIO_BGM,{id:2,isFrist:!0}):s.GAME_MODE.FREE==o.GameMode&&i.emit(n.PLAY_AUDIO_BGM,{id:1,isFrist:!0}),i.emit(n.PLAY_AUDIO_EF,"btnShow")):i.emit(n.STOP_AUDIO)}},show:function(){var t=this;this.isRunActioning||(this.isRunActioning=!0,this.pnlMenuMain.active=!0,this.menuMask.active=!0,cc.tween(this.pnlMenu).to(.3,{x:700}).call(function(){cc.tween(t.pnlMenuMain).to(.3,{x:556}).call(function(){t.isRunActioning=!1}).start()}).start())},hide:function(){var t=this;this.isRunActioning||(this.isRunActioning=!0,this.menuMask.active=!1,cc.tween(this.pnlMenuMain).to(.3,{x:720}).call(function(){cc.tween(t.pnlMenu).to(.3,{x:580}).call(function(){t.pnlMenuMain.active=!1,t.isRunActioning=!1}).start()}).start())},inFreeGame:function(){this.menuMask.active=!1,cc.tween(this.pnlMenu).to(.3,{x:700}).call(function(){}).start(),this.menuMask.active=!1,cc.tween(this.pnlMenuMain).to(.3,{x:720}).call(function(){}).start()},onChangeGameMode:function(){o.GameMode==s.GAME_MODE.NORMAL?this.hide():this.inFreeGame()},onEnable:function(){i.addEventListener(n.CHANGE_GAME_MODE,this.onChangeGameMode,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData",PlayerInfo:void 0}],LockyFortuneNetwork:[function(t,e){"use strict";cc._RF.push(e,"975c1Vd3IJCVIpevxLFN5lb","LockyFortuneNetwork");var n=t("PlayerInfo"),i=t("LockyFortuneEventConfig"),o=t("LockyFortuneEventManager"),s=t("LockyFortuneUserData"),c=t("LockyFortuneGameData"),a=t("LockyFortuneUtil"),r=!1;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.playerInfo=n.getInstant,this.isOutGameIng=!1,GameConfig.SubGameMgr.subGameNet=this,window.sendNetWorkData("loginGame",JSON.stringify({}))},addNetEvent:function(t,e){"UPDATE_COIN"==t&&o.emit("UPDATE_COIN");var n=null;if("error"==t&&(cc.log("socket error"),o.emit(i.SHOW_TIP_VIEW,{callback:function(){o.emit(i.OUT_GAME)}})),"connect_error"==t&&(cc.log("connect_error"),o.emit(i.SHOW_TIP_VIEW,{callback:function(){o.emit(i.OUT_GAME)}})),"connect_timeout"==t&&(cc.log("connect_timeout"),o.emit(i.SHOW_TIP_VIEW,{callback:function(){o.emit(i.OUT_GAME)}})),"disconnect"==t){if(this.isOutGameIng)return;cc.log("disconnect"),o.emit(i.SHOW_TIP_VIEW,{callback:function(){o.emit(i.OUT_GAME)}})}if("loginGameResult"==t){if(n=changeResultJSON_Function(e),cc.log("LoginGameResult:",n),"1"!=n.resultid)return cc.log("\u767b\u9646\u5931\u8d25"),void o.emit(i.SHOW_TIP_VIEW,{callback:function(){o.emit(i.OUT_GAME)}});cc.find("Loading")&&(cc.find("Loading").active=!1),o.emit(i.ON_LOGIN_GAME_RESULT,n),s.LoginGameResultData=n}if("lotteryResult"==t)if((n=changeResultJSON_Function(e)).ResultCode&&1==n.ResultCode){if(s.LotteryRes=JSON.parse(JSON.stringify(n.ResultData)),r){if(s.LotteryRes.viewarray.getFreeTime.bFlag)return r=!1,void o.emit(i.ON_LOTTERY_RESULT);s.LotteryRes.viewarray.getFreeTime.bFlag||(cc.log(s.LotteryRes.viewarray.getFreeTime),this.onStartRoll())}r||o.emit(i.ON_LOTTERY_RESULT)}else o.emit(i.ON_LOTTERY_RESULT_ERR);if("LoginRoomResult"==t&&(n=changeResultJSON_Function(e),cc.log("LoginRoomResult",n)),"pushGamblingWinPool"==t&&(n=changeResultJSON_Function(e),cc.log("pushGamblingWinPool=>",n),1==n.ResultCode&&o.emit(i.ON_PUSH_GAMBLING_WIN_POOL,n.nGamblingWinPool)),"LoginfreeCountResult"==t&&(n=changeResultJSON_Function(e),cc.log("LoginfreeCountResult:",n),cc.find("Loading")&&(cc.find("Loading").active=!1),cc.log("LoginfreeCountResult:",n),1==n.ResultCode&&(n.freeType=Number(n.freeType),(n.freeCount>0||n.freeType==c.GAME_MODE.SELECT)&&o.emit(i.ON_LOGIN_FREE_COUNT_RESULT,n))),"betResult"==t){if(n=changeResultJSON_Function(e),cc.log("betResult",n),1!=n.ResultCode)return;o.emit(i.ON_GAMBLE_RESULT,n.ResultData)}"selectFreeTypeResult"==t&&(n=changeResultJSON_Function(e),cc.log("selectFreeTypeResult:",n),1==n.ResultCode&&(s.FreeTimeAll=n.freeCount,s.FreeTimeNow=0,o.emit(i.UPDATE_FREE_TIME_ALL),s.IsFreeSolt=!0,s.FreeSoltRes=n.frees,1==n.freeType&&(s.FreeSoltRes=a.getFakeUpNetData(0,11,n.link.turns))))},onStartRoll:function(){if(s.Status=c.GAME_STATE.REQUEST,o.emit(i.CHANGE_GAME_STATUS),s.IsFreeSolt)return s.LotteryRes.viewarray=s.FreeSoltRes[s.FreeSoltIndex],s.LotteryRes.winscore=s.FreeSoltRes[s.FreeSoltIndex].win,s.FreeSoltIndex++,void o.emit(i.ON_LOTTERY_RESULT);window.sendNetWorkData("lottery",JSON.stringify({bet:s.BetIndex,nBetList:[s.BetValue]})),cc.log("lottery, bet :"+s.BetIndex+" , nBetList :"+s.BetValue)},selectGame:function(t){window.sendNetWorkData("selectFreeType",JSON.stringify({type:t}))},onAddUserCoins:function(t){cc.log("chargeAll =>",t)},onOutGame:function(){var t=this;Common.backHall("Are you sure you want to leave the game?",function(){t.lastSendHeartBeatTime=void 0,t.isOutGameIng=!0,o.destroy()})},onEnable:function(){o.addEventListener(i.ADD_USER_COINS,this.onAddUserCoins,this),o.addEventListener(i.SELECT_GAME,this.selectGame,this),o.addEventListener(i.START_ROLL,this.onStartRoll,this),o.addEventListener(i.OUT_GAME,this.onOutGame,this),o.addEventListener(i.OUT_GAME,this.onOutGame,this)},onDestroy:function(){}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData",LockyFortuneUtil:"LockyFortuneUtil",PlayerInfo:void 0}],LockyFortuneParticle:[function(t,e){"use strict";cc._RF.push(e,"fb0865V5xdBS4xfFTkSPxzp","LockyFortuneParticle");var n=t("LockyFortuneEventConfig"),i=t("LockyFortuneEventManager");t("LockyFortuneGameData"),t("LockyFortuneUserData"),cc.Class({extends:cc.Component,properties:{particle:cc.Node,nodeFrame:cc.Node,particleScore:cc.Node},onLoad:function(){},newParticle:function(){var t=cc.instantiate(this.particle);return t.active=!0,this.node.addChild(t),t},newParticleScore:function(){var t=cc.instantiate(this.particleScore);return t.active=!0,this.node.addChild(t),t},newFrame:function(){var t=cc.instantiate(this.nodeFrame);return t.active=!0,this.node.addChild(t),t},playParticleShiftAni:function(t){var e=this.newParticle(),o=this.newFrame();i.emit(n.PLAY_AUDIO_EF,"itemMove");var s=this.node.convertToNodeSpaceAR(t.or),c=this.node.convertToNodeSpaceAR(t.to);e.x=s.x,e.y=s.y,cc.tween(e).to(.5,{x:c.x,y:c.y}).call(function(){t.callback(),e.removeFromParent()}).start(),o.x=s.x,o.y=s.y,cc.tween(o).to(.5,{x:c.x,y:c.y}).call(function(){var t=cc.find("imgFrame",o),e=cc.find("imgFrame1",o),n=cc.find("imgFrame2",o);cc.tween(t).to(.2,{opacity:0}).start(),cc.tween(e).delay(.2).to(.2,{opacity:0}).start(),cc.tween(n).delay(.4).to(.2,{opacity:0}).call(function(){o.removeFromParent()}).start()}).start()},playParticleAni:function(t){var e=this.newParticleScore();i.emit(n.PLAY_AUDIO_EF,"itemMove");var o=this.node.convertToNodeSpaceAR(t.or),s=this.node.convertToNodeSpaceAR(t.to);e.x=o.x,e.y=o.y,cc.tween(e).to(1,{x:s.x,y:s.y},{easing:"quadIn"}).call(function(){var n=cc.find("nodeBoom/eff1",e),i=cc.find("nodeBoom/eff2",e),o=cc.find("nodeBoom/eff3",e);i.active=!0,i.opacity=0,o.active=!0,o.opacity=0,n.active=!0,cc.tween(n).to(.7,{scaleX:5,scaleY:5,opacity:0}).start(),cc.tween(i).delay(.4).call(function(){i.opacity=255}).to(.5,{scaleX:4,scaleY:4,opacity:0}).start(),cc.tween(o).delay(.8).call(function(){o.opacity=255}).to(.5,{scaleX:1.5,scaleY:1.5,opacity:0}).start(),cc.tween(e.getComponent(cc.ParticleSystem)).to(.3,{emissionRate:0}).delay(.8).call(function(){e.removeFromParent()}).start(),t.callback()}).start()},onEnable:function(){i.addEventListener(n.PLAY_PARTICLE_SHIFT_ANI,this.playParticleShiftAni,this),i.addEventListener(n.PLAY_PARTICLE_ANI,this.playParticleAni,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData"}],LockyFortuneSItem:[function(t,e){"use strict";cc._RF.push(e,"341bcfhD7lO/bqe4wwxlUyI","LockyFortuneSItem"),cc.Class({extends:cc.Component,properties:{item:cc.Sprite,spAtlas:cc.SpriteAtlas},changeImg:function(t){this.item.spriteFrame=this.spAtlas.getSpriteFrame(t)}}),cc._RF.pop()},{}],LockyFortuneScene:[function(t,e){"use strict";cc._RF.push(e,"fb487cc+M1MMbdP2VNVYcu5","LockyFortuneScene");var n=t("LockyFortuneEventConfig"),i=t("LockyFortuneEventManager"),o=t("LockyFortuneGameData"),s=t("LockyFortuneUserData"),c=t("LockyFortuneUtil"),a=t("PlayerInfo");cc.Class({extends:cc.Component,properties:{preGameUIMain:cc.Prefab,preGameUIUp:cc.Prefab,preGameUIDown:cc.Prefab,preSelectGame:cc.Prefab,preTotalWin:cc.Prefab,preBigWin:cc.Prefab,preMenu:cc.Prefab,preParticle:cc.Prefab,preTipView:cc.Prefab,gameNode:cc.Node,showNode:cc.Node,menuNode:cc.Node,topNode:cc.Node,imgBgNormal:cc.Node,imgBgFree:cc.Node,labCoinsTip:cc.Node},onLoad:function(){this.initData(),s.randItemGroup=c.getItemGroup(),this.initUI(),this.labCoinsTip.active=!1},initData:function(){s.slotBetList=a.getInstant.slotBetList,s.slotBetList||(s.slotBetList=[1,2,3,4,5,6,7,8,9,10,12,14,16,18,20,24,28,32,36,40,45,50,60,70,80,90,100]),a.getInstant.maxBet||(a.getInstant.maxBet=2e3),a.getInstant.fixedBet||(a.getInstant.fixedBet=50),s.init(),s.BetValue=s.Line},onShowNotMoney:function(){var t=this;this.labCoinsTip.active||(this.labCoinsTip.active=!0,this.labCoinsTip.opacity=255,this.scheduleOnce(function(){cc.tween(t.labCoinsTip).to(1,{opacity:0}).call(function(){t.labCoinsTip.active=!1}).start()},3))},onShowSelectGame:function(t){t||(t={}),s.Status=o.GAME_STATE.SELECT,i.emit(n.CHANGE_GAME_STATUS);var e=cc.instantiate(this.preSelectGame);this.topNode.addChild(e),t.isOut?e.getComponent("LockyFortuneSelectGame").showOut():e.getComponent("LockyFortuneSelectGame").showEnter(t),i.emit(n.PLAY_AUDIO_EF,"showSelectGame")},onChangeGameMode:function(){s.GameMode==o.GAME_MODE.NORMAL?(this.imgBgNormal.active=!0,this.imgBgFree.active=!1):(this.imgBgNormal.active=!1,this.imgBgFree.active=!0),s.randItemGroup=c.getItemGroup()},onEnable:function(){i.addEventListener(n.HAVE_NO_MONEY,this.onShowNotMoney,this),i.addEventListener(n.SHOW_SELECT_GAME,this.onShowSelectGame,this),i.addEventListener(n.CHANGE_GAME_MODE,this.onChangeGameMode,this)},initUI:function(){this.initGameUIMain(),this.initTotalWin(),this.initGameUIUp(),this.initGameUIDown(),this.initGameMenu(),this.initBigWin(),this.initTopNode(),this.initParticle()},initGameUIMain:function(){var t=cc.instantiate(this.preGameUIMain);this.gameNode.addChild(t)},initTotalWin:function(){var t=cc.instantiate(this.preTotalWin);this.showNode.addChild(t),t.active=!1},initBigWin:function(){var t=cc.instantiate(this.preBigWin);this.showNode.addChild(t),t.active=!1},initGameUIUp:function(){var t=cc.instantiate(this.preGameUIUp);this.menuNode.addChild(t)},initGameUIDown:function(){var t=cc.instantiate(this.preGameUIDown);this.menuNode.addChild(t)},initGameMenu:function(){var t=cc.instantiate(this.preMenu);this.menuNode.addChild(t)},initTopNode:function(){var t=cc.instantiate(this.preTipView);this.topNode.addChild(t),t.active=!1},initParticle:function(){var t=cc.instantiate(this.preParticle);this.topNode.addChild(t),cc.log(t)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData",LockyFortuneUtil:"LockyFortuneUtil",PlayerInfo:void 0}],LockyFortuneSelectGame:[function(t,e){"use strict";cc._RF.push(e,"872c4O4o25DHKQkOto1vonS","LockyFortuneSelectGame");var n=t("LockyFortuneGameData"),i=t("LockyFortuneUserData"),o=t("LockyFortuneEventConfig"),s=t("LockyFortuneEventManager");cc.Class({extends:cc.Component,properties:{imgFntSelect:cc.Node,imgBg1:cc.Node,imgBg2:cc.Node,pnlLight:cc.Node,imgLightLeft1:cc.Node,imgLightLeft2:cc.Node,imgLightRight1:cc.Node,imgLightRight2:cc.Node,nodeSelecte:cc.Node,pnlUp:cc.Node,pnlFree:cc.Node,nodeBtnUp:cc.Node,nodeBtnFree:cc.Node,imgBtnLigthUp:cc.Node,imgBtnLigthFree:cc.Node,imgFntUp:cc.Node,imgFntFree:cc.Node,pnlDownLable:cc.Node},onLoad:function(){this.isRunAction=!0,i.IsSelectGame=!0,this.initTween()},initTween:function(){this.initTweenSelect(),this.initLightTween(),this.initTweenUp(),this.initTweenFree()},initTweenSelect:function(){this.tweenSelect=cc.tween(this.imgFntSelect).repeatForever(cc.tween(this.imgFntSelect).to(1,{scaleX:1.2,scaleY:1.2}).to(1,{scaleX:1,scaleY:1}).start())},initTweenUp:function(){this.tweenFntUp=cc.tween(this.imgFntUp).repeatForever(cc.tween(this.imgFntUp).to(1.2,{x:14}).to(1.2,{x:-4}).start()).start(),this.tweenPnlUp=cc.tween(this.nodeBtnUp).repeatForever(cc.tween(this.nodeBtnUp).to(1,{skewX:3,skewY:-3}).to(1,{skewX:-3,skewY:3}))},initTweenFree:function(){this.tweenFntFree=cc.tween(this.imgFntFree).repeatForever(cc.tween(this.imgFntFree).to(1.2,{x:13}).to(1.2,{x:-3}).start()).start(),this.tweenPnlFree=cc.tween(this.nodeBtnFree).repeatForever(cc.tween(this.nodeBtnFree).to(1,{skewX:3,skewY:-3}).to(1,{skewX:-3,skewY:3}))},initLightTween:function(){for(var t=[this.imgLightLeft1,this.imgLightLeft2,this.imgLightRight1,this.imgLightRight2],e=[20,30,-20,-30],n=[40,10,-40,-10],i=0;i<t.length;i++)cc.tween(t[i]).repeatForever(cc.tween().to(1,{angle:e[i]}).to(1,{angle:n[i]})).start()},onCLick:function(t,e){if(!this.isRunAction)switch(e){case"up":this.showUp();break;case"free":this.showFree()}},showUp:function(){i.GameMode=n.GAME_MODE.UP_UP,s.emit(o.SELECT_GAME,n.GAME_MODE.UP_UP),this.showBtnAction(this.imgBtnLigthUp,this.pnlFree)},showFree:function(){i.GameMode=n.GAME_MODE.FREE,s.emit(o.SELECT_GAME,n.GAME_MODE.FREE),this.showBtnAction(this.imgBtnLigthFree,this.pnlUp)},showOut:function(){var t=this;this.nodeSelecte.active=!1,this.pnlDownLable.active=!1,this.imgFntUp.active=!1,this.imgFntFree.active=!1,this.pnlLight.active=!1,this.runEnterAction(function(){i.GameMode=n.GAME_MODE.NORMAL,s.emit(o.CHANGE_GAME_MODE),t.scheduleOnce(function(){t.runOutAction(),s.emit(o.HIDE_SELECT_GAME,!0)},1)})},showEnter:function(t){var e=this;this.netData=t,this.nodeSelecte.y=600,this.pnlDownLable.opacity=0,this.imgFntUp.opacity=0,this.imgFntFree.opacity=0,this.pnlLight.opacity=0,this.runEnterAction(function(){e.showMain(),s.emit(o.PLAY_AUDIO_BGM,{id:4})})},runEnterAction:function(t){this.imgBtnLigthUp.active=!1,this.imgBtnLigthFree.active=!1;for(var e=[this.imgBg1,this.imgBg2],n=[-750,750],i=[10,-10],o=[-5,5],s=[9,-9],c=function(c){var a=e[c];a.x=n[c],a.skewX=i[c],cc.tween(a).to(1,{x:s[c]}).to(.2,{skewX:o[c]}).to(.3,{skewX:0}).call(function(){c==e.length-1&&t()}).start()},a=0;a<e.length;a++)c(a)},showMain:function(){var t=this;cc.tween(this.nodeSelecte).to(.5,{y:138},{easing:"backOut"}).call(function(){for(var e=[t.imgFntUp,t.imgFntFree,t.pnlLight,t.pnlDownLable],n=0;n<e.length;n++)cc.tween(e[n]).to(.5,{opacity:255}).start();t.tweenSelect.start(),t.tweenPnlUp.start(),t.tweenPnlFree.start(),t.isRunAction=!1}).start()},showBtnAction:function(t,e){s.emit(o.CHANGE_GAME_MODE,this.netData),this.isRunAction=!0,t.active=!0,t.opacity=0,cc.tween(t).to(.5,{opacity:255,scaleX:1.5,scaleY:1.5}).to(.5,{opacity:0,scaleX:2,scaleY:2}).call(function(){cc.tween(e).to(.5,{opacity:0,y:-200}).start()}).start(),this.scheduleOnce(this.hideSelect,3)},hideSelect:function(){var t=this;cc.tween(this.nodeSelecte).to(.5,{opacity:0}).call(function(){t.hide()}).start()},hide:function(){for(var t=this,e=[this.imgLightLeft1,this.imgLightLeft2,this.imgLightRight1,this.imgLightRight2],n=0;n<e.length;n++)cc.tween(e[n]).to(1,{opacity:0}).start();this.runOutAction(),this.scheduleOnce(function(){s.emit(o.HIDE_SELECT_GAME),t.node.removeFromParent()},2)},runOutAction:function(){var t=[this.imgBg1,this.imgBg2],e=[-750,750],n=[-10,10];s.emit(o.PLAY_AUDIO_EF,"hideSelectGame");for(var i=0;i<t.length;i++){var c=t[i];cc.tween(c).to(.2,{skewX:n[i],x:0}).to(1,{x:e[i]}).start()}}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData"}],LockyFortuneTipView:[function(t,e){"use strict";cc._RF.push(e,"c838ceaiRFJQrcTy3mUv18/","LockyFortuneTipView");var n=t("LockyFortuneEventConfig"),i=t("LockyFortuneEventManager"),o=[];o[0]="Are you sure you want to \nleave the game?",cc.Class({extends:cc.Component,properties:{labContext:cc.Label},onLoad:function(){this.addEventListener()},show:function(t,e){this.node.active=!0,this.callback=t,null!=e&&(this.labContext.string=o[e])},onClickOK:function(){this.callback(),this.node.active=!1},onClickHide:function(){this.node.active=!1},onShowView:function(){i.emit(n.OUT_GAME)},addEventListener:function(){i.addEventListener(n.SHOW_TIP_VIEW,this.onShowView,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager"}],LockyFortuneTotalWin:[function(t,e){"use strict";cc._RF.push(e,"105eftGkkpPIp2l4Q5Wj4G1","LockyFortuneTotalWin");var n=t("LockyFortuneEventConfig"),i=t("LockyFortuneEventManager");cc.Class({extends:cc.Component,properties:{imgFrameEffect:{default:[],type:cc.Node},pnlAdd:cc.Node,imgAdd:cc.Node,pnlFuxing:cc.Node,labFuXing:cc.Label,pnlWin:cc.Node,labWin:cc.Label,pnlTotalWin:cc.Node,imgLightEffect:cc.Node,labTotalWin:cc.Label},onLoad:function(){cc.tween(this.imgLightEffect).by(1,{angle:90}).repeatForever().start()},showAdd:function(t,e){var n=this;this.node.active=!0,this.pnlAdd.active=!0,this.pnlFuxing.opacity=0,this.pnlWin.opacity=0,this.imgAdd.opacity=0,this.imgAdd.active=!0,this.pnlWin.y=-80,this.pnlFuxing.y=80,this.labFuXing.string=t,this.labWin.string=e;var i=this,o=function(){cc.tween(i.pnlWin).to(.3,{opacity:255}).start()};cc.tween(this.pnlFuxing).to(.3,{opacity:255}).call(function(){cc.tween(i.imgAdd).to(.3,{opacity:255}).call(function(){o()}).start()}).start(),this.scheduleOnce(function(){n.imgAdd.active=!1,cc.tween(n.pnlWin).to(.3,{y:0,opacity:0}).start(),cc.tween(n.pnlFuxing).to(.3,{y:0,opacity:0}).call(function(){n.showTotalWin(t+e),n.pnlAdd.active=!1}).start()},4)},showTotalWin:function(t){var e=this;this.node.active=!0,this.labTotalWin.string=t,this.pnlTotalWin.active=!0,this.pnlTotalWin.opacity=0,cc.tween(this.pnlTotalWin).to(.3,{opacity:255}).to(.3,{scaleX:1.3,scaleY:1.3}).call(function(){for(var t=0;t<e.imgFrameEffect.length;t++){var n=.1*t+1;cc.tween(e.imgFrameEffect[t]).to(1,{opacity:0,scaleX:n,scaleY:n}).start()}}).to(.3,{scaleX:1,scaleY:1}).start(),this.scheduleOnce(function(){e.pnlTotalWin.active=!1,e.node.active=!1,i.emit(n.HIDE_TOTAL_WIN)},5)},onShowTotalWinAdd:function(t){this.showAdd(t.valFuXing,t.valWin),i.emit(n.PLAY_AUDIO_BGM,{id:5})},onShowTotalWin:function(t){this.showTotalWin(t),i.emit(n.PLAY_AUDIO_BGM,{id:5})},onEnable:function(){i.addEventListener(n.SHOW_TOTAL_WIN_ADD,this.onShowTotalWinAdd,this),i.addEventListener(n.SHOW_TOTAL_WIN,this.onShowTotalWin,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager"}],LockyFortuneUpUI:[function(t,e){"use strict";cc._RF.push(e,"f52b9an81lBzoBe++asjtlv","LockyFortuneUpUI");var n=t("LockyFortuneEventConfig"),i=t("LockyFortuneEventManager"),o=t("LockyFortuneUtil");cc.Class({extends:cc.Component,properties:{labGrand:cc.Label,labMajor:cc.Label,labMinor:cc.Label,labMini:cc.Label},onLoad:function(){resizeWinX(this)},updatePool:function(t){this.labGrand.string="$"+o.formattingCoins(500*t),this.labMajor.string="$"+o.formattingCoins(200*t),this.labMinor.string="$"+o.formattingCoins(50*t),this.labMini.string="$"+o.formattingCoins(15*t)},onLoginGameResult:function(t){1==t.resultid&&this.updatePool(t.Obj.nGamblingWinPool)},onPushGamblingWinPoolResult:function(t){this.updatePool(t)},onEnable:function(){i.addEventListener(n.ON_PUSH_GAMBLING_WIN_POOL,this.onPushGamblingWinPoolResult,this),i.addEventListener(n.ON_LOGIN_GAME_RESULT,this.onLoginGameResult,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneUtil:"LockyFortuneUtil"}],LockyFortuneUserData:[function(t,e){"use strict";cc._RF.push(e,"e816639nxdD0r5qBoaMGkxi","LockyFortuneUserData");var n={FreeTimeNow:0,FreeTimeAll:0,FuXing:0,BonusWin:0,WillWin:0,FreeWinCoins:0,GameMode:0,Status:0,IsAuto:!1,randItemGroup:[],LotteryRes:null,IsFreeSolt:!1,FreeSoltIndex:0,FreeSoltRes:null,IsSelectGame:!1,init:function(){n.GameMode=0,n.Status=0,n.BetIndex=0,n.Line=20,n.IsAuto=!1,n.IsSelectGame=!1,n.IsFreeSolt=!1},initFreeData:function(){n.FreeWinCoins=0,n.FuXing=0,n.BonusWin=0,n.WillWin=0,n.FreeSoltIndex=0}};e.exports=n,cc._RF.pop()},{}],LockyFortuneUtil:[function(t,e){"use strict";cc._RF.push(e,"72306usLLJGfI1ZZyNYLHAT","LockyFortuneUtil");var n=t("LockyFortuneGameData"),i=t("LockyFortuneUserData"),o=t("PlayerInfo"),s={convertNetData:function(t){for(var e=[],n=0;n<5;n++)e[n]=[];for(var i in t)e[i%5][2-parseInt(i/5)]=t[i];return e},isNormalGame:function(){return n.GAME_MODE.NORMAL==i.GameMode},getRandID:function(t,e){return parseInt(Math.random()*(e+1-t))+t},getFakeNetData:function(t,e,n){for(var i=[],o=0;o<15;o++)n[o]?i[o]=Number(n[o]):i[o]=s.getRandID(t,e);return i},getBonusVal:function(t){return n.BONUS_VAL[t]*i.BetValue/n.LINES},getBonusGoldSum:function(t){for(var e=0,i=0;i<t.length;i++){var o=t[i].getComponent(n.ITEM_COM_NAME);(o.isBonusItem()||o.isGreenBounsItem())&&(e+=o.getBonusVal())}return e},getBonusGreenSum:function(t){for(var e=0,i=0;i<t.length;i++){var o=t[i].getComponent(n.ITEM_COM_NAME);o.isBonusItem()&&(e+=o.getBonusVal())}return e},checkBigWin:function(t){return t/i.BetValue>=10},getItemGroup:function(t){var e=i.BetValue>100?100:i.BetValue,o=n.ITEM_CONFIG[e];return n.GAME_MODE.NORMAL==i.GameMode?[].concat(o,o,[9,10,11,13,n.BONUS_ID_RED]):i.GameMode==n.GAME_MODE.FREE?[].concat(o,o,[n.BONUS_ID_GREEN]):i.GameMode==n.GAME_MODE.UP_UP?t?[].concat(o,o,o):[].concat(o,o,o,[12,13,14]):void 0},updateSetString:function(t,e,n,i,o,s){var c=0,a=Math.ceil(t/i);n.string=e;var r=0;s.schedule(function(){(c+=a)>t&&(c=t),n.string=c+e,++r==i+1&&o()},.02,i)},getFakeUpNetData:function(t,e,n){for(var i=[],o=0;o<n.length;o++)i[o]={nHandCards:s.getFakeNetData(t,e,n[o])};return i},reconvertNetData:function(t,e){return t+5*(n.VERTICAL_ITEM_COUNT-1-e)},getRandItemID:function(t){var e=i.randItemGroup;t&&(e=s.getItemGroup(!0));var o=Math.ceil(Math.random()*e.length);o>=e.length&&(o=e.length-1),o<=0&&(o=0);var c=e[o];return"number"==typeof c?c:((o=Math.ceil(Math.random()*n.BONUS_ID_RED.length))>=n.BONUS_ID_RED.length&&(o=n.BONUS_ID_RED.length-1),o<=0&&(o=0),n.BONUS_ID_RED[o])},formattingCoins:function(t){return(t/o.getInstant.exchangeRate).toFixed(2)}};e.exports=s,cc._RF.pop()},{LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData",PlayerInfo:void 0}],LockyFortuneWheel:[function(t,e){"use strict";cc._RF.push(e,"751c0iv8YZOQbQIy4J08scv","LockyFortuneWheel");var n=t("LockyFortuneGameData"),i=t("LockyFortuneUserData"),o=t("LockyFortuneEventConfig"),s=t("LockyFortuneEventManager");cc.Class({extends:cc.Component,properties:{preItem:cc.Prefab,preItemMask:cc.Node,imgBg:cc.Sprite,spAtlas:cc.SpriteAtlas,pnlItem:cc.Node,pnlItemAni:cc.Node,pnlItemMask:cc.Node},onLoad:function(){},setWheelData:function(t){this.wheelId=t,this.initWheel(),this.initUpWheel(),this.initItemMask()},changeMode:function(t){t==n.GAME_MODE.NORMAL?this.imgBg.spriteFrame=this.spAtlas.getSpriteFrame("slice56.png"):t==n.GAME_MODE.FREE?this.imgBg.spriteFrame=this.spAtlas.getSpriteFrame("slice59.png"):t==n.GAME_MODE.UP_UP&&(this.imgBg.spriteFrame=this.spAtlas.getSpriteFrame("slice58.png"))},getItemlist:function(){return this.itemList},getItemUplist:function(){return this.itemUpList},getResultList:function(){return this.resultItemList},getItemMaskList:function(){return this.itemMaskList},onStartRoll:function(){this.isStopRoll=!1,this.isResetRoll=!1,this.itemIndex=0,this.roll()},onStopImmediately:function(){this.isStopRoll=!0},onChangeGameMode:function(){this.changeMode(i.GameMode)},onResetWheel:function(){this.isResetRoll=!0},onEnable:function(){s.addEventListener(o.CHANGE_GAME_MODE,this.onChangeGameMode,this),s.addEventListener(o.START_ROLL,this.onStartRoll,this),s.addEventListener(o.RESET_WHEEL,this.onResetWheel,this),s.addEventListener(o.STOP_IMMEDIATELY,this.onStopImmediately,this)},onGetNetData:function(t){this.netIdList=t,this.onStopRollScheduleCallback()},onStopRollScheduleCallback:function(){this.isStopRoll=!0},roll:function(){var t=this;this.resultItemList=[];for(var e=function(e){var i=t.itemList[e],o=cc.tween(i);i.getComponent(n.BUNDLE_NAME+"Item").setItemVericalPos(-1),o.repeatForever(cc.tween().by(.06,{position:cc.v2(0,-n.ITEM_HEIGHT)}).call(function(){i.y<-n.ITEM_HEIGHT-n.ITEM_HEIGHT/2&&(i.y=3*n.ITEM_HEIGHT-n.ITEM_HEIGHT,i.getComponent(n.BUNDLE_NAME+"Item").randImg()),t.isStopRoll&&(o.stop(),t.rollEnd(i,e)),t.isResetRoll&&(o.stop(),t.resetRolePos(i,e))})).start()},i=0;i<this.itemList.length;i++)e(i)},rollEnd:function(t,e){var i=this,c=this;cc.tween(t).repeat(4,cc.tween().by(.06,{position:cc.v2(0,-n.ITEM_HEIGHT)}).call(function(){t.y<-n.ITEM_HEIGHT-n.ITEM_HEIGHT/2&&(t.y=3*n.ITEM_HEIGHT-n.ITEM_HEIGHT,c.itemIndex>=c.netIdList.length?t.getComponent(n.BUNDLE_NAME+"Item").randImg():(t.getComponent(n.BUNDLE_NAME+"Item").changeItem(c.netIdList[c.itemIndex]),c.resultItemList.push(t)),t.getComponent(n.BUNDLE_NAME+"Item").setItemVericalPos(c.itemIndex),c.itemIndex++)})).call(function(){var a=t.getComponent(n.BUNDLE_NAME+"Item").getItemVerticalPos(c.itemIndex);a=-1==a?3:a,t.y=a*n.ITEM_HEIGHT-n.ITEM_HEIGHT,e==i.itemList.length-1&&s.emit(o.PLAY_AUDIO_EF,"rollOver")}).by(.1,{position:cc.v2(0,-20)}).by(.1,{position:cc.v2(0,20)}).call(function(){t.y<n.ITEM_HEIGHT+n.ITEM_HEIGHT/2&&t.getComponent(n.BUNDLE_NAME+"Item").rollEnd(),i.itemList.length-1==e&&s.emit(o.ON_WHEEL_ROLL_END,i.wheelId)}).start()},resetRolePos:function(t,e){t.y=n.ITEM_HEIGHT*e-n.ITEM_HEIGHT},initWheel:function(){this.itemList=[];for(var t=0;t<4;t++){var e=cc.instantiate(this.preItem);this.itemList.push(e),this.pnlItem.addChild(e),e.y=n.ITEM_HEIGHT*t-n.ITEM_HEIGHT,e.getComponent(n.ITEM_COM_NAME).setItemWheelID(this.wheelId)}},initItemMask:function(){this.itemMaskList=[];for(var t=0;t<n.VERTICAL_ITEM_COUNT;t++){var e=cc.instantiate(this.preItemMask);this.itemMaskList.push(e),this.pnlItemMask.addChild(e),e.y=n.ITEM_HEIGHT*t+n.ITEM_HEIGHT/2,e.active=!1}},initUpWheel:function(){this.itemUpList=[];for(var t=0;t<n.VERTICAL_ITEM_COUNT;t++){var e=cc.instantiate(this.preItem);this.itemUpList.push(e),this.pnlItemAni.addChild(e),e.getComponent(n.ITEM_COM_NAME).setItemWheelID(this.wheelId),e.y=n.ITEM_HEIGHT*t+n.ITEM_HEIGHT/2,e.active=!1}}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneGameData:"LockyFortuneGameData",LockyFortuneUserData:"LockyFortuneUserData"}],LockySFortuneActiveSymbols:[function(t,e){"use strict";cc._RF.push(e,"d725d/sXGpBDLx+dii0Ecn3","LockySFortuneActiveSymbols");var n=t("LockyFortuneUserData"),i=t("LockyFortuneEventConfig"),o=t("LockyFortuneEventManager"),s=[];s[20]=["slice19_19.png","slice21_21.png","slice58.png","slice23_23.png","slice20_20.png"],s[40]=["slice19_19.png","slice21_21.png","slice58.png","slice24_24.png","slice20_20.png"],s[60]=["slice19_19.png","slice21_21.png","slice28_28.png","slice24_24.png","slice20_20.png"],s[80]=["slice19_19.png","slice22_22.png","slice28_28.png","slice24_24.png","slice20_20.png"],s[100]=["slice29_29.png","slice22_22.png","slice28_28.png","slice24_24.png","slice20_20.png"],cc.Class({extends:cc.Component,properties:{layout:cc.Node,preItem:cc.Prefab,itemList:{default:[],type:cc.Node}},onLoad:function(){this.initLayout(),this.changeItem(),this.addEventListener()},changeItem:function(){var t=n.BetValue,e=s[t=t>100?100:t];if(e)for(var i=0;i<e.length;i++)this.itemList[i].getComponent("LockyFortuneSItem").changeImg(e[i])},initLayout:function(){for(var t=0;t<5;t++){var e=cc.instantiate(this.preItem);this.layout.addChild(e),this.itemList.push(e)}},onUpdateBet:function(){this.changeItem()},addEventListener:function(){o.addEventListener(i.UPDATE_BET,this.onUpdateBet,this)}}),cc._RF.pop()},{LockyFortuneEventConfig:"LockyFortuneEventConfig",LockyFortuneEventManager:"LockyFortuneEventManager",LockyFortuneUserData:"LockyFortuneUserData"}]},{},["LockyFortuneActiveSymbols","LockyFortuneAnimation","LockyFortuneAudio","LockyFortuneBigWin","LockyFortuneDownUI","LockyFortuneEventConfig","LockyFortuneEventManager","LockyFortuneFreeFree","LockyFortuneFreeTime","LockyFortuneFreeUp","LockyFortuneGameData","LockyFortuneItem","LockyFortuneMain","LockyFortuneMenu","LockyFortuneNetwork","LockyFortuneParticle","LockyFortuneSItem","LockyFortuneScene","LockyFortuneSelectGame","LockyFortuneTipView","LockyFortuneTotalWin","LockyFortuneUpUI","LockyFortuneUserData","LockyFortuneUtil","LockyFortuneWheel","LockySFortuneActiveSymbols"]);