window.__require=function e(t,i,s){function a(l,c){if(!i[l]){if(!t[l]){var o=l.split("/");if(o=o[o.length-1],!t[o]){var r="function"==typeof __require&&__require;if(!c&&r)return r(o,!0);if(n)return n(o,!0);throw new Error("Cannot find module '"+l+"'")}l=o}var h=i[l]={exports:{}};t[l][0].call(h.exports,function(e){return a(t[l][1][e]||e)},h,h.exports,e,t,i,s)}return i[l].exports}for(var n="function"==typeof __require&&__require,l=0;l<s.length;l++)a(s[l]);return a}({TempAnimation_Witch:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=s(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}cc._RF.push(t,"1f230iucodBCZV5+obYz/RR","TempAnimation_Witch"),cc.Class({extends:cc.Component,properties:{isSkeAnim:{default:!1,displayName:"\u9aa8\u9abc\u52a8\u753b\uff1f"},sketNode:{default:null,type:cc.Node,displayName:"\u9aa8\u9abc\u6570\u636e"},animArray:{default:[],type:cc.String,displayName:"\u52a8\u753b\u5217\u8868"}},onLoad:function(){},start:function(){if(this.isSkeAnim){if(this.sket=this.sketNode.getComponent(sp.Skeleton),!cc.isValid(this.sket))return;this.sket.timeScale=.5,this.stopAnim()}else this.anim=this.getComponent(cc.Animation)},playAnim:function(){if(this.isSkeAnim){if(!cc.isValid(this.sket))return;this.sket.clearTrack(0);for(var e,t=i(this.animArray);!(e=t()).done;){var s=e.value;this.sket.setAnimation(0,s,!0)}}else{if(!cc.isValid(this.anim))return;this.anim.play()}},stopAnim:function(){if(this.isSkeAnim){if(!cc.isValid(this.sket))return;this.sket.clearTracks()}else{if(!cc.isValid(this.anim))return;this.anim.setCurrentTime(0),this.anim.stop()}},onAnimEvent:function(){},onPlayAnimAudio:function(e){"string"==typeof e&&playEffect(e)}}),cc._RF.pop()},{}],WitchAnimationAudio:[function(e,t){"use strict";cc._RF.push(t,"503ffqVH55MoZAzPRZonNf6","WitchAnimationAudio"),cc.Class({extends:cc.Component,playying:function(){cc.find("Canvas").getComponent("WitchAudio").playyinga()},playyingclose:function(){cc.find("Canvas").getComponent("WitchAudio").playyingclose()}}),cc._RF.pop()},{}],WitchAudio:[function(e,t){"use strict";var i;cc._RF.push(t,"d9e77djLMpLyb08twfSgIg+","WitchAudio"),cc.Class({extends:cc.Component,properties:(i={bgmAudio:{type:cc.AudioClip,default:[]},buttonClick:{type:cc.AudioClip,default:null},startWheel:{type:cc.AudioClip,default:null},stopWheel:{type:cc.AudioClip,default:null},winEf:{type:[cc.AudioClip],default:[]},bigWinEf:{type:cc.AudioClip,default:null},freeGame:{type:cc.AudioClip,default:null},jia:{type:cc.AudioClip,default:null},speed:{type:cc.AudioClip,default:null},has_fireball:{type:cc.AudioClip,default:null},has_free:{type:cc.AudioClip,default:null},start_free:{type:cc.AudioClip,default:null},stop_special:{type:cc.AudioClip,default:null},firelink_link:{type:cc.AudioClip,default:null},firelink_lock:{type:cc.AudioClip,default:null},firelink_lockfire:{type:cc.AudioClip,default:null},fireball_pass:{type:cc.AudioClip,default:null},fireball_hit:{type:cc.AudioClip,default:null},special_score_stop:{type:cc.AudioClip,default:null},freegameapear:{type:cc.AudioClip,default:null},fireballappear:{type:cc.AudioClip,default:null},freegameActive:{type:cc.AudioClip,default:null},freegameokbutton:{type:cc.AudioClip,default:null},freegamedialogout:{type:cc.AudioClip,default:null},specialwinbg:{type:cc.AudioClip,default:null},winstop:{type:cc.AudioClip,default:null},crystalfly:{type:cc.AudioClip,default:null},spellfreegamebg:{type:cc.AudioClip,default:null},witch_firelink:{type:cc.AudioClip,default:null},witch_freegame:{type:cc.AudioClip,default:null},witch_freegame_end:{type:cc.AudioClip,default:null},spellbginfreegame:{type:cc.AudioClip,default:null},spellflysound:{type:cc.AudioClip,default:null},witchspell:{type:cc.AudioClip,default:null},witchspell_firelink:{type:cc.AudioClip,default:null}},i.witch_firelink={type:cc.AudioClip,default:null},i.witch1={type:cc.AudioClip,default:null},i.witch2={type:cc.AudioClip,default:null},i.witch4={type:cc.AudioClip,default:null},i.witch5={type:cc.AudioClip,default:null},i.witch6={type:cc.AudioClip,default:null},i.witch8={type:cc.AudioClip,default:null},i.youwin={type:cc.AudioClip,default:null},i),onLoad:function(){this.pInfo=e("PlayerInfo").getInstant,window.playEffect=this.playEffect.bind(this)},start:function(){cc.audioEngine.stopAll(),this.playBgm(0)},stopAudio:function(){cc.audioEngine.stopAll()},setVolume:function(e){cc.audioEngine.setMusicVolume(e)},stopBgm:function(){cc.audioEngine.stopMusic()},playBgm:function(e){0!=this.pInfo.musicControl&&(cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(this.bgmAudio[e],!0))},playSpeed:function(){this.playEf(this.speed)},playHasFireball:function(){this.playEf(this.has_fireball)},playHasFree:function(){this.playEf(this.has_free)},playStartFree:function(){this.playEf(this.start_free)},playStopSpecial:function(){this.playEf(this.stop_special)},playLinkFire:function(){this.playEf(this.firelink_link)},playLinkLock:function(){this.playEf(this.firelink_lock)},playLinkLockFire:function(){this.playEf(this.firelink_lockfire)},playFireballPass:function(){this.playEf(this.fireball_pass)},playFireballHit:function(){this.playEf(this.fireball_hit)},playStopWheel:function(){this.playEf(this.stopWheel)},playButtonClick:function(){this.playEf(this.buttonClick)},playStartWheel:function(){this.playEf(this.startWheel)},playjia:function(){},playBW:function(){this.playEf(this.winEf[0])},playFreeGame:function(){this.playEf(this.freeGame)},playEf:function(e){0!=this.pInfo.soundEffectControl&&cc.audioEngine.playEffect(e)},playEffect:function(e){0!=this.pInfo.soundEffectControl&&this[e]&&this.node&&cc.audioEngine.playEffect(this[e])}}),cc._RF.pop()},{PlayerInfo:void 0}],WitchFreeWheel:[function(e,t){"use strict";cc._RF.push(t,"566a5olY+VMAK3OIg4qulAG","WitchFreeWheel"),cc.Class({extends:cc.Component,properties:{wheelId:0,excludeId:{default:0,displayName:"\u4e0d\u4f1a\u51fa\u73b0\u7684\u6570\u5b57id"}},onLoad:function(){this.audio=cc.director.getScene().getChildByName("Canvas").getChildByName("audio_source").getComponent("WitchAudio"),this.mainObj=cc.director.getScene().getChildByName("Canvas").getComponent("WitchMain"),this.mainObj.freeWheelList[this.wheelId]=this,this.status=0,this.lastResult=[0,0,0,0,0,0],this.rolePbList=[],this.roleIdList=[]},start:function(){this.initWheel()},clearPbs:function(){for(var e in this.rolePbList){var t=this.rolePbList[e];t&&cc.isValid(t)&&(t.removeFromParent(),t.destroy())}},initWheel:function(){this.clearPbs(),this.rolePbList=[],this.roleIdList=[],this.node.removeAllChildren();for(var e=0;e<17;e++){var t=this.getRandomId();e<6&&(this.lastResult[e]=t),this.addRole(t)}this.addRole(this.getRandomId()),this.node.y=0,this.mainObj.rollIndex++},startRoll:function(){this.clearPbs(),this.status=1,this.hasFree=!1,this.hasFireball=!1,this.rolePbList=[],this.roleIdList=[],this.node.removeAllChildren(),this.node.zIndex=1,this.node.y=0;var e=0;for(var t in this.lastResult)this.lastResult[t]=0==this.lastResult[t]?this.getRandomId():this.lastResult[t],this.addRole(this.lastResult[t]);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];for(var n=0;n<30*(e+1)-6-s.length-1;n++)this.addRole(this.getRandomId());for(var l in s)this.addRole(s[l]);this.addRole(this.getRandomId());var c=1*(e+1)+.2*this.wheelId;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(.1+.2*this.wheelId),cc.callFunc(function(){this.node.runAction(cc.sequence(cc.moveTo(c+.2,cc.v2(this.node.x,475-this.node.height)),cc.moveTo(.1,cc.v2(this.node.x,500-this.node.height)),cc.moveTo(.1,cc.v2(this.node.x,475-this.node.height)),cc.callFunc(this.rollCallBack.bind(this))))},this)))},getRandomId:function(){for(var e=0;0==e;)e=(e=(e=Math.floor(9*Math.random()+1))%2==0?24:Math.floor(9*Math.random()+1))==this.excludeId?0:e;return e},changePbToWild:function(e){for(var t in this.roleIdList){var i=this.roleIdList[t],s=this.rolePbList[t];s&&cc.isValid(s)&&i==e&&s.getComponent(cc.Animation).play("towild")}},addRole:function(e){var t=cc.instantiate(this.mainObj.rolePb[e]);return this.rolePbList.push(t),this.roleIdList.push(e),this.node.addChild(t),t},isFireball:function(e){var t=!1;return e>=10&&e<=23&&(t=!0),e>25&&(t=!0),t},rollCallBack:function(){this.audio.playStopWheel(),this.lastResult=this.roleIdList.slice(-6),this.status=0,this.mainObj.stateCallBack()},stopImmediately:function(){this.lastResult=this.roleIdList.slice(-6),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){this.node.y=475-this.node.height},this))),this.status=0,this.mainObj.stateCallBack()}}),cc._RF.pop()},{}],WitchMain:[function(e,t){"use strict";function i(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=s(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}cc._RF.push(t,"81226Sx5oxMz7hcnSbY3onk","WitchMain");var n=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,22,24,26,28,30,32,34,36,38,40],l=[8,12,16,20],c=[0,0,0,0,0,0,0,0,0,0,5,10,25,50,100,150,200,250,500,625,750,1e3,2500],o=[[11,12,13,14,15],[6,7,8,9,10],[16,17,18,19,20],[1,2,3,4,5],[11,7,3,9,15],[6,12,18,14,10],[16,12,8,14,20],[1,7,13,9,5],[6,2,8,4,10],[11,17,13,19,15],[11,12,8,4,5],[6,7,13,19,20],[1,7,8,9,5],[16,12,13,14,20],[11,7,13,19,15],[6,12,8,4,10],[11,17,18,14,10],[6,2,3,9,15],[11,7,8,9,15],[6,12,13,14,10],[6,7,3,9,15],[11,12,18,14,10],[16,12,18,14,20],[1,7,3,9,5],[16,17,13,19,20],[1,2,8,4,5],[11,12,8,14,15],[6,7,13,9,10],[16,17,13,9,10],[1,2,8,14,15],[11,7,13,9,15],[6,12,8,14,10],[6,2,8,14,10],[11,17,13,9,15],[11,17,18,19,15],[6,2,3,4,10],[11,12,13,9,5],[6,7,8,14,20],[16,12,8,4,10],[1,7,13,19,15],[11,7,3,4,5],[6,12,18,19,20],[16,17,18,14,10],[1,2,3,9,15],[1,7,8,14,20],[16,12,13,9,5],[11,7,8,4,5],[6,12,13,19,20],[16,12,18,14,10],[1,7,3,9,15]],r=[{delay:0,endTime:1,drawLine:!1,xOff:310,yOff:760,xLen:310,yLen:0},{delay:0,endTime:1,drawLine:!1,xOff:310,yOff:760,xLen:-310,yLen:0},{delay:.1,endTime:1.1,drawLine:!0,xOff:124,yOff:760,xLen:0,yLen:-760},{delay:0,endTime:1,drawLine:!0,xOff:248,yOff:760,xLen:0,yLen:-760},{delay:0,endTime:1,drawLine:!0,xOff:372,yOff:760,xLen:0,yLen:-760},{delay:.1,endTime:1.1,drawLine:!0,xOff:496,yOff:760,xLen:0,yLen:-760},{delay:1,endTime:2,drawLine:!1,xOff:0,yOff:760,xLen:0,yLen:-760},{delay:1,endTime:2,drawLine:!1,xOff:620,yOff:760,xLen:0,yLen:-760},{delay:1.7,endTime:2.7,drawLine:!1,xOff:0,yOff:760,xLen:0,yLen:-760},{delay:1.7,endTime:2.7,drawLine:!1,xOff:620,yOff:760,xLen:0,yLen:-760},{delay:1.7,endTime:2.7,drawLine:!0,xOff:0,yOff:95,xLen:620,yLen:0},{delay:1.5,endTime:2.5,drawLine:!0,xOff:620,yOff:190,xLen:-620,yLen:0},{delay:1.5,endTime:2.5,drawLine:!0,xOff:0,yOff:285,xLen:620,yLen:0},{delay:1.3,endTime:2.3,drawLine:!0,xOff:620,yOff:380,xLen:-620,yLen:0},{delay:1.3,endTime:2.3,drawLine:!0,xOff:0,yOff:475,xLen:620,yLen:0},{delay:1.1,endTime:2.1,drawLine:!0,xOff:620,yOff:570,xLen:-620,yLen:0},{delay:1.1,endTime:2.1,drawLine:!0,xOff:0,yOff:665,xLen:620,yLen:0},{delay:2.7,endTime:3.7,drawLine:!1,xOff:0,yOff:0,xLen:310,yLen:0},{delay:2.7,endTime:3.7,drawLine:!1,xOff:620,yOff:0,xLen:-310,yLen:0}];cc.Class({extends:cc.Component,properties:{lblUserName:{default:null,type:cc.Label,displayName:"\u7528\u6237\u540d"},lblUserCoin:{default:null,type:cc.Label,displayName:"\u7528\u6237\u91d1\u5e01"},lblUserWinCoin:{default:null,type:cc.Label,displayName:"\u7528\u6237\u8d62\u91d1\u5e01"},lblVersionNum:{default:null,type:cc.Label,displayName:"\u7248\u672c\u53f7"},lblBet:{default:null,type:cc.Label,displayName:"\u5355\u6ce8"},lblLines:{default:null,type:cc.Label,displayName:"\u7ebf\u6570"},lblCurBet:{default:null,type:cc.Label,displayName:"\u672c\u5c40\u603b\u6ce8"},lblWinCoin:{default:null,type:cc.Label,displayName:"\u672c\u5c40\u8d62\u5f97"},lblFireballList:{default:[],type:cc.Label,displayName:"\u8fbe\u5230\u89e3\u9501\u706b\u7403\u663e\u793a"},nodeTip:{default:null,type:cc.Node,displayName:"\u63d0\u793a\u8282\u70b9"},pbBullet:{default:null,type:cc.Prefab,displayName:"\u5492\u8bed\u5b50\u5f39\u6a21\u578b"},nodelLockList:{default:[],type:cc.Node,displayName:"\u9501\u8282\u70b9"},nodeHelpList:{default:[],type:cc.Node,displayName:"\u5e2e\u52a9\u754c\u9762\u5217\u8868"},lblCoinList:{default:[],type:cc.Label,displayName:"\u5217\u500d\u7387\u663e\u793a"},chargeTipsNode:{default:null,type:cc.Node,displayName:"\u5145\u503c\u6307\u5f15"},chargeTipsNodeSingleScore:{default:null,type:cc.Node,displayName:"\u5145\u503c\u6307\u5f15\u5355\u5206"},nodeGameJackpotList:{default:[],type:cc.Node,displayName:"\u6e38\u620f\u5927\u5956\u500d\u7387\u663e\u793a\u8282\u70b9"},rolePb:{default:[],type:cc.Prefab,displayName:"\u6eda\u8f6e\u89d2\u8272Pb"},lbFreeWinCoin:{default:null,type:cc.Label,displayName:"\u514d\u8d39\u8d62\u5f97"},lbFreeTimes:{default:null,type:cc.Label,displayName:"\u5269\u4f59\u514d\u8d39\u6b21\u6570"},lbFreeTotalTimes:{default:null,type:cc.Label,displayName:"\u603b\u514d\u8d39\u6b21\u6570"},lbSpecialTimes:{default:null,type:cc.Label,displayName:"\u5269\u4f59\u706b\u8fde\u73af\u6b21\u6570"},lbSpecialWin:{default:null,type:cc.Label,displayName:"\u706b\u8fde\u73af\u5206\u6570"},lbSpecialWinDialog:{default:null,type:cc.Label,displayName:"\u706b\u8fde\u73af\u5bf9\u8bdd\u6846\u5206\u6570"},freeBgNode:{default:null,type:cc.Node,displayName:"\u514d\u8d39\u6447\u5956\u80cc\u666f\u8282\u70b9"},nodeSpellFire:{default:null,type:cc.Node,displayName:"\u706b"},nodeCrystal:{default:null,type:cc.Node,displayName:"\u6c34\u6676\u98de\u7fd4"},chargePanel:{default:null,type:cc.Node,displayName:"charge\u754c\u9762"},helpUI:{default:null,type:cc.Node,displayName:"help\u754c\u9762"},settingUI:{default:null,type:cc.Node,displayName:"setting\u754c\u9762"},settingBtn:{default:null,type:cc.Node,displayName:"setting\u6309\u94ae"},audioBtn:{default:null,type:cc.Sprite,displayName:"\u58f0\u97f3\u6309\u94ae"},fireBall:{default:null,type:cc.Node,displayName:"\u5927\u706b\u7403"},firelinkFrame:{default:null,type:cc.Node,displayName:"\u706b\u8fde\u73af\u6846\u67b6"},firelinkWinAnim:{default:null,type:cc.Node,displayName:"\u706b\u8fde\u73af\u80dc\u5229\u52a8\u753b"},firelinkGraphics:{default:null,type:cc.Graphics,displayName:"\u706b\u7ebf\u753b\u7ebf"},firelinkPt:{default:null,type:cc.Prefab,displayName:"\u706b\u7ebf\u7c92\u5b50"},firelinkLockFireball:{default:null,type:cc.Prefab,displayName:"\u706b\u7ebf\u56fa\u5b9a\u706b\u7403"},mainGameNode:{default:null,type:cc.Node,displayName:"\u4e3b\u754c\u9762"},mainGameBoard:{default:null,type:cc.Node,displayName:"\u4e3b\u754c\u9762\u753b\u677f"},mainGameFrame:{default:null,type:cc.Node,displayName:"\u4e3b\u754c\u9762\u6846\u67b6"},mainGameWitch:{default:null,type:sp.Skeleton,displayName:"\u4e3b\u754c\u9762\u5973\u5deb"},megaWinNode:{default:null,type:cc.Node,displayName:"\u7279\u5927\u5956\u754c\u9762"},megaWinWitch:{default:null,type:sp.Skeleton,displayName:"\u7279\u5927\u5956\u754c\u9762\u5973\u5deb"},lbMegaWinCoin:{default:null,type:cc.Label,displayName:"\u7279\u5927\u5956(big)-\u8d62\u5f97"},bigWinNode:{default:null,type:cc.Node,displayName:"\u5927\u5956\u754c\u9762"},bigWinWitch:{default:null,type:sp.Skeleton,displayName:"\u5927\u5956\u754c\u9762\u5973\u5deb"},lbBigWinCoin:{default:null,type:cc.Label,displayName:"\u5927\u5956(big)-\u8d62\u5f97"},youWinNode:{default:null,type:cc.Node,displayName:"\u5c0f\u5956\u754c\u9762"},lbYouWinCoin:{default:null,type:cc.Label,displayName:"\u5c0f\u5956(you)-\u8d62\u5f97"},speedFrame:{default:null,type:cc.Node,displayName:"\u5feb\u901f\u6846"},topbarNode:{default:null,type:cc.Node,displayName:"\u4e0a\u83dc\u5355\u680f\u754c\u9762"},freeGameNode:{default:null,type:cc.Node,displayName:"\u514d\u8d39\u754c\u9762"},freeGameWitch:{default:null,type:sp.Skeleton,displayName:"\u514d\u8d39\u754c\u9762\u5973\u5deb"},freeGameCrystal:{default:null,type:sp.Skeleton,displayName:"\u514d\u8d39\u754c\u9762\u6c34\u6676"},aniFlash:{default:null,type:cc.Animation,displayName:"\u95ea\u70c1"},specialGameNode:{default:null,type:cc.Node,displayName:"\u706b\u8fde\u73af\u754c\u9762"},specialFireballListNode:{default:null,type:cc.Node,displayName:"\u706b\u8fde\u73af\u56fa\u5b9a\u706b\u7403\u754c\u9762"},specialNodeWin:{default:null,type:cc.Node,displayName:"\u706b\u8fde\u73af\u80dc\u5229"},specialNodeFrame:{default:null,type:cc.Node,displayName:"\u706b\u8fde\u73af\u6846\u67b6"},specialBoard:{default:null,type:cc.Node,displayName:"\u706b\u8fde\u73af\u753b\u677f"},specialFbAnim:{default:null,type:cc.Node,displayName:"\u706b\u8fde\u73af\u706b\u7403\u649e\u51fb\u52a8\u753b"},msgBoard:{default:null,type:cc.Node,displayName:"Msg\u753b\u677f"},freeBoard:{default:null,type:cc.Node,displayName:"\u514d\u8d39\u753b\u677f"},freeLogoInGame:{default:null,type:cc.Node,displayName:"\u514d\u8d39\u6e38\u620f\u5bf9\u8bdd\u6846"},freeWinNode:{default:null,type:cc.Node,displayName:"\u514d\u8d39\u6e38\u620f\u8d62\u53d6\u6846"},WitchSpellParticals:{default:[],type:cc.ParticleSystem,displayName:"\u5deb\u5e08\u80dc\u5229\u7c92\u5b50\u7279\u6548"},itemsCache:{default:[],type:cc.SpriteFrame,displayName:"\u5361\u7247sf"},ksBtn:cc.Node,zidongNode:cc.Node,powerBtn:cc.Button,exitBtn:cc.Button,_holdTimeEclipse:0,_holdClick:!1},onLoad:function(){if(this.playerInfo=e("PlayerInfo").getInstant,this.net=this.node.getComponent("WitchNetwork"),this.audio=this.node.getChildByName("audio_source").getComponent("WitchAudio"),this.playerInfo.slotBetList)if(this.playerInfo.maxBet&&this.playerInfo.maxBet>1e3){var t=this.playerInfo.maxBet;n=this.playerInfo.slotBetList.filter(function(e){return 50*e<=t})}else n=this.playerInfo.slotBetList;cc.find("Canvas/Slot_Control_01/txt_WINNING")&&(cc.find("Canvas/Slot_Control_01/txt_WINNING").active=!1),cc.find("Canvas/Slot_Control_01/txt_ENTRIES/jia2")&&(cc.find("Canvas/Slot_Control_01/txt_ENTRIES/jia2").active=!1),this.wheelList=[],this.specialUI={},this.specialData={},this.specialWheelList=[],this.freeData={},this.freeWheelList=[],this.bet=0,this.auto=!1,this.status=0,this.bigWinBoo=!1,this.freeData.freeTimes=0,this.freeData.freeTotalTimes=0,this.rollIndex=0,this.bonusLinesNum=0,this.lotteryRes=null,this.freeData.stopFree=!1,this.freeData.freeGameCoin=0,this.specialData.specialGameCoin=0,this.bIsFreeGame=!1,this.bIsSpecialGame=!1,this.delayClick=!1,this.turnNum=0,this.helpNum=0,this.btnStatus=0,this.lastTouchedTime=0,this.lastHeartBeatTime,this.ksBtn.on("touchstart",function(){this.lastTouchedTime=Date.now(),this.nodeTip.active=!1},this),this.initUI(),this.initWitchHandler(this.mainGameWitch)},start:function(){if(this.playerInfo.slotBetList)if(this.playerInfo.maxBet&&this.playerInfo.maxBet>1e3){var e=this.playerInfo.maxBet;n=this.playerInfo.slotBetList.filter(function(t){return 50*t<=e})}else n=this.playerInfo.slotBetList;this.playerInfo.slotBetDefault&&-1!=n.indexOf(this.playerInfo.slotBetDefault)&&(this.bet=n.indexOf(this.playerInfo.slotBetDefault)),this.lblLines.string=50,this.lblWinCoin.string="0",this.setBet(),this.lblUserName.string=this.playerInfo.playerName,this.lblUserCoin.string=(1*this.playerInfo.playerCoin/this.playerInfo.exchangeRate).toFixed(2),this.lblUserWinCoin.string=this.playerInfo.wins?(1*this.playerInfo.wins/this.playerInfo.exchangeRate).toFixed(2):0,cc.find("Loading")&&(cc.find("Loading").active=!1)},initUI:function(){if(cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","cocosChangeOrientation","(I)V",2):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","cocosChangeOrientation:",2),cc.winSize.width/640>cc.winSize.height/1136){var e=this.node.getComponent(cc.Canvas);e.fitHeight=!0,e.fitWidth=!1}cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT),this.specialUI.lockFBList={}},initWitchHandler:function(e){e.setCompleteListener(function(t){var i=t.animation?t.animation.name:"";if("PreviewToWin"==i){e.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){playEffect("witch_freegame_end"),this.WitchSpellParticals[0].node.active=!0,this.WitchSpellParticals[0].resetSystem(),this.WitchSpellParticals[13].node.active=!0,this.WitchSpellParticals[13].resetSystem()}.bind(this)),cc.delayTime(.5),cc.callFunc(function(){this.WitchSpellParticals[1].node.active=!0,this.WitchSpellParticals[1].resetSystem()}.bind(this))));for(var s=5;s<13;s++)this.WitchSpellParticals[s].node&&(this.WitchSpellParticals[s].node.active=!1)}else if("Win"==i)this.WitchSpellParticals[0].node.active=!1,this.WitchSpellParticals[1].node.active=!1,this.WitchSpellParticals[2].node.active=!1,this.WitchSpellParticals[3].node.active=!1,this.WitchSpellParticals[13].node.active=!1;else if("Preview"==i)for(var a=5;a<13;a++)this.WitchSpellParticals[a].node.active=!0,this.WitchSpellParticals[a].resetSystem();else"Change_Start"==i?(this.WitchSpellParticals[14].node.active=!0,this.WitchSpellParticals[14].resetSystem()):"Change_Shoot"==i?this.WitchSpellParticals[14].node.active=!1:"Change_End"==i&&(this.WitchSpellParticals[13].node.active=!1,this.nodeSpellFire.active=!1)}.bind(this))},witchRun:function(e,t){switch(t){case"disdain":e.setAnimation(0,"Feedback_"+(Math.floor(2*Math.random())+1),!1),e.addAnimation(0,"Idle",!0),playEffect("witch4");break;case"tofreegame":e.setAnimation(0,"Preview",!1),e.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){playEffect("witch_freegame")}))),e.addAnimation(0,"PreviewLoop",!0);break;case"success":this.WitchSpellParticals[2].node.active=!0,this.WitchSpellParticals[3].node.active=!0,this.WitchSpellParticals[2].resetSystem(),this.WitchSpellParticals[3].resetSystem(),e.setAnimation(0,"PreviewToWin",!1),e.addAnimation(0,"Win",!1),e.addAnimation(0,"Idle",!0);break;case"tofirelink":this.WitchSpellParticals[13].node.active=!0,this.WitchSpellParticals[13].resetSystem(),this.nodeSpellFire.active=!0,this.nodeSpellFire.opacity=1,this.nodeSpellFire.runAction(cc.fadeTo(1,160)),e.setAnimation(0,"Change_Start",!1),e.addAnimation(0,"Change_Shoot",!1),e.addAnimation(0,"Change_End",!1),e.addAnimation(0,"Idle",!0);break;case"towild":e.setAnimation(0,"FG_Start",!1),e.addAnimation(0,"FG_Sucess",!1)}},onHeartBeat:function(){this.lastHeartBeatTime=Date.now()},openAlert:function(e,t){(cc.find("Loading")&&(cc.find("Loading").active=!1),this&&cc.isValid(this.node)&&this.msgBoard)&&(e||(this.msgBoard.getChildByName("btn_close").active=!1),this.msgBoard.getChildByName("lb_detail").getComponent(cc.Label).string=t||"The Internet is lost! Please login again!",this.msgBoard.active=!0)},getAngle:function(e,t){var i=t.x-e.x,s=t.y-e.y;return cc.v2(i,s).signAngle(cc.v2(1,0))/Math.PI*180+270},switchToSpecialUI:function(){this.mainGameNode.active=!1,this.topbarNode.active=!1,this.specialGameNode.active=!0,this.specialNodeWin&&(this.specialNodeWin.active=!1),this.specialNodeFrame&&(this.specialNodeFrame.active=!0)},clearSpecial:function(){for(var e in this.firelinkGraphics.clear(),this.specialUI.lockFBList)if(this.specialUI.lockFBList[e]){var t=this.specialUI.lockFBList[e];t&&cc.isValid(t)&&(t.removeFromParent(),t.destroy())}this.specialUI.lockFBList={}},startSpecial:function(e){for(var t in this.audio.playBgm(1),this.specialData.specialGameCoin=e.win,cc.log("start special info"+JSON.stringify(e)),this.specialData.fbNum=Object.keys(e.firelink.startIdx).length,this.specialData.fbLockLv=this.getLockLevel(this.specialData.fbNum),this.specialData.firelink=e.firelink,this.specialData.curTurn=0,this.specialData.specialTimes=3,this.specialData.curPbIdList=e.firelink.startIdx,this.clearSpecial(),this.audio.playFireballPass(),this.fireBall.active=!0,this.fireBall.getComponent(cc.Animation).play(),this.firelinkFrame.height=380,this.specialBoard.active=!0,this.specialBoard.opacity=1,this.nodelLockList)this.nodelLockList[t]&&(this.nodelLockList[t].active=!1);this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.switchToSpecialUI()}.bind(this)),cc.delayTime(2),cc.callFunc(function(){var e=0;this.fireBall.active=!1,this.schedule(function(){this.firelinkFrame.height=e<=19?380+380*e/18:760,e++}.bind(this),.05,20)}.bind(this)),cc.delayTime(1),cc.callFunc(function(){this.drawLine()}.bind(this)),cc.delayTime(4),cc.callFunc(function(){for(var e in cc.log("start special cur pb id list"+JSON.stringify(this.specialData.curPbIdList)),this.specialWheelList)this.specialWheelList[e].initWheel(this.specialData.curPbIdList);this.specialBoard.opacity=255,this.specialLock()}.bind(this)),cc.delayTime(4.2),cc.callFunc(function(){this.specialTryLockFire()}.bind(this)),cc.delayTime(1),cc.callFunc(function(){cc.log("start the auto roll"),this.auto=!0,this.specialSendRoll()}.bind(this))))},drawLine:function(){var e=this,t=.05,i=0,s={};this.audio.playLinkFire();for(var a=function(t){var i=r[t],s=cc.instantiate(e.firelinkPt);s.parent=e.firelinkGraphics.node,s.position=cc.v2(i.xOff,i.yOff),s.getComponent(cc.ParticleSystem).duration=i.endTime,s.getComponent(cc.ParticleSystem).resetSystem(),s.runAction(cc.sequence(cc.hide(),cc.delayTime(i.delay),cc.show(),cc.moveTo(i.endTime-i.delay,cc.v2(i.xOff+i.xLen,i.yOff+i.yLen)),cc.delayTime(.3),cc.callFunc(function(){s.removeFromParent(),s.destroy()}.bind(e))))},n=0;n<r.length;n++)a(n);this.schedule(function(){for(var e=0;e<r.length;e++){var a=r[e];if(a.drawLine)if(a&&a.delay<a.endTime&&a.delay<=i*t&&a.endTime>=i*t){var n=a.xLen/(a.endTime-a.delay),l=a.yLen/(a.endTime-a.delay);if(s[e]){this.firelinkGraphics.moveTo(s[e].x,s[e].y);var c=t*n,o=t*l;this.firelinkGraphics.lineTo(s[e].x+c,s[e].y+o),this.firelinkGraphics.stroke(),s[e]={x:s[e].x+c,y:s[e].y+o}}else this.firelinkGraphics.moveTo(a.xOff,a.yOff),c=(i*t-a.delay)*n,o=(i*t-a.delay)*l,this.firelinkGraphics.lineTo(a.xOff+c,a.yOff+o),this.firelinkGraphics.stroke(),s[e]={x:a.xOff+c,y:a.yOff+o}}else a.endTime<i*t&&(s[e].x!=a.xOff+a.xLen||s[e].y!=a.yOff+a.yLen)&&(this.firelinkGraphics.moveTo(s[e].x,s[e].y),this.firelinkGraphics.lineTo(a.xOff+a.xLen,a.yOff+a.yLen),this.firelinkGraphics.stroke(),s[e]={x:a.xOff+a.xLen,y:a.yOff+a.yLen})}i++}.bind(this),t,120,t)},getLockLevel:function(e){for(var t=0,i=0;i<l.length;i++)e>=l[i]&&(t=i+1);return t},getRealFireballNum:function(e){for(var t=e,i=this.specialData.fbLockLv,s=this.getLockLevel(e);s>i;){for(var a in t=0,this.specialUI.lockFBList)(a-a%5)/5<s+4&&t++;i=s,s=this.getLockLevel(t)}return t},freeLock:function(e){var t=this.getLockLevel(e);for(var i in this.nodelLockList){var s=this.nodelLockList[i];s&&s.active&&(t>i?s.active=!1:this.lblFireballList[i].string=l[i]-e)}},specialLock:function(){var e=this,t=0,i=function(i){var s=e.nodelLockList[i];s&&(l[i]&&l[i]>e.specialData.fbNum?(t++,e.node.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){s.active=!0,this.audio.playLinkLock(),this.lblFireballList[i].string=l[i]-this.specialData.fbNum}.bind(e))))):s.active=!1)};for(var s in this.nodelLockList)i(s)},setFireballNum:function(e,t){if(t>=11&&t<=23){var i=e.getChildByName("lbNum");i&&(i.active=!0,i.getComponent(cc.Label).string=n[this.bet]*c[t-1])}},setLockedFireballNum:function(e,t){if(t>=11&&t<=23){var i=e.getChildByName("lbNum");i&&(i.active=!0,i.getComponent(cc.Label).string=n[this.bet]*c[t-1])}else if(26==t){var s=e.getChildByName("mini");s&&(s.active=!0)}else if(27==t){var a=e.getChildByName("minor");a&&(a.active=!0)}else if(28==t){var l=e.getChildByName("major");l&&(l.active=!0)}else if(29==t){var o=e.getChildByName("mega");o&&(o.active=!0)}},specailLockFire:function(e,t){var i=e%5,s=(e-i)/5,a=cc.instantiate(this.firelinkLockFireball);this.specialUI.lockFBList[e]=a,cc.log("add lock fireball:"+a+"idx:"+e+JSON.stringify(t)),a.parent=this.specialFireballListNode,a.position=cc.v2(125*i+62.5,95*s+47.5),this.setLockedFireballNum(a,t.num),a.getComponent(cc.Animation).play("lightningball_appear1"),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){a.getComponent(cc.Animation).play()}.bind(this))))},specialTryLockFire:function(){for(var e in this.specialData.curPbIdList)this.specailLockFire(parseInt(e),{num:parseInt(this.specialData.curPbIdList[e])+1})},specialShootScore:function(e){var t=this.specialFbAnim.position,i=e,s=t.sub(i).mag()/5,a=0,n=180/(Math.PI/Math.atan((t.x-i.x)/(t.y-i.y)));t.y>i.y&&(n-=180),this.specialFbAnim.angle=-n,this.schedule(function(){a+=s,this.specialFbAnim.setContentSize(89,a)}.bind(this),.02,5,0)},stopSpecial:function(){this.specialNodeWin.active=!0,cc.log("the final lock level is:"+this.specialData.fbLockLv);var e=this.getRealFireballNum(this.specialData.fbNum);this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){var t=this,i=0,s=0;cc.log("the final lock lv is:"+this.specialData.fbLockLv),cc.log("the final fire ball num is:"+e);var a=function(e){var a=t.specialUI.lockFBList[e],n=parseInt(e)%5,l=(parseInt(e)-n)/5,c=0;a.getChildByName("mini").active?c=parseInt(25e3+100*Math.pow(t.winPool/100,.47)):a.getChildByName("minor").active?c=parseInt(1e5+100*Math.pow(t.winPool/100,.52)):a.getChildByName("major").active?c=parseInt(4e5+100*Math.pow(t.winPool/100,.55)):a.getChildByName("mega").active?c=parseInt(8e5+100*Math.pow(t.winPool/100,.65)):a.getChildByName("lbNum").active&&(c=parseInt(a.getChildByName("lbNum").getComponent(cc.Label).string)),l<t.specialData.fbLockLv+4&&a&&(t.scheduleOnce(function(){this.specialFbAnim.active=!0,this.specialFbAnim.position=this.node.convertToNodeSpaceAR(a.parent.convertToWorldSpaceAR(a.position));var e=cc.v2(0,-505);this.specialShootScore(e)}.bind(t),.1+i),t.scheduleOnce(function(){this.audio.playFireballHit(),this.specialFbAnim.active=!1,this.specialNodeWin.active=!0,this.specialNodeWin.getComponent(cc.Animation).play(),this.specialNodeWin.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){this.specialNodeWin.active=!1,a.opacity=128}.bind(this)))),s+=c,this.lbSpecialWin.string=(1*s/this.playerInfo.exchangeRate).toFixed(2)}.bind(t),.2+i),i++)};for(var n in this.specialUI.lockFBList)a(n)}.bind(this)),cc.delayTime(.5+e+1),cc.callFunc(function(){this.firelinkWinAnim.active=!0,this.lbSpecialWinDialog.string=(1*this.specialData.specialGameCoin/this.playerInfo.exchangeRate).toFixed(2),this.firelinkWinAnim.getComponent(cc.Animation).play(),playEffect("specialwinbg"),this.audio.playStopSpecial()}.bind(this)),cc.delayTime(4),cc.callFunc(function(){this.firelinkWinAnim.active=!1,this.aniFlash.play()}.bind(this)),cc.delayTime(.5),cc.callFunc(function(){this.specialFbAnim.active=!1,this.bIsSpecialGame=!1,this.auto=!1,this.specialNodeWin.active=!1,this.topbarNode.active=!0,this.mainGameNode.active=!0,this.specialGameNode.active=!1,this.ksBtn.interactable=!0,this.lbSpecialWin.string=0,this.lbSpecialWinDialog.string=0;for(var e=0;e<20;e++){var t=e%5,i=parseInt(e/5);this.clsoeAnim(t,i)}this.showAllPb(),this.setBtnState(0),this.audio.playBgm(0),this.showBigWin(this.specialData.specialGameCoin)}.bind(this))))},update:function(e){this._holdClick&&(this._holdTimeEclipse++,this._holdTimeEclipse>60&&(this._holdClick=!1,this._holdTimeEclipse=120,this.onCLick(null,"auto"),this._holdTimeEclipse=0)),(0==this.lastTouchedTime||Date.now()-this.lastTouchedTime>3e4)&&(this.nodeTip.active=!0),parseInt(this.curTime)>=0?this.curTime+=e:this.curTime=0,this.curTime&&this.curTime>2&&(this.curTime=0,parseFloat(this.lblUserCoin.string)*this.playerInfo.exchangeRate<50*n[this.bet]?this.chargeTipsNodeSingleScore&&(this.chargeTipsNodeSingleScore.active=!0):(this.chargeTipsNode.active=!1,this.chargeTipsNodeSingleScore&&(this.chargeTipsNodeSingleScore.active=!1)))},chargeAll:function(){},chargeSum:function(){},chargeAllResult:function(){},onCLick:function(e,t){switch(this.audio.playButtonClick(),t){case"auto":if(this.freeData.freeTimes>0||this.bigWinBoo||this.freeData.stopFree||this.bIsFreeGame||this.bIsSpecialGame||this.delayClick)return;this.auto?(this.auto=!this.auto,this.ksBtn.interactable=!this.auto):(this.auto=!this.auto,this.ksBtn.interactable=!this.auto,this.auto&&0==this.status&&this.sendRoll()),this.setAutoBtnLabel(this.auto);break;case"stopAuto":this.auto=!1,this.zidongNode.active=this.auto,this.ksBtn.interactable=!this.auto,this.setAutoBtnLabel(this.auto);break;case"startfree":this.auto=!0,this.freeBoard.opacity=255,this.freeLogoInGame.active=!1,this.freeData.freeTimes=this.lotteryRes.freeCount,this.lbFreeTimes.string=this.freeData.freeTimes,this.audio.playBgm(2),playEffect("freegameokbutton"),this.sendFreeRoll();break;case"charge":if(this.freeData.freeTimes>0||this.bigWinBoo||this.freeData.stopFree||this.bIsFreeGame||this.bIsSpecialGame||this.delayClick||this.auto)return;this.chargePanel.active=!0;break;case"charge1":this.chargeSum(1),this.chargePanel.active=!1;break;case"charge2":this.chargeSum(10),this.chargePanel.active=!1;break;case"charge3":this.chargeSum(50),this.chargePanel.active=!1;break;case"charge4":this.chargeSum(100),this.chargePanel.active=!1;break;case"chargeAll":this.chargeAll(),this.chargePanel.active=!1;break;case"closeCharge":this.chargePanel.active=!1;break;case"roll":if(cc.log("start to roll"),this.freeData.freeTimes>0||this.bigWinBoo||this.freeData.stopFree||this.bIsFreeGame||this.bIsSpecialGame||this.delayClick)return;var i=50*n[this.bet];if(parseFloat(this.lblUserCoin.string)*this.playerInfo.exchangeRate<i)return void this.witchRun(this.mainGameWitch,"disdain");if(this.ksBtn.interactable=!1,!this.auto)if(0==this.status)this.status=2,cc.log("send roll"),this.sendRoll();else if(1==this.status){if(this.lotteryRes.viewarray.getFreeTime.bFlag||this.lotteryRes.viewarray.getFirelink.bFlag)return;this.stopImmediately()}break;case"add":if(this.freeData.freeTimes>0||this.bigWinBoo||this.freeData.stopFree||this.bIsSpecialGame||this.auto)return;this.audio.playjia(),this.bet+=1,this.bet=this.bet>=n.length?0:this.bet,this.setBet();break;case"dec":if(this.freeData.freeTimes>0||this.bigWinBoo||this.freeData.stopFree||this.bIsSpecialGame||this.auto)return;this.audio.playjia(),this.bet-=1,this.bet=this.bet>=0?this.bet:n.length-1,this.setBet();break;case"closeBigWin":this.audio.playBgm(0);break;case"help":var s=cc.find("Canvas/com_help").activeInHierarchy;cc.find("Canvas/com_help").active=!s;break;case"setting":this.settingBtn.getComponent(cc.Button).interactable=!1,this.settingBtn.runAction(cc.moveBy(.3,100,0)),this.scheduleOnce(function(){this.settingUI.active=!0}.bind(this),.3);break;case"settingClose":this.settingUI.active=!1,this.settingBtn.getComponent(cc.Button).interactable=!0,this.settingBtn.runAction(cc.moveBy(.3,-100,0));break;case"closeHelp":this.helpUI.active=!1;break;case"closeExit":this.msgBoard.active=!1;break;case"exit":Common.backHall("Are you sure you want to leave the game?",function(){cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","cocosChangeOrientation","(I)V",1):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","cocosChangeOrientation:",1),cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE)});break;case"exitGame":cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","cocosChangeOrientation","(I)V",1):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","cocosChangeOrientation:",1),cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),cc.director.loadScene(window.hallName);break;case"audio":this.audio.pInfo.musicControl=!this.audio.pInfo.musicControl,this.audio.pInfo.musicControl?this.freeData.freeTimes>0?this.audio.playBgm(2):this.bIsSpecialGame?this.audio.playBgm(1):this.audio.playBgm(0):this.audio.stopAudio()}},setAutoBtnLabel:function(e){e?this.zidongNode.getChildByName("lb")&&(this.zidongNode.getChildByName("lb").getComponent(cc.Label).string="STOP"):this.zidongNode.getChildByName("lb")&&(this.zidongNode.getChildByName("lb").getComponent(cc.Label).string="AUTO")},setBet:function(){this.lblBet.string=(50*n[this.bet]/50*1/this.playerInfo.exchangeRate).toFixed(2),this.lblCurBet.string=(50*n[this.bet]/this.playerInfo.exchangeRate).toFixed(2);var e=50*n[this.bet]/50;this.refreshPool(e)},setBtnState:function(e){this.btnStatus=e,0==e?(this.ksBtn.getChildByName("spin").active=!0,this.ksBtn.getChildByName("stop").active=!1):1==e?(this.ksBtn.getChildByName("spin").active=!1,this.ksBtn.getChildByName("stop").active=!0):2==e?(this.ksBtn.getChildByName("spin").active=!1,this.ksBtn.getChildByName("stop").active=!1):3==e&&(this.ksBtn.getChildByName("spin").active=!1,this.ksBtn.getChildByName("stop").active=!1),this.powerBtn&&(this.powerBtn.interactable=!1)},stateCallBack:function(){var e=0;if(this.bIsSpecialGame){for(var t in this.specialWheelList)if(this.specialWheelList[t].status){e=1;break}}else if(this.freeData.freeTimes>0||this.freeData.stopFree){for(var i in this.freeWheelList)if(this.freeWheelList[i].status){e=1;break}}else for(var s in this.wheelList)if(this.wheelList[s].status){e=1;break}if(this.status=e,0==this.status)if(this.lotteryRes.viewarray.nChangeCards.cards&&this.lotteryRes.viewarray.nChangeCards.cards.length>0){var a=this.lotteryRes.viewarray.nChangeCards.cards[0];cc.log("enter witch free wild:"+JSON.stringify(this.lotteryRes.viewarray.nChangeCards)),playEffect("witch1"),playEffect("spellbginfreegame"),this.freeGameWitch.setAnimation(0,"FG_Start",!0),this.freeGameCrystal.setAnimation(0,"FG_Start",!0),this.freeGameCrystal.getComponent(cc.Animation).play(),this.node.runAction(cc.sequence(cc.delayTime(2.5),cc.callFunc(function(){playEffect("witchspell"),this.freeGameWitch.setAnimation(0,"FG_Success",!1),this.freeGameCrystal.setAnimation(0,"FG_Success",!1),this.freeGameCrystal.node.getChildByName("item").getComponent(cc.Sprite).spriteFrame=this.itemsCache[a]}.bind(this)),cc.delayTime(2),cc.callFunc(function(){var e=this,t=this.freeGameCrystal.node.getChildByName("item");t&&(t.getComponent(cc.Sprite).spriteFrame=null);var i=this.freeGameCrystal.node.convertToWorldSpaceAR(t.position);i=this.node.convertToNodeSpaceAR(i);for(var s=0;s<5;s++)for(var n=0;n<4;n++)if(this.freeWheelList[s]){var l=this.freeWheelList[s].rolePbList.length,c=this.freeWheelList[s].rolePbList[l-5+n],o=this.freeWheelList[s].roleIdList[l-5+n];c&&cc.isValid(c)&&o==a+1&&function(){var t=c.convertToWorldSpaceAR(cc.v2(0,0));t=e.node.convertToNodeSpaceAR(t);var s=cc.instantiate(e.pbBullet);s&&(s.parent=e.node,s.position=i,s.getComponent(cc.ParticleSystem).resetSystem(),s.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){playEffect("spellflysound")}),cc.moveTo(1,t),cc.delayTime(.7),cc.callFunc(function(){s.removeFromParent(),s.destroy()}))))}()}}.bind(this)),cc.delayTime(1.2),cc.callFunc(function(){for(var e=0;e<5;e++)this.freeWheelList[e]&&this.freeWheelList[e].changePbToWild(a+1)}.bind(this)),cc.delayTime(2),cc.callFunc(function(){this.showResult()}.bind(this))))}else if(this.bIsFreeGame||this.bIsSpecialGame||!(this.lotteryRes.viewarray.nChangeCards.changes&&this.lotteryRes.viewarray.nChangeCards.changes.length>0||this.lotteryRes.viewarray.nChangeCards.frees&&this.lotteryRes.viewarray.nChangeCards.frees.length>0))this.showResult();else{var n=!0;this.lotteryRes.viewarray.nChangeCards.changes&&this.lotteryRes.viewarray.nChangeCards.changes.length>0&&(n=!1),cc.log("enter witch change:"+JSON.stringify(this.lotteryRes.viewarray.nChangeCards)),this.delayClick=!0,playEffect("witch_firelink"),playEffect("witchspell_firelink"),this.witchRun(this.mainGameWitch,"tofirelink"),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){var e=this,t=this.WitchSpellParticals[14].node.convertToWorldSpaceAR(cc.v2(0,0));if(t=this.node.convertToNodeSpaceAR(t),n)for(var i in this.lotteryRes.viewarray.nChangeCards.frees){var s=parseInt(this.lotteryRes.viewarray.nChangeCards.frees[i]),a=s%5,l=(s-a)/5;if(this.wheelList[a]){var c=this.wheelList[a].rolePbList.length,o=this.wheelList[a].rolePbList[c-5+l];o&&cc.isValid(o)&&function(){var i=o.convertToWorldSpaceAR(cc.v2(0,0));i=e.node.convertToNodeSpaceAR(i);var s=cc.instantiate(e.pbBullet);s&&(s.parent=e.node,s.position=t,s.getComponent(cc.ParticleSystem).resetSystem(),s.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){playEffect("spellflysound")}),cc.moveTo(1,i),cc.delayTime(.7),cc.callFunc(function(){s.removeFromParent(),s.destroy()}))))}()}}else for(var r in this.lotteryRes.viewarray.nChangeCards.changes){var h=this.lotteryRes.viewarray.nChangeCards.changes[r],d=(parseInt(h[1]),parseInt(h[0])),f=d%5,u=(d-f)/5;if(this.wheelList[f]){var p=this.wheelList[f].rolePbList.length,m=this.wheelList[f].rolePbList[p-5+u];m&&cc.isValid(m)&&function(){var i=m.convertToWorldSpaceAR(cc.v2(0,0));i=e.node.convertToNodeSpaceAR(i);var s=cc.instantiate(e.pbBullet);s&&(s.parent=e.node,s.position=t,s.getComponent(cc.ParticleSystem).resetSystem(),s.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){playEffect("spellflysound")}),cc.moveTo(1,i),cc.delayTime(.7),cc.callFunc(function(){s.removeFromParent(),s.destroy()}))))}()}}}.bind(this)),cc.delayTime(1.2),cc.callFunc(function(){if(n)for(var e in this.lotteryRes.viewarray.nChangeCards.frees){var t=parseInt(this.lotteryRes.viewarray.nChangeCards.frees[e]),i=t%5,s=(t-i)/5;this.wheelList[i].updateRoll(s,25)}else for(var a in this.lotteryRes.viewarray.nChangeCards.changes){var l=this.lotteryRes.viewarray.nChangeCards.changes[a],c=parseInt(l[1]),o=parseInt(l[0]),r=o%5,h=(o-r)/5;this.wheelList[r].updateRoll(h,c+1)}}.bind(this)),cc.delayTime(2),cc.callFunc(function(){this.delayClick=!1,this.showResult()}.bind(this))))}},specialSendRoll:function(){this.lastTouchedTime=Date.now(),this.nodeTip.active=!1,this.lbSpecialTimes.string=this.specialData.specialTimes;var e=cc.find("Canvas/com_help").activeInHierarchy;for(var t in e&&(cc.find("Canvas/com_help").active=!1),this.ksBtn.interactable=!1,this.status=1,this.specialData.curPbIdList=this.specialData.firelink.turns[this.specialData.curTurn],this.specialData.curTurn++,cc.log("special send rool start to roll!!"),this.specialWheelList)this.specialWheelList[t].startRoll(this.specialData.curPbIdList)},showResult:function(){var e=this;if(cc.log("show result"),this.bIsSpecialGame)return this.specialTryLockFire(),this.specialData.specialTimes--,this.lbSpecialTimes.string=this.specialData.specialTimes,void this.scheduleOnce(function(){var t=0;for(var i in e.specialData.curPbIdList)(parseInt(i)-parseInt(i)%5)/5<e.specialData.fbLockLv+4&&t++;if(t>0){e.specialData.specialTimes=3,e.lbSpecialTimes.string=3;var s=e.getRealFireballNum(t+e.specialData.fbNum);e.specialData.fbNum=s,e.freeLock(s),e.specialData.fbLockLv=e.getLockLevel(s),cc.log("the final lock lv is:"+e.specialData.fbLockLv),cc.log("the final fire ball num is:"+s)}e.specialData.firelink.turns[e.specialData.curTurn]?e.auto&&e.specialSendRoll():e.stopSpecial()},1);var t=this.rollIndex;this.setBtnState(0),this.bIsFreeGame&&(this.lbFreeTimes.string=this.freeData.freeTimes,this.lbFreeTotalTimes.string=this.freeData.freeTotalTimes,this.freeData.freeTimes=this.lotteryRes.freeCount,this.freeData.freeGameCoin+=this.lotteryRes.winscore),this.bigWinBoo=!0,this.scheduleOnce(function(){t==e.rollIndex&&(e.turnNum+=1,e.playWinAnim(e.turnNum))},.1),this.lotteryRes.viewarray.getFreeTime.bFlag?0==this.freeData.freeTimes?(this.audio.playStartFree(),this.bIsFreeGame=!0,this.lotteryRes.freeCount=this.lotteryRes.viewarray.getFreeTime.nFreeTime,this.freeData.freeTotalTimes=this.lotteryRes.freeCount,this.lbFreeTotalTimes.string=this.freeData.freeTotalTimes,this.scheduleOnce(function(){e.startFreeGame(!0)},2+(this.lotteryRes.winscore>0?3:0))):(this.showBonusAnim(),this.lotteryRes.freeCount?this.lotteryRes.freeCount+=this.lotteryRes.viewarray.getFreeTime.nFreeTime:this.lotteryRes.freeCount=this.lotteryRes.viewarray.getFreeTime.nFreeTime,this.freeData.freeTimes=this.lotteryRes.freeCount,this.freeData.freeTotalTimes+=this.lotteryRes.viewarray.getFreeTime.nFreeTime,this.freeData.stopFree=!1,this.lbFreeTimes.string=this.lotteryRes.viewarray.getFreeTime.nFreeTime,this.audio.playStartFree(),this.scheduleOnce(function(){e.closeBonusAnim()},2)):this.lotteryRes.viewarray.getFirelink.bFlag&&(this.setBtnState(3),this.audio.playStartFree(),this.bIsSpecialGame=!0,this.showSpecialAnim(),this.scheduleOnce(function(){e.startSpecial(e.lotteryRes.viewarray.getFirelink)},2+(this.lotteryRes.winscore>0?3:0)))},showBigWin:function(e){cc.log("show big win"+e);var t=0,i=1*e/30;for(var s in this.WitchSpellParticals)this.WitchSpellParticals[s].node&&(this.WitchSpellParticals[s].node.active=!1);this.bigWinBoo=!0,e>1500*n[this.bet]?(this.audio.playBgm(2),this.megaWinNode.active=!0,this.megaWinNode.getComponent(cc.Animation).play(),this.lbMegaWinCoin.string=0,this.node.runAction(cc.sequence(cc.delayTime(1.25),cc.callFunc(function(){playEffect("witch5"),this.megaWinWitch.setAnimation(0,"FullScreenPreview_Start",!1),this.megaWinWitch.addAnimation(0,"FullScreenPreview_Loop",!0)}.bind(this)),cc.delayTime(.5),cc.callFunc(function(){this.schedule(function(){t+=i,this.lbMegaWinCoin.string=(1*t/this.playerInfo.exchangeRate).toFixed(2)}.bind(this),.1,29,.1),this.scheduleOnce(function(){this.playerInfo.playerCoin+=parseInt(e),this.lblUserCoin.string=(1*this.playerInfo.playerCoin/this.playerInfo.exchangeRate).toFixed(2),this.megaWinNode.active=!1,this.bigWinBoo=!1,this.audio.playBgm(0)}.bind(this),3.5)}.bind(this))))):e>500*n[this.bet]?(this.audio.playBgm(3),this.bigWinNode.active=!0,this.bigWinNode.getComponent(cc.Animation).play(),this.lbBigWinCoin.string=0,this.node.runAction(cc.sequence(cc.delayTime(.25),cc.callFunc(function(){this.bigWinWitch.setAnimation(0,"FullScreenWin_Start",!1),this.bigWinWitch.addAnimation(0,"FullScreenWin_Loop",!0)}.bind(this)),cc.delayTime(.75),cc.callFunc(function(){this.schedule(function(){t+=i,this.lbBigWinCoin.string=(1*t/this.playerInfo.exchangeRate).toFixed(2)}.bind(this),.1,29,.1),this.scheduleOnce(function(){this.playerInfo.playerCoin+=parseInt(e),this.lblUserCoin.string=(1*this.playerInfo.playerCoin/this.playerInfo.exchangeRate).toFixed(2),this.bigWinNode.active=!1,this.bigWinBoo=!1,this.audio.playBgm(0)}.bind(this),3.5)}.bind(this))))):(this.audio.playBgm(5),playEffect("youwin"),this.youWinNode.active=!0,this.youWinNode.getComponent(cc.Animation).play(),this.lbYouWinCoin.string=0,this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){this.schedule(function(){t+=i,this.lbYouWinCoin.string=(1*t/this.playerInfo.exchangeRate).toFixed(2)}.bind(this),.1,29,.1),this.scheduleOnce(function(){this.playerInfo.playerCoin+=parseInt(e),this.lblUserCoin.string=(1*this.playerInfo.playerCoin/this.playerInfo.exchangeRate).toFixed(2),this.youWinNode.active=!1,this.bigWinBoo=!1,this.audio.playBgm(0)}.bind(this),3.5)}.bind(this)))))},enablePb:function(e,t,i){if(this.freeWheelList[e]&&(this.freeData.freeTimes>0||this.freeData.stopFree)){var s=this.freeWheelList[e].rolePbList.length;(a=this.freeWheelList[e].rolePbList[s-5+t])&&cc.isValid(a)&&(a.opacity=i?255:80)}else{var a,n=this.wheelList[e].rolePbList.length;(a=this.wheelList[e].rolePbList[n-5+t])&&cc.isValid(a)&&(a.opacity=i?255:80)}},showAllPb:function(){for(var e=0;e<20;e++){var t=e%5,i=parseInt(e/5);this.enablePb(t,i,!0)}},hideAllPb:function(){for(var e=0;e<20;e++){var t=e%5,i=parseInt(e/5);this.enablePb(t,i,!1)}},playWinAnim:function(e){var t,i=this,s=0,a=[];for(var n in cc.log("the lottery result is:"+JSON.stringify(this.lotteryRes)),cc.log("the stop free is:"+this.freeData.stopFree),this.lotteryRes.viewarray.nWinCards)this.lotteryRes.viewarray.nWinCards[n]&&a.push(n);var l=this.lotteryRes.viewarray.nWinLinesDetail,c=this.rollIndex,r=this.freeData.freeTimes>0||this.freeData.stopFree||this.bIsSpecialGame||this.auto?[a]:[a].concat(l),h=this.auto&&l.length>0?1:0;t=r.length-1,(this.lotteryRes.viewarray.getFreeTime.bFlag||this.freeData.freeTimes>0||this.freeData.stopFree)&&l.length>0&&(s=1);var d=0;if(this.lotteryRes.viewarray.win>0){this.bigWinBoo=!0,this.audio.playBW(0);var f=0,u=1*this.lotteryRes.viewarray.win/10;this.schedule(function(){f+=u,this.lblWinCoin.string=(1*f/this.playerInfo.exchangeRate).toFixed(2)}.bind(this),.1,9,.01),this.scheduleOnce(function(){playEffect("winstop"),this.bigWinBoo=!1,this.bIsFreeGame||this.freeData.stopFree||(this.playerInfo.playerCoin+=parseInt(this.lotteryRes.viewarray.win),this.lblUserCoin.string=(1*this.playerInfo.playerCoin/this.playerInfo.exchangeRate).toFixed(2))}.bind(this),1.1)}else this.bigWinBoo=!1;this.schedule(function(){if(c==i.rollIndex){for(var e=0;e<20;e++){var t=e%5,s=parseInt(e/5);i.clsoeAnim(t,s)}if(!r[d])return void i.showAllPb();var a=cc.Color.WHITE;if(0!==d){var n=(d-1)%3;a=0===n?cc.Color.RED:1===n?cc.Color.BLUE:cc.Color.GREEN,i.hideAllPb();var l=i.lotteryRes.viewarray.nWinLines[d-1],h=o[l];for(var f in h)t=(h[f]-1)%5,s=parseInt((h[f]-1)/5),i.enablePb(t,s,!0)}else if(r[d]&&r[d].length>0)for(var u in i.hideAllPb(),h=r[d])t=h[u]%5,s=parseInt(h[u]/5),i.enablePb(t,s,!0);else i.showAllPb();for(var p in r[d])t=r[d][p]%5,s=parseInt(r[d][p]/5),i.freeData.freeTimes>0||i.freeData.stopFree?i.showAnim(i.freeWheelList,t,s,i.lotteryRes.viewarray.fMultiple,!1,a):i.showAnim(i.wheelList,t,s,i.lotteryRes.viewarray.fMultiple,!1,a);d++}},3,s>0?s:t>0?t+2:0,.033),this.scheduleOnce(function(){if(e==i.turnNum){if(i.freeData.stopFree){i.freeWinNode.active=!0,i.auto=!1,playEffect("freegamedialogout"),i.audio.playBW(0);var t=0,s=1*i.freeData.freeGameCoin/30;i.schedule(function(){t+=s,this.lbFreeWinCoin.string=(1*t/this.playerInfo.exchangeRate).toFixed(2)}.bind(i),.1,29,.1),i.scheduleOnce(function(){playEffect("winstop"),this.freeWinNode.active=!1,this.stopFreeTimes()}.bind(i),3.5)}i.freeData.freeTimes>0&&(i.freeData.freeTimes--,0==i.freeData.freeTimes&&(i.freeData.stopFree=!0),cc.log("free send roll!!"+i.freeData.freeTimes),i.auto&&i.sendFreeRoll()),c==i.rollIndex&&(cc.log("auto send roll!!"+i.freeData.freeTimes+" stop:"+i.freeData.stopFree),i.auto&&!i.getIsFreeGame()&&i.sendRoll())}},s>0?1+3*s:(t>0?3*t:.666)+h)},getIsFreeGame:function(){return this.freeData.freeTimes>0||this.freeData.stopFree||this.bIsFreeGame||this.bIsSpecialGame},sendFreeRoll:function(){var e={};if(!(this.freeCurrent>=this.freeResults.length)){var t=this.freeResults[this.freeCurrent++];t.getFirelink={bFlag:!1,win:0},e.viewarray=t,e.userscore=this.freeUserScore,e.winscore=t.win,cc.log("this free times",this.freeData.freeTimes,this.freeData.freeTotal),t.getFreeTime.bFlag&&(this.freeData.freeTotal+=t.getFreeTime.nFreeTime,e.freeCount+=t.getFreeTime.nFreeTime),e.freeCount=this.freeData.freeTotal-this.freeCurrent,e.freeTotal=this.freeData.freeTotal,this.lotteryRes=e,cc.log("send free roll:",e),this.roll(t.nHandCards)}},startFreeGame:function(e){if(this.freeResults=this.lotteryRes.viewarray.frees,this.freeCurrent=0,this.freeUserScore=this.lotteryRes.userscore,this.freeData.freeTotal=this.lotteryRes.viewarray.getFreeTime.nFreeTime,this.audio.stopBgm(),this.freeData.freeGameCoin=0,this.bIsFreeGame=!0,this.ksBtn.interactable=!0,this.lbFreeTimes.string=this.freeData.freeTimes,this.lbFreeTotalTimes.string=this.freeData.freeTotalTimes,this.freeGameNode.active=!1,this.freeBoard.opacity=1,this.mainGameFrame.opacity=255,this.mainGameBoard.opacity=255,this.freeLogoInGame.active=!1,!e)return this.auto=!0,this.audio.playBgm(2),this.mainGameNode.active=!1,this.freeGameNode.active=!0,this.freeGameNode.opacity=255,this.freeBoard.opacity=255,void this.freeGameNode.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){this.sendFreeRoll()}.bind(this))));this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){playEffect("freegameActive"),this.showBonusAnim(),this.witchRun(this.mainGameWitch,"success")}.bind(this)),cc.delayTime(4),cc.callFunc(function(){playEffect("crystalfly"),this.nodeCrystal.active=!0,this.nodeCrystal.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)}.bind(this)),cc.delayTime(2),cc.callFunc(function(){this.mainGameNode.active=!1,this.freeGameNode.active=!0,this.freeGameNode.opacity=1,this.freeGameNode.runAction(cc.fadeTo(1,255)),this.freeLogoInGame.active=!1,this.WitchSpellParticals[4].node.active=!0,this.WitchSpellParticals[4].resetSystem()}.bind(this)),cc.delayTime(2),cc.callFunc(function(){this.nodeCrystal.active=!1}.bind(this)),cc.delayTime(.8),cc.callFunc(function(){this.WitchSpellParticals[4].node.active=!1,this.freeLogoInGame.active=!0,playEffect("freegamedialogout")}.bind(this))))},stopFreeTimes:function(){cc.log("stopFreeTimes freeGameCoin : ",this.freeData.freeGameCoin),this.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){this.aniFlash.play()}.bind(this)),cc.delayTime(.5),cc.callFunc(function(){this.audio.playBgm(0),this.bIsFreeGame=!1,this.ksBtn.interactable=!0,this.freeData.stopFree=!1,this.freeData.freeTimes=0,this.freeGameNode.active=!1,this.mainGameNode.active=!0,this.mainGameBoard.opacity=255,this.mainGameFrame.opacity=255,this.lbFreeWinCoin.string=0,this.showAllPb(),this.freeData.freeGameCoin>100*n[this.bet]&&this.showBigWin(this.freeData.freeGameCoin)}.bind(this))))},showBonusAnim:function(){for(var e=0;e<5;e++)for(var t=this.wheelList[e].roleIdList.length,i=0;i<4;i++){var s=this.wheelList[e].rolePbList[t-5+i];25==this.wheelList[e].roleIdList[t-5+i]?s?(s.getComponent(cc.Animation).play(),s.opacity=255):cc.log("show bonus pb, but pb is:"+s):s.opacity=80}},showSpecialAnim:function(){for(var e=0;e<5;e++)for(var t=this.wheelList[e].roleIdList.length,i=0;i<4;i++)this.isFireball(this.wheelList[e].roleIdList[t-5+i])&&this.wheelList[e].rolePbList[t-5+i].getComponent(cc.Animation).play()},closeBonusAnim:function(){for(var e=0;e<5;e++)for(var t=this.wheelList[e].roleIdList.length,i=0;i<4;i++){var s=this.wheelList[e].rolePbList[t-5+i];s&&(s.opacity=255),25==this.wheelList[e].roleIdList[t-5+i]&&this.wheelList[e].rolePbList[t-5+i].getComponent(cc.Animation).stop()}},isFireball:function(e){var t=!1;return e>=11&&e<=23&&(t=!0),e>25&&(t=!0),t},showAnim:function(e,t,i){var s=e[t].roleIdList.length,a=e[t].rolePbList[s-5+i];a.getChildByName("win")&&(a.getChildByName("win").active=!0),a.getComponent(cc.Animation).play()},clsoeAnim:function(e,t){var i=this.wheelList[e].roleIdList.length,s=this.wheelList[e].rolePbList[i-5+t];if(!this.isFireball(this.wheelList[e].roleIdList[i-5+t])){s.getChildByName("win")&&(s.getChildByName("win").active=!1);var a=s.getComponent(cc.Animation);a&&a.stop()}if(this.bIsFreeGame&&this.freeWheelList[e]&&(i=this.freeWheelList[e].roleIdList.length,s=this.freeWheelList[e].rolePbList[i-5+t],!this.isFireball(this.freeWheelList[e].roleIdList[i-5+t])&&s)){s.getChildByName("win")&&(s.getChildByName("win").active=!1);var n=this.freeWheelList[e].rolePbList[i-5+t].getComponent(cc.Animation);n&&n.stop()}},UPDATE_COIN:function(){this.lblUserCoin&&(this.lblUserCoin.string=Util.formattingCoins(PlayerInfo.getInstant.playerCoin))},checkRollData:function(e){for(var t,s=i(e);!(t=s()).done;)if(t.value>=this.rolePb.length)return!1;return!0},roll:function(e){if(this.checkRollData(e)){this.bIsFreeGame||this.bIsSpecialGame||(this.playerInfo.playerCoin-=50*n[this.bet],this.lblUserCoin.string=(1*this.playerInfo.playerCoin/this.playerInfo.exchangeRate).toFixed(2)),this.setBtnState(1),this.status=1;for(var t=[],i=0;i<5;i++)t[i]=[];for(var s in e)t[s%5][parseInt(s/5)]=e[s];if(this.bonusLinesNum=0,25!=t[0][0]&&25!=t[0][1]&&25!=t[0][2]&&25!=t[0][3]||(this.bonusLinesNum+=1),25!=t[2][0]&&25!=t[2][1]&&25!=t[2][2]&&25!=t[2][3]||(this.bonusLinesNum+=2),this.lotteryRes.viewarray.getFreeTime.bFlag&&(this.bonusLinesNum=255),this.lotteryRes.viewarray.nChangeCards.frees&&(this.bonusLinesNum=0),this.freeData.freeTimes>0||this.freeData.stopFree)for(var a in this.freeWheelList){var l;(l=this.freeWheelList[a]).startRoll.apply(l,t[a])}else for(var c in 255==this.bonusLinesNum&&(playEffect("spellfreegamebg"),this.witchRun(this.mainGameWitch,"tofreegame"),this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){for(var e in this.wheelList)this.wheelList[e].stopImmediately()}.bind(this))))),this.wheelList){var o;(o=this.wheelList[c]).startRoll.apply(o,t[c])}}else alert("\n            \u670d\u52a1\u5668\u83b7\u53d6\u7684\u82b1\u8272\u79cd\u7c7b\u5927\u4e8e\u73b0\u6709\u7684\u82b1\u8272\u79cd\u7c7b\uff01\uff01\uff01\n            \u8bf7\u8054\u7cfb\u670d\u52a1\u5668\u4eba\u5458\u8fdb\u884c\u6570\u636e\u8c03\u6574\uff01")},sendRoll:function(){this.rollIndex++,this.lblWinCoin.string=0,this.lastTouchedTime=Date.now(),this.nodeTip.active=!1,this.speedFrame.active=!1,this.bonusLinesNum=0,this.showAllPb(),cc.find("Canvas/com_help").activeInHierarchy&&(cc.find("Canvas/com_help").active=!1),window.sendNetWorkData("lottery",JSON.stringify({bet:this.bet,nBetList:[50*n[this.bet]]})),this.ksBtn.interactable=!1},stopImmediately:function(){if(!this.auto){for(var e in this.wheelList)this.wheelList[e].stopImmediately();if(this.freeData.freeTimes>0||this.freeData.stopFree)for(var t in this.freeWheelList)this.freeWheelList[t].stopImmediately()}},setPool:function(e){this.winPool=e},refreshPool:function(e){this.winPool=e/this.playerInfo.exchangeRate,cc.log("set winpool to:",this.winPool),e/=2,this.lblCoinList[0].string="$"+(500*e).toFixed(2),this.lblCoinList[1].string="$"+(200*e).toFixed(2),this.lblCoinList[2].string="$"+(50*e).toFixed(2),this.lblCoinList[3].string="$"+(15*e).toFixed(2)},onClickHelpNext:function(){this.helpNum<4&&this.helpNum++;for(var e=0;e<4;e++)this.nodeHelpList[e]&&(this.nodeHelpList[e].active=!1,this.helpNum==e&&(this.nodeHelpList[e].active=!0))},onClickHelpPrev:function(){this.helpNum>0&&this.helpNum--;for(var e=0;e<4;e++)this.nodeHelpList[e]&&(this.nodeHelpList[e].active=!1,this.helpNum==e&&(this.nodeHelpList[e].active=!0))},onClickHelpExit:function(){this.helpUI.active=!1},onClickAudio:function(e){this.audio.pInfo.musicControl=e.isChecked,this.audio.pInfo.musicControl?this.freeData.freeTimes>0?this.audio.playBgm(2):this.bIsSpecialGame?this.audio.playBgm(1):this.audio.playBgm(0):this.audio.stopAudio()}}),cc._RF.pop()},{PlayerInfo:void 0}],WitchNetwork:[function(e,t){"use strict";cc._RF.push(t,"29a74QDWGpC8LyUD0GQRZcc","WitchNetwork"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.mainObj=this.node.getComponent("WitchMain"),this.playerInfo=e("PlayerInfo").getInstant,this.audio=this.node.getComponent("WitchAudio"),this.connected=!1,GameConfig.SubGameMgr.subGameNet=this,window.sendNetWorkData("loginGame",JSON.stringify({}))},addNetEvent:function(e,t){"UPDATE_COIN"==e&&this.mainObj.UPDATE_COIN();var i=null;if("error"==e&&(cc.log("socket error"),this.mainObj.openAlert()),"connect_error"==e&&(cc.log("connect_error"),this.mainObj.openAlert()),"connect_timeout"==e&&(cc.log("connect_timeout"),this.mainObj.openAlert()),"disconnect"==e){if(!this.connected)return;cc.log("disconnect"),this.connected=!1,this.mainObj&&this.mainObj.openAlert()}"loginGameResult"==e&&(i=changeResultJSON_Function(t),cc.log("LoginGameResult:",i),cc.log("LoginGameResult:",i),this.playerInfo.playerCoin=i.Obj.score,this.playerInfo.wins=i.Obj.wins,i.Obj.betList?this.playerInfo.slotBetList=i.Obj.betList:this.playerInfo.slotBetList=null,i.Obj.betDefault?this.playerInfo.slotBetDefault=i.Obj.betDefault:this.playerInfo.slotBetDefault=null,this.connected=!0,1==i.resultid&&this.mainObj.setPool(i.Obj.nGamblingWinPool),this.mainObj.start()),"lotteryResult"==e&&((i=changeResultJSON_Function(t)).ResultCode&&1==i.ResultCode?(this.mainObj.lotteryRes=JSON.parse(JSON.stringify(i.ResultData)),this.mainObj.roll(i.ResultData.viewarray.nHandCards)):(this.mainObj.status=0,this.mainObj.auto||(this.mainObj.ksBtn.getComponent(cc.Button).interactable=!0))),"LoginRoomResult"==e&&(i=changeResultJSON_Function(t),cc.log("LoginRoomResult",i)),"pushGamblingWinPool"==e&&(i=changeResultJSON_Function(t),cc.log("pushGamblingWinPool=>",i),1==i.ResultCode&&this.mainObj.refreshPool(i.nGamblingWinPool)),"LoginfreeCountResult"==e&&(i=changeResultJSON_Function(t),cc.log("LoginfreeCountResult:",i),this.mainObj.delayClick=!1,1==i.ResultCode&&i.freeCount>0&&(this.mainObj.freeData.freeTimes=i.freeCount-1,this.mainObj.freeData.freeTotalTimes=i.freeCount-1,this.mainObj.startFreeGame(!1)))},addEvent:function(){},onDestroy:function(){}}),cc._RF.pop()},{PlayerInfo:void 0}],WitchSpecialWheel:[function(e,t){"use strict";cc._RF.push(t,"3c6e4mPyW9JyKwjWjJUcYhx","WitchSpecialWheel"),cc.Class({extends:cc.Component,properties:{wheelId:0,excludeId:{default:0,displayName:"\u4e0d\u4f1a\u51fa\u73b0\u7684\u6570\u5b57id"}},onLoad:function(){this.audio=cc.director.getScene().getChildByName("Canvas").getChildByName("audio_source").getComponent("WitchAudio"),this.mainObj=cc.director.getScene().getChildByName("Canvas").getComponent("WitchMain"),this.mainObj.specialWheelList[this.wheelId]=this,this.status=0,this.lastResult=[0,0,0,0,0,0,0,0,0,0],this.rolePbList=[],this.roleIdList=[]},start:function(){this.initWheel()},clearPbs:function(){for(var e in this.rolePbList){var t=this.rolePbList[e];t&&cc.isValid(t)&&(t.removeFromParent(),t.destroy())}},initWheel:function(e){this.clearPbs(),this.rolePbList=[],this.roleIdList=[],this.node.removeAllChildren();for(var t=0;t<10;t++){var i=this.getRandomId();t>0&&t<9&&e&&e[String(5*(t-1)+this.wheelId)]&&(i=parseInt(e[String(5*(t-1)+this.wheelId)])+1),this.lastResult[t]=i,this.addRole(i)}this.node.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){this.node.y=855-this.node.height}.bind(this))))},startRoll:function(e){for(var t in this.clearPbs(),this.status=1,this.hasFireball=!1,this.rolePbList=[],this.roleIdList=[],this.node.removeAllChildren(),this.node.zIndex=1,this.node.y=0,this.lastResult)this.lastResult[t]=0==this.lastResult[t]?this.getRandomId():this.lastResult[t],this.addRole(this.lastResult[t]);for(var i=0;i<21;i++)this.addRole(this.getRandomId());for(var s=0;s<8;s++){var a=this.getRandomId();s<8&&e[5*s+this.wheelId]&&(a=parseInt(e[5*s+this.wheelId])+1),this.addRole(a)}this.addRole(this.getRandomId());var n=1+.2*this.wheelId;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(.1+.2*this.wheelId),cc.callFunc(function(){this.node.runAction(cc.sequence(cc.moveTo(n+.2,cc.v2(this.node.x,855-this.node.height)),cc.moveTo(.1,cc.v2(this.node.x,880-this.node.height)),cc.moveTo(.1,cc.v2(this.node.x,855-this.node.height)),cc.callFunc(this.rollCallBack.bind(this))))},this)))},getRandomId:function(){for(var e=0;0==e;)e=(e=Math.floor(9*Math.random()+1))==this.excludeId?0:e;return e},isFireball:function(e){var t=!1;return e>=10&&e<=23&&(t=!0),e>25&&(t=!0),t},addRole:function(e){var t=cc.instantiate(this.mainObj.rolePb[e]);return this.rolePbList.push(t),this.roleIdList.push(e),this.node.addChild(t),this.isFireball(e)&&this.mainObj.setFireballNum(t,e),t},rollCallBack:function(){this.audio.playStopWheel(),this.lastResult=this.roleIdList.slice(-10),this.status=0,this.mainObj.stateCallBack()},stopImmediately:function(){this.lastResult=this.roleIdList.slice(-10),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){this.node.y=855-this.node.height},this))),this.status=0,this.mainObj.stateCallBack()}}),cc._RF.pop()},{}],WitchWheel:[function(e,t){"use strict";cc._RF.push(t,"1babd9tdsJNuZhdoXkcIkdW","WitchWheel"),cc.Class({extends:cc.Component,properties:{wheelId:0,excludeId:{default:0,displayName:"\u4e0d\u4f1a\u51fa\u73b0\u7684\u6570\u5b57id"}},onLoad:function(){this.audio=cc.director.getScene().getChildByName("Canvas").getChildByName("audio_source").getComponent("WitchAudio"),this.mainObj=cc.director.getScene().getChildByName("Canvas").getComponent("WitchMain"),this.mainObj.wheelList[this.wheelId]=this,this.status=0,this.lastResult=[0,0,0,0,0,0],this.rolePbList=[],this.roleIdList=[],this.cardIdList=[]},start:function(){this.initWheel()},initWheel:function(){this.clearPbs(),this.rolePbList=[],this.roleIdList=[],this.node.removeAllChildren();for(var e=0;e<17;e++){var t=this.getRandomId();e<6&&(this.lastResult[e]=t),this.addRole(t)}this.addRole(this.getRandomId()),this.node.y=0,this.mainObj.rollIndex++},startRoll:function(){this.status=1,this.hasFree=!1,this.hasFireball=!1,this.clearPbs(),this.rolePbList=[],this.roleIdList=[],this.node.removeAllChildren(),this.node.zIndex=1,this.node.y=0;var e=0;for(var t in 255==this.mainObj.bonusLinesNum?e=3:2==this.mainObj.bonusLinesNum||3==this.mainObj.bonusLinesNum&&4==this.wheelId&&(e=4.5),this.lastResult)this.lastResult[t]=0==this.lastResult[t]?this.getRandomId():this.lastResult[t],this.addRole(this.lastResult[t]);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];for(var n=0;n<30*(e+1)-6-s.length-1;n++)this.addRole(this.getRandomId());for(var l in this.freePbs=[],this.firelinkPbs=[],this.cardIdList=[].concat(s),s){var c=this.addRole(s[l]);25==s[l]&&(this.hasFree=!0,this.freePbs.push(c)),this.isFireball(s[l])&&(this.hasFireball=!0,this.firelinkPbs.push(c))}this.addRole(this.getRandomId());var o=1*(e+1)+.2*this.wheelId;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(.1+.2*this.wheelId),cc.callFunc(function(){this.node.runAction(cc.sequence(cc.moveTo(o+.2,cc.v2(this.node.x,475-this.node.height)),cc.moveTo(.1,cc.v2(this.node.x,500-this.node.height)),cc.moveTo(.1,cc.v2(this.node.x,475-this.node.height)),cc.callFunc(this.rollCallBack.bind(this))))},this)))},getRandomId:function(){for(var e=0;0==e;)e=(e=this.mainObj.freeData.freeTimes>0||this.mainObj.freeData.stopFree?(e=Math.floor(11*Math.random()+1))%2==0?24:Math.floor(11*Math.random()+1):Math.floor(10*Math.random()+1))==this.excludeId?0:e;return e},updateRoll:function(e,t){if(this.cardIdList&&this.cardIdList.length>0){for(var i in this.clearPbs(),this.rolePbList=[],this.roleIdList=[],this.node.removeAllChildren(),this.cardIdList[e]=t,this.addRole(this.getRandomId()),this.cardIdList)this.addRole(this.cardIdList[i]);this.addRole(this.getRandomId()),this.lastResult=this.roleIdList.slice(-6),this.node.y=0}},clearPbs:function(){for(var e in this.rolePbList){var t=this.rolePbList[e];t&&cc.isValid(t)&&(t.removeFromParent(),t.destroy())}},addRole:function(e){var t=cc.instantiate(this.mainObj.rolePb[e]);return this.rolePbList.push(t),this.roleIdList.push(e),this.node.addChild(t),this.isFireball(e)&&this.mainObj.setFireballNum(t,e),t},isFireball:function(e){var t=!1;return e>=10&&e<=23&&(t=!0),e>25&&(t=!0),t},rollCallBack:function(){if(this.audio.playStopWheel(),this.lastResult=this.roleIdList.slice(-6),this.status=0,this.mainObj.stateCallBack(),this.hasFree){if(1==this.mainObj.bonusLinesNum&&0==this.wheelId||3==this.mainObj.bonusLinesNum)for(var e in this.freePbs)this.freePbs[e].getComponent(cc.Animation).play("free")}else if(this.hasFireball)for(var t in this.firelinkPbs)this.firelinkPbs[t].getComponent(cc.Animation).play("lightningball_appear");3==this.mainObj.bonusLinesNum&&2==this.wheelId&&(this.audio.playSpeed(),this.mainObj.speedFrame.active=!0),4==this.wheelId&&this.mainObj.speedFrame.active&&(this.mainObj.speedFrame.active=!1)},stopImmediately:function(){this.lastResult=this.roleIdList.slice(-6),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){this.node.y=475-this.node.height},this))),this.status=0,4==this.wheelId&&this.mainObj.speedFrame.active&&(this.mainObj.speedFrame.active=!1),this.mainObj.stateCallBack()}}),cc._RF.pop()},{}]},{},["TempAnimation_Witch","WitchAnimationAudio","WitchAudio","WitchFreeWheel","WitchMain","WitchNetwork","WitchSpecialWheel","WitchWheel"]);