window.__require=function e(t,i,o){function a(r,s){if(!i[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){return a(t[r][1][e]||e)},u,u.exports,e,t,i,o)}return i[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({DreamOfMacauAudioMgr:[function(e,t,i){"use strict";cc._RF.push(t,"54a04kuJlJBcbj00rJmlnMC","DreamOfMacauAudioMgr");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("./DreamOfMacauEventMgr"),s=e("./DreamOfMacauResMgr"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resMgr=null,t.eventMgr=null,t._effectStatus=!1,t._curMusicId=null,t._curEffectId=-1,t._musicVolume=1,t._effectVolume=1,t.cacheEffect={},t.audioClips=[],t}return a(t,e),t.prototype.initClips=function(e){this.audioClips=[];for(var t=0;t<e.length;++t)e[t]&&(this.audioClips[e[t].name]=e[t])},t.prototype.onLoad=function(){var e=this;this.resMgr=this.getComponent(s.default),this.eventMgr=this.getComponent(r.default),this.resMgr.loadDir("Music",cc.AudioClip,function(t){e.initClips(t),e.eventMgr.emit(r.EventType.FinishLoadAllClips)});var t=localStorage.getItem("sound");t||(t="on"),this.AudioStatus="on"==t,(t=localStorage.getItem("music"))||(t="on"),this.MusicStatus="on"==t},t.prototype.onDestroy=function(){this.stopAllEffects()},Object.defineProperty(t.prototype,"AudioStatus",{get:function(){return 1==this._effectVolume},set:function(e){this._effectVolume=e?1:0,cc.audioEngine.setEffectsVolume(this._effectVolume),localStorage.setItem("sound",e?"on":"off")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"MusicStatus",{get:function(){return 1==this._musicVolume},set:function(e){this._musicVolume=e?1:0,cc.audioEngine.setMusicVolume(this._musicVolume),localStorage.setItem("music",e?"on":"off")},enumerable:!1,configurable:!0}),t.prototype.playMusic=function(e,t){if(void 0===t&&(t=!0),e){var i=this.audioClips[e];i?this._curMusicId=cc.audioEngine.playMusic(i,t):cc.error("\u6ca1\u6709\u97f3\u6548",e)}},t.prototype.stopMusic=function(){cc.audioEngine.stopMusic()},Object.defineProperty(t.prototype,"EffectStatus",{get:function(){return this._effectStatus},set:function(e){this._effectStatus=e,e||this.stopAllEffects()},enumerable:!1,configurable:!0}),t.prototype.playEffect=function(e,t,i,o){void 0===t&&(t=null),void 0===i&&(i=!1),void 0===o&&(o=!1);var a=this.audioClips[e];a?(this._curEffectId=cc.audioEngine.playEffect(a,i),this.SetCallBack(this._curEffectId,t),this.cacheEffect[e]=this._curEffectId):cc.error("\u6ca1\u6709\u97f3\u6548",e)},t.prototype.SetCallBack=function(e,t){var i=this;cc.audioEngine.setFinishCallback(e,function(){t&&t(),i.clearCache(e)})},t.prototype.clearCache=function(e){for(var t in this.cacheEffect)if(this.cacheEffect.hasOwnProperty(t)&&this.cacheEffect[t]==e){delete this.cacheEffect[t];break}},t.prototype.stopEffect=function(e){e?this.cacheEffect[e]?(cc.audioEngine.stopEffect(this.cacheEffect[e]),delete this.cacheEffect[e]):cc.log("\u6682\u672a\u5b58\u50a8,\u5b58\u50a8\u540e\u53ef\u64cd\u4f5c"):this.stopAllEffects(),this._curEffectId=-1},t.prototype.stopAllEffects=function(){cc.audioEngine.stopAllEffects(),this.cacheEffect={}},n([l,u("DreamOfMacau/AudioMgr")],t)}(cc.Component);i.default=h,cc._RF.pop()},{"./DreamOfMacauEventMgr":"DreamOfMacauEventMgr","./DreamOfMacauResMgr":"DreamOfMacauResMgr"}],DreamOfMacauAudioView:[function(e,t,i){"use strict";cc._RF.push(t,"f88fcE9NFRAn4srObPe7Xpi","DreamOfMacauAudioView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../core/DreamOfMacauViewMgr"),s=e("../core/base/DreamOfMacauViewBase"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.musicBtn=null,t.soundBtn=null,t.quickBtn=null,t.close=null,t.btnList=["musicBtn","soundBtn","quickBtn"],t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.musicBtn=cc.find("musicBtn",this.node).getComponent(cc.Button),this.soundBtn=cc.find("soundBtn",this.node).getComponent(cc.Button),this.quickBtn=cc.find("quickBtn",this.node).getComponent(cc.Button),this.close=cc.find("close",this.node),this.onClick(this.musicBtn.node,this.onClickMusic),this.onClick(this.soundBtn.node,this.onClickSound),this.onClick(this.quickBtn.node,this.onClickQuick),this.onClick(this.close,this.onClickClose),this.onClick(this.node,this.onClickClose,s.ClickEffect.none)},t.prototype.start=function(){this.setIcon(0,this.audioMgr.MusicStatus),this.setIcon(1,this.audioMgr.AudioStatus),this.setIcon(2,this.gameData.isQuick)},t.prototype.show=function(){this.setIcon(0,this.audioMgr.MusicStatus),this.setIcon(1,this.audioMgr.AudioStatus),this.setIcon(2,this.gameData.isQuick)},t.prototype.hide=function(){},t.prototype.setIcon=function(e,t){var i=this.btnList[e],o=cc.find(i+"/on",this.node),a=cc.find(i+"/off",this.node);o.active=t,a.active=!t},t.prototype.onClickClose=function(){this.viewMgr.hideView(r.EnumViewName.AudioView)},t.prototype.onClickSound=function(){this.audioMgr.AudioStatus=!this.audioMgr.AudioStatus,this.setIcon(1,this.audioMgr.AudioStatus)},t.prototype.onClickMusic=function(){this.audioMgr.MusicStatus=!this.audioMgr.MusicStatus,this.setIcon(0,this.audioMgr.MusicStatus)},t.prototype.onClickQuick=function(){this.gameData.changeQuick(!this.gameData.isQuick),this.setIcon(2,this.gameData.isQuick)},n([l,u("DreamOfMacau/AudioView")],t)}(s.default);i.default=h,cc._RF.pop()},{"../core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}],DreamOfMacauAutoView:[function(e,t,i){"use strict";cc._RF.push(t,"03971aN2ptOuK7Sl40zAtdY","DreamOfMacauAutoView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../core/DreamOfMacauViewMgr"),s=e("../core/base/DreamOfMacauViewBase"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeList=[10,20,50,100,200,500],t}return a(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this);for(var i=function(e){var i=o.timeList[e],a=cc.find("num_list/btn_"+e,o.node);cc.find("num_list/btn_"+e+"/label_num",o.node).getComponent(cc.Label).string="x"+i,o.onClick(a,function(){t.onClickNum(i)},0)},o=this,a=0;a<6;a++)i(a)},t.prototype.show=function(){},t.prototype.hide=function(){},t.prototype.start=function(){this.onClick(this.node,this.onClickClose,0)},t.prototype.onClickClose=function(){cc.log("onClickClose"),this.viewMgr.hideView(r.EnumViewName.AutoView)},t.prototype.onClickNum=function(e){this.viewMgr.hideView(r.EnumViewName.AutoView),this.gameData.updateAutoNum(e),this.net.autoPlay(),this.viewMgr.getView(r.EnumViewName.MainView).lockPlayOperation()},n([l,u("DreamOfMacau/AutoView")],t)}(s.default);i.default=h,cc._RF.pop()},{"../core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}],DreamOfMacauBigWinView:[function(e,t,i){"use strict";cc._RF.push(t,"96303BgJctArKWqvDJrbZ6l","DreamOfMacauBigWinView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../comps/DreamOfMacauRollNumber"),s=e("../core/DreamOfMacauEventMgr"),c=e("../core/DreamOfMacauViewMgr"),l=e("../core/base/DreamOfMacauViewBase"),u=cc._decorator,h=u.ccclass,f=(u.property,u.menu),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.win_num=null,t.win_type=null,t.btn_bg=null,t.big_win=null,t.levelCfg={1:{animName:"bw",audio:"Prize_Big",mult:10},2:{animName:"mw",audio:"Prize_Big",mult:20},3:{animName:"smw",audio:"Prize_Big",mult:35}},t._totalWin=0,t._betNum=1,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.btn_bg=cc.find("btn_bg",this.node).getComponent(cc.Button),this.big_win=cc.find("big_win",this.node).getComponent(sp.Skeleton),this.win_type=cc.find("win_type",this.node).getComponent(cc.Sprite),this.win_num=cc.find("win_num",this.node).getComponent(r.default),this.onClick(this.btn_bg.node,this.onClickQuickClose,l.ClickEffect.none)},t.prototype.onDestroy=function(){},t.prototype.start=function(){this.win_type.node.active=!1},t.prototype.show=function(e){var t=this;this._totalWin=e.totalWin/100,this._betNum=e.betNum/100,this.playWin(1),this.audioMgr.playEffect("Prize_Big"),this.btn_bg.interactable=!1,this.scheduleOnce(function(){t.btn_bg.interactable=!0},1.5)},t.prototype.hide=function(){this.unscheduleAllCallbacks(),this.audioMgr.stopEffect("Prize_Big"),this.audioMgr.stopEffect("Prize_BigEnd")},t.prototype.playWin=function(e){var t=this.levelCfg[e],i=this._totalWin/this._betNum;if(!t||t.mult>i)return this.audioMgr.stopEffect("Prize_Big"),this.audioMgr.playEffect("Prize_BigEnd"),void this._autoClose();this.big_win.setCompleteListener(function(){}),this.big_win.setAnimation(0,t.animName+"_show",!1),this.big_win.addAnimation(0,t.animName+"_xunhuan",!0),this.big_win.timeScale=.5,this.showDetail(e)},t.prototype.showDetail=function(e){var t=this,i=this.levelCfg[e],o=i.mult*this._betNum;i=this.levelCfg[e+1];var a=this._totalWin;i&&(a=Math.min(this._totalWin,i.mult*this._betNum)),cc.log("showDetail level, from, to",e,o,a),this.win_num.stopRoll(),o==a?(this.win_num.setNumber(a),this.playWin(e+1)):this.win_num.playRoll(3,o,a,function(){t.playWin(e+1)})},t.prototype.playWinFinish=function(){this.eventMgr.emit(s.EventType.BigWinFinish),this.viewMgr.hideView(c.EnumViewName.BigWinView)},t.prototype.onClickQuickClose=function(){this.btn_bg.interactable=!1;for(var e=1,t=this.levelCfg[e];t&&!(this._totalWin<=t.mult*this._betNum);)e+=1,t=this.levelCfg[e];this.playWin(e),this.win_num.stopRoll(),this.win_num.setNumber(this._totalWin)},t.prototype._autoClose=function(){var e=this;this.scheduleOnce(function(){e.playWinFinish()},2)},n([h,f("DreamOfMacau/BigWinView")],t)}(l.default);i.default=p,cc._RF.pop()},{"../comps/DreamOfMacauRollNumber":"DreamOfMacauRollNumber","../core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","../core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}],DreamOfMacauCardDetailView:[function(e,t,i){"use strict";cc._RF.push(t,"c83309ECdBEXIDLFG4MF9Pn","DreamOfMacauCardDetailView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../comps/DreamOfMacauCard"),s=e("../core/DreamOfMacauEventMgr"),c=e("../core/DreamOfMacauViewMgr"),l=e("../core/base/DreamOfMacauViewBase"),u=cc._decorator,h=u.ccclass,f=(u.property,u.menu),p={1:{isEffect:!1,tipStr:"",payNums:[1,2,3,4]},2:{isEffect:!1,tipStr:"",payNums:[1,2,3,4]},3:{isEffect:!1,tipStr:"",payNums:[1,2,3,4]},4:{isEffect:!1,tipStr:"",payNums:[4,6,8,10]},5:{isEffect:!1,tipStr:"",payNums:[4,6,8,10]},6:{isEffect:!1,tipStr:"",payNums:[6,10,12,15]},7:{isEffect:!1,tipStr:"",payNums:[6,10,12,15]},8:{isEffect:!1,tipStr:"",payNums:[8,15,20,30]},9:{isEffect:!1,tipStr:"",payNums:[10,25,40,60]},10:{isEffect:!1,tipStr:"",payNums:[20,25,50,70]},11:{isEffect:!1,tipStr:"",payNums:[30,40,60,80]},12:{isEffect:!0,tipStr:"WILD symbol substitutes for all symbols except Scatter symbol.",payNums:[]},13:{isEffect:!0,tipStr:"4 Scatter symbols appearing anywhere will trigger the Free Spins Feature with 15 free spins.",payNums:[]}},d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.card=null,t.payout_window=null,t.effect_tips=null,t.pay_tips=null,t.p_nums=[],t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.payout_window=cc.find("payout_window",this.node).getComponent(cc.Layout),this.card=cc.find("payout_window/Card",this.node).getComponent(r.default),this.effect_tips=cc.find("payout_window/effect_tips",this.node).getComponent(cc.Label),this.pay_tips=cc.find("payout_window/pay_tips",this.node),this.p_nums=[];for(var t=0;t<4;t++){cc.find("payout_window/pay_tips/l_num"+t,this.node).getComponent(cc.Label);var i=cc.find("payout_window/pay_tips/p_num"+t,this.node).getComponent(cc.Label);this.p_nums.push(i)}this.onClick(this.node,this.onClickShield,l.ClickEffect.none)},t.prototype.onDestroy=function(){},t.prototype.start=function(){},t.prototype.show=function(e){var t=e.getCardInfo();this.card.setCard({cardID:t.cardID,frameID:t.frameID,gridWeight:t.gridWeight,effectTime:0}),this.payout_window.node.active=!0;var i=0,o=e.node.convertToWorldSpaceAR(cc.v2(0,0));this.node.convertToNodeSpaceAR(o).x<0?(i=e.node.width/-2,this.payout_window.node.anchorX=0,this.payout_window.horizontalDirection=cc.Layout.HorizontalDirection.LEFT_TO_RIGHT):(i=e.node.width/2,this.payout_window.node.anchorX=1,this.payout_window.horizontalDirection=cc.Layout.HorizontalDirection.RIGHT_TO_LEFT);var a=e.node.convertToWorldSpaceAR(cc.v2(i,0)),n=this.payout_window.node.parent.convertToNodeSpaceAR(a);this.payout_window.node.setPosition(n),this.payout_window.node.height=this.card.node.height+20;var r=this.node;cc.log(r.anchorX,r.anchorY,r.width,r.height,r.x,r.y);var s=p[t.cardID];if(this.effect_tips.node.active=s.isEffect,this.pay_tips.active=!s.isEffect,s.isEffect)this.effect_tips.string=s.tipStr;else for(var c=0;c<this.p_nums.length;c++)this.p_nums[c].string=s.payNums[c].toString()},t.prototype.hide=function(){},t.prototype.onClickShield=function(){this.eventMgr.emit(s.EventType.HideCardInfo,{isShow:!1}),this.viewMgr.hideView(c.EnumViewName.CardDetailView)},n([h,f("DreamOfMacau/CardDetailView")],t)}(l.default);i.default=d,cc._RF.pop()},{"../comps/DreamOfMacauCard":"DreamOfMacauCard","../core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","../core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}],DreamOfMacauCard:[function(e,t,i){"use strict";cc._RF.push(t,"6f6e2zuDKdFY7Fz+JzwgJqQ","DreamOfMacauCard");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r,s=e("../config/DreamOfMacauConfigs"),c=e("../core/DreamOfMacauEventMgr"),l=e("../core/base/DreamOfMacauCompBase"),u=e("../utils/DreamOfMacauUtils"),h=cc._decorator,f=h.ccclass,p=h.property,d=h.menu;(function(e){e[e.Normal=0]="Normal",e[e.Detial=1]="Detial"})(r||(r={})),cc.Enum(r);var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.effect=r.Normal,t.cardSDs=[],t.block_bg=null,t.border_scattar=null,t.icon=null,t.symbols=null,t.text=null,t.wild_num=null,t.text_wild_num=null,t.frame=null,t.silver_frame_a=null,t.silver_frame=null,t.gold_frame_a=null,t.gold_frame=null,t.light_effect=null,t.border_effect=null,t.miss_effect=null,t._gridWeight=1,t._effectTime=0,t._frameID=0,t._cardID=1,t._rollerIdx=0,t._cardIdx=0,t._isBlur=!1,t}return a(t,e),Object.defineProperty(t.prototype,"GridWeight",{get:function(){return this._gridWeight},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.block_bg=cc.find("block_bg",this.node).getComponent(cc.Sprite),this.border_scattar=cc.find("border_scattar",this.node).getComponent(sp.Skeleton),this.icon=cc.find("icon",this.node).getComponent(cc.Sprite),this.symbols=cc.find("symbols",this.node).getComponent(sp.Skeleton),this.text=cc.find("text",this.node).getComponent(cc.Label),this.wild_num=cc.find("wild_num",this.node),this.text_wild_num=cc.find("wild_num/text_wild_num",this.node).getComponent(cc.Label),this.frame=cc.find("frame",this.node),this.silver_frame_a=cc.find("silver_frame_a",this.node),this.silver_frame=cc.find("silver_frame",this.node),this.gold_frame_a=cc.find("gold_frame_a",this.node),this.gold_frame=cc.find("gold_frame",this.node),this.light_effect=cc.find("light_effect",this.node).getComponent(sp.Skeleton),this.border_effect=cc.find("border_effect",this.node).getComponent(sp.Skeleton),this.miss_effect=cc.find("miss_effect",this.node).getComponent(sp.Skeleton),this.text.node.active=!1,this.node.getComponent(cc.Button)&&this.node.on("click",this.onClickCard,this)},t.prototype.onDestroy=function(){},t.prototype.start=function(){this.refreshCard()},t.prototype.setCardIdx=function(e,t){this._rollerIdx=e,this._cardIdx=t},t.prototype.setCard=function(e){this._frameID=e.frameID,this._cardID=e.cardID,this._gridWeight=e.gridWeight,this._effectTime=e.effectTime,this.symbols&&this.icon&&this.refreshCard()},t.prototype.getCardInfo=function(){return{cardID:this._cardID,frameID:this._frameID,rollerIdx:this._rollerIdx,cardIdx:this._cardIdx,gridWeight:this._gridWeight}},t.prototype.refreshCard=function(){var e=this,t=s.CardCfg[this._cardID],i=["a","b","c","d"][this._gridWeight-1];this.light_effect.node.active=!1,this.border_effect.node.active=!1,this.miss_effect.node.active=!1,this.border_scattar.node.active=!1,this.node.height=111*this._gridWeight,this._refreshFrame(),this._refreshTime(),this.text.string=this._cardID+","+this._frameID+","+this._gridWeight,this.block_bg.node.active=!0,this.block_bg.node.color=t.blockColor,this.resMgr.loadSpriteAtlas("restore/textures/symbols/symbols",function(o){var a=t.blockSp+"_"+i;e._isBlur&&(a+="_blur");var n=o.getSpriteFrame(a);e.block_bg.spriteFrame=n}),this._changeIcon(this._cardID),this._cardID==s.EnumCardID.scatter||this._cardID==s.EnumCardID.lady||this._cardID==s.EnumCardID.wild?(this.icon.node.active=!1,this.symbols.node.active=!0,this.symbols.setAnimation(0,"idle",!0)):(this.icon.node.active=!0,this.symbols.node.active=!1,this.symbols.setAnimation(0,"idle",!0))},t.prototype._refreshTime=function(){this.wild_num.active=this._cardID==s.EnumCardID.wild&&this._effectTime>0,this.text_wild_num.string=this._effectTime.toString(),this.wild_num.active&&this._effectTime>0&&(this.wild_num.getComponent(cc.Animation).play("wild_num").wrapMode=cc.WrapMode.Loop,this.wild_num.y=[5,60,80][this._gridWeight-2],this.text_wild_num.fontSize=[50,60,70][this._gridWeight-2])},t.prototype._refreshFrame=function(){this.frame.active=this._cardID<s.EnumCardID.dice,1==this._gridWeight?(this.silver_frame_a.active=this._frameID==s.EnumFrameID.Silver,this.silver_frame.active=!1,this.gold_frame_a.active=this._frameID==s.EnumFrameID.Glod,this.gold_frame.active=!1):(this.silver_frame.active=this._frameID==s.EnumFrameID.Silver,this.silver_frame_a.active=!1,this.gold_frame.active=this._frameID==s.EnumFrameID.Glod,this.gold_frame_a.active=!1)},t.prototype._changeIcon=function(e){var t=this,i=s.CardCfg[e];this.resMgr.loadSpriteAtlas(i.atlas,function(e){var o=i.spNames[t._gridWeight-1];t._isBlur&&(o+="_blur");var a=e.getSpriteFrame(o);t.icon.spriteFrame=a}),this.icon.node.scale=i.spScale,this.symbols.node.scale=i.spineScale;var o=i.spineFiles[this._gridWeight-1];this.resMgr.loadSkeletonData("symbols/"+o+"/"+o,function(e){t.symbols&&(t.symbols.skeletonData=e,t.symbols.addAnimation(0,"idle",!0),t._cardID==s.EnumCardID.scatter&&t.border_scattar.node.active&&t.symbols.setAnimation(0,"win",!0))})},t.prototype.pickUp=function(){if(this.symbols.node.active=!0,this.symbols.setAnimation(0,"win",!0),this.border_scattar.node.active=this._cardID==s.EnumCardID.scatter,this._cardID==s.EnumCardID.scatter){var e=["border_scattar_a","border_scattar_b","border_scattar_c","border_scattar_c2"][this._gridWeight-1];this.border_scattar.setAnimation(0,e,!0)}},t.prototype.putDown=function(){this.symbols.node.active=!0,this.symbols.setAnimation(0,"idle",!0),this.border_scattar.node.active=!1},t.prototype.scatterEffect=function(e){var t=this;this.symbols.node.active=!0,this.symbols.setAnimation(0,"win",!0),this.scheduleOnce(function(){e&&e(),t.symbols.setAnimation(0,"idle",!0)},1.5)},t.prototype.playWin=function(e){this.light_effect.node.active=!1,this.border_effect.node.active=!0,this.border_effect.setCompleteListener(function(){e&&e()});var t=["border_a","border_b","border_c","border_d"][this._gridWeight-1];this.border_effect.setAnimation(0,t,!1)},t.prototype.playWinWithRemove=function(e){var t=this;this.audioMgr.playEffect("Del"),this.playWin(function(){t.miss_effect.node.active=!0,t.frame.active=!1,t.silver_frame.active=!1,t.gold_frame.active=!1,t.silver_frame_a.active=!1,t.gold_frame_a.active=!1,t.block_bg.node.active=!1,t.wild_num.active=!1,t.symbols.node.active=!1,t.icon.node.active=!1,t.miss_effect.setCompleteListener(function(){t.node.active=!1,e&&e()}),t.miss_effect.setAnimation(0,"particle",!1)})},t.prototype.playWinWithChange=function(e,t){var i=this;this.playWin(function(){i.light_effect.node.active=!0,i.border_effect.node.active=!1,i.miss_effect.node.active=!1,i.symbols.node.active=!1,i.icon.node.active=!0;var o=u.default.randomElement([1,2,3,4,5,6,7,8,9,10],5);i.icon.node.stopAllActions(),i.audioMgr.playEffect("Tee",function(){},!0),cc.tween(i.icon.node).repeat(5,cc.tween(i.icon.node).call(function(){var e=o.pop();i._changeIcon(e)}).delay(.1)).call(function(){i.audioMgr.stopEffect("Tee"),i.setCard(e),t&&t()}).start();var a=["ps_bg_a","ps_bg_b","ps_bg_c","ps_bg_d"][i._gridWeight-1];i.light_effect.setAnimation(0,a,!0)})},t.prototype.playWinChangeTime=function(e,t){var i=this;this.playWin(function(){i.setCard(e),t&&t()})},t.prototype.onClickCard=function(){this.gameData.isPlaying||(this.audioMgr.playEffect("Click_Card"),this.eventMgr.emit(c.EventType.ClickCard,this))},t.prototype.onSizeChange=function(){},n([p({type:r})],t.prototype,"effect",void 0),n([p([sp.SkeletonData])],t.prototype,"cardSDs",void 0),n([f,d("DreamOfMacau/CardComp")],t)}(l.default);i.default=_,cc._RF.pop()},{"../config/DreamOfMacauConfigs":"DreamOfMacauConfigs","../core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","../core/base/DreamOfMacauCompBase":"DreamOfMacauCompBase","../utils/DreamOfMacauUtils":"DreamOfMacauUtils"}],DreamOfMacauCompBase:[function(e,t,i){"use strict";cc._RF.push(t,"d396f0+FspKYboHzl9/nIfQ","DreamOfMacauCompBase");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../DreamOfMacauNet"),s=e("../../DreamOfMacauData"),c=e("../DreamOfMacauAudioMgr"),l=e("../DreamOfMacauEventMgr"),u=e("../DreamOfMacauResMgr"),h=e("../DreamOfMacauViewMgr"),f=cc._decorator,p=f.ccclass,d=(f.property,f.menu),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameData=null,t.viewMgr=null,t.audioMgr=null,t.net=null,t.eventMgr=null,t.resMgr=null,t}return a(t,e),t.prototype.onLoad=function(){this.gameData=cc.find("Canvas").getComponent(s.default),this.net=cc.find("Canvas").getComponent(r.default),this.viewMgr=cc.find("Canvas").getComponent(h.default),this.audioMgr=cc.find("Canvas").getComponent(c.default),this.eventMgr=cc.find("Canvas").getComponent(l.default),this.resMgr=cc.find("Canvas").getComponent(u.default)},n([p,d("DreamOfMacau/CompBase")],t)}(cc.Component);i.default=_,cc._RF.pop()},{"../../DreamOfMacauData":"DreamOfMacauData","../../DreamOfMacauNet":"DreamOfMacauNet","../DreamOfMacauAudioMgr":"DreamOfMacauAudioMgr","../DreamOfMacauEventMgr":"DreamOfMacauEventMgr","../DreamOfMacauResMgr":"DreamOfMacauResMgr","../DreamOfMacauViewMgr":"DreamOfMacauViewMgr"}],DreamOfMacauConfigs:[function(e,t,i){"use strict";cc._RF.push(t,"3d639zBGJ5KRrYwrrl/xla/","DreamOfMacauConfigs"),Object.defineProperty(i,"__esModule",{value:!0}),i.EnumFrameID=i.RollerNum=i.MaxGridWeight=i.EnumCardID=i.CardCfg=i.AudioCfg=void 0,i.AudioCfg={ClickBtn:{fileName:"Button_On",tip:"\u6309\u952e\u70b9\u51fb"},"":{tip:""}},i.CardCfg={1:{atlas:"restore/textures/symbols/symbols",blockSp:"l_block",blockColor:cc.color(255,255,255,255),spNames:["l_10_a","l_10_b","l_10_c","l_10_d"],spScale:1,spineFiles:["l_10_a_atlas_symbols","l_10_b_atlas_symbols","l_10_c_atlas_symbols","l_10_d_atlas_symbols"],spineScale:1.4},2:{atlas:"restore/textures/symbols/symbols",blockSp:"l_block",blockColor:cc.color(255,255,255,255),spNames:["l_j_a","l_j_b","l_j_c","l_j_d"],spScale:1,spineFiles:["l_j_a_atlas_symbols","l_j_b_atlas_symbols","l_j_c_atlas_symbols","l_j_d_atlas_symbols"],spineScale:1.4},3:{atlas:"restore/textures/symbols/symbols",blockSp:"l_block",blockColor:cc.color(255,255,255,255),spNames:["l_q_a","l_q_b","l_q_c","l_q_d"],spScale:1,spineFiles:["l_q_a_atlas_symbols","l_q_b_atlas_symbols","l_q_c_atlas_symbols","l_q_d_atlas_symbols"],spineScale:1.4},4:{atlas:"restore/textures/symbols/symbols",blockSp:"l_block",blockColor:cc.color(255,255,255,255),spNames:["l_k_a","l_k_b","l_k_c","l_k_d"],spScale:1,spineFiles:["l_k_a_atlas_symbols","l_k_b_atlas_symbols","l_k_c_atlas_symbols","l_k_d_atlas_symbols"],spineScale:1.4},5:{atlas:"restore/textures/symbols/symbols",blockSp:"l_block",blockColor:cc.color(255,255,255,255),spNames:["l_a_a","l_a_b","l_a_c","l_a_d"],spScale:1,spineFiles:["l_a_a_atlas_symbols","l_a_b_atlas_symbols","l_a_c_atlas_symbols","l_a_d_atlas_symbols"],spineScale:1.4},6:{atlas:"restore/textures/symbols/symbols",blockSp:"h_block_back",blockColor:cc.color(37,241,130,255),spNames:["h_dice_a","h_dice_b","h_dice_b","h_dice_b"],spScale:1,spineFiles:["h_dice_a_atlas_symbols","h_dice_a_atlas_symbols","h_dice_a_atlas_symbols","h_dice_a_atlas_symbols"],spineScale:.7},7:{atlas:"restore/textures/symbols/symbols",blockSp:"h_block_back",blockColor:cc.color(37,241,130,255),spNames:["h_chips_a","h_chips_b","h_chips_b","h_chips_b"],spScale:1,spineFiles:["h_chips_a_atlas_symbols","h_chips_a_atlas_symbols","h_chips_a_atlas_symbols","h_chips_a_atlas_symbols"],spineScale:.7},8:{atlas:"restore/textures/symbols/symbols",blockSp:"h_block_back",blockColor:cc.color(12,111,246,255),spNames:["h_cash_a","h_cash_b","h_cash_b","h_cash_b"],spScale:1,spineFiles:["h_cash_a_atlas_symbols","h_cash_a_atlas_symbols","h_cash_a_atlas_symbols","h_cash_a_atlas_symbols"],spineScale:.7},9:{atlas:"restore/textures/symbols/symbols",blockSp:"h_block_back",blockColor:cc.color(12,111,246,255),spNames:["h_watch_a","h_watch_b","h_watch_b","h_watch_b"],spScale:1,spineFiles:["h_watch_a_atlas_symbols","h_watch_a_atlas_symbols","h_watch_a_atlas_symbols","h_watch_a_atlas_symbols"],spineScale:.7},10:{atlas:"restore/textures/symbols/symbols",blockSp:"h_block_back",blockColor:cc.color(202,9,255,255),spNames:["h_car_a","h_car_b","h_car_b","h_car_b"],spScale:1,spineFiles:["h_car_a_atlas_symbols","h_car_a_atlas_symbols","h_car_a_atlas_symbols","h_car_a_atlas_symbols"],spineScale:.7},11:{atlas:"restore/textures/symbols/symbols",blockSp:"h_block_back",blockColor:cc.color(202,9,255,255),spNames:["h_lady_a","h_lady_b","h_lady_c","h_lady_d"],spScale:1,spineFiles:["h_lady_a_atlas_symbols","h_lady_b_atlas_symbols","h_lady_c_atlas_symbols","h_lady_d_atlas_symbols"],spineScale:.7},12:{atlas:"restore/textures/symbols/wild_symbols",blockSp:"h_block_back",blockColor:cc.color(255,255,255,255),spNames:["s_wild_a","s_wild_b","s_wild_c","s_wild_d"],spScale:1,spineFiles:["s_wild_a_atlas_symbols","s_wild_b_atlas_symbols","s_wild_c_atlas_symbols","s_wild_d_atlas_symbols"],spineScale:.7},13:{atlas:"restore/textures/symbols/scatter_symbols",blockSp:"h_block_back",blockColor:cc.color(255,255,255,255),spNames:["s_scatter_a","s_scatter_b","s_scatter_b","s_scatter_b"],spScale:1,spineFiles:["s_scatter_a_atlas_symbols","s_scatter_b_atlas_symbols","s_scatter_b_atlas_symbols","s_scatter_b_atlas_symbols"],spineScale:.7}},function(e){e[e.ten=1]="ten",e[e.j=2]="j",e[e.q=3]="q",e[e.k=4]="k",e[e.a=5]="a",e[e.dice=6]="dice",e[e.chips=7]="chips",e[e.cash=8]="cash",e[e.watch=9]="watch",e[e.car=10]="car",e[e.lady=11]="lady",e[e.wild=12]="wild",e[e.scatter=13]="scatter",e[e.MaxNum=14]="MaxNum"}(i.EnumCardID||(i.EnumCardID={})),i.MaxGridWeight=5,i.RollerNum=7,function(e){e[e.None=0]="None",e[e.Silver=1]="Silver",e[e.Glod=2]="Glod",e[e.MaxNum=3]="MaxNum"}(i.EnumFrameID||(i.EnumFrameID={})),cc._RF.pop()},{}],DreamOfMacauDataBase:[function(e,t,i){"use strict";cc._RF.push(t,"30474NGOcxH1KJJfTIV7bU9","DreamOfMacauDataBase");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../DreamOfMacauEventMgr"),s=cc._decorator,c=s.ccclass,l=(s.property,s.menu),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventMgr=null,t}return a(t,e),t.prototype.onLoad=function(){this.eventMgr=cc.find("Canvas").getComponent(r.default)},n([c,l("DreamOfMacau/DataBase")],t)}(cc.Component);i.default=u,cc._RF.pop()},{"../DreamOfMacauEventMgr":"DreamOfMacauEventMgr"}],DreamOfMacauData:[function(e,t,i){"use strict";cc._RF.push(t,"4be81JHHYdNV5CwDfP/MGik","DreamOfMacauData");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.EnumCardResult=void 0;var r,s=e("./config/DreamOfMacauConfigs"),c=e("./core/DreamOfMacauEventMgr"),l=e("./core/base/DreamOfMacauDataBase"),u=e("./utils/DreamOfMacauUtils"),h=cc._decorator,f=h.ccclass,p=(h.property,h.menu);(function(e){e[e.None=0]="None",e[e.Win=1]="Win",e[e.Change=2]="Change",e[e.ChangeTime=3]="ChangeTime"})(r=i.EnumCardResult||(i.EnumCardResult={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bundleName="",t.BetLineNum=20,t._netViewArray=null,t._originalScore=0,t._score=0,t.betList=[],t.betIdx=0,t._isQuick=!1,t._autoNum=0,t._isPlaying=!1,t._nBet=0,t.histScore=0,t._playFreeTime=0,t.totalFreeTimes=0,t._multiple=1,t.newFreeTime=0,t.roundWin=0,t._curRoundIdx=0,t._curCardDatas=[],t._curCardResults=[],t._winNum=0,t}return a(t,e),Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isQuick",{get:function(){return this._isQuick},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoNum",{get:function(){return this._autoNum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nBet",{get:function(){return this._nBet},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multiple",{get:function(){return this._multiple},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"winNum",{get:function(){return this._winNum},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.bundleName=window.BUNDLE_NAME,this._initData()},t.prototype._initData=function(){this._netViewArray=null,this._nBet=0,this.histScore=0,this._playFreeTime=0,this.totalFreeTimes=0,this._multiple=1,this.roundWin=0,this._curRoundIdx=0,this._curCardDatas=[[{gridWeight:1,cardID:s.EnumCardID.dice,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.q,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.scatter,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.watch,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.a,frameID:s.EnumFrameID.None,effectTime:1}],[{gridWeight:2,cardID:s.EnumCardID.car,frameID:s.EnumFrameID.Silver,effectTime:1},{gridWeight:3,cardID:s.EnumCardID.lady,frameID:s.EnumFrameID.Glod,effectTime:1}],[{gridWeight:1,cardID:s.EnumCardID.q,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.j,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:3,cardID:s.EnumCardID.wild,frameID:s.EnumFrameID.None,effectTime:3}],[{gridWeight:1,cardID:s.EnumCardID.dice,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.dice,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.ten,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.k,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.wild,frameID:s.EnumFrameID.None,effectTime:1}],[{gridWeight:2,cardID:s.EnumCardID.cash,frameID:s.EnumFrameID.Glod,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.wild,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:2,cardID:s.EnumCardID.watch,frameID:s.EnumFrameID.Silver,effectTime:1}],[{gridWeight:1,cardID:s.EnumCardID.chips,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.j,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.scatter,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.cash,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.ten,frameID:s.EnumFrameID.None,effectTime:1}],[{gridWeight:1,cardID:s.EnumCardID.car,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.chips,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.lady,frameID:s.EnumFrameID.None,effectTime:1},{gridWeight:1,cardID:s.EnumCardID.watch,frameID:s.EnumFrameID.None,effectTime:1}]],this._curCardResults=[],this._winNum=0},t.prototype.randomCardData=function(e,t){var i=s.EnumFrameID.None,o=u.default.randomInt(1,s.EnumCardID.MaxNum-1),a=u.default.randomInt(1,t),n=1;return o!=s.EnumCardID.wild||0!=e&&5!=e||(o=s.EnumCardID.ten),o==s.EnumCardID.scatter&&(a=u.default.randomInt(1,2)),6==e&&(a=1),e>=1&&e<=4&&a>=2&&(i=u.default.randomInt(0,s.EnumFrameID.Silver)),o!=s.EnumCardID.scatter&&o!=s.EnumCardID.wild||(i=s.EnumFrameID.None),o==s.EnumCardID.wild&&(n=a),{gridWeight:a,cardID:o,frameID:i,effectTime:n}},t.prototype.setViewarray=function(e,t){this._netViewArray=e,this._originalScore=t,this._nBet=e.bet*this.BetLineNum,this._isPlaying=!0},t.prototype.resetViewarray=function(){this.setViewarray(this._netViewArray,this._originalScore),this.updateScore(this._originalScore),this.eventMgr.emit(c.EventType.BeginGame)},t.prototype._parse2CardData=function(e){var t=0;return e[4]&&e[0]==s.EnumCardID.wild&&(t=e[4]),{gridWeight:e[2],cardID:e[0],frameID:e[1],effectTime:t}},t.prototype._fillCards=function(){var e=this._netViewArray.model.hand.mGamePic[this._curRoundIdx];this.isFreeTime()&&(e=this._netViewArray.model.smallgame[this._playFreeTime-1].mGamePic[this._curRoundIdx]),this._curCardDatas=[];for(var t=0;t<e.length;t++){var i=e[t],o=[];this._curCardDatas.push(o);for(var a=0;a<i.length;a++){var n=i[a];o.push(this._parse2CardData(n))}}},t.prototype._recheckCardResutl=function(){if(this._netViewArray){var e=this._netViewArray.model.hand.mGamePic[this._curRoundIdx];this.isFreeTime()&&(e=this._netViewArray.model.smallgame[this._playFreeTime-1].mGamePic[this._curRoundIdx]),this._curCardResults=[];for(var t=0,i=0;i<e.length;i++){var o=e[i],a=[];this._curCardResults.push(a);for(var n=0;n<o.length;n++){var c=o[n];c[0]==s.EnumCardID.scatter&&(t+=1),1==c[3]?a.push(r.Win):2==c[3]?a.push(r.Change):3==c[3]?a.push(r.ChangeTime):a.push(r.None)}}this.newFreeTime=0,t>=4&&(this.isFreeTime()?this.newFreeTime=this._netViewArray.model.smallgame[this._playFreeTime-1].freeGameCount:this.newFreeTime=this._netViewArray.model.hand.freeGameCount)}},t.prototype._computeRoundWinNum=function(){var e=this._netViewArray.model.hand.mOdds[this._curRoundIdx];this.isFreeTime()&&(e=this._netViewArray.model.smallgame[this._playFreeTime-1].mOdds[this._curRoundIdx]);var t=0;for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t+=e[i][0]);return t*this._nBet/this.BetLineNum*this._multiple},t.prototype.getCardDatasForRoller=function(e){return this._curCardDatas[e]},t.prototype.toNextRound=function(){this._curRoundIdx+=1,this._winNum=0,this._fillCards(),this.eventMgr.emit(c.EventType.ToNextRound,{mult:this._multiple,winScore:this._winNum})},t.prototype.trigerAddSpeedRollerIdx=function(){for(var e=-1,t=0,i=0;i<this._curCardDatas.length-2;i++){for(var o=this._curCardDatas[i],a=0;a<o.length&&(o[a].cardID==s.EnumCardID.scatter&&(t+=1),!(t>=3));a++);if(t>=3){e=i;break}}return e},t.prototype.getChange2CardData=function(e,t){var i=this._netViewArray.model.hand.mGamePic[this._curRoundIdx+1];this.isFreeTime()&&(i=this._netViewArray.model.smallgame[this._playFreeTime-1].mGamePic[this._curRoundIdx+1]);var o=i[e][t];return this._parse2CardData(o)},t.prototype.getCardResults=function(e){return this._curCardResults[e]},t.prototype.computerResult=function(){this._recheckCardResutl();var e=this._computeRoundWinNum();return this._winNum=e,e},t.prototype.addWinNum=function(){this.histScore+=this._winNum,this.roundWin+=this._winNum},t.prototype.playTrigger=function(){this._playFreeTime=0,this.histScore=0,this._multiple=1,this.totalFreeTimes=0,this.newFreeTime=0,this.roundWin=0,this._curRoundIdx=0,this._winNum=0,this._fillCards(),this.eventMgr.emit(c.EventType.PlayTrigger)},t.prototype.collectWinScore=function(){this.updateScore(this._netViewArray.user_score),this._isPlaying=!1,this.eventMgr.emit(c.EventType.CollectWinScore)},t.prototype.remainFreeTime=function(){return this.totalFreeTimes-this._playFreeTime},t.prototype.isFreeTime=function(){return this._playFreeTime>0&&this.totalFreeTimes>0},t.prototype.playNextFree=function(){this._playFreeTime+=1,1==this._playFreeTime&&(this._multiple=1),this.newFreeTime=0,this.roundWin=0,this._curRoundIdx=0,this._winNum=0,this._fillCards(),this.eventMgr.emit(c.EventType.PlayFreeRound,{isFree:!0})},t.prototype.addFreeTime=function(){var e=this.newFreeTime;this.totalFreeTimes+=e,this.newFreeTime=0,this.eventMgr.emit(c.EventType.AddFreeTime,{addTimes:e})},t.prototype.isBigWin=function(){return this.roundWin/this._nBet>10},t.prototype.featureCost=function(){var e=this.betList[this.betIdx];return e=e||0,this.BetLineNum*e*75},t.prototype.getBetListScore=function(){return this.betList[this.betIdx]},t.prototype.addBetScore=function(){this.betIdx+=1,this.betIdx>=this.betList.length&&(this.betIdx=0)},t.prototype.minusBetScore=function(){this.betIdx-=1,this.betIdx<0&&(this.betIdx=this.betList.length-1)},t.prototype.updateAutoNum=function(e){this._autoNum=e,this.eventMgr.emit(c.EventType.UpdateAutoNum,{autoNum:this.autoNum})},t.prototype.changeQuick=function(e){this._isQuick=e,this.eventMgr.emit(c.EventType.ChangeQuick,{isQuick:this.isQuick})},t.prototype.updateScore=function(e){this._score=e,this.eventMgr.emit(c.EventType.UpdateScore)},t.prototype.updateMultiple=function(e){this._multiple=e,this.eventMgr.emit(c.EventType.ChangeMultiple,{mult:this._multiple})},n([f,p("DreamOfMacau/GameData")],t)}(l.default);i.default=d,cc._RF.pop()},{"./config/DreamOfMacauConfigs":"DreamOfMacauConfigs","./core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","./core/base/DreamOfMacauDataBase":"DreamOfMacauDataBase","./utils/DreamOfMacauUtils":"DreamOfMacauUtils"}],DreamOfMacauEventMgr:[function(e,t,i){"use strict";cc._RF.push(t,"c1a95X2loNG4KB922LSmx3O","DreamOfMacauEventMgr");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.EventType=void 0;var r=cc._decorator,s=r.ccclass,c=(r.property,r.menu);(function(e){e[e.EnterGame=0]="EnterGame",e[e.BeginGame=1]="BeginGame",e[e.StartFreeRound=2]="StartFreeRound",e[e.WinNumFinish=3]="WinNumFinish",e[e.TotalWinFinish=4]="TotalWinFinish",e[e.BigWinFinish=5]="BigWinFinish",e[e.RollerFillFinish=6]="RollerFillFinish",e[e.RollerSplitFinish=7]="RollerSplitFinish",e[e.RollerRollFinish=8]="RollerRollFinish",e[e.WinLineFinish=9]="WinLineFinish",e[e.ClickCard=10]="ClickCard",e[e.HideCardInfo=11]="HideCardInfo",e[e.EnableEmergencyStop=12]="EnableEmergencyStop",e[e.EmergencyStop=13]="EmergencyStop",e[e.LotteryError=14]="LotteryError",e[e.UpdateScore=15]="UpdateScore",e[e.ChangeQuick=16]="ChangeQuick",e[e.UpdateAutoNum=17]="UpdateAutoNum",e[e.PlayTrigger=18]="PlayTrigger",e[e.PlayFreeRound=19]="PlayFreeRound",e[e.ChangeMultiple=20]="ChangeMultiple",e[e.ToNextRound=21]="ToNextRound",e[e.CollectWinScore=22]="CollectWinScore",e[e.AddFreeTime=23]="AddFreeTime",e[e.FinishLoadAllClips=24]="FinishLoadAllClips"})(i.EventType||(i.EventType={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.regHandleInfos=new Map,t}return a(t,e),t.prototype.on=function(e,t,i){var o=this.regHandleInfos.get(t);o||(o=[],this.regHandleInfos.set(t,o));for(var a=0;a<o.length;a++){var n=o[a];if(n.target==e&&n.cb==i)return void cc.warn("\u91cd\u590d\u6ce8\u518c\u4e8b\u4ef6")}o.push({target:e,cb:i})},t.prototype.off=function(e,t,i){if(this.regHandleInfos){var o=this.regHandleInfos.get(t);if(o)for(var a=o.length-1;a>=0;a--){var n=o[a];n.target==e&&n.cb==i&&o.splice(a,1)}}},t.prototype.offTarget=function(e){if(this.regHandleInfos)for(var t=Array.from(this.regHandleInfos.keys()),i=0;i<t.length;i++)for(var o=this.regHandleInfos.get(t[i]),a=o.length-1;a>=0;a--)o[a].target==e&&o.splice(a,1)},t.prototype.emit=function(e,t){var i=this.regHandleInfos.get(e);if(i)for(var o=0;o<i.length;o++)i[o].cb(t)},t.prototype.clearAll=function(){this.regHandleInfos.clear()},n([s,c("DreamOfMacau/EventMgr")],t)}(cc.Component);i.default=l,cc._RF.pop()},{}],DreamOfMacauFeatureBuyView:[function(e,t,i){"use strict";cc._RF.push(t,"955e66jZGNDo5jqmW3uxqTa","DreamOfMacauFeatureBuyView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../core/DreamOfMacauViewMgr"),s=e("../core/base/DreamOfMacauViewBase"),c=e("../utils/DreamOfMacauUtils"),l=cc._decorator,u=l.ccclass,h=(l.property,l.menu),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_cancel=null,t.btn_start=null,t.text_cost=null,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.btn_cancel=cc.find("btn_cancel",this.node).getComponent(cc.Button),this.btn_start=cc.find("btn_start",this.node).getComponent(cc.Button),this.text_cost=cc.find("text_cost",this.node).getComponent(cc.Label),this.onClick(this.btn_cancel.node,this.onClickCancel,s.ClickEffect.none),this.onClick(this.btn_start.node,this.onClickStart,s.ClickEffect.none)},t.prototype.hide=function(){},t.prototype.show=function(){this.audioMgr.playEffect("Free_Buy");var e=this.gameData.featureCost();this.text_cost.string=c.default.parseNumber(e/100)},t.prototype.onDestroy=function(){},t.prototype.start=function(){},t.prototype.onClickCancel=function(){this.audioMgr.playEffect("Free_Buy_Exit"),this.viewMgr.hideView(r.EnumViewName.FeatureBuyView)},t.prototype.onClickStart=function(){this.audioMgr.playEffect("Free_Buy_Enter"),this.net.sendLotty(!0),this.viewMgr.hideView(r.EnumViewName.FeatureBuyView)},n([u,h("DreamOfMacau/FeatureBuyView")],t)}(s.default);i.default=f,cc._RF.pop()},{"../core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase","../utils/DreamOfMacauUtils":"DreamOfMacauUtils"}],DreamOfMacauFreeCollectView:[function(e,t,i){"use strict";cc._RF.push(t,"f43beBov9tPaKR+OoZVguki","DreamOfMacauFreeCollectView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../comps/DreamOfMacauRollNumber"),s=e("../core/DreamOfMacauViewMgr"),c=e("../core/base/DreamOfMacauViewBase"),l=cc._decorator,u=l.ccclass,h=(l.property,l.menu),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.window=null,t.big_win=null,t.free_text=null,t.win_text=null,t.btn_collect=null,t.quick_end=null,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.window=cc.find("window",this.node),this.big_win=cc.find("window/big_win",this.node).getComponent(sp.Skeleton),this.free_text=cc.find("window/free_text",this.node).getComponent(cc.Label),this.win_text=cc.find("window/win_text",this.node).getComponent(r.default),this.btn_collect=cc.find("btn_collect",this.node).getComponent(cc.Button),this.quick_end=cc.find("quick_end",this.node).getComponent(cc.Button),this.onClick(this.btn_collect.node,this.onClickCollect),this.onClick(this.quick_end.node,this.onClickQuickEnd)},t.prototype.onDestroy=function(){},t.prototype.start=function(){},t.prototype.show=function(){this.audioMgr.playEffect("Free_Settlement");var e=this.gameData.totalFreeTimes;this.free_text.string=e.toString();var t=this.gameData.histScore/100;this.playShowAnim(t)},t.prototype.hide=function(){this.unscheduleAllCallbacks(),this.audioMgr.stopEffect("Free_Settlement"),this.audioMgr.stopEffect("Free_Settlement_End")},t.prototype.playShowAnim=function(e){var t=this;this.btn_collect.node.active=!1,this.window.active=!0,this.quick_end.node.active=!1,this.big_win.setCompleteListener(function(){t.quick_end.node.active=!0}),this.big_win.setAnimation(0,"tw_show",!1),this.big_win.addAnimation(0,"tw_xunhuan",!0),this.big_win.timeScale=.5,this.win_text.stopRoll(),this.win_text.playRoll(4,0,e,function(){t._showFinalState()})},t.prototype._showFinalState=function(){var e=this.gameData.histScore/100;this.win_text.stopRoll(),this.win_text.setNumber(e);var t=this.gameData.totalFreeTimes;this.free_text.string=t.toString(),this.btn_collect.node.active=!0,this.audioMgr.stopEffect("Free_Settlement"),this.audioMgr.playEffect("Free_Settlement_End"),this._autoClose()},t.prototype.onClickCollect=function(){this.gameData.collectWinScore(),this.viewMgr.hideView(s.EnumViewName.FreeCollectView)},t.prototype.onClickQuickEnd=function(){this._showFinalState()},t.prototype._autoClose=function(){var e=this;this.scheduleOnce(function(){e.onClickCollect()},5)},n([u,h("DreamOfMacau/FreeCollectView")],t)}(c.default);i.default=f,cc._RF.pop()},{"../comps/DreamOfMacauRollNumber":"DreamOfMacauRollNumber","../core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}],DreamOfMacauFreeView:[function(e,t,i){"use strict";cc._RF.push(t,"df6a4O+tJRKKoWLcKgKc1Uw","DreamOfMacauFreeView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../comps/DreamOfMacauRollNumber"),s=e("../core/DreamOfMacauEventMgr"),c=e("../core/DreamOfMacauViewMgr"),l=e("../core/base/DreamOfMacauViewBase"),u=cc._decorator,h=u.ccclass,f=(u.property,u.menu),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.bw_flash=null,t.free_info=null,t.text_free=null,t.bl_desc=null,t.button_start=null,t.roll_num_bg=null,t.roll_num=null,t.freeTime=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.bg=cc.find("bg",this.node),this.bw_flash=cc.find("bw_flash",this.node),this.free_info=cc.find("bg/free_info",this.node),this.text_free=cc.find("bg/free_info/text_free",this.node).getComponent(cc.Label),this.bl_desc=cc.find("bg/bl_desc",this.node),this.button_start=cc.find("bg/button_start",this.node).getComponent(cc.Button),this.roll_num=cc.find("bg/roll_num",this.node).getComponent(r.default),this.roll_num_bg=cc.find("bg/roll_num_bg",this.node),this.button_start.node.on("click",this.onClickStart,this)},t.prototype.onDestroy=function(){},t.prototype.start=function(){},t.prototype.hide=function(){this.unscheduleAllCallbacks(),this.audioMgr.stopEffect("Free_Trigger")},t.prototype.show=function(e){var t=this;this.freeTime=e.freeTime,this.bl_desc.active=!0,this.button_start.node.active=!1,this.roll_num.node.active=!0,this.roll_num_bg.active=!0,this.roll_num_bg.active=!0,this.roll_num_bg.angle=0,this.free_info.active=!0,this.refreshFreeTime(),this.roll_num.node.active=!0,this.roll_num.stopRoll(),this.roll_num.setNumber(0),this.bg.opacity=0,this.bw_flash.scaleX=2,this.bw_flash.scaleY=.5,this.bw_flash.opacity=255,cc.tween(this.bw_flash).to(.33,{scaleX:3,scaleY:5}).call(function(){cc.tween(t.bg).to(.6,{opacity:255}).start()}).to(.33,{scale:1,opacity:0}).call(function(){cc.tween(t.roll_num_bg).repeatForever(cc.tween(t.roll_num_bg).to(1,{angle:-360}).set({angle:0})).start(),t.roll_num.playRoll(3,60,100,function(){t.button_start.node.active=!0,t.roll_num.node.active=!1,t.roll_num_bg.active=!1,t._autoClose()})}).start()},t.prototype.refreshFreeTime=function(){this.text_free.string=this.freeTime.toString()},t.prototype.onClickStart=function(){this.audioMgr.playEffect("Free_Go"),this.eventMgr.emit(s.EventType.StartFreeRound),this.viewMgr.hideView(c.EnumViewName.FreeView)},t.prototype._autoClose=function(){var e=this;this.scheduleOnce(function(){e.onClickStart()},5)},n([h,f("DreamOfMacau/FreeView")],t)}(l.default);i.default=p,cc._RF.pop()},{"../comps/DreamOfMacauRollNumber":"DreamOfMacauRollNumber","../core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","../core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}],DreamOfMacauFreeWonView:[function(e,t,i){"use strict";cc._RF.push(t,"c4db8k+TbtGmqEunSrc4Bvk","DreamOfMacauFreeWonView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../comps/DreamOfMacauRollNumber"),s=e("../core/DreamOfMacauViewMgr"),c=e("../core/base/DreamOfMacauViewBase"),l=cc._decorator,u=l.ccclass,h=(l.property,l.menu),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quick_end=null,t.won_text=null,t.glow=null,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.quick_end=cc.find("quick_end",this.node).getComponent(cc.Button),this.won_text=cc.find("won_text",this.node).getComponent(r.default),this.glow=cc.find("glow",this.node),this.onClick(this.quick_end.node,this.onClickQuickEnd)},t.prototype.onDestroy=function(){},t.prototype.start=function(){},t.prototype.show=function(e){this.won_text.setNumber(e.addTimes);var t=this.glow.getComponent(cc.Animation).play("freewon_glow");t.wrapMode=cc.WrapMode.Loop,t.speed=.2,this._autoClose()},t.prototype.hide=function(){this.unscheduleAllCallbacks()},t.prototype.onClickCollect=function(){this.gameData.playNextFree(),this.viewMgr.hideView(s.EnumViewName.FreeWonView)},t.prototype.onClickQuickEnd=function(){this.onClickCollect()},t.prototype._autoClose=function(){var e=this;this.scheduleOnce(function(){e.onClickCollect()},5)},n([u,h("DreamOfMacau/FreeWonView")],t)}(c.default);i.default=f,cc._RF.pop()},{"../comps/DreamOfMacauRollNumber":"DreamOfMacauRollNumber","../core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}],DreamOfMacauGameBase:[function(e,t,i){"use strict";cc._RF.push(t,"d0cb6oRektIfomAxv4BbNo+","DreamOfMacauGameBase");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../DreamOfMacauNet"),s=e("../../DreamOfMacauData"),c=e("../DreamOfMacauAudioMgr"),l=e("../DreamOfMacauEventMgr"),u=e("../DreamOfMacauResMgr"),h=e("../DreamOfMacauViewMgr"),f=cc._decorator,p=f.ccclass,d=(f.property,f.menu),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameData=null,t.viewMgr=null,t.audioMgr=null,t.net=null,t.eventMgr=null,t.resMgr=null,t}return a(t,e),t.prototype.onLoad=function(){this.gameData=cc.find("Canvas").getComponent(s.default),this.net=cc.find("Canvas").getComponent(r.default),this.viewMgr=cc.find("Canvas").getComponent(h.default),this.audioMgr=cc.find("Canvas").getComponent(c.default),this.eventMgr=cc.find("Canvas").getComponent(l.default),this.resMgr=cc.find("Canvas").getComponent(u.default),cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","cocosChangeOrientation","(I)V",2):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","cocosChangeOrientation:","2"),cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT)},n([p,d("DreamOfMacau/GameBase")],t)}(cc.Component);i.default=_,cc._RF.pop()},{"../../DreamOfMacauData":"DreamOfMacauData","../../DreamOfMacauNet":"DreamOfMacauNet","../DreamOfMacauAudioMgr":"DreamOfMacauAudioMgr","../DreamOfMacauEventMgr":"DreamOfMacauEventMgr","../DreamOfMacauResMgr":"DreamOfMacauResMgr","../DreamOfMacauViewMgr":"DreamOfMacauViewMgr"}],DreamOfMacauGameBoard:[function(e,t,i){"use strict";cc._RF.push(t,"7a841l3hRxIz4WX1wNCFBB4","DreamOfMacauGameBoard");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../core/DreamOfMacauEventMgr"),s=e("../core/base/DreamOfMacauViewBase"),c=e("../utils/DreamOfMacauUtils"),l=cc._decorator,u=l.ccclass,h=l.property,f=l.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.infoSfs=[],t.board_bg=null,t.board_glow=null,t.win_effect=null,t.info_mark=null,t.info=null,t.win=null,t.text_win=null,t.totalwin=null,t.text_totalwin=null,t.multiple=null,t.text_mul=null,t.multwin=null,t.text_win_base=null,t.text_act_mul=null,t.one_more=null,t.one_more_sp=null,t.infoIdx=0,t._boardLv=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.board_bg=cc.find("board_bg",this.node).getComponent(cc.Sprite),this.board_glow=cc.find("board_glow",this.node).getComponent(cc.Animation),this.win_effect=cc.find("win_effect",this.node),this.info_mark=cc.find("info_mark",this.node);var t=cc.find("info_mark/info",this.node);this.info=t.getComponent(cc.Sprite),this.one_more=cc.find("one_more",this.node),this.one_more_sp=cc.find("one_more/one_more_sp",this.node),this.win=cc.find("win",this.node),this.text_win=cc.find("win/text_win",this.node).getComponent(cc.Label),this.totalwin=cc.find("totalwin",this.node),this.text_totalwin=cc.find("totalwin/text_totalwin",this.node).getComponent(cc.Label),this.multiple=cc.find("multiple",this.node),this.text_mul=cc.find("multiple/text_mul",this.node).getComponent(cc.Label),this.multwin=cc.find("multwin",this.node),this.text_win_base=cc.find("multwin/text_win_base",this.node).getComponent(cc.Label),this.text_act_mul=cc.find("multwin/text_act_mul",this.node).getComponent(cc.Label),this.eventMgr.on(this,r.EventType.ChangeMultiple,this.onEventChangeMultiple.bind(this))},t.prototype.start=function(){this.board_glow.node.active=!1,this.win_effect.active=!1,this.multiple.active=!1,this.multwin.active=!1,this.showNextInfo()},t.prototype.show=function(){},t.prototype.hide=function(){},t.prototype.showNextInfo=function(){var e=this;if(this._boardLv=0,this.info_mark.active=!0,this.win.active=!1,this.totalwin.active=!1,this.one_more.active=!1,this.resMgr.loadSpriteAtlas("UI/board/ib_bar",function(t){e.board_bg.spriteFrame=t.getSpriteFrame("ib_bar_a")}),this.infoIdx=(this.infoIdx+1)%this.infoSfs.length,this.info.spriteFrame=this.infoSfs[this.infoIdx],this.info.node.stopAllActions(),this.info.node.width>this.info_mark.width){this.info.node.x=(this.info.node.width-this.info_mark.width)/2;var t=(this.info.node.width+this.info_mark.width)/-2;cc.tween(this.info.node).to(5,{x:t}).call(function(){e.showNextInfo()}).start()}else this.info.node.x=0,cc.tween(this.info.node).delay(5).call(function(){e.showNextInfo()}).start()},t.prototype.showWin=function(e){var t=this;this.info_mark.active=!1,this.win.active=!0,this.totalwin.active=!1,this.one_more.active=!1,this.multwin.active=!1,this.text_win.string=(e/100).toFixed(2),cc.log("winNum:",e),this._playWinEffect(e/this.gameData.nBet);var i=c.default.randomElement(["Prize_01"],1)[0];this.audioMgr.playEffect(i),this.win.scale=.2,this.win.active=!0,cc.tween(this.win).to(.1,{scale:1}).call(function(){t.eventMgr.emit(r.EventType.WinNumFinish)}).start()},t.prototype.showWinWithMult=function(e,t){var i=this;this.info_mark.active=!1,this.win.active=!1,this.totalwin.active=!1,this.one_more.active=!1,this.multwin.active=!1;var o=t/e/100;this.text_win_base.string=o.toFixed(2),this.text_act_mul.string="x"+e.toString(),cc.log("showWinWithMult:",o,e,t);var a=this.multwin.getComponent(cc.Animation);a.once("finished",function(){i.multwin.active=!1,i.showWin(t)}),cc.tween(this.text_mul.node).to(.06,{scale:1.2}).to(.06,{scale:1,opacity:150}).call(function(){i.multwin.active=!0,a.play("multiple_to_board")}).start();var n=c.default.randomElement(["Free_Prize_01","Free_Prize_02","Free_Prize_03","Free_Prize_04","Free_Prize_05","Free_Prize_06","Free_Prize_07","Free_Prize_08","Free_Prize_09","Free_Prize_10","Free_Prize_11","Free_Prize_12","Free_Prize_13","Free_Prize_14","Free_Prize_15","Free_Prize_16"],1)[0];this.audioMgr.playEffect(n)},t.prototype.showTotalWin=function(){var e=this;this.info_mark.active=!1,this.win.active=!1,this.totalwin.active=!0,this.one_more.active=!1,this.audioMgr.playEffect("Prize_01");var t=this.gameData.roundWin/100;this.text_totalwin.string=t.toFixed(2),this._playWinEffect(this.gameData.roundWin/this.gameData.nBet),this.totalwin.scale=.2,this.totalwin.active=!0,cc.tween(this.totalwin).to(.1,{scale:1}).call(function(){e.eventMgr.emit(r.EventType.TotalWinFinish)}).start()},t.prototype._playWinEffect=function(e){var t=this,i=0;3<=e&&e<10?i=1:e>=10&&(i=2),this._boardLv=Math.max(this._boardLv,i);var o=[{spName:"ib_bar_a",animName:"board_glow_a"},{spName:"ib_bar_b",animName:"board_glow_b"},{spName:"ib_bar_c",animName:"board_glow_b"}];this.resMgr.loadSpriteAtlas("UI/board/ib_bar",function(e){var i=e.getSpriteFrame(o[t._boardLv].spName);t.board_bg.spriteFrame=i}),this.board_glow.node.active=!0,this.board_glow.play(o[this._boardLv].animName),this.win_effect.active=!0,this.win_effect.scale=.1,cc.tween(this.win_effect).to(.1,{scale:1}).hide().start()},t.prototype.showOneMore=function(){var e=this;this.info_mark.active=!1,this.win.active=!1,this.totalwin.active=!1,this.one_more.active=!0,this.resMgr.loadSpriteAtlas("UI/board/ib_bar",function(t){e.board_bg.spriteFrame=t.getSpriteFrame("ib_bar_a")}),this.one_more.stopAllActions(),cc.tween(this.one_more).repeatForever(cc.tween.call(function(){e.one_more.getComponent(cc.Animation).play("one_more_effect").speed=.1}).delay(.3)).start(),cc.tween(this.one_more_sp).repeatForever(cc.tween().to(.2,{scale:.8}).to(.2,{scale:1}).delay(.3)).start()},t.prototype.showMultiple=function(){this.multiple.active=!0,this._refreshMultiple()},t.prototype.hideMultiple=function(){this.multiple.active=!1},t.prototype._refreshMultiple=function(){this.text_mul.string="x"+this.gameData.multiple.toFixed(0)},t.prototype.onEventChangeMultiple=function(){this._refreshMultiple(),this.multiple.active&&(this.audioMgr.playEffect("Free_Num_01"),this.text_mul.node.scale=.3,cc.tween(this.text_mul.node).to(.1,{scale:1,opacity:255}).start())},n([h([cc.SpriteFrame])],t.prototype,"infoSfs",void 0),n([u,f("DreamOfMacau/GameBoard")],t)}(s.default);i.default=p,cc._RF.pop()},{"../core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase","../utils/DreamOfMacauUtils":"DreamOfMacauUtils"}],DreamOfMacauGameView:[function(e,t,i){"use strict";cc._RF.push(t,"591f39v6P9PJ5aS4WPGSidG","DreamOfMacauGameView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../DreamOfMacauData"),s=e("../comps/DreamOfMacauRollNumber"),c=e("../comps/DreamOfMacauRoller"),l=e("../core/DreamOfMacauEventMgr"),u=e("../core/base/DreamOfMacauViewBase"),h=e("../utils/DreamOfMacauUtils"),f=cc._decorator,p=f.ccclass,d=(f.property,f.menu),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rollers=[],t.winLineLayer=null,t.normal_bg=null,t.free_bg=null,t.reel_mask=null,t.fast_glow_left=null,t.fast_glow_right=null,t.way_bg=null,t.ways_info=null,t.text_way=null,t.effectCardNum=0,t._scatterCardNum=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.way_bg=cc.find("way_bg",this.node),this.ways_info=cc.find("way_bg/ways_info",this.node),this.text_way=cc.find("way_bg/ways_info/text_way",this.node).getComponent(s.default),this.normal_bg=cc.find("normal_bg",this.node),this.free_bg=cc.find("free_bg",this.node),this.reel_mask=cc.find("reel_mask",this.node),this.rollers=[];for(var t=0;t<7;t++){var i=cc.find("reel_mask/slot_"+t,this.node);this.rollers.push(i.getComponent(c.default))}this.winLineLayer=cc.find("win_line_layer",this.node),this.fast_glow_left=cc.find("win_line_layer/fast_glow_left",this.node),this.fast_glow_right=cc.find("win_line_layer/fast_glow_right",this.node),this.eventMgr.on(this,l.EventType.EmergencyStop,this.eventEmergencyStop.bind(this)),this.eventMgr.on(this,l.EventType.FinishLoadAllClips,this.eventFinishLoadAllClips.bind(this))},t.prototype.start=function(){this.winLineLayer.active=!1,this.free_bg.active=!1,this.normal_bg.active=!0,this.fast_glow_left.active=!1,this.fast_glow_right.active=!1,this.changeStyle(!1)},t.prototype.hide=function(){},t.prototype.show=function(){},t.prototype.initRollers=function(){for(var e=0;e<this.rollers.length;e++){var t=this.gameData.getCardDatasForRoller(e);this.rollers[e].initCards(e,t,this.onRollerFinish.bind(this)),cc.tween(this.rollers[e].node).hide().delay(.1).show().start()}this.refreshWayNum()},t.prototype.changeStyle=function(e){e?this.audioMgr.playMusic("FreeGame_Back_Music"):this.audioMgr.playMusic("Game_Back_Music"),this.free_bg.active=e,this.normal_bg.active=!e},t.prototype.startRoll=function(){var e=this;this.text_way.getComponent(cc.Label).string="...";var t=.05,i=.5;this.gameData.isQuick&&(t=0,i=.01);for(var o=cc.tween(this.node),a=0;a<this.rollers.length;a++){var n=(a+this.rollers.length-1)%this.rollers.length,r=this.rollers[n],s=this.gameData.getCardDatasForRoller(n);r.roll(a*t,s)}this.audioMgr.playEffect("Reel_Spin",function(){},!0),o.call(function(){e.eventMgr.emit(l.EventType.EnableEmergencyStop)}),o.delay(i).call(function(){e.stopRoll(!1)}).start()},t.prototype.stopRoll=function(e){this.audioMgr.stopEffect("Reel_Spin"),this.node.stopAllActions();var t=this.gameData.trigerAddSpeedRollerIdx(),i=this.gameData.isQuick,o=.2;(i||e)&&(o=0);for(var a=cc.tween(this.node).delay(.01),n=function(i){var n=(i+r.rollers.length-1)%r.rollers.length,s=r.rollers[n];s.isRolling()&&(6==n||t<=0||n<=t)&&(e?s.stopImmediate():a.delay(o).call(function(){s.stopRoll()}))},r=this,s=0;s<this.rollers.length;s++)n(s);a.start()},t.prototype.playNormalRoll=function(){return this.winLineLayer.active=!1,this.startRoll(),this.rollers.length},t.prototype.playFreeRoll=function(){return this.audioMgr.playEffect("Free_01"),this.winLineLayer.active=!1,this.startRoll(),this.rollers.length},t.prototype.onRollerFinish=function(e){cc.log("eventRollerRollFinish:",e),this.rollers.length;var t=this.rollers[e];h.default.changeParent(t.node,this.reel_mask);var i=t.pickScatterCards();i.length>0&&this.audioMgr.playEffect("Scatter"),(i=t.pickWildCards()).length>0&&this.audioMgr.playEffect("Wild"),this.refreshWayNum()},t.prototype.showWinCards=function(){var e=this,t=0;this.effectCardNum=0;for(var i=function(i){for(var a=o.rollers[i],n=o.gameData.getCardResults(i),s=0,c=function(c){var u=n[c],f=a.getCard(c);if(!f)return"continue";if(u!=r.EnumCardResult.None){t+=1,o.effectCardNum+=1,h.default.changeParent(f.node,o.winLineLayer),f.pickUp();var p=function(){h.default.changeParent(f.node,a.node),f.putDown(),e.effectCardNum-=1,e.effectCardNum<=0&&(e.winLineLayer.active=!1),e.eventMgr.emit(l.EventType.WinLineFinish)};if(u==r.EnumCardResult.Win)s+=1,f.playWinWithRemove(p);else if(u==r.EnumCardResult.Change){var d=o.gameData.getChange2CardData(i,c-s);f.playWinWithChange(d,p)}else u==r.EnumCardResult.ChangeTime&&(d=o.gameData.getChange2CardData(i,c-s),f.playWinChangeTime(d,p))}},u=0;u<n.length;u++)c(u)},o=this,a=0;a<this.rollers.length;a++)i(a);return this.winLineLayer.active=t>0,t},t.prototype.splitCards=function(){for(var e=0,t=0;t<this.rollers.length;t++){for(var i=this.rollers[t],o=this.gameData.getCardResults(t),a=[],n=0;n<o.length;n++)o[n]==r.EnumCardResult.Win&&a.push(n);a.length>0&&(i.splitCards(a),e+=1)}return e},t.prototype.fillRollers=function(){var e=this;this.audioMgr.playEffect("Down");for(var t=0,i=cc.tween(this.node).delay(.05),o=function(o){for(var n=a.rollers[o],s=a.gameData.getCardResults(o),c=[],l=0;l<s.length;l++)s[l]==r.EnumCardResult.Win&&c.push(l);c.length>0&&(i.delay(.05).call(function(){n.splitCards(c);var t=e.gameData.getCardDatasForRoller(o);n.fill(t)}),t+=1)},a=this,n=this.rollers.length-1;n>=0;n--)o(n);return i.start(),t},t.prototype.splitAndFill=function(){var e=this;this.audioMgr.playEffect("Down");for(var t=0,i=cc.tween(this.node).delay(.05),o=function(o){for(var n=a.rollers[o],s=a.gameData.getCardResults(o),c=[],l=0;l<s.length;l++)s[l]==r.EnumCardResult.Win&&c.push(l);c.length>0&&(i.delay(.05).call(function(){var t=e.gameData.getCardDatasForRoller(o);n.splitAndFill(c,t)}),t+=1)},a=this,n=this.rollers.length-1;n>=0;n--)o(n);return i.start(),t},t.prototype.checkScatterNum=function(){for(var e=0,t=0;t<this.rollers.length;t++){var i=this.rollers[t];i.isRolling()||(e+=i.pickScatterCards().length)}return e},t.prototype.refreshWayNum=function(){for(var e=1,t=0;t<this.rollers.length;t++){var i=this.rollers[t];i.isRolling()||(e*=i.cardCount)}return this.text_way.setNumber(e),e},t.prototype.beginQuick=function(e){this.winLineLayer.active=!0;for(var t=0;t<this.rollers.length-1;t++){var i=this.rollers[t];t<=e?this.pickUpScatterCard(t):h.default.changeParent(i.node,this.winLineLayer)}},t.prototype.finishQuick=function(){this.winLineLayer.active=!1;for(var e=0;e<this.rollers.length-1;e++){for(var t=this.rollers[e],i=t.pickScatterCards(),o=0;o<i.length;o++){var a=i[o];h.default.changeParent(a.node,t.node),a.putDown()}h.default.changeParent(t.node,this.reel_mask)}},t.prototype.effectQuickRoller=function(e){var t=this,i=this.rollers[e];if(i){this.fast_glow_left.active=!0,this.fast_glow_right.active=!0,this.fast_glow_left.stopAllActions(),cc.tween(this.fast_glow_left).delay(1).call(function(){i.cutDownSpeed(),t.fast_glow_left.active=!1,t.fast_glow_right.active=!1}).start(),this.fast_glow_left.x=i.node.x-i.node.width/2+5,this.fast_glow_right.x=i.node.x+i.node.width/2-5;var o=this.fast_glow_left.getComponent(cc.Animation),a=o.play("fast_glow");a.speed=1,a.wrapMode=cc.WrapMode.Loop,(a=(o=this.fast_glow_right.getComponent(cc.Animation)).play("fast_glow")).speed=1,a.wrapMode=cc.WrapMode.Loop}},t.prototype.pickUpScatterCard=function(e){var t=this.rollers[e];if(t)for(var i=t.pickScatterCards(),o=0;o<i.length;o++){var a=i[o];a.pickUp(),h.default.changeParent(a.node,this.winLineLayer)}},t.prototype.putDownScatterCard=function(e,t){for(var i=e;i<=t;i++)for(var o=this.rollers[i],a=o.pickScatterCards(),n=0;n<a.length;n++){var r=a[n];h.default.changeParent(r.node,o.node),r.putDown()}},t.prototype.showAllScatterCard=function(e){var t=this;this._scatterCardNum=0;for(var i=0;i<this.rollers.length-1;i++){for(var o=this.rollers[i],a=o.pickScatterCards(),n=0;n<a.length;n++){var r=a[n];h.default.changeParent(r.node,o.node),this._scatterCardNum+=1,r.scatterEffect(function(){t._scatterCardNum-=1,t._scatterCardNum<=0&&(t.hideAllScatterCard(),e&&e())})}h.default.changeParent(o.node,this.reel_mask)}},t.prototype.hideAllScatterCard=function(){for(var e=0;e<this.rollers.length-1;e++){for(var t=this.rollers[e],i=t.pickScatterCards(),o=0;o<i.length;o++){var a=i[o];h.default.changeParent(a.node,t.node),a.putDown()}h.default.changeParent(t.node,this.reel_mask)}},t.prototype.showShieldLayer=function(){this.winLineLayer.active=!0},t.prototype.hideShieldLayer=function(){this.winLineLayer.active=!1},t.prototype.eventEmergencyStop=function(){this.stopRoll(!0)},t.prototype.eventFinishLoadAllClips=function(){this.free_bg.active?this.audioMgr.playMusic("FreeGame_Back_Music"):this.audioMgr.playMusic("Game_Back_Music")},t.prototype.update=function(e){for(var t=0;t<this.rollers.length;t++){var i=(t+this.rollers.length-1)%this.rollers.length;this.rollers[i].rollUpdate(e)}},n([p,d("DreamOfMacau/GameView")],t)}(u.default);i.default=_,cc._RF.pop()},{"../DreamOfMacauData":"DreamOfMacauData","../comps/DreamOfMacauRollNumber":"DreamOfMacauRollNumber","../comps/DreamOfMacauRoller":"DreamOfMacauRoller","../core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase","../utils/DreamOfMacauUtils":"DreamOfMacauUtils"}],DreamOfMacauGame:[function(e,t,i){"use strict";cc._RF.push(t,"43cfbjBgwNHa7t+qEYXaJ9u","DreamOfMacauGame");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("./config/DreamOfMacauConfigs"),s=e("./core/base/DreamOfMacauGameBase"),c=e("./core/DreamOfMacauEventMgr"),l=e("./core/DreamOfMacauViewMgr"),u=cc._decorator,h=u.ccclass,f=(u.property,u.menu),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rollingNum=0,t.splitingNum=0,t.playingWinNum=!1,t._effectCardNum=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.eventMgr.on(this,c.EventType.EnterGame,this.eventEnterGame.bind(this)),this.eventMgr.on(this,c.EventType.BeginGame,this.eventBeginGame.bind(this)),this.eventMgr.on(this,c.EventType.StartFreeRound,this.eventStartFreeRound.bind(this)),this.eventMgr.on(this,c.EventType.CollectWinScore,this.eventCollectWinScore.bind(this)),this.eventMgr.on(this,c.EventType.BigWinFinish,this.eventBigWinFinish.bind(this)),this.eventMgr.on(this,c.EventType.RollerRollFinish,this.eventRollerRollFinish.bind(this)),this.eventMgr.on(this,c.EventType.RollerFillFinish,this.eventRollerFillFinish.bind(this)),this.eventMgr.on(this,c.EventType.RollerSplitFinish,this.eventRollerSplitFinish.bind(this)),this.eventMgr.on(this,c.EventType.TotalWinFinish,this.eventTotalWinFinish.bind(this)),this.eventMgr.on(this,c.EventType.WinLineFinish,this.eventWinLineFinish.bind(this)),this.eventMgr.on(this,c.EventType.WinNumFinish,this.eventWinNumFinish.bind(this)),this.eventMgr.on(this,c.EventType.ClickCard,this.eventClickCard.bind(this)),this.eventMgr.on(this,c.EventType.HideCardInfo,this.eventHideCardInfo.bind(this)),this.eventMgr.on(this,c.EventType.LotteryError,this.eventLotteryError.bind(this)),this.eventMgr.on(this,c.EventType.PlayFreeRound,this.eventPlayFreeRound.bind(this)),this.eventMgr.on(this,c.EventType.PlayTrigger,this.eventPlayTrigger.bind(this))},t.prototype.start=function(){this.net.sendLoginGame()},t.prototype.onDestroy=function(){this.eventMgr.offTarget(this)},t.prototype._doAddFreeTime=function(){var e=this,t=this.gameData.newFreeTime;if(!(t<=0)){if(this.gameData.totalFreeTimes<=0)return this.audioMgr.playEffect("Free_Trigger"),void this.viewMgr.getView(l.EnumViewName.GameView).showAllScatterCard(function(){e.gameData.addFreeTime(),cc.log("showAllScatterCard finish"),e.viewMgr.showView(l.EnumViewName.FreeView,{freeTime:e.gameData.totalFreeTimes})});this.viewMgr.getView(l.EnumViewName.GameView).showAllScatterCard(function(){e.gameData.addFreeTime(),e.viewMgr.showView(l.EnumViewName.FreeWonView,{addTimes:t})})}},t.prototype._doAddWinNum=function(e){this.gameData.addWinNum();var t=this.viewMgr.getView(l.EnumViewName.GameView);this._effectCardNum=t.showWinCards(),this.playingWinNum=!0;var i=this.gameData.multiple,o=this.viewMgr.getView(l.EnumViewName.GameBoard);i>1?o.showWinWithMult(i,e):o.showWin(e)},t.prototype._endRound=function(){var e=this;if(this.gameData.totalFreeTimes>0){if(this.gameData.remainFreeTime()>0)return void this.scheduleOnce(function(){e.gameData.playNextFree()},.5);this.viewMgr.showView(l.EnumViewName.FreeCollectView)}this.gameData.collectWinScore()},t.prototype._computerRoundResult=function(){var e=this.gameData.computerResult();if(e>0)this._doAddWinNum(e);else{if(this.gameData.roundWin>0)return this.viewMgr.getView(l.EnumViewName.GameBoard).showTotalWin(),void this.viewMgr.getView(l.EnumViewName.MainView).refreshUserInfo();this.gameData.newFreeTime>0?this._doAddFreeTime():this._endRound()}},t.prototype.eventEnterGame=function(){this.viewMgr.getView(l.EnumViewName.GameView).initRollers();var e=this.viewMgr.getView(l.EnumViewName.MainView);e.refreshUserInfo(),e.changeToNormal(),e.unlockPlayOperation(),this.viewMgr.getView(l.EnumViewName.GameBoard).showNextInfo()},t.prototype.eventBeginGame=function(){this.eventHideCardInfo({});var e=this.viewMgr.getView(l.EnumViewName.MainView);this.gameData.autoNum>0?e.changeToAuto():e.changeToNormal(),this.gameData.playTrigger()},t.prototype.eventCollectWinScore=function(){var e=this;if(this.gameData.autoNum>0)this.scheduleOnce(function(){e.net.autoPlay()},.5);else{this.viewMgr.getView(l.EnumViewName.GameView).changeStyle(!1);var t=this.viewMgr.getView(l.EnumViewName.MainView);t.changeToNormal(),t.refreshUserInfo(),t.unlockPlayOperation(),this.viewMgr.getView(l.EnumViewName.GameBoard).hideMultiple()}},t.prototype.eventBigWinFinish=function(){this.gameData.updateAutoNum(0),this.gameData.newFreeTime>0?this._doAddFreeTime():this._endRound()},t.prototype.eventPlayTrigger=function(){var e=this.viewMgr.getView(l.EnumViewName.GameView);this.rollingNum=e.playNormalRoll(),e.changeStyle(!1),this.viewMgr.getView(l.EnumViewName.MainView).refreshUserInfo();var t=this.viewMgr.getView(l.EnumViewName.GameBoard);t.showNextInfo(),t.hideMultiple()},t.prototype.eventStartFreeRound=function(){this.gameData.updateAutoNum(0),this.gameData.playNextFree(),this.viewMgr.getView(l.EnumViewName.MainView).changeToFree(),this.viewMgr.getView(l.EnumViewName.GameView).changeStyle(!0),this.viewMgr.getView(l.EnumViewName.GameBoard).showMultiple()},t.prototype.eventPlayFreeRound=function(){var e=this.viewMgr.getView(l.EnumViewName.GameView);this.rollingNum=e.playFreeRoll(),this.viewMgr.getView(l.EnumViewName.MainView).refreshUserInfo(),this.viewMgr.getView(l.EnumViewName.GameBoard).showNextInfo()},t.prototype.eventRollerRollFinish=function(e){this.rollingNum-=1;var t=this.viewMgr.getView(l.EnumViewName.GameView),i=this.gameData.trigerAddSpeedRollerIdx();if(6!=e&&i>0&&e>=i){e==i?(t.beginQuick(i),this.viewMgr.getView(l.EnumViewName.GameBoard).showOneMore()):(t.pickUpScatterCard(e),this.audioMgr.stopEffect("Reel_Quick"));var o=(e+1)%r.RollerNum;6!=o&&(this.audioMgr.playEffect("Reel_Quick"),t.effectQuickRoller(o))}if(this.rollingNum<=0)return t.finishQuick(),this.viewMgr.getView(l.EnumViewName.MainView).disableEmergencyStop(),void this._computerRoundResult()},t.prototype.eventRollerSplitFinish=function(){if(this.splitingNum-=1,this.splitingNum<=0){var e=this.viewMgr.getView(l.EnumViewName.GameView);e.checkScatterNum()>=3&&this.viewMgr.getView(l.EnumViewName.GameBoard).showOneMore(),this.gameData.toNextRound(),this.rollingNum=e.fillRollers()}},t.prototype.eventRollerFillFinish=function(){this.rollingNum-=1,this.rollingNum<=0&&(this.viewMgr.getView(l.EnumViewName.GameView).refreshWayNum(),this._computerRoundResult())},t.prototype.eventWinLineFinish=function(){this._effectCardNum-=1,this._effectCardNum>0||this._splitCards()},t.prototype.eventWinNumFinish=function(){this.playingWinNum=!1,this.gameData.isFreeTime()&&this.gameData.updateMultiple(this.gameData.multiple+1),this._splitCards()},t.prototype._splitCards=function(){if(!(this._effectCardNum>0||this.playingWinNum)){var e=this.viewMgr.getView(l.EnumViewName.GameView);this.gameData.toNextRound(),this.rollingNum=e.splitAndFill()}},t.prototype.eventTotalWinFinish=function(){if(this.gameData.isBigWin()){var e=this.gameData.nBet,t=this.gameData.roundWin;this.viewMgr.showView(l.EnumViewName.BigWinView,{totalWin:t,betNum:e})}else{if(this.gameData.newFreeTime>0)return void this._doAddFreeTime();this._endRound()}},t.prototype.eventClickCard=function(e){this.viewMgr.getView(l.EnumViewName.GameView).showShieldLayer(),this.viewMgr.showView(l.EnumViewName.CardDetailView,e)},t.prototype.eventHideCardInfo=function(){this.viewMgr.getView(l.EnumViewName.GameView).hideShieldLayer(),this.viewMgr.hideView(l.EnumViewName.CardDetailView)},t.prototype.eventLotteryError=function(e){if(1==e.errorID){Common.showMessage("not enough balance"),this.gameData.autoNum>0&&this.gameData.updateAutoNum(0);var t=this.viewMgr.getView(l.EnumViewName.MainView);t.changeToNormal(),t.unlockPlayOperation()}},n([h,f("DreamOfMacau/Game")],t)}(s.default);i.default=p,cc._RF.pop()},{"./config/DreamOfMacauConfigs":"DreamOfMacauConfigs","./core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","./core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","./core/base/DreamOfMacauGameBase":"DreamOfMacauGameBase"}],DreamOfMacauHelpView:[function(e,t,i){"use strict";cc._RF.push(t,"8b4a0ItyM5NfpSpkzXJXMj/","DreamOfMacauHelpView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../core/DreamOfMacauViewMgr"),s=e("../core/base/DreamOfMacauViewBase"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.btn_close=cc.find("btn_close",this.node).getComponent(cc.Button),this.btn_close.node.on("click",this.onClickClose,this)},t.prototype.hide=function(){},t.prototype.show=function(){},t.prototype.onDestroy=function(){},t.prototype.start=function(){},t.prototype.onClickClose=function(){this.viewMgr.hideView(r.EnumViewName.HelpView)},n([l,u("DreamOfMacau/HelpView")],t)}(s.default);i.default=h,cc._RF.pop()},{"../core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}],DreamOfMacauMainView:[function(e,t,i){"use strict";cc._RF.push(t,"357ccc9kQxHoa3pv6Yspb7r","DreamOfMacauMainView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r,s=e("../comps/DreamOfMacauRollNumber"),c=e("../core/DreamOfMacauEventMgr"),l=e("../core/DreamOfMacauViewMgr"),u=e("../core/base/DreamOfMacauViewBase"),h=e("../utils/DreamOfMacauUtils"),f=cc._decorator,p=f.ccclass,d=(f.property,f.menu);(function(e){e[e.disable=0]="disable",e[e.play=1]="play",e[e.stop=2]="stop"})(r||(r={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.valueInfo=null,t.btn_wallet=null,t.text_wallet=null,t.btn_chip=null,t.text_chip=null,t.btn_hist=null,t.text_hist=null,t.playModel=null,t.btn_stop_auto=null,t.auto_num=null,t.hand_model=null,t.btn_play=null,t.play_effect=null,t.play_glow=null,t.btn_minus=null,t.btn_add=null,t.btn_menu=null,t.btn_auto=null,t.btn_turbo_off=null,t.btn_turbo_on=null,t.btn_buy_feature=null,t.buy_feature_glow=null,t.buy_feature=null,t.buy_feature_press=null,t.btn_home=null,t.btn_help=null,t.freeModel=null,t.free_glow=null,t.free_tip=null,t.last_free_tip=null,t.text_free=null,t._playState=r.play,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.valueInfo=cc.find("value_info",this.node),this.btn_chip=cc.find("value_info/btn_chip",this.node).getComponent(cc.Button),this.text_chip=cc.find("value_info/btn_chip/text_chip",this.node).getComponent(cc.Label),this.btn_wallet=cc.find("value_info/btn_wallet",this.node).getComponent(cc.Button),this.text_wallet=cc.find("value_info/btn_wallet/text_wallet",this.node).getComponent(cc.Label),this.btn_hist=cc.find("value_info/btn_hist",this.node).getComponent(cc.Button),this.text_hist=cc.find("value_info/btn_hist/text_hist",this.node).getComponent(s.default),this.playModel=cc.find("play_model",this.node),this.btn_stop_auto=cc.find("play_model/btn_stop_auto",this.node).getComponent(cc.Button),this.auto_num=cc.find("play_model/btn_stop_auto/auto_num",this.node).getComponent(cc.Label),this.btn_turbo_on=cc.find("play_model/btn_turbo_on",this.node).getComponent(cc.Button),this.hand_model=cc.find("play_model/hand_model",this.node),this.btn_play=cc.find("play_model/hand_model/btn_play",this.node).getComponent(cc.Button),this.play_effect=cc.find("play_model/hand_model/btn_play/play_effect",this.node).getComponent(sp.Skeleton),this.play_glow=cc.find("play_model/hand_model/btn_play/play_glow",this.node).getComponent(cc.Animation),this.play_glow.node.active=!1,this.btn_minus=cc.find("play_model/btn_minus",this.node).getComponent(cc.Button),this.btn_add=cc.find("play_model/btn_add",this.node).getComponent(cc.Button),this.btn_menu=cc.find("play_model/btn_menu",this.node).getComponent(cc.Button),this.btn_auto=cc.find("play_model/btn_auto",this.node).getComponent(cc.Button),this.btn_turbo_off=cc.find("play_model/btn_turbo_off",this.node).getComponent(cc.Button),this.btn_turbo_on=cc.find("play_model/btn_turbo_on",this.node).getComponent(cc.Button),this.btn_buy_feature=cc.find("play_model/btn_buy_feature",this.node).getComponent(cc.Button),this.buy_feature_glow=cc.find("play_model/btn_buy_feature/buy_feature_glow",this.node),this.buy_feature=cc.find("play_model/btn_buy_feature/buy_feature",this.node),this.buy_feature_press=cc.find("play_model/btn_buy_feature/buy_feature_press",this.node),this.btn_home=cc.find("btn_home",this.node).getComponent(cc.Button),this.btn_help=cc.find("btn_help",this.node).getComponent(cc.Button),this.freeModel=cc.find("free_model",this.node),this.free_tip=cc.find("free_model/free_tip",this.node),this.free_glow=cc.find("free_model/free_glow",this.node),this.free_glow.active=!1,this.last_free_tip=cc.find("free_model/last_free_tip",this.node),this.text_free=cc.find("free_model/text_free",this.node).getComponent(cc.Label),this.eventMgr.on(this,c.EventType.UpdateAutoNum,this.eventUpdateAutoNum.bind(this)),this.eventMgr.on(this,c.EventType.ChangeQuick,this.eventChangeQuick.bind(this)),this.eventMgr.on(this,c.EventType.UpdateScore,this.eventUpdateScore.bind(this)),this.eventMgr.on(this,c.EventType.EnableEmergencyStop,this.eventEnableEmergencyStop.bind(this)),this.eventMgr.on(this,c.EventType.AddFreeTime,this.eventAddFreeTime.bind(this))},t.prototype.start=function(){this.onClick(this.btn_wallet.node,this.onClickWallet),this.onClick(this.btn_chip.node,this.onClickChip),this.onClick(this.btn_hist.node,this.onClickHist),this.onClick(this.btn_home.node,this.onClickhome),this.onClick(this.btn_help.node,this.onClickhelp),this.onClick(this.btn_play.node,this.onClickPlay,u.ClickEffect.none),this.onClick(this.btn_minus.node,this.onClickMinus),this.onClick(this.btn_add.node,this.onClickAdd),this.onClick(this.btn_menu.node,this.onClickMenu),this.onClick(this.btn_auto.node,this.onClickAuto),this.onClick(this.btn_turbo_off.node,this.onClickTurboOff),this.onClick(this.btn_turbo_on.node,this.onClickTurboOn),this.onClick(this.btn_buy_feature.node,this.onClickBuyFeature),this.onClick(this.btn_stop_auto.node,this.onClickStopAuto),this.btn_play.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.btn_play.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.refreshTurbo()},t.prototype.hide=function(){},t.prototype.show=function(){},t.prototype.refreshUserInfo=function(){this.refreshUserScore(),this.refreshChip(),this.refreshAutoNum(),this.refreshFreeTime(),this.text_hist.setNumber(this.gameData.histScore/100)},t.prototype.refreshAutoNum=function(){this.auto_num.string=this.gameData.autoNum.toString()},t.prototype.refreshFreeTime=function(){var e=this.gameData.remainFreeTime();this.last_free_tip.active=e<=1,this.free_tip.active=e>1,this.text_free.string=e>1?e.toString():""},t.prototype.refreshChip=function(){var e=this.gameData.getBetListScore();e=e||0;var t=this.gameData.BetLineNum*e;this.text_chip.string=(t/100).toFixed(2)},t.prototype.refreshUserScore=function(){var e=this.gameData.score;this.text_wallet.string=h.default.parseNumber(e/100)},t.prototype.refreshTurbo=function(){this.btn_turbo_off.node.active=!1,this.btn_turbo_on.node.active=!1},t.prototype.changeToNormal=function(){this.freeModel.active=!1,this.playModel.active=!0,this.valueInfo.setPosition(0,-394),this.hand_model.active=!0,this.btn_play.node.active=!0,this.btn_stop_auto.node.active=!1,this.auto_num.node.active=!1},t.prototype.changeToFree=function(){this.freeModel.active=!0,this.playModel.active=!1,this.valueInfo.setPosition(0,-631)},t.prototype.changeToAuto=function(){this.freeModel.active=!1,this.playModel.active=!0,this.valueInfo.setPosition(0,-394),this.hand_model.active=!1,this.btn_play.node.active=!1,this.btn_stop_auto.node.active=!0,this.auto_num.node.active=!0},t.prototype.disableEmergencyStop=function(){this._playState=r.disable,this.btn_play.interactable=!1,this.play_effect.setAnimation(0,"spin_stop2",!1)},t.prototype.lockPlayOperation=function(){this._playState=r.disable,this.btn_play.interactable=!1,this.play_effect.setAnimation(0,"spin_stop2",!1),this.btn_buy_feature.interactable=!1,this.buy_feature_glow.active=!1,this.buy_feature.active=!1,this.buy_feature_press.active=!0,this.btn_minus.interactable=!1,this.btn_minus.node.opacity=150,this.btn_add.interactable=!1,this.btn_add.node.opacity=150,this.btn_auto.interactable=!1,this.btn_auto.node.opacity=150},t.prototype.unlockPlayOperation=function(){this._playState=r.play,this.btn_play.interactable=!0,this.play_effect.setAnimation(0,"spin_idle",!0),this.play_effect.timeScale=.2,this.btn_buy_feature.interactable=!0,this.buy_feature_glow.active=!0,this.buy_feature.active=!0,this.buy_feature_press.active=!1,this.btn_minus.interactable=!0,this.btn_minus.node.opacity=255,this.btn_add.interactable=!0,this.btn_add.node.opacity=255,this.btn_auto.interactable=!0,this.btn_auto.node.opacity=255},t.prototype.onClickWallet=function(){cc.log("onClickWallet")},t.prototype.onClickChip=function(){cc.log("onClickChip")},t.prototype.onClickHist=function(){cc.log("onClickHist")},t.prototype.onClickhome=function(){cc.log("onClickhome"),Common.backHall("Are you sure you want to leave the game?",function(){})},t.prototype.onClickhelp=function(){cc.log("onClickhelp"),this.viewMgr.showView(l.EnumViewName.HelpView)},t.prototype.onClickPlay=function(){var e=this;cc.log("onClickPlay",this._playState),this._playState==r.play?(cc.log("\u5f00\u59cb"),this._playState=r.disable,this.audioMgr.playEffect("Spin_Button_Sound"),this.lockPlayOperation(),this.play_effect.setCompleteListener(function(t){"spin_click"==t.animation.name&&(e.play_effect.addAnimation(0,"spin_idle",!0),e.play_effect.timeScale=.2)}),this.play_effect.setAnimation(0,"spin_click",!0),this.play_effect.timeScale=.5,this.net.sendLotty()):this._playState==r.stop&&(cc.log("\u5feb\u901f\u505c\u6b62"),this.audioMgr.playEffect("Stop_Button_Sound"),this.disableEmergencyStop(),this.eventMgr.emit(c.EventType.EmergencyStop))},t.prototype.onMouseEnter=function(){cc.log("onMouseEnter"),this.play_glow.node.active=!0;var e=this.play_glow.play("sb_hover_shine");e.wrapMode=cc.WrapMode.Loop,e.speed=.5},t.prototype.onMouseLeave=function(){this.play_glow.node.active=!1},t.prototype.onClickMinus=function(){cc.log("onClickMinus"),this.gameData.minusBetScore(),this.refreshChip()},t.prototype.onClickAdd=function(){cc.log("onClickAdd"),this.gameData.addBetScore(),this.refreshChip()},t.prototype.onClickMenu=function(){cc.log("onClickMenu"),this.viewMgr.showView(l.EnumViewName.AudioView)},t.prototype.onClickAuto=function(){cc.log("onClickAuto"),this.viewMgr.showView(l.EnumViewName.AutoView)},t.prototype.onClickStopAuto=function(){cc.log("onClickStopAuto"),this.audioMgr.playEffect("Stop_Button_Sound"),this.gameData.updateAutoNum(0)},t.prototype.onClickTurboOff=function(){cc.log("onClickTurboOff"),this.gameData.changeQuick(!0)},t.prototype.onClickTurboOn=function(){cc.log("onClickTurboOn"),this.gameData.changeQuick(!1)},t.prototype.onClickBuyFeature=function(){cc.log("onClickBuyFeature"),this.viewMgr.showView(l.EnumViewName.FeatureBuyView)},t.prototype.eventUpdateAutoNum=function(){this.refreshAutoNum()},t.prototype.eventChangeQuick=function(){this.refreshTurbo()},t.prototype.eventUpdateScore=function(){this.refreshUserScore()},t.prototype.eventEnableEmergencyStop=function(){this._playState=r.stop,this.btn_play.interactable=!0},t.prototype.eventAddFreeTime=function(){var e=this;this.refreshFreeTime(),this.free_glow.active=!0,this.free_glow.getComponent(cc.Animation).play("main_free_glow").wrapMode=cc.WrapMode.Loop,cc.tween(this.free_glow).delay(.5).call(function(){e.free_glow.active=!1}).start()},n([p,d("DreamOfMacau/MainView")],t)}(u.default);i.default=_,cc._RF.pop()},{"../comps/DreamOfMacauRollNumber":"DreamOfMacauRollNumber","../core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","../core/DreamOfMacauViewMgr":"DreamOfMacauViewMgr","../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase","../utils/DreamOfMacauUtils":"DreamOfMacauUtils"}],DreamOfMacauNetBase:[function(e,t,i){"use strict";cc._RF.push(t,"e0f63C+m29N8YMzKMyw1LYw","DreamOfMacauNetBase");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../../../Script/mgr/GameMgr"),s=e("../../DreamOfMacauData"),c=e("../DreamOfMacauEventMgr"),l=cc._decorator,u=l.ccclass,h=(l.property,l.menu),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameData=null,t.eventMgr=null,t._cmdHandles=new Map,t}return a(t,e),t.prototype.onLoad=function(){this.gameData=cc.find("Canvas").getComponent(s.default),this.eventMgr=cc.find("Canvas").getComponent(c.default),this.regCmdHandle("connect_error",this.connect_error.bind(this)),this.regCmdHandle("connect_timeout",this.connect_timeout.bind(this)),this.regCmdHandle("disconnect",this.disconnect.bind(this)),GameConfig.SubGameMgr.subGameNet=this},t.prototype.regCmdHandle=function(e,t){this._cmdHandles.set(e,t)},t.prototype.send=function(e,t){void 0===t&&(t={}),r.default.instance.sendGameData(GameConfig.curGameId,e,JSON.stringify(t))},t.prototype.addNetEvent=function(e,t){var i=null;if(t&&(i=JSON.parse(t)),"UPDATE_COIN"!=e)if("error"!=e){var o=this._cmdHandles.get(e);o?o(i):cc.error("\u6ca1\u6ce8\u518c\u6d88\u606f\u5904\u7406",e)}else cc.log("socket error")},t.prototype.connect_error=function(){Common.backHall("The Internet is lost!Please login again!",function(){})},t.prototype.connect_timeout=function(){},t.prototype.disconnect=function(){Common.backHall("The Internet is lost!Please login again!",function(){})},n([u,h("DreamOfMacau/NetBase")],t)}(cc.Component);i.default=f,cc._RF.pop()},{"../../../../../Script/mgr/GameMgr":void 0,"../../DreamOfMacauData":"DreamOfMacauData","../DreamOfMacauEventMgr":"DreamOfMacauEventMgr"}],DreamOfMacauNet:[function(e,t,i){"use strict";cc._RF.push(t,"8320fnuXF1CxKlbqkAGhVFM","DreamOfMacauNet");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("./core/DreamOfMacauEventMgr"),s=e("./core/base/DreamOfMacauNetBase"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._costScore=0,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.regCmdHandle("loginGameResult",this.loginGameResult.bind(this)),this.regCmdHandle("lotteryResult",this.lotteryResult.bind(this))},t.prototype.sendLoginGame=function(){this.send("loginGame",{})},t.prototype.loginGameResult=function(e){var t;if(1==e.resultid){var i=e.Obj;if(i.betList)for(var o=0;o<i.betList.length;++o){var a=i.betList[o];this.gameData.betList.push(a),a==i.betDefault&&(this.gameData.betIdx=o)}else(t=this.gameData.betList).push.apply(t,[.01,.02,.05,.1,.2,.3,.4,.6,1,2,5,10,20,30,50]),this.gameData.betIdx=0;this.gameData.updateScore(i.score),this.eventMgr.emit(r.EventType.EnterGame)}else this.backHall("The login failure! Please login again!")},t.prototype.autoPlay=function(){var e=this.gameData.autoNum;e>0&&(this.gameData.updateAutoNum(e-1),this.sendLotty(!1))},t.prototype.sendLotty=function(e){void 0===e&&(e=!1);var t,i=this.gameData.getBetListScore();if(t=e?this.gameData.featureCost():i*this.gameData.BetLineNum,this.gameData.score<t)this.eventMgr.emit(r.EventType.LotteryError,{errorID:1,errMsg:"\u79ef\u5206\u4e0d\u591f"});else{this._costScore=t;var o=[i];this.send("lottery",{bet:i,nBetList:o,isBuyFree:e})}},t.prototype.lotteryResult=function(e){if(e.ResultCode&&1==e.ResultCode){var t=e.ResultData.viewarray;this.gameData.setViewarray(t,this.gameData.score-this._costScore),this.gameData.updateScore(this.gameData.score-this._costScore),this.eventMgr.emit(r.EventType.BeginGame)}else this.backHall("The Internet is lost! Please login again!")},t.prototype.backHall=function(e){e||(e="Are you sure you want to leave the game?"),Common.backHall(e,function(){})},n([l,u("DreamOfMacau/GameNet")],t)}(s.default);i.default=h,cc._RF.pop()},{"./core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","./core/base/DreamOfMacauNetBase":"DreamOfMacauNetBase"}],DreamOfMacauPreloadView:[function(e,t,i){"use strict";cc._RF.push(t,"a3390OTuzJNtYxpMxPrHTsu","DreamOfMacauPreloadView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../core/base/DreamOfMacauViewBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.preloadAsset=[],t.cardSpineAsset=[],t.cardIconAtlas=[],t}return a(t,e),t.prototype.onLoad=function(){},t.prototype.show=function(){},t.prototype.hide=function(){},n([l([cc.Asset])],t.prototype,"preloadAsset",void 0),n([l([sp.SkeletonData])],t.prototype,"cardSpineAsset",void 0),n([l([cc.SpriteAtlas])],t.prototype,"cardIconAtlas",void 0),n([c,u("DreamOfMacau/PreloadView")],t)}(r.default);i.default=h,cc._RF.pop()},{"../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}],DreamOfMacauResMgr:[function(e,t,i){"use strict";cc._RF.push(t,"d80a1pkz6RMmJYOPd+kflU4","DreamOfMacauResMgr");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=r.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.preloadAsset=[],t.cacheAsset=new Map,t.bundleName="1127",t}return a(t,e),t.prototype.onLoad=function(){cc.assetManager.bundles.has(this.bundleName)&&(this.bundle=cc.assetManager.getBundle(this.bundleName)),this._preLoadAsset()},t.prototype._preLoadAsset=function(){for(var e=0;e<this.preloadAsset.length;e++){var t=this.preloadAsset[e],i=this.bundle.getAssetInfo(t._uuid);this._setCacheAsset(i.path,t),cc.log("name:"+t.name+"\uff0c \n nativeUrl:"+t.nativeUrl+",",i)}},t.prototype._getCacheAsset=function(e,t){if(this.cacheAsset.has(e)){var i=this.cacheAsset.get(e);if(i.asset instanceof t)return i.asset;cc.warn("\u6ca1\u6709\u7f13\u5b58\u5230\u8d44\u6e90",e)}},t.prototype._setCacheAsset=function(e,t){var i=this.cacheAsset.get(e);i?(i.asset=t,i.cacheTime=(new Date).getTime()):(i={path:e,asset:t,cacheTime:(new Date).getTime()},this.cacheAsset.set(e,i))},t.prototype.loadAudioClip=function(e,t){var i=this,o="Music/"+e,a=this._getCacheAsset(o,cc.AudioClip);if(a)return this._setCacheAsset(o,a),void(t&&t(a));this.bundle.load(o,cc.AudioClip,function(e,a){if(e)return cc.log("=========load AudioClip err",e),void Common.showMessage("Load bundle "+i.bundleName+" >> "+o+" fail");i._setCacheAsset(o,a),t&&t(a)})},t.prototype.loadSpriteAtlas=function(e,t){var i=this,o=this._getCacheAsset(e,cc.SpriteAtlas);if(o)return this._setCacheAsset(e,o),void(t&&t(o));this.bundle.load(e,cc.SpriteAtlas,function(o,a){if(o)return cc.log("=========load SpriteAtlas err",o),void Common.showMessage("Load bundle "+i.bundleName+" >> "+e+" fail");i._setCacheAsset(e,a),t&&t(a)})},t.prototype.loadSprite=function(e,t){var i=this,o=this._getCacheAsset(e,cc.SpriteFrame);if(o)return this._setCacheAsset(e,o),void(t&&t(o));this.bundle.load(e,cc.SpriteFrame,function(o,a){if(o)return cc.log("=========load SpriteFrame err",o),void Common.showMessage("Load bundle "+i.bundleName+" >> "+e+" fail");i._setCacheAsset(e,a),t&&t(a)})},t.prototype.loadDir=function(e,t,i){var o=this;this.bundle.loadDir(e,t,function(){},function(t,a){if(t)return cc.log("=========load Dir err",t),void Common.showMessage("Load bundle "+o.bundleName+" >> "+e+" fail");i&&i(a)})},t.prototype.loadPrefab=function(e,t){var i=this,o=this._getCacheAsset(e,cc.Prefab);if(o)return this._setCacheAsset(e,o),void(t&&t(o));this.bundle.load(e,cc.Prefab,function(o,a){if(o)return cc.log("=========load Prefab err",o),void Common.showMessage("Load bundle "+i.bundleName+" >> "+e+" fail");i._setCacheAsset(e,a),t&&t(a)})},t.prototype.loadSkeletonData=function(e,t){var i=this,o=this._getCacheAsset(e,sp.SkeletonData);if(o)return this._setCacheAsset(e,o),void(t&&t(o));this.bundle.load(e,sp.SkeletonData,function(o,a){if(o)return cc.log("=========load skeleton err",o),void Common.showMessage("Load bundle "+i.bundleName+" >> "+e+" fail");i._setCacheAsset(e,a),t&&t(a)})},n([c([cc.Asset])],t.prototype,"preloadAsset",void 0),n([c],t.prototype,"bundleName",void 0),n([s,l("DreamOfMacau/ResMgr")],t)}(cc.Component);i.default=u,cc._RF.pop()},{}],DreamOfMacauRollNumber:[function(e,t,i){"use strict";cc._RF.push(t,"824a0mffgdFyYJgrbDJs7K1","DreamOfMacauRollNumber");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=r.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numLabel=null,t.isParse=!1,t.isInt=!1,t.tween=null,t}return a(t,e),t.prototype.onLoad=function(){},t.prototype.setNumber=function(e){this.numLabel.string=this.parseNum(e)},t.prototype.playRoll=function(e,t,i,o){var a=this;t!=i?e<=0?o&&o():(this.tween=cc.tween(this.numLabel.node).to(e,{scaleZ:1},{progress:function(e,o,n,r){var s;return s=a.isInt?Math.floor(t+(i-t)*r):Math.floor(100*(t+(i-t)*r))/100,a.numLabel.string=a.parseNum(s),e+(o-e)*r}}),this.tween.call(function(){a.numLabel.string=a.parseNum(i),a.tween=null,o&&o()}).start()):o&&o()},t.prototype.stopRoll=function(){this.tween&&(this.tween.stop(),this.tween=null)},t.prototype.parseNum=function(e){return this.isInt&&(e=Math.floor(e)),this.isParse?this.parseCoin(e):this.isInt?e.toString():e.toFixed(2)},t.prototype.parseCoin=function(e){if(e<1e3)return e.toFixed(2);var t=Math.floor(e).toString(),i="",o=e.toString().split(".")[1];for(o?1==o.toString().length&&(o+="0"):o="00";t.length>3;)i=","+t.slice(-3)+i,t=t.slice(0,t.length-3);return t&&(i=t+i),i+"."+o},n([c(cc.Label)],t.prototype,"numLabel",void 0),n([c()],t.prototype,"isParse",void 0),n([c()],t.prototype,"isInt",void 0),n([s,l("DreamOfMacau/RollNumber")],t)}(cc.Component);i.default=u,cc._RF.pop()},{}],DreamOfMacauRoller:[function(e,t,i){"use strict";cc._RF.push(t,"e5d93gmvbdGv5r5j+J1ozJZ","DreamOfMacauRoller");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../config/DreamOfMacauConfigs"),s=e("../core/DreamOfMacauEventMgr"),c=e("../core/base/DreamOfMacauCompBase"),l=e("./DreamOfMacauCard"),u=cc._decorator,h=u.ccclass,f=u.property,p=u.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.template=null,t.intervalVec=cc.v2(0,1),t.isHorizontal=!1,t.initialVelocity=2e3,t.acceleratedSpeed=4e3,t.gridNum=5,t._rollerIdx=-1,t._cards=[],t._finishCB=null,t._cardDatas=[],t._speed=0,t._addSpeed=!1,t._cutSpeed=!1,t._delayRoll=0,t}return a(t,e),Object.defineProperty(t.prototype,"cardCount",{get:function(){return this._cards.length},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){},t.prototype.getCard=function(e){return this._cards[e]},t.prototype.pickCards=function(e){for(var t=[],i=0;i<this._cards.length;i++){var o=this._cards[i];o.getCardInfo().cardID==e&&t.push(o)}return t},t.prototype.pickScatterCards=function(){for(var e=[],t=0;t<this._cards.length;t++){var i=this._cards[t];i.getCardInfo().cardID==r.EnumCardID.scatter&&e.push(i)}return e},t.prototype.pickWildCards=function(){for(var e=[],t=0;t<this._cards.length;t++){var i=this._cards[t];i.getCardInfo().cardID==r.EnumCardID.wild&&e.push(i)}return e},t.prototype.initCards=function(e,t,i){this._rollerIdx=e,this._finishCB=i;for(var o=0;o<this._cards.length;o++)this._cards[o].node.destroy();this._cards=[],this._resetCards(t),this.resetAllItemPos(!1,function(){})},t.prototype.fill=function(e){for(var t=this,i=0,o=0;o<e.length;o++){var a=e[o];if(f=this._cards[o])f.setCardIdx(this._rollerIdx,o),f.setCard(a);else{var n=this.pushCard(a);this.isHorizontal?(i+=n.width/2,n.setPosition(this.node.width+i,0),i+=n.width/2):(i+=n.height/2,n.setPosition(0,this.node.height+i),i+=n.height/2)}}var r=0,c=0;this.isHorizontal?r=10:c=10;var l=this._computerAllItemPos(),u=0,h=0;for(o=0;o<this._cards.length;o++){var f=this._cards[o],p=l[o];p.y==f.node.y&&p.x==f.node.x||(h+=1,f.node.stopAllActions(),cc.tween(f.node).delay(.01*h).to(.1,{x:p.x,y:p.y}).to(.08,{x:p.x+r,y:p.y+c}).to(.08,{x:p.x,y:p.y}).start(),u=.3)}this.scheduleOnce(function(){t.eventMgr.emit(s.EventType.RollerFillFinish,t._rollerIdx)},u)},t.prototype.splitCards=function(e){for(var t=this,i=0;i<e.length;i++){var o=e[i];(u=this._cards[o]).node.active=!1}for(i=0;i<this._cards.length;i++)0==(u=this._cards[i]).node.active&&(u.node.destroy(),this._cards.splice(i,1),i-=1);var a=0,n=0;this.isHorizontal?a=10:n=10;var r=this._computerAllItemPos(),c=0,l=0;for(i=0;i<this._cards.length;i++){var u=this._cards[i],h=r[i];h.y==u.node.y&&h.x==u.node.x||(l+=1,cc.tween(u.node).delay(.01*l).to(.1,{x:h.x,y:h.y}).to(.08,{x:h.x+a,y:h.y+n}).to(.08,{x:h.x,y:h.y}).start(),c=.3)}this.scheduleOnce(function(){t.eventMgr.emit(s.EventType.RollerSplitFinish,t._rollerIdx)},c)},t.prototype.splitAndFill=function(e,t){for(var i=this,o=0;o<e.length;o++){var a=e[o];(d=this._cards[a]).node.active=!1}for(o=0;o<this._cards.length;o++)0==(d=this._cards[o]).node.active&&(d.node.destroy(),this._cards.splice(o,1),o-=1);var n=0;for(o=0;o<t.length;o++){var r=t[o];if(d=this._cards[o])d.setCardIdx(this._rollerIdx,o),d.setCard(r);else{var c=this.pushCard(r);this.isHorizontal?(n+=c.width/2,c.setPosition(this.node.width+n,0),n+=c.width/2):(n+=c.height/2,c.setPosition(0,this.node.height+n),n+=c.height/2)}}var l=0,u=0;this.isHorizontal?l=20:u=20;var h=this._computerAllItemPos(),f=0,p=0;for(o=0;o<this._cards.length;o++){var d=this._cards[o],_=h[o];_.y==d.node.y&&_.x==d.node.x||(p+=1,cc.tween(d.node).delay(.01*p).to(.08,{x:_.x,y:_.y}).to(.08,{x:_.x+l,y:_.y+u}).to(.08,{x:_.x,y:_.y}).start(),f=.3)}this.scheduleOnce(function(){i.eventMgr.emit(s.EventType.RollerFillFinish,i._rollerIdx)},f)},t.prototype._resetCards=function(e){for(var t=0;t<this._cards.length;t++){var i=this._cards[t];(o=e[t])||(i.node.destroy(),this._cards.splice(t,1),t-=1)}for(t=0;t<e.length;t++){var o=e[t];(i=this._cards[t])?(i.setCardIdx(this._rollerIdx,t),i.setCard(o)):this.pushCard(o)}},t.prototype.isRolling=function(){return this._speed>0},t.prototype.roll=function(e,t){var i;this._delayRoll=e,this._cardDatas=[],(i=this._cardDatas).push.apply(i,t),this._speed=this.initialVelocity,this._addSpeed=!0,this._cutSpeed=!1;for(var o=0;o<this._cardDatas.length;o++){var a=this._cardDatas[o];this.pushCard(a)}},t.prototype.cutDownSpeed=function(){this._delayRoll=0,this._speed=1*this.initialVelocity,this._addSpeed=!1,this._cutSpeed=!0;for(var e=0;e<this._cardDatas.length;e++){var t=this._cardDatas[e];this.pushCard(t)}this.resetAllItemPos(!1,function(){})},t.prototype.stopRoll=function(){this._delayRoll=0,this._addSpeed=!1,this._cutSpeed=!1;for(var e=0;e<this._cardDatas.length;e++){var t=this._cardDatas[e];this.pushCard(t)}this.resetAllItemPos(!1,function(){})},t.prototype.stopImmediate=function(){this._stopImmediate()},t.prototype._stopImmediate=function(){var e=this;this.audioMgr.playEffect("Reel_Stop"),this._addSpeed=!1,this._cutSpeed=!1,this._speed=0,this._delayRoll=0,this._resetCards(this._cardDatas);var t=0,i=0;this.isHorizontal?t=13:i=13;for(var o=this._computerAllItemPos(),a=0,n=0;n<this._cards.length;n++){var r=this._cards[n],c=o[n];c.y==r.node.y&&c.x==r.node.x||(cc.tween(r.node).to(.05,{x:c.x,y:c.y}).to(.08,{x:c.x+t,y:c.y+i}).to(.08,{x:c.x,y:c.y}).start(),a=.3)}this.scheduleOnce(function(){e._finishCB&&e._finishCB(e._rollerIdx),e.eventMgr.emit(s.EventType.RollerRollFinish,e._rollerIdx)},a)},t.prototype.pushCard=function(e,t){var i=cc.v2(0,0);if(this._cards.length>0){var o=this._cards[this._cards.length-1].node;i=(i=this.isHorizontal?cc.v2(o.x+o.width/2,0):cc.v2(0,o.y+o.height/2)).add(this.intervalVec)}t||(t=cc.instantiate(this.template)),t.parent=this.node;var a=t.getComponent(l.default);return a.setCardIdx(this._rollerIdx,this._cards.length),a.setCard(e),this._cards.push(a),i=this.isHorizontal?i.add(cc.v2(t.width/2,0)):i.add(cc.v2(0,t.height/2)),t.setPosition(i),t},t.prototype.resetAllItemPos=function(e,t){var i=0,o=0;this.isHorizontal?i=10:o=10;for(var a=0,n=this._computerAllItemPos(),r=0;r<this._cards.length;r++){var s=this._cards[r],c=n[r];s.node.zIndex=c.z,e?c.y==s.node.y&&c.x==s.node.x||(cc.tween(s.node).delay(.1).to(.2,{x:c.x-i,y:c.y-o}).to(.1,{x:c.x,y:c.y}).start(),a=.41):s.node.setPosition(c.x,c.y)}e?cc.tween(this.node).delay(a).call(function(){t&&t()}).start():t&&t()},t.prototype._computerAllItemPos=function(){for(var e=[],t=0,i=0,o=0;o<this._cards.length;o++){var a=this._cards[o],n=a.getCardInfo().cardID;this.isHorizontal?t+=a.node.width/2:i+=a.node.height/2,e.push(cc.v3(t,i,n)),this.isHorizontal?t=t+a.node.width/2+this.intervalVec.x:i=i+a.node.height/2+this.intervalVec.y}return e},t.prototype.rollUpdate=function(e){if(this._delayRoll>0)this._delayRoll=this._delayRoll-e;else if(!(this._speed<=0)){var t=0;if(this._cards.length>0)for(var i=this._cards[0].node;(i.y<-i.height/2||i.x<-i.width/2)&&((r=this._cards.shift()).node.destroy(),t+=r.GridWeight,this._cards.length>0);)i=this._cards[0].node;if(this._addSpeed)for(;t>0;){var o=Math.min(t,this.gridNum),a=this.gameData.randomCardData(this._rollerIdx,o);this.pushCard(a),t-=a.gridWeight}for(var n=0;n<this._cards.length;n++){var r;(r=this._cards[n]).GridWeight}if(this._addSpeed)this._speed+=e*this.acceleratedSpeed,this._speed=Math.min(this._speed,3e3);else{if(!(this._cards.length>this._cardDatas.length))return void this._stopImmediate();this._cutSpeed?(this._speed-=e*this.acceleratedSpeed,this._speed=Math.max(this._speed,1e3)):this._speed=2e3}var s=e*this._speed;for(n=0;n<this._cards.length;n++){var c=this._cards[n].node;this.isHorizontal?c.x=c.x-s:c.y=c.y-s}}},n([f({type:cc.Prefab,tooltip:"\u5361\u7247\u6a21\u677f"})],t.prototype,"template",void 0),n([f({tooltip:"\u662f\u5426\u6c34\u5e73\u6eda"})],t.prototype,"isHorizontal",void 0),n([f({tooltip:"\u5361\u7247\u663e\u793a\u6570\u91cf"})],t.prototype,"gridNum",void 0),n([h,p("DreamOfMacau/RollerComp")],t)}(c.default);i.default=d,cc._RF.pop()},{"../config/DreamOfMacauConfigs":"DreamOfMacauConfigs","../core/DreamOfMacauEventMgr":"DreamOfMacauEventMgr","../core/base/DreamOfMacauCompBase":"DreamOfMacauCompBase","./DreamOfMacauCard":"DreamOfMacauCard"}],DreamOfMacauTestView:[function(e,t,i){"use strict";cc._RF.push(t,"89f80uyTmhBLIGINi4msdOF","DreamOfMacauTestView");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../core/base/DreamOfMacauViewBase"),s=cc._decorator,c=s.ccclass,l=(s.property,s.menu),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showReplay_btn=null,t.showReplay_editbox=null,t}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.showReplay_btn=cc.find("function_layer/showReplay/button",this.node).getComponent(cc.Button),this.showReplay_editbox=cc.find("function_layer/showReplay/editbox",this.node).getComponent(cc.EditBox),this.onClick(this.showReplay_btn.node,this.onClickReplay,0);var t=cc.find("close",this.node);this.onClick(t,this.onClickClose,0)},t.prototype.show=function(){},t.prototype.hide=function(){},t.prototype.start=function(){},t.prototype.closeSelf=function(){this.node.active=!1},t.prototype.onClickClose=function(){cc.log("onClickClose"),this.closeSelf()},t.prototype.onClickReplay=function(){cc.log("onClickReplay"),this.gameData.resetViewarray()},n([c,l("DreamOfMacau/TestView")],t)}(r.default);i.default=u,cc._RF.pop()},{"../core/base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}],DreamOfMacauUtils:[function(e,t,i){"use strict";cc._RF.push(t,"84083lH9xNE6JbUlJ946LQc","DreamOfMacauUtils"),Object.defineProperty(i,"__esModule",{value:!0});var o=new(function(){function e(){}return e.prototype.randomInt=function(e,t){return Math.floor(Math.random()*(t-e)+e)},e.prototype.randomNum=function(e,t){return Math.random()*(t-e)+e},e.prototype.randomElement=function(e,t){for(var i=[],o=0;o<e.length;o++){var a=e[o];i.push(a)}var n=[];for(o=0;o<t;o++){var r=this.randomInt(0,i.length);n.push(i.splice(r,1)[0])}return n},e.prototype.getDecimals=function(e,t){return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)},e.prototype.parseNumber=function(e){if(e<1e3)return e.toFixed(2);var t=Math.floor(e).toString(),i="",o=e.toString().split(".")[1];for(o?1==o.toString().length&&(o+="0"):o="00";t.length>3;)i=","+t.slice(-3)+i,t=t.slice(0,t.length-3);return t&&(i=t+i),i+"."+o},e.prototype.changeParent=function(e,t){var i=e.convertToWorldSpaceAR(cc.v2(0,0)),o=t.convertToNodeSpaceAR(i);e.setPosition(o),e.parent=t},e}());i.default=o,cc._RF.pop()},{}],DreamOfMacauViewBase:[function(e,t,i){"use strict";cc._RF.push(t,"5f561iPKPJF3bKeGqgfipDI","DreamOfMacauViewBase");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.ClickEffect=void 0;var r,s=e("./DreamOfMacauCompBase"),c=cc._decorator,l=c.ccclass,u=(c.property,c.menu);(function(e){e[e.none=0]="none",e[e.default=1]="default"})(r=i.ClickEffect||(i.ClickEffect={}));var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onClick=function(e,t,i){return void 0===i&&(i=r.default),i==r.default&&e.on("click",this.onClickEffect,this),e.on("click",t,this)},t.prototype.offClick=function(e,t,i){i&&i!=r.default||e.off("click",this.onClickEffect,this),e.off("click",t,this)},t.prototype.openView=function(e,t){this.viewMgr.showView(e,t)},t.prototype.closeView=function(e,t){this.viewMgr.hideView(e,t)},t.prototype.onClickEffect=function(){this.audioMgr.playEffect("Button")},n([l,u("DreamOfMacau/ViewBase")],t)}(s.default);i.default=h,cc._RF.pop()},{"./DreamOfMacauCompBase":"DreamOfMacauCompBase"}],DreamOfMacauViewMgr:[function(e,t,i){"use strict";cc._RF.push(t,"27c7a7F+pNCj6LQ91nNVXcq","DreamOfMacauViewMgr");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=this&&this.__decorate||function(e,t,i,o){var a,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,i,r):a(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.EnumViewName=void 0;var r,s,c=e("./DreamOfMacauResMgr"),l=e("./base/DreamOfMacauViewBase"),u=cc._decorator,h=u.ccclass,f=(u.property,u.menu);(function(e){e.MainView="MainView",e.GameView="GameView",e.GameBoard="GameBoard",e.HelpView="HelpView",e.AudioView="AudioView",e.AutoView="AutoView",e.FeatureBuyView="FeatureBuyView",e.BigWinView="BigWinView",e.FreeView="FreeView",e.FreeCollectView="FreeCollectView",e.FreeWonView="FreeWonView",e.CardDetailView="CardDetailView"})(r=i.EnumViewName||(i.EnumViewName={})),function(e){e[e.Game=0]="Game",e[e.UI=1]="UI"}(s||(s={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiLayer=null,t.gameLayer=null,t._viewInfo=new Map,t._addingViewIDs=[],t._showViewList=[],t.resMgr=null,t}return a(t,e),t.prototype.onLoad=function(){this._viewInfo.clear(),this.resMgr=cc.find("Canvas").getComponent(c.default),this.gameLayer=cc.find("Game_Layer",this.node),this.uiLayer=cc.find("UI_Layer",this.node),this._regViewInfo(r.GameView,s.Game,"prefab/GameView"),this._regViewInfo(r.GameBoard,s.Game,"prefab/GameBoard"),this._regViewInfo(r.MainView,s.UI,"prefab/MainView"),this._regViewInfo(r.HelpView,s.UI,"prefab/HelpView"),this._regViewInfo(r.AudioView,s.UI,"prefab/AudioView"),this._regViewInfo(r.AutoView,s.UI,"prefab/AutoView"),this._regViewInfo(r.FeatureBuyView,s.UI,"prefab/FeatureBuyView"),this._regViewInfo(r.FreeView,s.UI,"prefab/FreeView"),this._regViewInfo(r.BigWinView,s.UI,"prefab/BigWinView"),this._regViewInfo(r.CardDetailView,s.UI,"prefab/CardDetailView"),this._regViewInfo(r.FreeCollectView,s.UI,"prefab/FreeCollectView"),this._regViewInfo(r.FreeWonView,s.UI,"prefab/FreeWonView"),this._bindViewNode(r.GameView,"Game_Layer/GameView"),this._bindViewNode(r.GameBoard,"Game_Layer/GameBoard"),this._bindViewNode(r.MainView,"UI_Layer/MainView")},t.prototype._bindViewNode=function(e,t){var i=this._viewInfo.get(e);if(i){var o=cc.find(t,this.node);if(o){var a=o.getComponent(l.default);a?i.view=a:cc.warn("\u6ca1\u6709\u6dfb\u52a0view\u7ec4\u4ef6",t)}else cc.warn("\u6ca1\u6709\u6dfb\u52a0\u8282\u70b9",t)}else cc.warn("\u6ca1\u6709\u6ce8\u518c\u754c\u9762",e)},t.prototype._regViewInfo=function(e,t,i){this._viewInfo.has(e)&&cc.warn("\u91cd\u590d\u6ce8\u518c",e),this._viewInfo.set(e,{prefabPath:i,layerID:t})},t.prototype.showView=function(e,t,i){var o=this,a=this._viewInfo.get(e);if(a){var n=this._showViewList.findIndex(function(t){return t==e});n>=0&&(this._showViewList.splice(n,1),this._showViewList.push(e),n=this._showViewList.length-1);var r=a.view;r?(r.node.active=!0,r.show(t),i&&i()):a.isLoading||(a.isLoading=!0,this.resMgr.loadPrefab(a.prefabPath,function(e){a.isLoading=!1;var n=cc.instantiate(e);n.setPosition(0,0,0),a.layerID==s.Game?n.parent=o.gameLayer:n.parent=o.uiLayer,n.active=!0;var r=n.getComponent(l.default);r.show(t),a.view=r,i&&i()}))}else cc.warn("\u6ca1\u6709\u6ce8\u518c\u754c\u9762",e)},t.prototype.hideView=function(e,t){var i=this.getView(e);i?(i.node.active=!1,i.hide(t)):cc.warn("\u6ca1\u6709\u754c\u9762\u8282\u70b9",e)},t.prototype.getView=function(e){var t=this._viewInfo.get(e);if(t)return t.view;cc.warn("\u6ca1\u6709\u6ce8\u518c\u754c\u9762",e)},n([h,f("DreamOfMacau/ViewMgr")],t)}(cc.Component);i.default=p,cc._RF.pop()},{"./DreamOfMacauResMgr":"DreamOfMacauResMgr","./base/DreamOfMacauViewBase":"DreamOfMacauViewBase"}]},{},["DreamOfMacauData","DreamOfMacauGame","DreamOfMacauNet","DreamOfMacauCard","DreamOfMacauRollNumber","DreamOfMacauRoller","DreamOfMacauConfigs","DreamOfMacauAudioMgr","DreamOfMacauEventMgr","DreamOfMacauResMgr","DreamOfMacauViewMgr","DreamOfMacauCompBase","DreamOfMacauDataBase","DreamOfMacauGameBase","DreamOfMacauNetBase","DreamOfMacauViewBase","DreamOfMacauUtils","DreamOfMacauAudioView","DreamOfMacauAutoView","DreamOfMacauBigWinView","DreamOfMacauCardDetailView","DreamOfMacauFeatureBuyView","DreamOfMacauFreeCollectView","DreamOfMacauFreeView","DreamOfMacauFreeWonView","DreamOfMacauGameBoard","DreamOfMacauGameView","DreamOfMacauHelpView","DreamOfMacauMainView","DreamOfMacauPreloadView","DreamOfMacauTestView"]);