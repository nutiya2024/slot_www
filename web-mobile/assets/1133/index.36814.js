window.__require=function t(e,i,n){function o(a,r){if(!i[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){return o(e[a][1][t]||t)},h,h.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({GaneshaAnilabel:[function(t,e,i){"use strict";cc._RF.push(e,"6e948LTRSNMuqOfpjln5O2d","GaneshaAnilabel");var n=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,s=o.ccclass,a=(o.property,function(){function t(){}var e;return e=t,Object.defineProperty(t,"inst",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!1,configurable:!0}),t.prototype.playlabel=function(t,e,i,n,o,s,a){var r=this;if(void 0===o&&(o=!1),void 0===s&&(s=""),void 0===a&&(a=!0),t!=e){var c=cc.tween(n.node).to(i,{scaleZ:1},{progress:function(i,c,l,h){var u,p=0;return p=a?Math.floor(t+(e-t)*h):Math.floor(100*(t+(e-t)*h))/100,u=a?o?r.parseCoin(p):p.toString():o?r.parseCoin(p):p.toFixed(2),n.string=s+u,i+(c-i)*h}});c.call(function(){n.string=a?s+(o?r.parseCoin(e):e):s+(o?r.parseCoin(e):e.toFixed(2))}),this.labeltween=c,c.start()}},t.prototype.stopLaeblAni=function(){this.labeltween&&(this.labeltween.stop(),this.labeltween=null)},t.prototype.parseCoin=function(t){if(t<1e3)return t.toFixed(2);var e=Math.floor(t).toString(),i="",n=t.toString().split(".")[1];for(n?1==n.toString().length&&(n+="0"):n="00";e.length>3;)i=","+e.slice(-3)+i,e=e.slice(0,e.length-3);return e&&(i=e+i),i+"."+n},e=n([s],t)}());i.default=a,cc._RF.pop()},{}],GaneshaAudioView:[function(t,e,i){"use strict";cc._RF.push(e,"e6c0dv8oVtLSo+gIkldCYTE","GaneshaAudioView");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../common/GaneshaQuickUse"),r=t("../core/GaneshaData"),c=t("../core/GaneshaNotify"),l=t("../manger/GaneshaAudio"),h=cc._decorator,u=h.ccclass,p=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.switchicons=[],e}return o(e,t),e.prototype.onLoad=function(){this.musicicon=this.findNode("musicSwitch",cc.Sprite),this.soundicon=this.findNode("soundSwitch",cc.Sprite),this.quickicon=this.findNode("quickSwitch",cc.Sprite),this.close=this.findNode("close"),this.closebg=this.findNode("clickbg")},e.prototype.start=function(){var t=this;this.setIcon(0,1===l.default.inst._musicVolume),this.setIcon(1,1===l.default.inst._effectVolume),this.setIcon(2,r.default.IsTuro),this.musicicon.node.on("click",this.setMusic,this),this.soundicon.node.on("click",this.setSound,this),this.quickicon.node.on("click",this.setQuick,this),this.close.on("click",function(){t.showPanel(!1)},this),this.closebg.on("click",function(){t.showPanel(!1)},this),c.default.addNotify(c.GaneshaEvent.QuickRun,this,function(){t.setIcon(2,r.default.IsTuro)})},e.prototype.setSound=function(){l.default.inst.playEffect("Button"),l.default.inst.setAudioStatus(1===l.default.inst._effectVolume?"off":"on"),this.setIcon(1,1===l.default.inst._effectVolume)},e.prototype.setMusic=function(){l.default.inst.playEffect("Button"),l.default.inst.setMusicStatus(1===l.default.inst._musicVolume?"off":"on"),this.setIcon(0,1===l.default.inst._musicVolume)},e.prototype.setQuick=function(){if(l.default.inst.playEffect("Button"),r.default.isfree)return Common.showMessage("The current status cannot be set!");r.default.IsTuro=!r.default.IsTuro,this.setIcon(2,r.default.IsTuro),c.default.pubNotify(c.GaneshaEvent.QuickRun,r.default.IsTuro)},e.prototype.setIcon=function(t,e){var i=this.switchicons[e?0:1];0==t?this.musicicon.spriteFrame=i:1===t?this.soundicon.spriteFrame=i:this.quickicon.spriteFrame=i},s([p(cc.SpriteFrame)],e.prototype,"switchicons",void 0),s([u],e)}(a.default);i.default=f,cc._RF.pop()},{"../common/GaneshaQuickUse":"GaneshaQuickUse","../core/GaneshaData":"GaneshaData","../core/GaneshaNotify":"GaneshaNotify","../manger/GaneshaAudio":"GaneshaAudio"}],GaneshaAudio:[function(t,e,i){"use strict";cc._RF.push(e,"4403fwKoFhFMqX6vn3IE9dw","GaneshaAudio"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this._musicStatus="on",this._effectStatus="on",this._curMusicId=null,this._curEffectId=-1,this._musicVolume=1,this._effectVolume=1,this._volume=1,this.cacheEffect={},this.audioClips=[];var t=localStorage.getItem("sound");t?(this._musicStatus=t,this.setAudioStatus(t)):this.setAudioStatus("on"),(t=localStorage.getItem("music"))?(this._musicStatus=t,this.setMusicStatus(t)):this.setMusicStatus("on")}return t.prototype.initClips=function(t){this.audioClips=[],cc.log(t);for(var e=0;e<t.length;++e)t[e]&&(this.audioClips[t[e].name]=t[e]);cc.log(this.audioClips)},Object.defineProperty(t,"inst",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._musicStatus},enumerable:!1,configurable:!0}),t.prototype.setAudioStatus=function(t){if(t){if("on"!=t&&"off"!=t)return cc.error("error status");this._effectVolume="on"==t?1:0,cc.audioEngine.setEffectsVolume(this._effectVolume),localStorage.setItem("sound",t)}},t.prototype.setMusicStatus=function(t){if(t){if("on"!=t&&"off"!=t)return cc.error("error status");this._musicVolume="on"==t?1:0,cc.audioEngine.setMusicVolume(this._musicVolume),localStorage.setItem("music",t)}},t.prototype.setEffectStatus=function(t){if("on"!=t&&"off"!=t)return cc.error("error type");this._effectStatus=t,"off"==t&&this.stopAllEffects()},t.prototype.playMusic=function(t,e){if(void 0===e&&(e=!0),t){cc.log("test play audio ["+t+"]");var i=this.audioClips[t];i&&(this._curMusicId=cc.audioEngine.playMusic(i,e))}},t.prototype.stopMusic=function(){cc.audioEngine.stopMusic()},t.prototype.playEffect=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=!1),void 0===n&&(n=!1);var o=this.audioClips[t];o&&(this._curEffectId=cc.audioEngine.playEffect(o,i)),this.SetCallBack(this._curEffectId,e),this.cacheEffect[t]=this._curEffectId},t.prototype.SetCallBack=function(t,e){var i=this;cc.audioEngine.setFinishCallback(t,function(){e&&e(),i.clearCache(t)})},t.prototype.clearCache=function(t){for(var e in this.cacheEffect)if(this.cacheEffect.hasOwnProperty(e)&&this.cacheEffect[e]==t){delete this.cacheEffect[e];break}},t.prototype.stopEffect=function(t){t?this.cacheEffect[t]?(cc.audioEngine.stopEffect(this.cacheEffect[t]),delete this.cacheEffect[t]):cc.log("\u6682\u672a\u5b58\u50a8,\u5b58\u50a8\u540e\u53ef\u64cd\u4f5c"):this.stopAllEffects(),this._curEffectId=-1},t.prototype.stopAllEffects=function(){cc.audioEngine.stopAllEffects(),this.cacheEffect={}},t}();i.default=n,cc._RF.pop()},{}],GaneshaBigWin:[function(t,e,i){"use strict";cc._RF.push(e,"0a6d39FoX5E3JRdIfH3dwVj","GaneshaBigWin");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../GaneshaGame"),r=t("../common/GaneshaAnilabel"),c=t("../common/GaneshaQuickUse"),l=t("../core/GaneshaData"),h=t("../manger/GaneshaAudio"),u=cc._decorator,p=u.ccclass,f=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.doorimgs=[],e.typeimgs=[],e.lightatlas=null,e.pattems=[],e.btn_closebg=null,e.groupnode=null,e.sp_looplight=null,e.sp_door=null,e.sp_type=null,e.lb_win=null,e.ani_looplight1=null,e.ani_looplight2=null,e.ani_boom=null,e.bigwinscores=[],e.typevalue=0,e.typeaudioname=["Prize_Big","Prize_Mega","Prize_Super"],e}return o(e,t),e.prototype.onLoad=function(){this.maingame=this.node.parent.getComponent(a.default)},e.prototype.start=function(){},e.prototype.initAll=function(t,e){this.lb_win.string="",this.groupnode.scale=0,this.sp_type.node.scale=1,this.lb_win.node.scale=1,this.typevalue=0,this.pattems[0].node.active=this.pattems[1].node.active=this.pattems[2].node.active=!1;var i=l.default.currBet/100;this.bigwinscores=[],1===e?this.bigwinscores.push(20*i):2===e&&(this.bigwinscores.push(20*i),this.bigwinscores.push(40*i)),this.bigwinscores.push(t),this.btn_closebg.node.active=!0,this.btn_closebg.node.off("click"),this.ani_looplight1.play("looplight"),this.ani_looplight2.play("looplight_rev")},e.prototype.showBigWin=function(t,e,i,n,o){var s=this;if(t){cc.log("starttype "+e+" score "+i+" endtype "+n+" =========="),h.default.inst.stopMusic(),this.bigwinTween=cc.tween(this.node),0===e?(this.initAll(i,n),this.ani_boom.play(),cc.tween(this.groupnode).delay(.25).call(function(){s.sp_type.spriteFrame=s.typeimgs[0],s.pattems[0].node.active=!0,s.pattems[0].play("bigwin_pattem")}).to(.2,{scale:1}).call(function(){h.default.inst.playEffect("Prize_Big")}).start(),this.scheduleOnce(function(){var t=s.bigwinscores[s.bigwinscores.length-1];s.btn_closebg.node.on("click",function(){s.showBigWin(!1,e,t,n,o)},s),s.btn_closebg.interactable=!0},2),this.bigwinTween.delay(.5)):(this.ani_boom.play(),this.pattems[e-1].node.active=!1,this.pattems[e].node.active=!0,this.pattems[e].node.scale=0,cc.tween(this.pattems[e].node).to(.5,{scale:3}).call(function(){s.pattems[e].play("bigwin_pattem")}).start(),this.sp_type.spriteFrame=this.typeimgs[e]);var a=this.bigwinscores[this.typevalue++];this.bigwinTween.call(function(){var t=0===e?0:i;r.default.inst.playlabel(t,a,10.5,s.lb_win,!0,"",!1)}),this.bigwinTween.delay(4).call(function(){if(e===n){s.btn_closebg.node.off("click"),s.btn_closebg.interactable=!1;var t=s.bigwinscores[s.bigwinscores.length-1];s.showBigWin(!1,e,t,n,o)}else s.showBigWin(!0,s.typevalue,a,n,o)}),this.bigwinTween.start()}else this.btn_closebg.interactable=!1,cc.tween(this.sp_type.node).to(.5,{scale:1}).start(),cc.tween(this.lb_win.node).to(.5,{scale:1}).start(),this.sp_type.spriteFrame=this.typeimgs[n],this.stopBigwinAudio(),this.maingame.bigWinEnd(i),h.default.inst.playEffect("Prize_End"),cc.Tween.stopAllByTarget(this.node),cc.Tween.stopAllByTarget(this.pattems[n].node),r.default.inst.stopLaeblAni(),this.lb_win.string=r.default.inst.parseCoin(i),this.scheduleOnce(function(){s.groupnode.scale=0,h.default.inst.playMusic(l.default.isfree?"FreeGame_Back_Music":"Game_Back_Music"),s.btn_closebg.node.active=!1,o()},3)},e.prototype.stopBigwinAudio=function(){h.default.inst.stopEffect("Prize_Big"),h.default.inst.stopEffect("Prize_Super"),h.default.inst.stopEffect("Prize_Mega")},s([f(cc.SpriteFrame)],e.prototype,"doorimgs",void 0),s([f(cc.SpriteFrame)],e.prototype,"typeimgs",void 0),s([f(cc.SpriteAtlas)],e.prototype,"lightatlas",void 0),s([f(cc.Animation)],e.prototype,"pattems",void 0),s([p],e)}(c.default);i.default=d,cc._RF.pop()},{"../GaneshaGame":"GaneshaGame","../common/GaneshaAnilabel":"GaneshaAnilabel","../common/GaneshaQuickUse":"GaneshaQuickUse","../core/GaneshaData":"GaneshaData","../manger/GaneshaAudio":"GaneshaAudio"}],GaneshaBottom:[function(t,e,i){"use strict";cc._RF.push(e,"6728fczOX9HvKBwdNPdWlIr","GaneshaBottom");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../GaneshaGame"),r=t("../common/GaneshaAnilabel"),c=t("../common/GaneshaQuickUse"),l=t("../core/GaneshaData"),h=t("../core/GaneshaNotify"),u=t("../manger/GaneshaAudio"),p=cc._decorator,f=p.ccclass,d=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.betidx=1,e.spinbg=null,e.isroll=!1,e.downstrs=["FREE SPIN LEFT ","FREE SPINS COMPLETED"],e.upstrs=["GOOD LUCK!","PLACE YOUR BETS!","HOLD SPACE FOR TURBO SPIN"],e.autoButtonList=[],e.autonumlist=[10,20,50,100,200,500],e.holdtime=-1,e.showAutoSelected=!1,e.closeSelBu=null,e.clickAni=null,e.aseetNode_free=null,e.balance_free=null,e.totalwin_free=null,e.totalbet_free=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.addbetbu=this.node.getChildByName("addbet").getComponent(cc.Button),this.subbetbu=this.node.getChildByName("subbet").getComponent(cc.Button),this.balance=this.node.getChildByName("New Node").children[0].children[1].getComponent(cc.Label),this.totalwin=this.node.getChildByName("New Node").children[2].children[1].getComponent(cc.Label),this.totalbet=this.node.getChildByName("New Node").children[1].children[1].getComponent(cc.Label),this.balance_free=this.aseetNode_free.children[0].children[1].getComponent(cc.Label),this.totalwin_free=this.aseetNode_free.children[2].children[1].getComponent(cc.Label),this.totalbet_free=this.aseetNode_free.children[1].children[1].getComponent(cc.Label),this.mainGame=this.node.parent.getComponent(a.default),this.spinbg=this.node.getChildByName("spinbg"),this.spinbu=this.findNode("btn_start",cc.Button),this.stopbu=this.findNode("btn_stop",cc.Button),this.stopAutoSpin=this.findNode("btn_autoSpin",cc.Button),this.tiplabelup=this.findNode("tiplabelup",cc.Label),this.tiplabeldown=this.findNode("tiplabeldown",cc.Label),this.autolabel=this.stopAutoSpin.node.children[0].getComponent(cc.Label),this.setbu=this.findNode("setting"),this.helpbu=this.findNode("infobu"),this.fastbu=this.findNode("quickbu"),this.closeSelBu=this.findNode("closeSelect"),this.autoGroupNode=this.findNode("autoButtonG"),this.stopauto=this.findNode("btn_auto"),this.autoShowbtn=this.findNode("autoplay",cc.Button),this.startArrow=this.spinbu.node.children[0],this.rollArrow=this.stopbu.node.children[0];for(var e=1;e<7;++e)this.autoButtonList.push(this.autoGroupNode.children[e].getComponent(cc.Button));h.default.addNotify(h.GaneshaEvent.CheckWinScore,this,function(){t.startPlayAni()}),h.default.addNotify(h.GaneshaEvent.QuickRun,this,this.setQuickIcon)},e.prototype.start=function(){this.addlistner(),this.SetBalance()},e.prototype.initInfo=function(){this.betidx=l.default.betValues.indexOf(l.default.betLine),-1===this.betidx&&(this.betidx=0),this.totalbet.string=l.default.betValues[this.betidx]*l.default.AllLineNum+"",this.totalbet_free.string=l.default.betValues[this.betidx]*l.default.AllLineNum+"",h.default.pubNotify(h.GaneshaEvent.SELECT_MULTPILE,this.betidx)},e.prototype.addlistner=function(){var t=this;this.spinbu.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.spinbu.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.stopbu.node.on("click",this.StopSpin,this),this.stopAutoSpin.node.on("click",this.stopAuto,this),this.addbetbu.node.on("click",function(){t.addBet(1)}),this.subbetbu.node.on("click",function(){t.addBet(-1)});for(var e=function(e){i.autoButtonList[e].node.on("click",function(){t.clickAutoNums(e)},i)},i=this,n=0;n<this.autoButtonList.length;++n)e(n);this.closeSelBu.on("click",function(){t.showAutoSelect(!1)},this),this.helpbu.on("click",function(){u.default.inst.playEffect("Button"),t.mainGame.showRule()},this),this.setbu.on("click",function(){u.default.inst.playEffect("Button"),t.mainGame.showAudioSetting()},this),this.stopauto.on("click",function(){t.stopAuto()},this),this.fastbu.on("click",function(){if(l.default.isfree)return h.default.pubNotify(h.GaneshaEvent.ShowTip,"The current status cannot be set!",function(){});l.default.IsTuro=!l.default.IsTuro,u.default.inst.playEffect("Button"),h.default.pubNotify(h.GaneshaEvent.QuickRun,l.default.IsTuro)},this),this.autoShowbtn.node.on("click",function(){t.showAutoSelect(!t.showAutoSelected)},this)},e.prototype.ShowTotalwin=function(t,e){void 0===e&&(e=0),this.totalwin.string=(t/100).toFixed(2),this.totalwin_free.string=(t/100).toFixed(2)},e.prototype.touchStart=function(){u.default.inst.playEffect("Spin_Button_Sound"),this.spinbu.interactable&&(this.holdtime=0)},e.prototype.touchEnd=function(){this.spinbu.interactable&&(this.showAutoSelected||(this.holdtime=-1,this.spin()))},e.prototype.setQuickIcon=function(t){var e=this.fastbu.children;e[0].active=t,e[1].active=!t},e.prototype.showAutoSelect=function(t){this.showAutoSelected=t,cc.tween(this.autoGroupNode).to(.2,{scaleY:t?1:0}).start()},e.prototype.clickAutoNums=function(t){u.default.inst.playEffect("Button"),this.showAutoSelect(!1),cc.log("\u70b9\u51fb\u4e86\u7b2c"+t+"\u4e2a ============"),l.default.isfree||(l.default.AutoNum=this.autonumlist[t],this.stopAutoSpin.node.active=!0,this.spinbg.active=!1,this.showAutoLabel(),this.mainGame.autoGame(!0))},e.prototype.stopAuto=function(){l.default.AutoNum>=0&&(l.default.AutoNum=-1,this.mainGame.autoGame(!1),this.stopAutoSpin.node.active=!1,this.spinbg.active=!0)},e.prototype.spin=function(){if(cc.log("\u70b9\u51fb\u4e86\u5f00\u59cb\u6309\u94ae============"),this.mainGame.startGame()){if(this.clickAni.play("spinClick"),cc.log("\u53ef\u4ee5\u8f6c\u52a8==========="),this.isroll)return;this.SetSpin(!0),this.isroll=!0}},e.prototype.startPlayAni=function(){this.isroll=!1,this.stopbu.interactable=!1},e.prototype.showAutoLabel=function(){cc.log("showAutoLabel ==GaneshaData.AutoNum "+l.default.AutoNum+"======="),l.default.AutoNum>=0?this.autolabel.string=l.default.AutoNum+" STOP":(this.stopAutoSpin.node.active=!1,this.spinbg.active=!0)},e.prototype.setTipUp=function(t,e){this.tiplabelup.string=t?this.upstrs[e]:""},e.prototype.setTipDown=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=0),this.tiplabeldown.string=t?0===e?this.downstrs[e]+i:this.downstrs[e]:""},e.prototype.StopSpin=function(){this.isroll&&(u.default.inst.playEffect("Stop_Button_Sound"),this.isroll=!1,this.mainGame.StopRoll(),this.SetSpin(!1))},e.prototype.checkAuto=function(){var t=this;this.spinbu.node.active=!0,this.scheduleOnce(function(){cc.log("test ",t.spinbu.node.active)},2)},e.prototype.SetSpin=function(t){this.spinbu.node.active=!t,this.stopbu.node.active=this.stopbu.interactable=t,this.isroll=t,this.startArrowTween(this.spinbu.interactable),this.rollArrowTween(this.stopbu.node.active)},e.prototype.setCanspin=function(t){this.spinbu.interactable=t,this.addbetbu.interactable=t,this.subbetbu.interactable=t,this.autoShowbtn.interactable=t,this.setAutoBuState(t),t||this.showAutoSelect(!1),this.startArrowTween(this.spinbu.interactable),this.rollArrowTween(this.stopbu.node.active)},e.prototype.setAutoBuState=function(t){for(var e=0;e<this.autoButtonList.length;++e)this.autoButtonList[e].interactable=t},e.prototype.setFreestart=function(t){t&&this.setCanspin(!1)},e.prototype.SetBalance=function(t){void 0===t&&(t=0),0===t?(this.balance.string=""+(Math.floor(l.default.coins)/100).toFixed(2),this.balance_free.string=""+(Math.floor(l.default.coins)/100).toFixed(2)):(r.default.inst.playlabel(l.default.coins,l.default.coins+t,2.5,this.balance),l.default.coins+=t)},e.prototype.SetAuto=function(){l.default.isfree},e.prototype.addBet=function(t){u.default.inst.playEffect("Button"),this.betidx+=t,this.betidx<0&&(this.betidx=0),this.betidx>=l.default.betValues.length&&(this.betidx=l.default.betValues.length-1);var e=l.default.betValues[this.betidx]*l.default.AllLineNum;this.totalbet.string=""+e,this.totalbet_free.string=""+e,h.default.pubNotify(h.GaneshaEvent.SELECT_MULTPILE,this.betidx)},e.prototype.startArrowTween=function(t){t?cc.tween(this.startArrow).by(4,{angle:-360}).repeatForever().start():this.startArrow.stopAllActions()},e.prototype.rollArrowTween=function(t){t?cc.tween(this.rollArrow).by(.8,{angle:-360}).repeatForever().start():this.rollArrow.stopAllActions()},e.prototype.update=function(t){this.holdtime>=0&&(this.holdtime+=t),this.holdtime>=1.5&&(this.holdtime=-1)},s([d(cc.Animation)],e.prototype,"clickAni",void 0),s([d(cc.Node)],e.prototype,"aseetNode_free",void 0),s([f],e)}(c.default);i.default=m,cc._RF.pop()},{"../GaneshaGame":"GaneshaGame","../common/GaneshaAnilabel":"GaneshaAnilabel","../common/GaneshaQuickUse":"GaneshaQuickUse","../core/GaneshaData":"GaneshaData","../core/GaneshaNotify":"GaneshaNotify","../manger/GaneshaAudio":"GaneshaAudio"}],GaneshaCenter:[function(t,e,i){"use strict";cc._RF.push(e,"07b93gwh/FH5Zl0Rnyj+SY9","GaneshaCenter");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../GaneshaGame"),r=t("../common/GaneshaQuickUse"),c=t("../core/GaneshaData"),l=t("../core/GaneshaNotify"),h=t("../manger/GaneshaAudio"),u=t("./GaneshaRoll"),p=cc._decorator,f=p.ccclass,d=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipInfoAtals=null,e.font1=null,e.font2=null,e.cost=null,e.cancel=null,e.startbtn=null,e.buyfreeNode=null,e.buyfreebtn=null,e.winframeAni=null,e.sp_tipinfo0=null,e.looptipidxs=[1,2,3,4,5],e.tipinfo0idx=0,e.lb_win=null,e.sp_wininfo=null,e.checkidx=0,e.extrabetposlist=[],e.newextrabetposlist=[],e.lb_winbet=null,e.lb_anibet=null,e.ani_bet=null,e.ani_light=null,e.lightPool=new cc.NodePool,e.nowbet=0,e.winscorelist=[],e.winbetlist=[],e.isNekoWinlist=[],e.nekoWinLenlist=[],e.ani_coin=null,e.ani_score=null,e.lb_way=null,e.allwayNum=1,e.endWaynum=1,e.extraframe=null,e.ani_changeframe=null,e.winlight=null,e.speedFrame=null,e.speedbgs=[],e.speedani=null,e.isaddspeed=!1,e.scatternumList=[],e.aniparentnod=null,e.nomarlNode=null,e.freeNode=null,e.curWin=0,e.spinId=-1,e.tw=null,e}var i;return o(e,t),i=e,Object.defineProperty(e,"inst",{get:function(){return this.instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;i.instance=this,this.rollM=this.node.getChildByName("columns").getComponent(u.default),this.mainGame=this.node.parent.getComponent(a.default),l.default.addNotify(l.GaneshaEvent.CheckWinScore,this,function(){t.showTipInfo(!1),t.checkidx++,t.checkItemWin(),t.isaddspeed&&(t.showSpeedFrame(-1),t.isaddspeed=!1)}),l.default.addNotify(l.GaneshaEvent.Roll_Stop,this,this.checkWay),this.nomarlNode=this.findNode("nomarlNode"),this.freeNode=this.findNode("freeNode")},e.prototype.start=function(){var t=this;this.showTipInfo(!0),this.speedFrame.getChildByName("bggroup").children.forEach(function(e){t.speedbgs.push(e)}),this.endWaynum=1;for(var e=0;e<7;e++)this.newextrabetposlist[e]=[];this.cancel.node.on("click",this.onBuyfreeCancel,this),this.startbtn.node.on("click",this.onBuyfreeStart,this),this.buyfreebtn.node.on("click",this.onBuyfreeClick,this)},e.prototype.showSpeedFrame=function(t){cc.log("test idx ",t);for(var e=0;e<this.speedbgs.length;++e)this.speedbgs[e].active=!0;t>=0&&this.speedbgs[t+1]&&(this.speedbgs[t+1].active=!1,this.speedani.x=this.speedbgs[t+1].x-120),this.speedFrame.active=this.speedani.active=t>=0},e.prototype.checkWay=function(t){if(5===t&&this.stopReelSpin(),6===t)this.allwayNum=1;else{var e=this.nowReult[t].length;t>=1&&t<=4&&e++,this.allwayNum*=e,this.setWayLabel(this.allwayNum)}t<6&&this.isaddspeed&&this.showSpeedFrame(t)},e.prototype.setWayLabel=function(t){void 0===t&&(t=0),this.lb_way.string=t>0?""+t:",,,"},e.prototype.AllrollEnd=function(){var t=this;l.default.pubNotify(l.GaneshaEvent.ROLL_END),this.scheduleOnce(function(){t.showTipInfo(!0),t.showWinscore(!1),t.showExtraFrame(!1)},1),this.freeReset()},e.prototype.changeParent=function(t){var e=this.aniparentnod,i=t.parent.convertToWorldSpaceAR(t.position);t.setParent(e),t.position=e.convertToNodeSpaceAR(i)},e.prototype.checkItemWin=function(){var t=this;this.showTipInfo(!1),cc.log("checkItemWin checkidx "+this.checkidx+" ===========");var e=this.checkidx-1;if(this.checkidx>=c.default.AllIconList.length){var i=this.getResultlist(c.default.AllIconList[e]);this.checkExtrabet(i,e)&&c.default.isfree?this.playAllbetmove(!1,function(){t.AllrollEnd()}):this.AllrollEnd(),c.default.winScore>0&&this.showWinscore(!0,2,c.default.winScore/100)}else{var n=this.getResultlist(c.default.AllIconList[e]);if(i=this.newIconList=this.getResultlist(c.default.AllIconList[this.checkidx]),this.checkExtrabet(n,e)){var o=0;this.nowbet>0&&(o=1),this.scheduleOnce(function(){t.playAllbetmove(!0,function(){cc.log("\u6240\u6709\u500d\u7387\u98de\u5230\u76ee\u6807\u70b9 =============="),t.rollM.showAllitemFrameAni(e),t.showWinscore(!0,0,t.winscorelist[e]/t.winbetlist[e])})},o)}else this.playChangeAni(i)}},e.prototype.playChangeAni=function(t){var e=this,i=this.checkidx-1;this.rollM.showAllitemFrameAni(i);var n=.4,o=this.winbetlist[i],s=this.winscorelist[i];if(cc.log("playChangeAni idx "+i+" winbet "+o+" nowscore "+s+" ======="),o>1){var a=s/o;cc.tween(this.node).delay(n).call(function(){e.showWinscore(!0,0,a)}).delay(.3).call(function(){e.showBetSmallLabel()}).delay(.5).call(function(){}).start(),n+=.8}var r=cc.tween(this.node).delay(n).call(function(){e.showWinscore(!0,1,s);var n=0;e.isNekoWinlist[i]&&(n=e.nekoWinLenlist[i]),e.rollM.ChangeSymbol(i,t,n,e.scatternumList[i],e.scatterPosList[i])});this.scatternumList[i]>=3&&r.delay(2).call(function(){e.showWinscore(!1),e.showTipscatter(!0)}).delay(2).call(function(){e.showTipscatter(!1)}),r.start()},e.prototype.checkExtrabet=function(t,e){var i=!1;if(!c.default.isfree)return!1;this.endWaynum=1;for(var n=0;n<7;n++)this.newextrabetposlist[n]=[];var o=c.default.winiconlen[e];if(o instanceof Array)for(n=0;n<o.length;n++){var s=o[n].wildCards;if(s instanceof Array){for(var a=0;a<s[0].length;a++){var r=s[0][a];r[1]=Math.abs(r[1]-(5-r[2]+1)),this.newextrabetposlist[r[0]-1].push(r)}i=!0}}for(n=0;n<t.length;++n){var l=t[n];if(n<6){var h=l.length;n>=1&&n<=4&&h++,this.endWaynum*=h}}return i},e.prototype.showBetBiglabel=function(t,e){var i=this;this.lb_winbet.node.opacity=255,this.lb_winbet.node.scale=1.2,this.lb_winbet.string="x"+t,this.lb_winbet.font=this.font2;var n=cc.tween(this.lb_winbet.node).to(.2,{scale:1.5}).to(.2,{scale:1.2}).call(function(){i.showBetAni(i.nowbet)});if(e){var o=this.checkidx-1;n.delay(.5).call(function(){var t=0;i.isNekoWinlist[o]&&(t=i.nekoWinLenlist[o]),i.rollM.ChangeSymbol(o,i.newIconList,t,i.scatternumList[o],i.scatterPosList[o]),i.showWinscore(!0,1,i.winscorelist[o],!0)}),this.scatternumList[o]>=3&&n.delay(2).call(function(){i.showTipscatter(!0)}).delay(2).call(function(){i.showTipscatter(!1)})}n.start(),h.default.inst.playEffect("Free_02")},e.prototype.showBetSmallLabel=function(t){var e=this;void 0===t&&(t=0),this.lb_winbet.font=this.font2,0===t?cc.tween(this.lb_winbet.node).to(.2,{scale:1.5}).to(.2,{scale:1.2}).call(function(){e.showBetAni(e.nowbet),e.showExtraFrame(!0)}).start():(this.lb_winbet.string="x"+t,cc.tween(this.lb_winbet.node).to(.15,{scale:1.1}).to(.1,{scale:1}).call(function(){e.showBetAni(e.nowbet)}).start()),h.default.inst.playEffect("Free_02")},Object.defineProperty(e.prototype,"betlightani",{get:function(){return 0===this.lightPool.size()&&this.recycleLIght(cc.instantiate(this.ani_light.node)),this.lightPool.get().getComponent(cc.Animation)},enumerable:!1,configurable:!0}),e.prototype.recycleLIght=function(t){this.lightPool.put(t)},e.prototype.playAllbetmove=function(t,e){var i=this;cc.log("playAllbetmove iswin "+t),h.default.inst.playEffect("Free_01");for(var n=0,o=cc.tween(this.node),s=0,a=0;a<7;++a){var r=0;this.newextrabetposlist[a].length>0&&(s=a,r=.1),o.call(function(){for(var o=i.newextrabetposlist[n],a=function(a){var r=i.rollM.columns[n].items[o[a][1]],c=i.rollM.columns[n].items[o[a][1]].betworldpos,l=t?cc.v2():cc.v2(0,-725),h=i.lb_winbet.node.parent.convertToWorldSpaceAR(i.lb_winbet.node.getPosition());l=r.node.convertToNodeSpaceAR(h);var u=a===o.length-1&&n>=s,p=o[a][2];i.showBetMove(r,c,l,function(){t?i.showBetBiglabel(i.nowbet*p,u):i.showBetSmallLabel(i.nowbet*p),u&&e(),i.nowbet*=p})},r=0;r<o.length;++r)a(r);n++}),o.delay(r)}o.start()},e.prototype.test=function(){for(var t=this,e=cc.tween(this.node),i=0,n=0,o=0;o<7;++o){var s=0;this.newextrabetposlist[o].length>0&&(i=o,s=.1),e.call(function(){for(var e=t.newextrabetposlist[n],o=function(o){var s,a=t.rollM.columns[n].items[e[o][1]],r=t.rollM.columns[n].items[e[o][1]].betworldpos,c=t.lb_winbet.node.parent.convertToWorldSpaceAR(t.lb_winbet.node.getPosition());s=a.node.convertToNodeSpaceAR(c);var l=o===e.length-1&&n>=i,h=e[o][2];t.showBetMove(a,r,s,function(){t.showBetBiglabel(t.nowbet*h,!1),l&&(t.nowbet*=h)})},s=0;s<e.length;++s)o(s);n++}),e.delay(s)}e.start()},e.prototype.showBetMove=function(t,e,i,n){this.betlightani,this.ani_light.node.parent;var o=e;t.node.active=!0,t.moveTween(o,i,function(){n()})},e.prototype.showBetAni=function(){this.ani_bet.play()},e.prototype.setRollAddSpeed=function(t){this.rollM.setColumeAddSpeed(t),this.showSpeedFrame(t-1),this.isaddspeed=!0},e.prototype.showTipInfo=function(t){var e=this;if(this.sp_tipinfo0.node.active=t,t){this.sp_tipinfo0.node.anchorX=0;var i=this.looptipidxs[this.tipinfo0idx];this.sp_tipinfo0.spriteFrame=this.tipInfoAtals.getSpriteFrame("info_"+i),this.tipinfo0idx++,this.tipinfo0idx>=this.looptipidxs.length&&(this.tipinfo0idx=0);var n=this.sp_tipinfo0.node.width,o=n/100,s=0;n>600?(s=-280,this.sp_tipinfo0.node.x=s,cc.tween(this.sp_tipinfo0.node).delay(1).by(o,{x:-n-50}).call(function(){e.showTipInfo(!0)}).start()):(s=(600-n)/2-300,this.sp_tipinfo0.node.x=s,cc.tween(this.sp_tipinfo0.node).delay(2).call(function(){e.showTipInfo(!0)}).start())}else cc.Tween.stopAllByTarget(this.sp_tipinfo0.node)},e.prototype.showTipscatter=function(t){if(this.sp_tipinfo0.node.active=t,t){var e=this.sp_tipinfo0.node;e.anchorX=.5,e.x=0,this.sp_tipinfo0.spriteFrame=this.tipInfoAtals.getSpriteFrame("info_7"),cc.tween(e).repeat(4,cc.tween(e).to(.25,{scale:1.1}).to(.25,{scale:1})).start()}},e.prototype.FreeStart=function(){cc.log("\u663e\u793a\u521d\u59cb\u500d\u7387 ============"),this.nowbet=3,this.lb_winbet.string="x3",this.lb_winbet.node.y=-450,this.lb_winbet.node.scale=1,this.showBuyfreeBtn(!1)},e.prototype.FreeEnd=function(){this.nowbet=0,this.lb_winbet.string="",this.lb_winbet.node.y=-225,this.lb_winbet.node.scale=1.5,this.showBuyfreeBtn(!0),this.buyfreebtn.interactable=!0},e.prototype.freeReset=function(){c.default.freeTimes<c.default.freeTotal&&(3!=this.nowbet&&(this.lb_winbet.node.scale=0,cc.Tween.stopAllByTarget(this.lb_winbet.node),cc.tween(this.lb_winbet.node).to(.5,{scale:1.2}).start()),this.nowbet=3,this.lb_winbet.string="x3",this.lb_winbet.font=this.font1)},e.prototype.showExtraFrame=function(t){!this.extraframe.active&&t&&this.ani_changeframe.play(),this.extraframe.active=t},e.prototype.showWinscore=function(t,e,i,n){if(void 0===e&&(e=-1),void 0===i&&(i=0),void 0===n&&(n=!1),t)if(this.winframeAni.node.active=!0,this.winframeAni.play(),this.ani_score.play(),n&&this.ani_coin.play(),2!==e&&h.default.inst.playEffect("Prize_01"),this.lb_win.string=i.toFixed(2),cc.tween(this.lb_win.node).to(.25,{scale:1.1}).to(.15,{scale:1}).start(),0===e)this.sp_wininfo.node.active=!1,this.lb_win.horizontalAlign=cc.Label.HorizontalAlign.CENTER,this.lb_win.node.anchorX=.5;else{this.lb_win.horizontalAlign=cc.Label.HorizontalAlign.LEFT,this.lb_win.node.anchorX=0;var o=1===e?"info_tw2":"info_win2";this.sp_wininfo.spriteFrame=this.tipInfoAtals.getSpriteFrame(o),this.sp_wininfo.node.active=!0}else this.winframeAni.node.active=!1,this.lb_win.node.scale=0,this.sp_wininfo.node.active=!1,this.lb_win.string=""},e.prototype.setAllIconBg=function(){this.rollM.setAllIconBg()},e.prototype.stopAllani=function(){this.rollM.stopAllcolumnani()},e.prototype.showAlliconLight=function(t){this.rollM.setIconlight(t)},e.prototype.playScatterani=function(t){this.rollM.playscatter(t)},e.prototype.initAll=function(){this.setWayLabel(),this.showWinscore(!1),this.showExtraFrame(!1),c.default.isfree||(this.lb_winbet.string="")},e.prototype.runRoll=function(){this.playReelSpin();for(var t=0;t<7;++t)this.extrabetposlist[t]=[],this.newextrabetposlist[t]=[];this.allwayNum=1,this.nowReult=this.getResultlist(c.default.AllIconList[0]),this.isaddspeed=!1,this.getscoreNbet(),this.checkidx=0,c.default.isfree||(this.nowbet=0),this.rollM.RollAllcolumn(!0,this.getResultlist(c.default.AllIconList[0]))},e.prototype.stopRoll=function(){this.rollM.stopAllcolumn(),this.stopReelSpin()},e.prototype.getscoreNbet=function(){this.winbetlist=[],this.winscorelist=[],this.isNekoWinlist=[],this.nekoWinLenlist=[],this.scatterPosList=[],this.scatternumList=[],c.default.isfree||(this.curWin=0);for(var t=c.default.AllIconList.length-1,e=0;e<t;++e){for(var i=c.default.winiconlen[e],n=0,o=!1,s=0,a=0;a<i.length;++a)0===a&&this.winbetlist.push(i[a].cat_bet),n+=i[a].win/100,i[a].card===c.default.wildIconidx&&(o=!0,s=i[a].length);this.winscorelist.push(n),this.isNekoWinlist.push(o),this.nekoWinLenlist.push(s)}for(e=0;e<=t;++e){var r=0,l=this.getResultlist(c.default.AllIconList[e]),h=[];for(a=0;a<l.length;++a){i=[];for(var u=l[a],p=0;p<u.length;++p)u[p][0]===c.default.scatterIconidx&&(r++,i.push(p));h.push(i)}this.scatterPosList.push(h),this.scatternumList.push(r)}cc.log(" this.winscorelist "+this.winscorelist+" "),cc.log("this.winbetlist "+this.winbetlist+" ")},e.prototype.getResultlist=function(t){for(var e=[],i=0;i<t.length;++i){for(var n=[],o=t[i],s=o.length,a=0;a<s;++a)n.push(this.getNewList(o[s-1-a])),n[a][0]--;e[i]=n}return e},e.prototype.getNewList=function(t){for(var e=[],i=0;i<t.length;++i)e.push(t[i]);return e},e.prototype.setNodeActive=function(t){this.freeNode.active=t,this.nomarlNode.active=!t},e.prototype.playReelSpin=function(){this.tw=cc.tween(this.node),this.tw.repeatForever(cc.tween(this.node).call(function(){h.default.inst.playEffect("Reel_Spin")}).delay(.1)),this.tw.start()},e.prototype.stopReelSpin=function(){this.tw&&this.tw.stop()},e.prototype.onBuyfreeClick=function(){cc.log("onBuyfreeClick---"),this.buyfreeNode.active=!0,this.cost.string=(75*c.default.currBet/100).toFixed(2)},e.prototype.onBuyfreeStart=function(){cc.log("onBuyfreeStart---"),this.buyfreebtn.interactable=!1,this.mainGame.buyFree(),this.buyfreeNode.active=!1},e.prototype.onBuyfreeCancel=function(){cc.log("onBuyfreeCancel---"),this.buyfreeNode.active=!1},e.prototype.showBuyfreeBtn=function(t){this.buyfreebtn.node.active=t},s([d(cc.SpriteAtlas)],e.prototype,"tipInfoAtals",void 0),s([d(cc.Font)],e.prototype,"font1",void 0),s([d(cc.Font)],e.prototype,"font2",void 0),s([d(cc.Label)],e.prototype,"cost",void 0),s([d(cc.Button)],e.prototype,"cancel",void 0),s([d(cc.Button)],e.prototype,"startbtn",void 0),s([d(cc.Node)],e.prototype,"buyfreeNode",void 0),s([d(cc.Button)],e.prototype,"buyfreebtn",void 0),s([d(cc.Animation)],e.prototype,"winframeAni",void 0),i=s([f],e)}(r.default);i.default=m,cc._RF.pop()},{"../GaneshaGame":"GaneshaGame","../common/GaneshaQuickUse":"GaneshaQuickUse","../core/GaneshaData":"GaneshaData","../core/GaneshaNotify":"GaneshaNotify","../manger/GaneshaAudio":"GaneshaAudio","./GaneshaRoll":"GaneshaRoll"}],GaneshaColumn:[function(t,e,i){"use strict";cc._RF.push(e,"0a2f18RCINIWJNK94PA72qE","GaneshaColumn");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../common/GaneshaQuickUse"),r=t("../core/GaneshaData"),c=t("../core/GaneshaNotify"),l=t("../manger/GaneshaAudio"),h=t("./GaneshaItem"),u=cc._decorator,p=u.ccclass,f=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.index=-1,e.symidx=[],e.randmlist=[],e.runRoll=!1,e.maxS=0,e.rollheight=1332,e.rollweight=900,e.moves=0,e.speed=4e3,e.isStop=!0,e.result=[],e.freerandmlist=[],e.itemnum=10,e.lineitemnum=0,e.isaddspeed=!1,e.isrealrun=!0,e.nekoposlist=[],e.newnekoposlist=[],e.spObj={addSp:0,moves:0},e.startAddSp=!1,e.addSp=1,e}return o(e,t),e.prototype.onLoad=function(){this.mask=this.getComponent(cc.Mask),c.default.addNotify(c.GaneshaEvent.Roll_Stop,this,this.rollStop)},e.prototype.initColumn=function(t,e){for(var i=this,n=0;n<r.default.wildIconidx-1;++n)this.randmlist.push(n);this.index=t,this.rollM=e,this.freerandmlist=this.getNumlist(this.randmlist),this.stopAddSpeedTween=cc.tween(this.node).call(function(){cc.tween(i.spObj).to(2,{addSp:0}).start()}).delay(2).call(function(){i.addSp=.1,i.runRoll=!1,i.isStop=!0,i.backToTarget()}),this.initItems()},e.prototype.initItems=function(){var t=this.node.children[0];this.items.push(t.getComponent(h.default)),this.items[0].initItem(0,this);for(var e=1;e<this.itemnum;++e){var i=cc.instantiate(t);i.parent=t.parent,this.items.push(i.getComponent(h.default)),this.items[e].initItem(e,this)}},e.prototype.setitemicon=function(t){cc.log(t),this.mask.enabled=!1;var e=[];t.forEach(function(t){e.push(t[1])});for(var i=0;i<this.itemnum;++i)if(i<t.length){var n=t[i];this.items[i].setStopInfo(n,e)}else this.items[i].node.active=!1},e.prototype.getRandidx=function(t){var e=this.randmlist,i=[],n=Math.floor(Math.random()*(e.length-1));i.push(e[n]),i.push(t);var o=0;return t>1&&(o=Math.floor(1*Math.random())),i.push(o),i},e.prototype.setAddSpeed=function(t){void 0===t&&(t=!1),this.runRoll&&(this.isaddspeed=!0,t&&(this.spObj.addSp=4,this.stopAddSpeedTween.start(),l.default.inst.playEffect("Reel_Quick")))},e.prototype.setRealRun=function(){this.isrealrun=!0},e.prototype.setItems=function(t,e){this.mask.enabled=!0;for(var i=0;i<this.itemnum;++i)this.items[i].node.active=!0;var n;for(cc.log(t),this.lineitemnum=t.length,this.nekoposlist=this.getNekoPoslist(t),this.symidx=[],this.index<=5?(n=this.index+3,this.maxS=this.rollheight*n):(n=2,this.maxS=this.rollweight*n),i=0;i<n;++i){for(var o=[],s=0;s<this.itemnum;++s){var a=1;s<this.lineitemnum&&(a=t[s][1]),o[s]=this.getRandidx(a)}this.symidx[i]=o}this.result=this.symidx[n]=this.getresultlist(t,this.itemnum);var r=[];for(this.result.forEach(function(t){r.push(t[1])}),i=0;i<this.itemnum;++i)this.items[i].SetIconRun(this.result[i],r);this.isrealrun=e,this.isStop=!1,this.runRoll=!0},e.prototype.getNekoPoslist=function(t){for(var e=[],i=0;i<t.length;++i)t[i][0]===r.default.wildIconidx-1&&e.push(i);return e},e.prototype.showItemFrameani=function(t){for(var e=0;e<t.length;++e)this.items[this.lineitemnum-t[e]].showFrameAni()},e.prototype.playItemChange=function(t,e,i,n){var o=this;void 0===i&&(i=0),void 0===n&&(n=0);var s=0,a=0;if(this.result=this.getresultlist(e,this.itemnum),this.mask.enabled=!0,i>0&&(this.index<i&&(this.nekoposlist=[]),6===this.index))for(var r=0;r<this.nekoposlist.length;++r)this.nekoposlist[r]<i-1&&(this.nekoposlist.shift(),r--);this.newnekoposlist=[];var c=this.getNekoPoslist(e);if(c.length!==this.nekoposlist.length)for(r=this.nekoposlist.length;r<c.length;++r)this.newnekoposlist.push(c[r]);for(r=0;r<this.itemnum;++r){var l=this.items[r];if(l.node.active=!0,-1!==t.indexOf(this.lineitemnum-r))if(l.setIconcolor(!0),1===l.frametype||2===l.frametype){var h=l.index;if(s>0){var u=function(){};h=l.index-a,l.setmoveIcon(h,s,u)}l.playChangeSym(e[h])}else s+=l.iconlength,a++,l.playFadeAni();else s>0&&(u=function(){},r===this.itemnum-1&&(u=function(){o.moveEnd()}),h=l.index-a,l.updateIcon(this.result[h][0],!0),l.setmoveIcon(h,s,u))}this.scheduleOnce(function(){if(n>=3)for(var t=0;t<o.lineitemnum;++t)o.items[t].playMoveIcon();else o.moveAllIcon();o.lineitemnum=e.length},1)},e.prototype.moveAllIcon=function(){for(var t=0;t<this.itemnum;++t)this.items[t].playMoveIcon()},e.prototype.moveEnd=function(){l.default.inst.playEffect("Symbol_Down");var t=[];this.result.forEach(function(e){t.push(e[1])}),this.mask.enabled=!0;for(var e=0;e<this.itemnum;++e){var i=this.items[e];i.ismovebet=-1===this.newnekoposlist.indexOf(e),i.node.active=!0,i.stopAni(),i.setStopInfo(this.result[e],t),i.setStopRunpos(),i.stopToShow()}},e.prototype.setItemsBg=function(){for(var t=0;t<this.itemnum;++t)this.items[t].setBgIcon()},e.prototype.getresultlist=function(t,e){for(var i=[],n=0;n<e;++n)n<t.length?i.push(t[n]):i.push(this.getRandidx(1));return i},e.prototype.getNumlist=function(t){var e=[];return t.forEach(function(t){e.push(t)}),e},e.prototype.setAllitempos=function(){for(var t=0;t<this.itemnum;++t)this.items[t].setStopRunpos()},e.prototype.stopRoll=function(){if(this.runRoll){var t=[];this.result.forEach(function(e){t.push(e[1])}),this.stopAddSpeedTween.stop(),this.isaddspeed=!1,this.isStop=!0,this.runRoll=!1;for(var e=0;e<this.lineitemnum+1;++e)this.items[e].setStopInfo(this.result[e],t);this.backToTarget()}},e.prototype.backToTarget=function(t){var e=this;void 0===t&&(t=!1),l.default.inst.stopEffect("Reel_Quick"),this.setAllitempos(),this.moves=0,this.addSp=1,this.isaddspeed=!1;var i=this;6===this.index?cc.tween(i.node).to(.2,{x:i.node.x-20}).to(.2,{x:i.node.x}).call(function(){i.playStopani()}).start():cc.tween(i.node).to(.2,{y:i.node.y-20}).to(.2,{y:i.node.y}).call(function(){5==e.index&&c.default.pubNotify(c.GaneshaEvent.CheckWinScore),i.playStopani()}).start(),c.default.pubNotify(c.GaneshaEvent.Roll_Stop,this.index),l.default.inst.playEffect("Reel_Stop")},e.prototype.playStopani=function(){this.mask.enabled=!1;for(var t=0;t<this.itemnum;++t)t<this.lineitemnum?this.items[t].stopToShow():this.items[t].node.active=!1},e.prototype.setoneitem=function(t,e){this.items[e].setIconcolor(t)},e.prototype.setItemlight=function(t){for(var e=0;e<this.lineitemnum+1;++e)this.setoneitem(t,e)},e.prototype.playsymani=function(t,e){void 0===e&&(e=0),this.setoneitem(!0,t),this.items[t].playAni(e)},e.prototype.stopSymani=function(){for(var t=0;t<this.itemnum;++t)this.items[t].stopAllEffect()},e.prototype.rollStop=function(t){this.isaddspeed&&t==this.index-1&&0!=this.index&&6!=this.index&&(l.default.inst.playEffect("Reel_Quick"),this.isaddspeed=!0,this.stopAddSpeedTween.start(),this.spObj.addSp=4)},e.prototype.update=function(t){if(!this.isStop&&this.runRoll){var e=void 0;e=t*this.speed*(r.default.IsTuro?2:1)*(this.isaddspeed?this.spObj.addSp:this.addSp),!this.isaddspeed&&this.isrealrun&&(this.moves+=e),this.moves>=this.maxS&&(e+=this.maxS-this.moves,this.runRoll=!1,this.isStop=!0);for(var i=0;i<this.itemnum;++i)this.items[i].updateItem(e,this.isaddspeed,this.isrealrun);this.isStop&&this.backToTarget()}},s([p],e)}(a.default));i.default=f,cc._RF.pop()},{"../common/GaneshaQuickUse":"GaneshaQuickUse","../core/GaneshaData":"GaneshaData","../core/GaneshaNotify":"GaneshaNotify","../manger/GaneshaAudio":"GaneshaAudio","./GaneshaItem":"GaneshaItem"}],GaneshaData:[function(t,e,i){"use strict";cc._RF.push(e,"4e103ltow5FK4U+WN5+MUsV","GaneshaData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.initAllvalue=function(){this.freewinscore=this.scatterNum=this.freeTimes=0,this.isfree=this.isfreestart=this.IsTuro=!1,this.betLine=1,this.AutoNum=-1},t.coins=0,t.betLine=1,t.newBetLine=0,t.currBet=0,t.winScore=0,t.avatar="",t.language="zh-ch",t.winscorelist=[],t.username="",t.password="",t.token="",t.connectSuccess=!1,t.nickname="",t.ID="",t.gamesign="",t.caijinPool=[0,0,0,0],t.freeTimes=0,t.freeTotal=0,t.Freebet=0,t.FreeWin=0,t.caishenNum=0,t.freewinscore=0,t.isfreestart=!1,t.isfreeinfree=!1,t.isfree=!1,t.selectType=8,t.canUseOther=!1,t.symreslut=[],t.symrealresult=[],t.winicon=[],t.winiconlen=[],t.winlineidxs=[],t.wildids=[],t.result=[],t.caijin=[],t.multiple=1,t.serverScore=0,t.isFirst=!1,t.tempCaijin=[0,0,0,0],t.jackpotwin=0,t.jacktype=0,t.winningscore=0,t.jpvalue=5,t.user_id=4,t.photo_index=7,t.betValues=[.01,.02,.05,.1,.2,.3,.4,.6,1,2,5,10,20,30,50],t.iconsNum=13,t.Lineheight=740,t.roleIconidx=8,t.wildIconidx=11,t.scatterIconidx=12,t.freeSelectType=-1,t.FreeAllReultList=[],t.AllLineNum=20,t.AllIconList=[],t.scatterNum=0,t.IsTuro=!1,t.AutoNum=-1,t.WinlineBet=[],t}();i.default=n,cc._RF.pop()},{}],GaneshaFree:[function(t,e,i){"use strict";cc._RF.push(e,"50374MaMVRFkq+LOyYdCE4+","GaneshaFree");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../GaneshaGame"),r=t("../common/GaneshaAnilabel"),c=t("../common/GaneshaQuickUse"),l=t("../core/GaneshaData"),h=t("../core/GaneshaNotify"),u=t("../manger/GaneshaAudio"),p=cc._decorator,f=p.ccclass,d=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.freebgimgs=[],e.lb_freeleft=null,e.lb_getfree=null,e.btn_start=null,e.btn_end=null,e.freeget=null,e.freeendnod=null,e.lb_endfreenum=null,e.lb_freewin=null,e.lb_infree=null,e.ani_start=null,e.lastspin=null,e.sp_freebg=null,e.ani_end=null,e.ani_coinend=null,e}return o(e,t),e.prototype.onLoad=function(){this.mainGame=this.node.parent.getComponent(a.default)},e.prototype.start=function(){this.btn_start.node.on("click",this.showFreestart,this),this.btn_end.node.on("click",this.freeEnd,this)},e.prototype.showGetfree=function(t,e){var i=this;l.default.IsTuro=!1,h.default.pubNotify(h.GaneshaEvent.QuickRun,l.default.IsTuro),this.btn_start.node.active=!1,this.lb_getfree.string=""+t,this.lb_endfreenum.string=""+e,u.default.inst.playEffect("Free_Trigger"),u.default.inst.playMusic("FreeGame_Back_Music"),this.sp_freebg.spriteFrame=this.freebgimgs[0],this.ani_start.play(),cc.tween(this.node).delay(.3).call(function(){i.freeget.active=!0}).delay(.2).call(function(){i.sp_freebg.node.opacity=255}).delay(.5).call(function(){i.btn_start.node.active=!0}).delay(4).call(function(){i.showFreestart()}).start()},e.prototype.showFreestart=function(){var t=this;u.default.inst.playEffect("Free_Button"),this.btn_start.node.active=!1,this.setFreeinfo(l.default.freeTimes),this.mainGame.showFreeBg(!0),cc.Tween.stopAllByTarget(this.node),cc.log("showFreestart ====GaneshaData.freeTimes "+l.default.freeTimes+"========"),this.mainGame.freewin=0,l.default.isfree=!0,l.default.winScore=0,this.freeget.active=!1,cc.tween(this.sp_freebg.node).to(.15,{opacity:0}).delay(1).call(function(){t.mainGame.checkStartGame()}).start()},e.prototype.showAddFree=function(t){var e=this;this.lb_infree.string=""+t,this.lb_infree.node.parent.active=!0,cc.tween(this.node).delay(2).call(function(){e.lb_infree.node.parent.active=!1,e.setFreeinfo(l.default.freeTimes)}).delay(1).call(function(){e.mainGame.checkStartGame()}).start()},e.prototype.showFreeend=function(t){var e=this;this.setFreeinfo(-1),this.btn_end.node.active=!1,l.default.coins+=t,u.default.inst.playEffect("Free_Settlement"),t>0?r.default.inst.playlabel(0,Math.floor(t)/100,4,this.lb_freewin,!0,"",!1):this.lb_freewin.string="0",this.sp_freebg.spriteFrame=this.freebgimgs[1],this.ani_coinend.node.active=!0,this.ani_end.play(),this.ani_coinend.play(),cc.tween(this.sp_freebg.node).delay(.1).to(.15,{opacity:255}).call(function(){e.freeendnod.active=!0}).delay(4).call(function(){e.btn_end.node.active=!0}).start(),cc.tween(this.node).delay(3.5).call(function(){e.freeEnd()}).start()},e.prototype.freeEnd=function(){var t=this;u.default.inst.playEffect("Free_SettlementEnd"),cc.Tween.stopAllByTarget(this.sp_freebg.node),this.btn_end.node.active=!1,this.ani_coinend.node.active=!1,cc.tween(this.sp_freebg.node).call(function(){t.freeendnod.active=!1}).to(.15,{opacity:0}).delay(1).call(function(){t.mainGame.showFreeEnd()}).start(),l.default.freeTotal=0},e.prototype.setFreeinfo=function(t){this.lb_freeleft.node.parent.active=t>0,t>=0&&(this.lb_freeleft.string=t+""),this.lastspin.active=0===t},s([d(cc.SpriteFrame)],e.prototype,"freebgimgs",void 0),s([f],e)}(c.default);i.default=m,cc._RF.pop()},{"../GaneshaGame":"GaneshaGame","../common/GaneshaAnilabel":"GaneshaAnilabel","../common/GaneshaQuickUse":"GaneshaQuickUse","../core/GaneshaData":"GaneshaData","../core/GaneshaNotify":"GaneshaNotify","../manger/GaneshaAudio":"GaneshaAudio"}],GaneshaGame:[function(t,e,i){"use strict";cc._RF.push(e,"5e68cEVxjhCPJ8AlFbr/PXV","GaneshaGame");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./common/GaneshaQuickUse"),r=t("./core/GaneshaData"),c=t("./core/GaneshaNotify"),l=t("./manger/GaneshaAudio"),h=t("./network/NetGanesha"),u=t("./view/GaneshaAudioView"),p=t("./view/GaneshaBottom"),f=t("./view/GaneshaCenter"),d=t("./view/GaneshaRule"),m=t("./view/GaneshaFree"),y=t("./view/GaneshaBigWin"),b=t("./view/GaneshaPayView"),g=t("./view/GaneshaTipView"),w=cc._decorator,v=w.ccclass,_=w.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipView=null,e.rollItems=0,e.auto=!1,e.winLines=[],e.freeTimes=0,e.isCanClick=!0,e.isScrollScore=!1,e.isTouchStart=!1,e.isCheckMutiple=!0,e.isPlayroll=!1,e.canspin=!0,e.scatternum=0,e.centerM=null,e.wildPosList=[],e.wildAniPosList=[],e.winmaxid=-1,e.showScatterNum=0,e.freewildnum=0,e.startScatterlist=[],e.freeResultidx=0,e.addFreenum=0,e}return o(e,t),e.prototype.onLoad=function(){var t=this,e=window.BUNDLE_NAME;cc.assetManager.loadBundle(e,function(e,i){i.loadDir("music",cc.AudioClip,function(){},function(e,i){cc.log(i),t.scheduleOnce(function(){l.default.inst.initClips(i),l.default.inst.playMusic("Game_Back_Music")},.5)})}),c.default.init(),this.init(),cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","cocosChangeOrientation","(I)V",2):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","cocosChangeOrientation:",2),cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT)},e.prototype.init=function(){this.bigwinview=this.findNode("superwin",y.default),this.payviwe=this.findNode("IconPayView",b.default),this.freeTimes=0,this.audioSetView=this.findNode("audiopanel",u.default),this.backbu=this.findNode("back",cc.Button),this.bottomM=this.node.getChildByName("porbottom").getComponent(p.default),this.freeM=this.node.getChildByName("freepanel").getComponent(m.default),this.ruleNode=this.findNode("gamerule",d.default),this.mainbg=this.node.getChildByName("mainbg"),this.center=this.node.getChildByName("center"),this.freebg=this.node.getChildByName("freebg"),this.centerM=this.center.getComponent(f.default)},e.prototype.backHall=function(){c.default.init()},e.prototype.confirmback=function(){var t=this;cc.log("\u70b9\u51fb\u4e86\u8fd4\u56de\u6309\u94ae=========="),Common.backHall("Are you sure you want to leave the game?",function(){t.backHall()})},e.prototype.start=function(){this.addListener(),this.bottomM.setCanspin(!1),this.backbu.node.on("click",this.confirmback,this)},e.prototype.refushInfo=function(){this.setBottomState(),this.bottomM.SetBalance(),this.bottomM.initInfo()},e.prototype.addListener=function(){c.default.addNotify(c.GaneshaEvent.ROLL_END,this,this.checkGameOver),c.default.addNotify(c.GaneshaEvent.SELECT_MULTPILE,this,this.updateBetLine),c.default.addNotify(c.GaneshaEvent.Roll_Stop,this,this.Rollstop),c.default.addNotify(c.GaneshaEvent.GetResult,this,this.updateResult)},e.prototype.checkSuperWin=function(t){if(cc.log("\u68c0\u6d4b\u5927\u5956========="),r.default.winScore>=5*r.default.currBet){var e=r.default.winScore/r.default.currBet,i=Math.floor(r.default.winScore)/100;this.bottomM.stopAuto(),e<15?this.bigwinview.showBigWin(!0,0,i,0,t):e<40?this.bigwinview.showBigWin(!0,0,i,1,t):this.bigwinview.showBigWin(!0,0,i,2,t)}else t()},e.prototype.checkStartGame=function(){this.canspin=!0,r.default.AutoNum>=0&&!r.default.isfree&&r.default.AutoNum--,this.bottomM.showAutoLabel(),this.auto=r.default.AutoNum>=0,this.auto||r.default.isfree?this.startGame():this.setStartStatu(!0)},e.prototype.showFreeBg=function(t){this.freebg.active=t,this.centerM.setNodeActive(t)},e.prototype.resetSpin=function(){},e.prototype.getLottyResult=function(t){if(r.default.coins=t.userscore,r.default.winScore=Math.floor(100*t.winscore)/100,r.default.isfreestart=t.viewarray.getFreeTime.bFlag,r.default.isfreestart){var e=t.viewarray.getFreeTime;r.default.freeTimes=e.nFreeTime,r.default.FreeAllReultList=t.viewarray.frees,r.default.freeTotal=r.default.FreeAllReultList.length,r.default.FreeWin=e.win}for(var i=t.viewarray.nHandCards,n=0;n<i.length;++n)r.default.AllIconList.push(i[n]);r.default.winiconlen=t.viewarray.allLineWinDetail,r.default.winlineidxs=t.viewarray.nWinCards,this.updateResult()},e.prototype.getFreeResult=function(t){cc.log(t),this.addFreenum=0,r.default.AllIconList=[];for(var e=t.nHandCards,i=0;i<e.length;++i)r.default.AllIconList.push(e[i]);this.addFreenum=t.getFreeTime.nFreeTime,r.default.winiconlen=t.allLineWinDetail,r.default.winlineidxs=t.nWinCards,r.default.winScore=Math.floor(100*t.win)/100,r.default.isfreeinfree=t.getFreeTime.bFlag,r.default.wildids=t.wildCards,this.freewin+=t.win,this.freewin=Math.floor(100*this.freewin)/100,this.updateResult()},e.prototype.updateResult=function(){this.scatterlist=[],this.wildPosList=[],this.startScatterlist=[],this.scatternum=0,this.freewildnum=0,this.bottomM.SetSpin(!0),r.default.isfree&&(this.freeTimes=r.default.freeTimes,this.freeM.setFreeinfo(this.freeTimes),this.bottomM.stopbu.interactable=!1),this.startScatterlist=this.getScattetlist(r.default.AllIconList[0],!1),this.scatterlist=this.getScattetlist(r.default.AllIconList[r.default.AllIconList.length-1],!0),this.centerM.runRoll(),this.isPlayroll=!0},e.prototype.Rollstop=function(t){if(this.scatternum>=3&&this.showScatterNum>=0){var e=this.startScatterlist[t];cc.log(e);var i=e.length;this.showScatterNum+=i,this.showScatterNum>=3&&(this.showScatterNum=-1,t<5&&(this.centerM.setRollAddSpeed(t+1,this.startScatterlist),l.default.inst.playEffect("Reel_Quick")))}5===t&&l.default.inst.stopEffect("Reel_Quick")},e.prototype.getScattetlist=function(t,e){for(var i=[],n=0;n<7;++n){for(var o=t[n],s=[],a=o.length,c=0;c<a;++c)o[c][0]-1===r.default.scatterIconidx&&(s.push(a-c-1),e&&this.scatternum++);i.push(s)}return i},e.prototype.bigWinEnd=function(t){r.default.isfree?this.bottomM.ShowTotalwin(this.freewin):(this.bottomM.ShowTotalwin(r.default.winScore),r.default.coins+=t,this.bottomM.SetBalance())},e.prototype.checkGameOver=function(){var t=this;if(this.isPlayroll=!1,cc.log("checkGameOver========= GaneshaData.freeTimes "+r.default.freeTimes),r.default.winScore<20*r.default.currBet&&(r.default.isfree?this.bottomM.ShowTotalwin(this.freewin):(this.bottomM.ShowTotalwin(r.default.winScore),r.default.coins+=r.default.winScore)),this.bottomM.SetBalance(),r.default.isfreestart)this.checkSuperWin(function(){t.bottomM.stopAuto(),r.default.isfree=!0,r.default.isfreestart=!1,l.default.inst.playEffect("clock"),t.centerM.stopAllani(),t.centerM.playScatterani(t.scatterlist),cc.tween(t.node).delay(2).call(function(){t.centerM.stopAllani(),t.freeM.showGetfree(r.default.freeTimes,r.default.freeTotal)}).delay(.5).call(function(){t.centerM.FreeStart()}).start(),t.freewin=0});else if(r.default.isfreeinfree)r.default.isfreeinfree=!1,this.checkSuperWin(function(){r.default.freeTimes+=t.addFreenum,t.freeTimes=r.default.freeTimes,t.centerM.playScatterani(t.scatterlist),cc.tween(t.node).delay(2).call(function(){t.freeM.showAddFree(t.addFreenum)}).start()});else if(r.default.isfree)if(r.default.freeTimes>0){var e=1;this.scheduleOnce(function(){t.checkSuperWin(function(){t.checkStartGame()})},e)}else this.scheduleOnce(function(){t.checkSuperWin(function(){r.default.isfree=!1,t.freeM.showFreeend(t.freewin),t.freewin=0})},2);else e=1,this.scheduleOnce(function(){t.checkSuperWin(function(){t.checkStartGame()})},e)},e.prototype.StopRoll=function(){this.isPlayroll&&(this.isPlayroll=!1,this.centerM.stopRoll())},e.prototype.setBottomState=function(){this.setStartStatu(!0),this.auto=!1,this.canspin=!0},e.prototype.setStartState=function(){r.default.AllIconList=[],this.winLines=[],r.default.result=[],r.default.symrealresult=[],this.centerM.stopAllani(),this.bottomM.setCanspin(!1),this.showScatterNum=0,r.default.WinlineBet=[],this.centerM.initAll(),this.payviwe.closePay(),this.payviwe.setPayCanShow(!1)},e.prototype.startGame=function(){if(cc.log("isPlayroll "+this.isPlayroll+" canspin "+this.canspin+" =========="),!this.canspin)return!1;if(this.canspin=!1,this.isPlayroll)return!1;if(this.isPlayroll=!0,this.setStartState(),r.default.isfree){cc.log("\u8fdb\u884c\u514d\u8d39\u6e38\u620f=============== ");var t=r.default.FreeAllReultList[this.freeResultidx++];return--r.default.freeTimes,cc.log("freeTimes "+r.default.freeTimes+" ==========="),this.getFreeResult(t),!0}return r.default.coins>=r.default.currBet?(r.default.coins=Math.floor(100*(r.default.coins-r.default.currBet))/100,this.bottomM.SetBalance(),this.bottomM.ShowTotalwin(0),h.default.inst.sendLotty(r.default.betLine),!0):(Common.showMessage("The current score is not enough for a bet!"),this.setBottomState(),this.bottomM.stopAuto(),!1)},e.prototype.buyFree=function(){return cc.log("isPlayroll "+this.isPlayroll+" canspin "+this.canspin+" =========="),!!this.canspin&&(this.canspin=!1,!this.isPlayroll&&(this.isPlayroll=!0,this.setStartState(),r.default.isfree?void 0:r.default.coins>=75*r.default.currBet?(r.default.coins=Math.floor(100*(r.default.coins-75*r.default.currBet))/100,this.bottomM.SetBalance(),this.bottomM.ShowTotalwin(0),h.default.inst.sendBuyFree(r.default.betLine),!0):(Common.showMessage("The current score is not enough for a bet!"),this.setBottomState(),this.bottomM.stopAuto(),!1)))},e.prototype.showFreeEnd=function(){this.winLines=[],this.centerM.FreeEnd(),this.freeTimes=0,this.freeResultidx=0,this.bottomM.SetBalance(),this.showFreeBg(!1),this.centerM.setAllIconBg(),this.checkStartGame(),l.default.inst.playMusic("Game_Back_Music")},e.prototype.updateBetLine=function(t){var e=r.default.betValues[t];r.default.newBetLine=e,this.updateBetLineInfo(e)},e.prototype.checkBetLine=function(){this.updateBetLineInfo(r.default.newBetLine)},e.prototype.updateBetLineInfo=function(t){r.default.newBetLine=t,r.default.betLine=t,r.default.currBet=t*r.default.AllLineNum*100},e.prototype.autoGame=function(t){this.isTouchStart=!0,this.auto=t,this.auto&&!this.isPlayroll&&(r.default.AutoNum--,this.startGame(),this.bottomM.showAutoLabel())},e.prototype.setStartStatu=function(t){this.bottomM.setCanspin(t),this.bottomM.SetSpin(!t),this.isPlayroll=!t,this.payviwe.setPayCanShow(!0)},e.prototype.ShowTotalwin=function(t,e){void 0===e&&(e=0),this.bottomM.ShowTotalwin(t,e)},e.prototype.showAudioSetting=function(){this.audioSetView.showPanel(!0)},e.prototype.showRule=function(){this.ruleNode.showPanel(!0)},e.prototype.onDestroy=function(){cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","cocosChangeOrientation","(I)V",1):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","cocosChangeOrientation:",1),cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),cc.audioEngine.stopAll()},s([_(g.default)],e.prototype,"tipView",void 0),s([v],e)}(a.default);i.default=S,cc._RF.pop()},{"./common/GaneshaQuickUse":"GaneshaQuickUse","./core/GaneshaData":"GaneshaData","./core/GaneshaNotify":"GaneshaNotify","./manger/GaneshaAudio":"GaneshaAudio","./network/NetGanesha":"NetGanesha","./view/GaneshaAudioView":"GaneshaAudioView","./view/GaneshaBigWin":"GaneshaBigWin","./view/GaneshaBottom":"GaneshaBottom","./view/GaneshaCenter":"GaneshaCenter","./view/GaneshaFree":"GaneshaFree","./view/GaneshaPayView":"GaneshaPayView","./view/GaneshaRule":"GaneshaRule","./view/GaneshaTipView":"GaneshaTipView"}],GaneshaItem:[function(t,e,i){"use strict";cc._RF.push(e,"8e215f460xDVr00VI3fowM7","GaneshaItem");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../common/GaneshaQuickUse"),r=t("../core/GaneshaData"),c=t("../core/GaneshaNotify"),l=t("../manger/GaneshaAudio"),h=t("./GaneshaCenter"),u=cc._decorator,p=u.ccclass,f=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameatlas=null,e.specilImgs=[],e.icon=null,e.norspinedatas=[],e.specilspinedatas=[],e.iconrunAtla=null,e.iconAtla=null,e.iconbg=null,e.frame=null,e.index=-1,e.result=-1,e.lightcolor=new cc.Color(255,255,255),e.darkcolor=new cc.Color(125,125,125),e.moveS=0,e.isRun=!1,e.topy=0,e.bottomy=0,e.jumpy=0,e.itemheight=148,e.leftx=-270,e.rightx=450,e.jumpx=900,e.itemweight=180,e.spinAnis=[],e.spinYnums=[164,103,101,54,43,36],e.betspinYnums=[50,25,18,5,0,-5],e.iconlength=0,e.ani_betlaebl=null,e.norcolorname=["green","blue","pink","purple","red","red2","yel"],e.specilcolorname=["green","blue","violet","red","orange","yellow"],e.iconNameList=["l_10_b","l_j_b","l_q_b","l_k_b","l_a_b","h_sushi_b","h_f_sushi_b","h_fan_b","h_lantern_b","h_drum_b","h_neko_b"],e.norbgtemname="",e.specilbgtemname="",e.frametype=0,e.iconLenList=[],e.sp_flowerframe=null,e.ani_flower=null,e.ani_fame=null,e.ani_fade=null,e.ani_wave=null,e.ismovebet=!1,e.ani_change=null,e.IconGroupList=[],e.spinetypenames=["win","idle","fastspin_idle","spawn"],e.ischananiparent=!1,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.paybu=this.getComponent(cc.Button),this.paybu.node.on("click",function(){l.default.inst.playEffect("Click"),c.default.pubNotify(c.GaneshaEvent.ShowPayTable,t)},this),this.mask=this.getComponent(cc.Mask),this.findNode("spinaniG").children.forEach(function(e){t.spinAnis.push(e.getComponent(sp.Skeleton))}),this.iconbg.node.zIndex=0},e.prototype.initItem=function(t,e){this.index=t,this.coloumn=e,this.node.zIndex=7-t+1,this.setLinenum(1)},e.prototype.start=function(){},e.prototype.setLinenum=function(t){if(this.iconlength=t,this.IsTopItem)this.startx=this.node.x=this.leftx+this.index*this.itemweight,this.moveS=this.rightx-this.startx;else{this.node.height=this.itemheight*t,this.bottomy=-r.default.Lineheight/2+this.node.height/2;var e=0;if(this.iconLenList.length>0&&this.index>0)for(var i=0;i<this.index;++i)e+=this.iconLenList[i]-1;var n=0;for(i=0;i<this.iconLenList.length;++i)n+=this.iconLenList[i];this.starty=this.node.y=this.bottomy+(this.index+e)*this.itemheight,this.topy=(n-4)*this.itemheight-296,this.moveS=this.topy-this.starty,this.jumpy=n*this.itemheight}var o=["a","b","c","d"];this.norbgtemname="l_block_"+o[t-1]+"_",this.specilbgtemname="h_block_"+o[t-1]+"_"},e.prototype.setBgIcon=function(){},e.prototype.playAni=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=!1),this.icon.node.active=!1,this.result<r.default.wildIconidx){(n=this.spinAnis[0]).node.active=!0;var i;i=this.IconGroupList[0]<r.default.roleIconidx?this.IconGroupList[0]:r.default.roleIconidx+4*(this.IconGroupList[0]-r.default.roleIconidx)+this.IconGroupList[1]-1,n.skeletonData=this.norspinedatas[i],n.setAnimation(0,"win",!0)}else{var n;(n=this.spinAnis[1]).node.active=!0,this.result===r.default.wildIconidx?n.skeletonData=this.specilspinedatas[1+this.iconlength]:n.skeletonData=this.specilspinedatas[this.iconlength-1],n.setAnimation(0,this.spinetypenames[t],!0)}e||this.ischananiparent||(this.ischananiparent=!0,h.default.inst.changeParent(this.node))},e.prototype.playChangeSym=function(t){var e=this;this.IconGroupList=t;var i=t[0];this.stopAni(),this.result=i,this.frametype=t[2],this.ani_fame.node.active=!1,this.ani_change.node.active=!0,this.ani_change.play("changebg"+(this.iconlength-2)),this.showFrame();var n=cc.tween(this.node);n.repeat(12,cc.tween(this.node).call(function(){l.default.inst.playEffect("Symbol_Change"),e.updateIcon(Math.floor(Math.random()*(r.default.wildIconidx-2)),!0)}).delay(.1)).call(function(){e.updateIcon(i,!0),e.ani_wave.node.active=!0,e.ani_wave.node.scaleY=e.iconlength>2?3.5:2,e.ani_wave.play("tapblox_wave"),cc.tween(e.icon.node).to(.2,{scale:1.6}).to(.2,{scale:1.5}).start()}).delay(.6).call(function(){e.stopToShow()}).delay(.1).call(function(){e.ani_change.node.active=!1}),n.start()},e.prototype.playFadeAni=function(){var t=this;this.frametype=0,this.stopAni(),this.ani_fame.node.active=!0,this.ani_fame.play("fameani"+(this.iconlength-1)),this.ani_wave.node.active=!0,this.ani_wave.node.scaleY=this.iconlength>2?3.5:2,this.ani_wave.play("tapblox_wave"),this.iconbg.node.active=this.icon.node.active=!1,this.scheduleOnce(function(){t.ani_fame.node.active=!1},1)},Object.defineProperty(e.prototype,"betworldpos",{get:function(){return this.ani_betlaebl.node.active=!1,this.ismovebet=!0,this.ani_betlaebl.node.getPosition()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bet",{get:function(){return this.index===r.default.wildIconidx?this.iconlength:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"betlb",{get:function(){return this.ani_betlaebl.node},enumerable:!1,configurable:!0}),e.prototype.showFrameAni=function(){this.playAni(),this.ani_fame.getComponent(cc.Sprite).spriteFrame=null,this.ani_fame.node.active=!0,this.ani_fame.play("fameani"+(this.iconlength-1)),this.setIconcolor(!0)},e.prototype.setmoveIcon=function(t,e,i){this.index;var n=.1*e;if(this.IsTopItem){var o=this.startx-e*this.itemweight;this.moveIcontween=cc.tween(this.node).to(n,{x:o}).by(.15,{x:-15}).by(.1,{x:15}).call(i)}else{var s=this.starty-e*this.itemheight;this.moveIcontween=cc.tween(this.node).to(n,{y:s}).by(.15,{y:-10}).by(.1,{y:10}).call(i)}},e.prototype.playMoveIcon=function(){this.ischananiparent&&(this.ischananiparent=!1,this.restParent()),this.moveIcontween&&this.moveIcontween.start(),this.moveIcontween=null},e.prototype.setStopRunpos=function(){this.frametype=this.IconGroupList[2],this.IsTopItem?this.setItemx(this.startx):this.setItemy(this.starty),this.updateIcon(this.result,!0),this.showFrame()},e.prototype.stopAni=function(){this.ischananiparent&&(this.ischananiparent=!1,this.restParent()),this.icon.node.active=!0,this.spinAnis.forEach(function(t){t.node.active=!1}),this.ani_fame.getComponent(cc.Sprite).spriteFrame=null,this.ani_change.getComponent(cc.Sprite).spriteFrame=null,this.ani_wave.getComponent(cc.Sprite).spriteFrame=null,this.ani_betlaebl.stop(),this.ani_betlaebl.node.angle=0},Object.defineProperty(e.prototype,"getWorldpos",{get:function(){return this.node.parent.convertToWorldSpaceAR(this.node.position)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ItemIsLeft",{get:function(){return this.coloumn.index<3||6===this.coloumn.index&&this.index<=1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsTopItem",{get:function(){return 6===this.coloumn.index},enumerable:!1,configurable:!0}),e.prototype.restParent=function(){var t=this.getWorldpos,e=this.coloumn.node;this.node.setParent(e),this.node.position=e.convertToNodeSpaceAR(t)},e.prototype.stopAllEffect=function(){this.ismovebet=!1,this.stopAni(),this.moveIcontween=null,this.ani_betlaebl.node.active=!1,this.frame.node.active=!1,this.setIconcolor(!0),this.iconLenList=[]},e.prototype.setIconcolor=function(t){this.icon.node.color=t?this.lightcolor:this.darkcolor},e.prototype.setStopInfo=function(t,e){this.result=t[0],this.iconLenList=e,this.frametype=t[2],this.IconGroupList=t,this.setLinenum(t[1]),this.updateIcon(this.result,!0)},e.prototype.updateIcon=function(t,e){var i,n;this.mask.enabled=!1,this.icon.node.y=0,this.iconbg.node.active=!0,e&&(this.sp_flowerframe.spriteFrame=this.frameatlas.getSpriteFrame("wh_vfx_c_normal_1x"+this.iconlength)),i=this.norcolorname[t%7],n=this.norbgtemname+i,this.iconbg.spriteFrame=this.iconrunAtla.getSpriteFrame(n),this.ani_betlaebl.node.active=!1,this.icon.node.active=!0,t<r.default.wildIconidx?t<r.default.roleIconidx?this.icon.spriteFrame=this.iconAtla.getSpriteFrame((t+1).toString()):this.icon.spriteFrame=this.iconAtla.getSpriteFrame(t+1+"_"+this.IconGroupList[1]):(t===r.default.wildIconidx&&r.default.isfree&&(this.ismovebet||1!=this.iconlength&&(this.ani_betlaebl.node.getComponent(cc.Label).string="x"+this.iconlength,this.ani_betlaebl.node.active=!0,this.ani_betlaebl.play())),t===r.default.wildIconidx?this.icon.spriteFrame=this.specilImgs[this.iconlength+1]:this.icon.spriteFrame=this.specilImgs[Math.floor((this.iconlength-1)/2)]),e&&this.showFrame()},e.prototype.setItemy=function(t){this.node.y=t},e.prototype.setItemx=function(t){this.node.x=t},e.prototype.showFrame=function(){if(this.frame.node.active=1===this.frametype||2===this.frametype,1===this.frametype||2===this.frametype){var t=["a","b","c","d"],e=1===this.frametype?"s_silver_frame_"+t[this.iconlength-1]:"s_gold_frame_"+t[this.iconlength-1];this.frame.spriteFrame=this.iconrunAtla.getSpriteFrame(e)}},e.prototype.SetIconRun=function(t,e){t.length>0?(this.IconGroupList=t,this.iconLenList=e,this.setLinenum(t[1]),this.result=t[0],this.isRun=!0,this.node.zIndex=8-this.index,this.seticonZindex()):this.icon.node.active=!1},e.prototype.seticonZindex=function(){},e.prototype.stopToShow=function(){this.isRun=!1,this.IsTopItem?this.moveS=this.rightx-this.startx:this.moveS=this.topy-this.starty,this.showFrame(),this.result>=r.default.wildIconidx&&(this.playAni(1),this.result===r.default.scatterIconidx?(this.node.zIndex=10,l.default.inst.playEffect("Scatter")):l.default.inst.playEffect("Wild"))},e.prototype.updateItem=function(t,e,i){if(this.isRun){var n=void 0;if(!e&&i&&(this.moveS+=t),i&&(this.moveS+=t),this.IsTopItem){var o=this.node.x-t;o=this.rightx+(o-this.rightx)%this.jumpx,n=Math.floor(this.moveS/this.jumpx),this.setItemx(o)}else{var s=this.node.y-t;s=this.topy+(s-this.topy)%this.jumpy,n=Math.floor(this.moveS/this.jumpy),this.setItemy(s)}n<0&&(n=0),n>=this.coloumn.symidx.length&&(n=this.coloumn.symidx.length-1);var a=this.coloumn.symidx[n][this.index],r=a[0];this.frametype=a[2],this.updateIcon(r,!1)}},e.prototype.moveTween=function(t,e,i){var n=this;this.ani_betlaebl.node.active=!0,this.ani_betlaebl.node.getComponent(cc.Widget).isAlignBottom=!1,e.sub(t).mag(),cc.tween(this.ani_betlaebl.node).parallel(cc.tween().to(1,{y:e.y}),cc.tween().to(1,{x:e.x},cc.easeBackIn())).call(function(){n.ani_betlaebl.node.setPosition(0,0),n.ani_betlaebl.node.active=!1,n.ani_betlaebl.node.getComponent(cc.Widget).isAlignBottom=!0,i()}).start()},s([f(cc.SpriteAtlas)],e.prototype,"frameatlas",void 0),s([f(cc.SpriteFrame)],e.prototype,"specilImgs",void 0),s([f(cc.Sprite)],e.prototype,"icon",void 0),s([f(sp.SkeletonData)],e.prototype,"norspinedatas",void 0),s([f(sp.SkeletonData)],e.prototype,"specilspinedatas",void 0),s([f(cc.SpriteAtlas)],e.prototype,"iconrunAtla",void 0),s([f(cc.SpriteAtlas)],e.prototype,"iconAtla",void 0),s([f(cc.Sprite)],e.prototype,"iconbg",void 0),s([f(cc.Sprite)],e.prototype,"frame",void 0),s([p],e)}(a.default);i.default=d,cc._RF.pop()},{"../common/GaneshaQuickUse":"GaneshaQuickUse","../core/GaneshaData":"GaneshaData","../core/GaneshaNotify":"GaneshaNotify","../manger/GaneshaAudio":"GaneshaAudio","./GaneshaCenter":"GaneshaCenter"}],GaneshaNotify:[function(t,e,i){"use strict";cc._RF.push(e,"a7284pGDpdDYpFW4VAtcs9A","GaneshaNotify");var n=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a},o=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],a=0,r=s.length;a<r;a++,o++)n[o]=s[a];return n};Object.defineProperty(i,"__esModule",{value:!0}),i.GaneshaEvent=void 0;var s=cc._decorator,a=s.ccclass,r=(s.property,function(){function t(){}return t.init=function(){this.actions=[]},t.addNotify=function(t,e,i){var n=this.actions[t];n||(n=[]);var o={action:i,tar:e};n.push(o),this.actions[t]=n},t.pubNotify=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var s=this.actions[t];if(s)for(var a=0;a<s.length;++a){var r=s[a].tar,c=s[a].action;c.call.apply(c,o([r,e],i))}},t.actions=[],n([a],t)}());i.default=r,function(t){t[t.Login_result=0]="Login_result",t[t.GetResult=1]="GetResult",t[t.Roll_Stop=2]="Roll_Stop",t[t.ROLL_END=3]="ROLL_END",t[t.SELECT_MULTPILE=4]="SELECT_MULTPILE",t[t.ShowTip=5]="ShowTip",t[t.QuickRun=6]="QuickRun",t[t.ShowPayTable=7]="ShowPayTable",t[t.CheckWinScore=8]="CheckWinScore",t[t.ShowHall=9]="ShowHall",t[t.Logout=10]="Logout",t[t.Change_Type=11]="Change_Type",t[t.Change_Info=12]="Change_Info",t[t.Change_Score=13]="Change_Score",t[t.Updata_Jackpot=14]="Updata_Jackpot",t[t.BackstageChangeScore=15]="BackstageChangeScore",t[t.WaitSelect=16]="WaitSelect",t[t.SelectOne=17]="SelectOne",t[t.SelectLine=18]="SelectLine"}(i.GaneshaEvent||(i.GaneshaEvent={})),cc._RF.pop()},{}],GaneshaPayView:[function(t,e,i){"use strict";cc._RF.push(e,"02564gPOJ9GCIbLWBg1Uf+R","GaneshaPayView");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../common/GaneshaQuickUse"),r=t("../core/GaneshaData"),c=t("../core/GaneshaNotify"),l=cc._decorator,h=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.paystrs=[["1","2","3","4"],["1","2","3","4"],["1","2","3","4"],["4","6","8","10"],["4","6","8","10"],["6","10","12","15"],["6","10","12","15"],["8","15","20","30"],["10","25","30","40"],["20","25","30","50"],["30","40","50","80"],["WILD symbol substitutes for all symbols except scatter symbol."],["4 or more Scatter symbols will trigger free spins."]],e.imgSizes=[[306,141],[306,250],[306,358],[306,465],[425,141],[554,141]],e.frameimgs=[],e.btn_left=null,e.btn_right=null,e.btn_close=null,e.sp_leftframe=null,e.lb_lefticon=null,e.sp_rightframe=null,e.lb_righticon=null,e.leftpaylabels=[],e.rightpaylabels=[],e.leftpay=null,e.rightpay=null,e.isCanShow=!1,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.findNode("leftpaylabels").children.forEach(function(e){t.leftpaylabels.push(e.getComponent(cc.Label))}),this.findNode("rightpaylabels").children.forEach(function(e){t.rightpaylabels.push(e.getComponent(cc.Label))}),c.default.addNotify(c.GaneshaEvent.ShowPayTable,this,this.showPayTable)},e.prototype.start=function(){this.btn_close.node.on("click",this.closePay,this)},e.prototype.initAll=function(){this.leftpay.active=this.rightpay.active=this.btn_left.node.active=this.btn_right.node.active=!1,this.sp_leftframe.spriteFrame=this.sp_rightframe.spriteFrame=null,this.lb_lefticon.string=this.lb_righticon.string=""},e.prototype.setPayCanShow=function(t){this.isCanShow=t},e.prototype.closePay=function(){cc.log("closePay ============"),this.nowItem&&(this.nowItem.restParent(),this.nowItem.stopAni(),this.nowItem=null),this.node.scale=0},e.prototype.showPayTable=function(t){if(this.isCanShow){this.initAll(),this.nowItem&&(this.nowItem.restParent(),this.nowItem.stopAni()),this.nowItem=t,this.node.scale=1;var e=t.getWorldpos,i=t.ItemIsLeft,n=t.result,o=t.iconlength,s=this.node.convertToNodeSpaceAR(e),a=t.node;if(i){var c=this.btn_left.node;if(c.active=!0,c.position=s.add(cc.v3(-90,0)),a.setParent(c),a.position=c.convertToNodeSpaceAR(e),n<r.default.wildIconidx){this.leftpay.active=!0;for(var l=this.paystrs[n],h=0;h<4;++h)this.leftpaylabels[h].string=l[3-h];this.sp_leftframe.spriteFrame=this.frameimgs[o-1],this.sp_leftframe.node.setContentSize(this.imgSizes[o-1][0],this.imgSizes[o-1][1])}else this.sp_leftframe.spriteFrame=this.frameimgs[4],this.sp_leftframe.node.setContentSize(this.imgSizes[4][0],this.imgSizes[4][1]),this.lb_lefticon.string=this.paystrs[n][0];c.width=1.3*this.sp_leftframe.node.width,c.height=1.2*this.sp_leftframe.node.height}else{var u=this.btn_right.node;if(u.active=!0,u.position=s.add(cc.v3(90,0)),a.setParent(u),a.position=u.convertToNodeSpaceAR(e),n<r.default.wildIconidx){for(this.rightpay.active=!0,l=this.paystrs[n],h=0;h<4;++h)this.rightpaylabels[h].string=l[3-h];this.sp_rightframe.spriteFrame=this.frameimgs[o-1],this.sp_rightframe.node.setContentSize(this.imgSizes[o-1][0],this.imgSizes[o-1][1])}else this.sp_rightframe.spriteFrame=this.frameimgs[4],this.sp_rightframe.node.setContentSize(this.imgSizes[4][0],this.imgSizes[4][1]),this.lb_righticon.string=this.paystrs[n][0];u.width=1.3*this.sp_rightframe.node.width,u.height=1.2*this.sp_rightframe.node.height}}},s([u(cc.SpriteFrame)],e.prototype,"frameimgs",void 0),s([h],e)}(a.default);i.default=p,cc._RF.pop()},{"../common/GaneshaQuickUse":"GaneshaQuickUse","../core/GaneshaData":"GaneshaData","../core/GaneshaNotify":"GaneshaNotify"}],GaneshaQuickUse:[function(t,e,i){"use strict";cc._RF.push(e,"6d589IcasdO2odgW2XkYqa9","GaneshaQuickUse");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onEnable=function(){this.bindComponent()},e.prototype.bindComponent=function(){for(var t in this)if(null===this[t]){var e=t.split("_")[0],i=t.split("_")[1];switch(e){case"ani":this[t]=this.findNode(t,cc.Animation);break;case"spine":case"dra":this[t]=this.findNode(t,sp.Skeleton);break;case"btn":this[t]=this.findNode(t,cc.Button);break;case"sp":this[t]=this.findNode(t,cc.Sprite);break;case"edit":this[t]=this.findNode(t,cc.EditBox);break;case"lb":this[t]=this.findNode(t,cc.Label);break;case"user":this[t]=this.findNode(t).getComponent(i);break;case t:this[t]=this.findNode(t)}}},e.prototype.onLoad=function(){},e.prototype.getComponentCh=function(t,e,i){return t.getChildByName(e).getComponent(i)},e.prototype.getChildren=function(t,e,i){void 0===i&&(i=null);var n=null,o=this.getNodebyname(this.node,t);return o&&(n=this.getNodebyname(o,e)),n&&i?n.getComponent(i):n},e.prototype.findNode=function(t,e){void 0===e&&(e=null);var i=null;return(i=this.getNodebyname(this.node,t))&&e?i.getComponent(e):i},e.prototype.getNodebyname=function(t,e){var i=t.children,n=t.getChildByName(e);if(0!=i.length){if(n)return n;for(var o=0;o<i.length;++o)n||(n=this.getNodebyname(i[o],e));if(n)return n}},e.prototype.showPanel=function(t){this.node.active=t,this.node.opacity=t?255:0},e.prototype.getNumber=function(t,e){return Math.floor(t*Math.pow(10,e))/Math.pow(10,e)},e.prototype.selectIconac=function(){},e.prototype.start=function(){},e.prototype.onDestroy=function(){cc.Tween.stopAllByTarget(this.node)},s([r],e)}(cc.Component));i.default=c,cc._RF.pop()},{}],GaneshaRoll:[function(t,e,i){"use strict";cc._RF.push(e,"a751cDEFtRAj6szx+3hLA4J","GaneshaRoll");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../core/GaneshaData"),r=t("../core/GaneshaNotify"),c=t("../manger/GaneshaAudio"),l=t("./GaneshaColumn"),h=cc._decorator,u=h.ccclass,p=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columns=[],e}return o(e,t),e.prototype.onLoad=function(){var t=this,e=0;this.node.children.forEach(function(i){var n=i.getComponent(l.default);n.initColumn(e,t),t.columns[e++]=n})},e.prototype.start=function(){this.initAllicon()},e.prototype.initAllicon=function(){for(var t=0;t<this.columns.length;++t){var e=[];if(0===t||5===t)for(var i=0;i<5;++i)e.push([Math.floor(Math.random()*(a.default.wildIconidx-1)),1,0]);else if(6===t)for(i=0;i<4;++i)e.push([Math.floor(Math.random()*(a.default.wildIconidx-1)),1,0]);else for(var n=5;n>0;){var o=Math.floor(3*Math.random()+1);n-o<0&&(o=n),n-=o;var s=0;o>1&&(s=Math.floor(1*Math.random())),e.push([Math.floor(Math.random()*(a.default.wildIconidx-1)),o,s])}this.columns[t].setitemicon(e)}},e.prototype.setColumeAddSpeed=function(t){this.columns[t].setAddSpeed(!0);for(var e=t;e<this.columns.length;++e)t!=e&&this.columns[e].setAddSpeed(!1)},e.prototype.setAllIconBg=function(){for(var t=0;t<this.columns.length;++t)this.columns[t].setItemsBg()},e.prototype.setColumeReal=function(){for(var t=0;t<this.columns.length;++t)this.columns[t].setRealRun()},e.prototype.stopAllcolumn=function(){for(var t=0;t<this.columns.length;++t)this.columns[t].stopRoll()},e.prototype.stopAllcolumnani=function(t){void 0===t&&(t=!0),t&&cc.Tween.stopAllByTarget(this.node);for(var e=0;e<this.columns.length;++e)this.columns[e].stopSymani()},e.prototype.setIconlight=function(t){for(var e=0;e<this.columns.length;++e)this.columns[e].setItemlight(t)},e.prototype.playscatter=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);for(var n=0;n<this.columns.length;++n){var o=t[n];if(o.length>0)for(var s=0;s<o.length;++s)this.columns[n].playsymani(o[s],e)}},e.prototype.showAllitemFrameAni=function(t){var e=this;this.setIconlight(!1);for(var i=0,n=cc.tween(this.node),o=this.winlineidx[t],s=0;s<this.columns.length;++s){var a=0;o[s]&&(a=.05),n.call(function(){o[i]&&e.columns[i].showItemFrameani(o[i]),i++}).delay(a)}n.start()},e.prototype.ChangeSymbol=function(t,e,i,n,o){var s=this;void 0===i&&(i=0),void 0===n&&(n=0);var a=this.winlineidx[t];c.default.inst.playEffect("Symbol_Remove");for(var l=0;l<this.columns.length;++l)a[l]&&this.columns[l].playItemChange(a[l],e[l],i,n);var h=cc.tween(this.node).delay(1).call(function(){s.setIconlight(!0)});n>=3&&h.delay(1).call(function(){s.setIconlight(!1),c.default.inst.playEffect("Scatter_01"),s.playscatter(o,3)}).delay(2).call(function(){s.setIconlight(!0);for(var t=0;t<s.columns.length;++t)s.columns[t].moveAllIcon()}).delay(1),h.delay(1.5).call(function(){r.default.pubNotify(r.GaneshaEvent.CheckWinScore)}),h.start()},e.prototype.startPlayAni=function(){},e.prototype.playAllsymani=function(){},e.prototype.RollAllcolumn=function(t,e){void 0===t&&(t=!0),this.winlineidx=a.default.winlineidxs;for(var i=0;i<this.columns.length;++i)this.columns[i].setItems(e[i],t)},s([u],e)}(cc.Component));i.default=p,cc._RF.pop()},{"../core/GaneshaData":"GaneshaData","../core/GaneshaNotify":"GaneshaNotify","../manger/GaneshaAudio":"GaneshaAudio","./GaneshaColumn":"GaneshaColumn"}],GaneshaRule:[function(t,e,i){"use strict";cc._RF.push(e,"d8fe66Tmn1KQYg058B+L5vs","GaneshaRule");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../common/GaneshaQuickUse"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_close=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=this;this.btn_close.node.on("click",function(){t.showPanel(!1)},this)},e.prototype.moverule=function(){},s([c],e)}(a.default));i.default=l,cc._RF.pop()},{"../common/GaneshaQuickUse":"GaneshaQuickUse"}],GaneshaTipView:[function(t,e,i){"use strict";cc._RF.push(e,"4ee2fjFoABHCZ4tXetPHVNU","GaneshaTipView");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../common/GaneshaQuickUse"),r=t("../core/GaneshaNotify"),c=cc._decorator,l=c.ccclass,h=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.content=this.findNode("content",cc.Label),this.close=this.findNode("btn_close"),this.okbu=this.findNode("btn_ok")},e.prototype.start=function(){var t=this;r.default.addNotify(r.GaneshaEvent.ShowTip,this,this.showTipText),this.close.on("click",function(){t.showPanel(!1)},this)},e.prototype.showPanel=function(t){this.node.scale=t?1:0},e.prototype.showTipText=function(t,e){var i=this;void 0===e&&(e=null),cc.log("\u663e\u793a\u5f39\u7a97 "+t),this.showPanel(!0),this.content.string=t,this.okbu.off("click"),this.okbu.on("click",function(){e&&e(),i.showPanel(!1)},this)},s([l],e)}(a.default));i.default=h,cc._RF.pop()},{"../common/GaneshaQuickUse":"GaneshaQuickUse","../core/GaneshaNotify":"GaneshaNotify"}],NetGanesha:[function(t,e,i){"use strict";cc._RF.push(e,"003e5oOFqtKGp3Dwcpx5k88","NetGanesha");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../../../Script/mgr/GameMgr"),r=t("../GaneshaGame"),c=t("../core/GaneshaData"),l=cc._decorator,h=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainGame=null,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){this.mainGame=this.getComponent(r.default),GameConfig.SubGameMgr.subGameNet=this,i.instance=this,this.send("loginGame",{})},Object.defineProperty(e,"inst",{get:function(){return this.instance},enumerable:!1,configurable:!0}),e.prototype.addNetEvent=function(t,e){cc.log("cmd "+t+" ");var i=this,n=null;if("error"==t&&cc.log("socket error"),"connect_error"==t){cc.log("connect_error");var o="The Internet is lost!Please login again!";Common.backHall(o,function(){i.mainGame.backHall()})}if("connect_timeout"==t&&cc.log("connect_timeout"),"disconnect"==t&&(o="The Internet is lost!Please login again!",Common.backHall(o,function(){i.mainGame.backHall()})),"loginGameResult"==t)if(n=JSON.parse(e),cc.log("loginGameResult ",n),1==n.resultid){c.default.initAllvalue(),c.default.betValues=[],c.default.betLine=n.Obj.betDefault/100;for(var s=0;s<n.Obj.betList.length;++s)c.default.betValues.push(n.Obj.betList[s]/100);c.default.coins=n.Obj.score,c.default.scatterNum=n.Obj.scatterCnt,c.default.isfreestart=n.Obj.has_free,this.scheduleOnce(function(){i.mainGame.refushInfo()},.5)}else o="The login failure!Please login again!",Common.backHall(o,function(){i.mainGame.backHall()});"lotteryResult"==t&&(n=JSON.parse(e),cc.log(n),i.endecheck(),n.ResultCode&&1==n.ResultCode?i.mainGame.getLottyResult(n.ResultData):(o="The Internet is lost!Please login again!",Common.backHall(o,function(){i.mainGame.backHall()}))),"buyFreeTypeResult"===t&&(n=JSON.parse(e),cc.log(n),n.ResultCode&&1==n.ResultCode&&i.mainGame.getLottyResult(n.ResultData)),"selectFreeTypeResult"==t&&(n=JSON.parse(e),cc.log("selectFreeTypeResult",n),cc.log(n),n.ResultCode&&1==n.ResultCode&&(c.default.freeTimes=c.default.freeTotal=n.result.nFreeTime,c.default.FreeAllReultList=n.result.frees,i.mainGame.freeM.showFreestart())),"LoginfreeCountResult"==t&&(n=JSON.parse(e)),"pushGamblingWinPool"==t&&(n=JSON.parse(e),cc.log("pushGamblingWinPool:",n),n.ResultCode)},e.prototype.checkNet=function(){var t=this;this.nettween=cc.tween(this.node).delay(10).call(function(){Common.backHall("The Internet is lost!Please login again!",function(){t.mainGame.backHall()})}).start()},e.prototype.endecheck=function(){this.nettween&&(this.nettween.stop(),this.nettween=null)},e.prototype.send=function(t,e){void 0===e&&(e={}),cc.log("send cmd:"+t+",data:"+JSON.stringify(e)),a.default.instance.sendGameData(GameConfig.curGameId,t,JSON.stringify(e))},e.prototype.sendLotty=function(t){var e=[t*=100];this.send("lottery",{bet:t,nBetList:e})},e.prototype.sendBuyFree=function(t){var e=[t*=100];this.send("lottery",{bet:t,nBetList:e,isBuyFree:!0})},e.prototype.sendSelectFree=function(t){this.send("selectFreeType",{type:t})},i=s([h],e)}(cc.Component));i.default=u,cc._RF.pop()},{"../../../../Script/mgr/GameMgr":void 0,"../GaneshaGame":"GaneshaGame","../core/GaneshaData":"GaneshaData"}]},{},["GaneshaGame","GaneshaAnilabel","GaneshaQuickUse","GaneshaData","GaneshaNotify","GaneshaAudio","NetGanesha","GaneshaAudioView","GaneshaBigWin","GaneshaBottom","GaneshaCenter","GaneshaColumn","GaneshaFree","GaneshaItem","GaneshaPayView","GaneshaRoll","GaneshaRule","GaneshaTipView"]);