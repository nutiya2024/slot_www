window.__require=function t(e,o,i){function n(r,a){if(!o[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!a&&h)return h(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var l=o[r]={exports:{}};e[r][0].call(l.exports,function(t){return n(e[r][1][t]||t)},l,l.exports,t,e,o,i)}return o[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({BHAudio:[function(t,e,o){"use strict";cc._RF.push(e,"64943ZkNLtNVofs4SRqvllr","BHAudio");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioLst={0:{fileName:"bg_0",type:"music",remark:"\u80cc\u666f\u97f3\u4e500"},1:{fileName:"bg_1",type:"music",remark:"\u80cc\u666f\u97f3\u4e501"},2:{fileName:"bg_2",type:"music",remark:"\u80cc\u666f\u97f3\u4e502"},3:{fileName:"bg_3",type:"music",remark:"\u80cc\u666f\u97f3\u4e503"},4:{fileName:"bg_4",type:"music",remark:"\u80cc\u666f\u97f3\u4e504"},5:{fileName:"bg_5",type:"music",remark:"\u80cc\u666f\u97f3\u4e505"},6:{fileName:"new_click",type:"effect",remark:"\u6309\u94ae\u70b9\u51fb"},7:{fileName:"new_audio_battery",type:"effect",remark:"\u70ae\u53f0\u51fa\u6765"},8:{fileName:"new_birds_effect_fire",type:"effect",remark:"\u5b50\u5f39\u53d1\u5c04"},9:{fileName:"2",type:"effect",remark:"\u5b50\u5f39\u78b0\u649e\u9c7c"},10:{fileName:"new_birds_effect_dead",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},11:{fileName:"new_birds_effect_bomb_explode",type:"effect",remark:"\u70b8\u5f39\u7206\u70b8"},12:{fileName:"new_birds_effect_bigAward",type:"effect",remark:"\u70ae\u53f0\u663e\u793a\u5706\u5708\u5206\u6570\u52a8\u753b"},13:{fileName:"new_birds_effect_change_scene",type:"effect",remark:"\u5207\u6362\u573a\u666f\u52a8\u753b"},14:{fileName:"new_birds_effect_mouse_ready",type:"effect",remark:"\u8001\u9f20\u51c6\u5907"},15:{fileName:"new_birds_effect_mouse_shoot",type:"effect",remark:"\u8001\u9f20\u51fa\u51fb"},16:{fileName:"new_fish-kill-big",type:"effect",remark:"\u9ed1\u6d1e"},17:{fileName:"6",type:"effect",remark:"\u5927\u56db\u559c"},18:{fileName:"10",type:"effect",remark:"bigwin"},19:{fileName:"12",type:"effect",remark:"\u5168\u5c4f\u70b8\u5f39\u4e22\u4e0b\u65f6"},20:{fileName:"3",type:"effect",remark:"\u81ea\u5df1\u83b7\u5f97\u91d1\u5e01\u65f6"},21:{fileName:"19",type:"effect",remark:"\u9707\u5929\u9f13"},22:{fileName:"14",type:"effect",remark:"\u70b8\u5f39\u7206\u70b8"},23:{fileName:"21",type:"effect",remark:"\u5927\u4e09\u5143"},24:{fileName:"16",type:"effect",remark:"\u4e09\u4e2a\u51e4\u51f0\u865a\u5f71\u98de\u8fdb\u6765"}},e.bundle=null,e}return n(e,t),e.prototype.initView=function(){this.bundle=cc.assetManager.getBundle(window.BUNDLE_NAME)},e.prototype.playAudio=function(t){var e=this,o="./music/"+this.audioLst[t+""].fileName,i=this.audioLst[t+""].type;return new Promise(function(t){e.bundle.load(o,cc.AudioClip,function(e,o){var n=-1;null==e&&(n="music"==i?cc.audioEngine.playMusic(o,!0):cc.audioEngine.playEffect(o,!1)),t(n)})})},s([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],BHBatteryCicle:[function(t,e,o){"use strict";cc._RF.push(e,"18c46UUnoFHGqCP0vOPzKjQ","BHBatteryCicle");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHFishUtil"),a=cc._decorator,c=a.ccclass,h=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aniSp=null,e.panel_lbl=null,e.lblPrefab=null,e.cicleSpList=null,e.state=0,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.cicleSpList=t,this.reset()},e.prototype.reset=function(){this.node.stopAllActions(),this.node.active=!1,this.node.setPosition(cc.v2(0,-150)),this.panel_lbl.active=!1,this.panel_lbl.removeAllChildren(),this.aniSp.node.stopAllActions(),this.state=0},e.prototype.showAni=function(t){var e=this,o=this.getLblNode(t);0==this.node.active?(this.node.active=!0,this.panel_lbl.addChild(o),r.default.showFrameAnimation(this.aniSp,this.cicleSpList,.8,!1,!0,-1,null),cc.tween(this.aniSp.node).repeatForever(cc.tween().to(.1,{scale:1.03}).to(.1,{scale:1})).start(),this.state=1,cc.tween(this.node).to(.3,{position:cc.v3(0,230,0)}).to(.1,{position:cc.v3(0,210,0)}).to(.1,{position:cc.v3(0,230,0)}).call(function(){e.state=2,e.panel_lbl.active=!0}).delay(1).call(function(){e.state=3,e.panel_lbl.active=!1}).to(.2,{position:cc.v3(0,-150,0)}).call(function(){e.reset()}).start()):1==this.state?this.panel_lbl.addChild(o):2==this.state?(this.panel_lbl.addChild(o),this.node.stopAllActions(),cc.tween(this.node).delay(1).call(function(){e.state=3,e.panel_lbl.active=!1}).to(.2,{position:cc.v3(0,-150,0)}).call(function(){e.reset()}).start()):3==this.state&&(this.reset(),this.showAni(t))},e.prototype.getLblNode=function(t){var e=cc.instantiate(this.lblPrefab);return e.getComponent(cc.Label).string=(t/globalThis.playerInfo.exchangeRate).toFixed(2),e},s([h(cc.Sprite)],e.prototype,"aniSp",void 0),s([h(cc.Node)],e.prototype,"panel_lbl",void 0),s([h(cc.Prefab)],e.prototype,"lblPrefab",void 0),s([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./BHFishUtil":"BHFishUtil"}],BHBatteryManage:[function(t,e,o){"use strict";cc._RF.push(e,"5c52bX/AYRBs7WpiSBWz9qz","BHBatteryManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHBattery"),a=cc._decorator,c=a.ccclass,h=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.batteryList=[],e.layerFishNode=null,e.anchoroNode=null,e.anchoroSF=[],e.control=null,e.selfBattery=null,e.batteryBulletLimit=100,e.currAutoTime=0,e.fireEnable=!0,e.isLongTouch=!1,e}return n(e,t),e.prototype.initView=function(t){this.control=t,this.fireEnable=!0;for(var e=0;e<this.batteryList.length;e++)this.batteryList[e].initView(this.control,e);this.registerClick()},e.prototype.registerClick=function(){var t=this;if(cc.sys.platform==cc.sys.DESKTOP_BROWSER){var e=function(e){var o=e.getLocation();if(t.selfBattery&&0==t.control.gameInfo.lockFishId&&(t.setBatteryAngleByPos(t.selfBattery.batteryId,o),t.anchoroNode.active=!0,t.anchoroNode.getComponent(cc.Sprite).spriteFrame=t.anchoroSF[t.selfBattery.batteryId]),e.getType()==cc.Node.EventType.MOUSE_DOWN){var i=e.getLocation();t.selfBattery&&(t.clcikBatteryFire(i),t.isLongTouch=!0)}else if(e.getType()==cc.Node.EventType.MOUSE_UP||e.getType()==cc.Node.EventType.MOUSE_LEAVE)t.isLongTouch=!1;else if(e.getType()==cc.Node.EventType.MOUSE_MOVE){var n=t.node.convertToNodeSpaceAR(e.getLocation());t.anchoroNode.x=n.x,t.anchoroNode.y=n.y}};this.layerFishNode.on(cc.Node.EventType.MOUSE_DOWN,e),this.layerFishNode.on(cc.Node.EventType.MOUSE_ENTER,e),this.layerFishNode.on(cc.Node.EventType.MOUSE_MOVE,e),this.layerFishNode.on(cc.Node.EventType.MOUSE_LEAVE,e),this.layerFishNode.on(cc.Node.EventType.MOUSE_UP,e)}else{var o=function(e){var o=e.getLocation();if(t.selfBattery&&0==t.control.gameInfo.lockFishId&&t.setBatteryAngleByPos(t.selfBattery.batteryId,o),e.getType()==cc.Node.EventType.TOUCH_START){var i=e.getLocation();t.selfBattery&&(t.clcikBatteryFire(i),t.isLongTouch=!0)}else e.getType()!=cc.Node.EventType.TOUCH_END&&e.getType()!=cc.Node.EventType.TOUCH_CANCEL||(t.isLongTouch=!1);return!1};this.layerFishNode.on(cc.Node.EventType.TOUCH_START,o),this.layerFishNode.on(cc.Node.EventType.TOUCH_MOVE,o),this.layerFishNode.on(cc.Node.EventType.TOUCH_END,o),this.layerFishNode.on(cc.Node.EventType.TOUCH_CANCEL,o),this.layerFishNode._touchListener.setSwallowTouches(!1)}},e.prototype.clcikBatteryFire=function(t){if(0!=this.fireEnable&&null!=this.selfBattery){var e=this.selfBattery;if(e.hidIconGuide(),this.control.gameView.bullteManage.getBulletCountByBatteryId(e.batteryId)>=this.batteryBulletLimit){var o=this.control.i18n.getTripStr("bulletEnough");this.control.showTrip(o)}else{var i=e.getPaoPos();i=this.node.convertToNodeSpaceAR(i);var n=0;(t=this.node.convertToNodeSpaceAR(t)).x-i.x!=0&&(n=180*Math.atan2(t.y-i.y,t.x-i.x)/Math.PI),this.control.gameInfo.isLock&&(n=e.getPaoAngle()),this.currAutoTime=0,this.control.sendBatteryFire(e.batteryId,n)}}},e.prototype.autoBatteryFire=function(){if(0!=this.fireEnable&&null!=this.selfBattery){var t=this.selfBattery;if(t.hidIconGuide(),this.control.gameView.bullteManage.getBulletCountByBatteryId(t.batteryId)>=this.batteryBulletLimit){var e=this.control.i18n.getTripStr("bulletEnough");this.control.showTrip(e)}else{var o=t.getPaoAngle();this.currAutoTime=0,this.control.sendBatteryFire(t.batteryId,o)}}},e.prototype.showFireAniByBattryId=function(t){var e=this.batteryList[t];e&&e.showFireAni()},e.prototype.setBatteryAngle=function(t,e){var o=this.batteryList[t];o&&o.setPaoAngle(e)},e.prototype.setBatteryLock=function(t,e){var o=this.batteryList[t];if(o)if(e>0){var i=this.control.gameView.fishManage.getFishByFishId(e),n="";i&&(n=i.fishConfig.FrameName),o.showLockFishAni(!0,n)}else o.showLockFishAni(!1,"")},e.prototype.setBatteryAngleByPos=function(t,e){var o=this.batteryList[t];if(o){var i=o.getPaoPos();i=this.node.convertToNodeSpaceAR(i);var n=0;(e=this.node.convertToNodeSpaceAR(e)).x-i.x!=0&&(n=180*Math.atan2(e.y-i.y,e.x-i.x)/Math.PI),o.setPaoAngle(n)}},e.prototype.setBatteryUserScore=function(t){var e=this.batteryList[t];e&&e.updateUserScore()},e.prototype.showBatteryAddScoreAni=function(t,e){var o=this.batteryList[t];o&&o.showAddScoreAni(e)},e.prototype.showBatteryCicleAni=function(t,e){var o=this.batteryList[t];o&&o.showCicleAni(e)},e.prototype.setBatteryBigWin=function(t,e){var o=this.batteryList[t];o&&o.showBigWinAni(e)},e.prototype.runNewBattery=function(t,e){var o=this.batteryList[t.batteryId];if(o)return e&&(this.selfBattery=o),o.initData(t,e)},e.prototype.clearBattery=function(t){var e=this.batteryList[t];if(e)return e.clearData()},e.prototype.changeBatteryBaseScore=function(t,e){var o=this.batteryList[t];o&&o.changeBaseScore(e)},e.prototype.getBulletStartPos=function(t,e){var o=null,i=this.batteryList[t];if(i){var n=i.getPaoPos();n=this.node.convertToNodeSpaceAR(n),o=cc.v2(n.x+95*Math.cos(2*Math.PI/360*e),n.y+95*Math.sin(2*Math.PI/360*e))}return o},e.prototype.getPaoTaiPos=function(t){var e=null,o=this.batteryList[t];return o&&(e=o.getPaoPos()),e},e.prototype.getPaoTaiAngle=function(t){var e=0,o=this.batteryList[t];return o&&(e=o.getPaoAngle()),e},e.prototype.getBatteryById=function(t){return this.batteryList[t]},e.prototype.showBatteryFireAndRollScore=function(t,e,o){var i=this.batteryList[t];i&&i.showBatteryFireAndRollScore(e,o)},e.prototype.update=function(t){if(this.control.gameInfo.isLock&&this.control.gameInfo.lockFishId>0){var e=this.control.gameView.fishManage.getFishByFishId(this.control.gameInfo.lockFishId);if(e&&this.selfBattery){var o=e.getWorldPos();this.setBatteryAngleByPos(this.selfBattery.batteryId,o)}}this.control.gameInfo.isLock&&this.setBatteryLock(this.selfBattery.batteryId,this.control.gameInfo.lockFishId),1!=this.control.gameInfo.isAuto&&1!=this.isLongTouch||(this.currAutoTime+=t,this.currAutoTime>=1/this.control.gameInfo.autoFate&&(this.currAutoTime=0,this.autoBatteryFire())),this.selfBattery&&this.selfBattery.showAutoAni(this.control.gameInfo.isAuto)},s([h([r.default])],e.prototype,"batteryList",void 0),s([h(cc.Node)],e.prototype,"layerFishNode",void 0),s([h(cc.Node)],e.prototype,"anchoroNode",void 0),s([h(cc.SpriteFrame)],e.prototype,"anchoroSF",void 0),s([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./BHBattery":"BHBattery"}],BHBattery:[function(t,e,o){"use strict";cc._RF.push(e,"f9dc4Srr3ZKNKAEVRbfjVdS","BHBattery");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHBatteryCicle"),a=t("./BHFishUtil"),c=t("./BHScoreAni"),h=cc._decorator,l=h.ccclass,p=h.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlas_btttery=null,e.icon_guide=null,e.bg_name=null,e.lbl_name=null,e.bg_score_total=null,e.lbl_score_total=null,e.node_score_win=null,e.lbl_score_win=null,e.lbl_score_base=null,e.node_pao=null,e.sp_guang=null,e.sp_qiu=null,e.node_fire=null,e.sp_fire_1=null,e.sp_fire_2=null,e.sp_icon_auto=null,e.node_lock=null,e.sp_lock_icon=null,e.sp_lockfish=null,e.panel_goal=null,e.goalAniPrefab=null,e.batteryCicle=null,e.btn_addScore=null,e.btn_decScore=null,e.node_bigWin=null,e.bigWin_score=null,e.fire=null,e.fireScoreBg=null,e.fireScoreLabel=null,e.isUse=!1,e.batteryId=0,e.userItem=null,e.isSelf=!1,e.control=null,e.lockFishFrameName=null,e}return n(e,t),e.prototype.initView=function(t,e){this.control=t,this.isUse=!1,this.batteryId=e,this.lockFishFrameName="",this.node.active=!1,this.icon_guide.active=!1,this.bg_score_total.spriteFrame=this.atlas_btttery.getSpriteFrame("scorePanel_"+this.batteryId),this.lbl_score_total.string="",this.node_score_win.active=!1,this.lbl_score_win.string="0.00",this.node_pao.angle=0,a.default.delFrameAnimation(this.sp_guang),this.sp_guang.spriteFrame=this.atlas_btttery.getSpriteFrame("gun_1_0"),this.sp_qiu.spriteFrame=this.atlas_btttery.getSpriteFrame("gunRotate"),this.node_fire.active=!1,this.sp_fire_1.spriteFrame=this.atlas_btttery.getSpriteFrame("fire_1_0"),this.sp_fire_2.spriteFrame=this.atlas_btttery.getSpriteFrame("fire_1_1"),a.default.delFrameAnimation(this.sp_fire_2),this.lbl_score_base.string="",this.node_lock.active=!1,a.default.delFrameAnimation(this.sp_lock_icon),this.sp_lock_icon.spriteFrame=this.atlas_btttery.getSpriteFrame("ani_lock_"+(this.batteryId+1)+"_1"),this.panel_goal.removeAllChildren()},e.prototype.initData=function(t,e){this.isUse=!0,this.userItem=t,this.isSelf=e,this.node.active=!0,e&&(this.icon_guide.active=!0,cc.tween(this.icon_guide).repeatForever(cc.tween().to(1,{scale:.5}).to(1,{scale:1})).start()),this.lbl_score_base.string=""+(t.baseScore/globalThis.playerInfo.exchangeRate).toFixed(2),this.lbl_score_total.string=""+(t.score/globalThis.playerInfo.exchangeRate).toFixed(2),this.lbl_score_win.string=""+(t.winSocre/globalThis.playerInfo.exchangeRate).toFixed(2),this.node_score_win.active=0==globalThis.globalThis.playerInfo.useOneScore,this.changeBaseScore(t.baseScore)},e.prototype.clearData=function(){this.initView(this.control,this.batteryId)},e.prototype.getPaoPos=function(){return this.node.convertToWorldSpaceAR(this.node_pao.getPosition())},e.prototype.setPaoAngle=function(t){this.node_pao.angle=t-this.node.angle-90},e.prototype.getPaoAngle=function(){return this.node_pao.angle+this.node.angle+90},e.prototype.changeBaseScore=function(t){this.lbl_score_base.string=""+(t/globalThis.playerInfo.exchangeRate).toFixed(2),cc.tween(this.lbl_score_base.node).to(.15,{scale:2}).to(.15,{scale:1}).start();var e=this.control.getBulletTypeByBaseScore(t);this.sp_guang.spriteFrame=this.atlas_btttery.getSpriteFrame("gun_"+e+"_0"),this.sp_fire_1.spriteFrame=this.atlas_btttery.getSpriteFrame("fire_"+e+"_0"),this.sp_fire_2.spriteFrame=this.atlas_btttery.getSpriteFrame("fire_"+e+"_1")},e.prototype.updateUserScore=function(){this.lbl_score_total.string=""+(this.userItem.score/globalThis.playerInfo.exchangeRate).toFixed(2),this.lbl_score_win.string=""+(this.userItem.winSocre/globalThis.playerInfo.exchangeRate).toFixed(2)},e.prototype.hidIconGuide=function(){this.icon_guide.active=!1},e.prototype.showFireAni=function(){for(var t=this,e=this.control.getBulletTypeByBaseScore(this.userItem.baseScore),o=[],i=0;i<=4;i++){var n=this.atlas_btttery.getSpriteFrame("gun_"+e+"_"+i);n&&o.push(n)}this.sp_guang.spriteFrame=this.atlas_btttery.getSpriteFrame("gun_"+e+"_0"),a.default.showFrameAnimation(this.sp_guang,o,.3,!0,!1,-1,null),cc.tween(this.node).delay(.2).call(function(){var e=t.control.getBulletTypeByBaseScore(t.userItem.baseScore);t.sp_fire_1.spriteFrame=t.atlas_btttery.getSpriteFrame("fire_"+e+"_0"),t.sp_fire_2.spriteFrame=t.atlas_btttery.getSpriteFrame("fire_"+e+"_1"),t.node_fire.active=!0;for(var o=[],i=1;i<=4;i++){var n=t.atlas_btttery.getSpriteFrame("fire_"+e+"_"+i);n&&o.push(n)}a.default.showFrameAnimation(t.sp_fire_2,o,.3,!0,!1,-1,null)}).delay(.3).call(function(){t.node_fire.active=!1}).start()},e.prototype.showAddScoreAni=function(t){var e=cc.instantiate(this.goalAniPrefab);e.parent=this.panel_goal,e.getComponent(c.default).showAni(t,this.atlas_btttery)},e.prototype.showCicleAni=function(){},e.prototype.resetCicleAni=function(){},e.prototype.showAutoAni=function(){},e.prototype.showLockFishAni=function(){},e.prototype.showBigWinAni=function(t){this.bigWin_score.getComponent(cc.Label).string=""+(t/globalThis.playerInfo.exchangeRate).toFixed(2),cc.Tween.stopAllByTarget(this.bigWin_score),cc.Tween.stopAllByTarget(this.node_bigWin),cc.tween(this.bigWin_score).repeatForever(cc.tween().to(.2,{angle:-45}).to(.4,{angle:45}).to(.2,{angle:0})).start(),cc.tween(this.node_bigWin).to(.1,{opacity:255}).delay(4).to(.5,{opacity:0}).start()},e.prototype.showBatteryFireAndRollScore=function(t,e){var o=this;if(!e)return this.fire.active=!1,void(this.fireScoreBg.active=!1);this.fire.active=!0,this.fireScoreBg.active=!0;var i=this.fire.getComponent(cc.Sprite),n=this.control.gameView.effectManage.getSpFrameList("batteryFire_",0,6);a.default.showFrameAnimation(i,n,1,!1,!0,-1,function(){});var s=this.fireScoreBg.getComponent(cc.Sprite),r=this.control.gameView.effectManage.getSpFrameList("uiScoreBG_",0,12);a.default.showFrameAnimation(s,r,1,!1,!0,-1,function(){});var c=0,h=Math.ceil(t/100);this.schedule(function(){(c+=h)>t&&(c=t),o.fireScoreLabel.string=""+(c/globalThis.playerInfo.exchangeRate).toFixed(2)},.03,100)},e.prototype.onClick_addScore=function(){this.control.playAudio(6),this.control.sendChangeBaseScore("add")},e.prototype.onClick_decScore=function(){this.control.playAudio(6),this.control.sendChangeBaseScore("dec")},s([p(cc.SpriteAtlas)],e.prototype,"atlas_btttery",void 0),s([p(cc.Node)],e.prototype,"icon_guide",void 0),s([p(cc.Sprite)],e.prototype,"bg_name",void 0),s([p(cc.Label)],e.prototype,"lbl_name",void 0),s([p(cc.Sprite)],e.prototype,"bg_score_total",void 0),s([p(cc.Label)],e.prototype,"lbl_score_total",void 0),s([p(cc.Node)],e.prototype,"node_score_win",void 0),s([p(cc.Label)],e.prototype,"lbl_score_win",void 0),s([p(cc.Label)],e.prototype,"lbl_score_base",void 0),s([p(cc.Node)],e.prototype,"node_pao",void 0),s([p(cc.Sprite)],e.prototype,"sp_guang",void 0),s([p(cc.Sprite)],e.prototype,"sp_qiu",void 0),s([p(cc.Node)],e.prototype,"node_fire",void 0),s([p(cc.Sprite)],e.prototype,"sp_fire_1",void 0),s([p(cc.Sprite)],e.prototype,"sp_fire_2",void 0),s([p(cc.Sprite)],e.prototype,"sp_icon_auto",void 0),s([p(cc.Node)],e.prototype,"node_lock",void 0),s([p(cc.Sprite)],e.prototype,"sp_lock_icon",void 0),s([p(cc.Sprite)],e.prototype,"sp_lockfish",void 0),s([p(cc.Node)],e.prototype,"panel_goal",void 0),s([p(cc.Prefab)],e.prototype,"goalAniPrefab",void 0),s([p(r.default)],e.prototype,"batteryCicle",void 0),s([p(cc.Node)],e.prototype,"btn_addScore",void 0),s([p(cc.Node)],e.prototype,"btn_decScore",void 0),s([p(cc.Node)],e.prototype,"node_bigWin",void 0),s([p(cc.Node)],e.prototype,"bigWin_score",void 0),s([p(cc.Node)],e.prototype,"fire",void 0),s([p(cc.Node)],e.prototype,"fireScoreBg",void 0),s([p(cc.Label)],e.prototype,"fireScoreLabel",void 0),s([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./BHBatteryCicle":"BHBatteryCicle","./BHFishUtil":"BHFishUtil","./BHScoreAni":"BHScoreAni"}],BHBulletManage:[function(t,e,o){"use strict";cc._RF.push(e,"b8d0dlJzGdGh4wpdRaXBcdm","BHBulletManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHBullet"),a=t("./BHFishUtil"),c=cc._decorator,h=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlas_bullet=null,e.atlas_bullet1=null,e.bulletPrefab=null,e.bulletPool=null,e.control=null,e.frameList=null,e}return n(e,t),e.prototype.initView=function(t){this.control=t,this.bulletPool=new cc.NodePool,this.frameList=[],this.frameList=this.frameList.concat(this.atlas_bullet.getSpriteFrames()),this.frameList=this.frameList.concat(this.atlas_bullet1.getSpriteFrames())},e.prototype.getSpriteFrame=function(t){for(var e in this.frameList)if(this.frameList[e].name==t)return this.frameList[e]},e.prototype.createNewBullet=function(t,e,o,i,n,s){if(null!=n){var a=this.bulletPool.get();null==a&&(a=cc.instantiate(this.bulletPrefab)),a.parent=this.node;var c=a.getComponent(r.default);c.initView(t,e,this);var h="bullet_"+t.batteryId+"_"+(o-1),l=this.getSpriteFrame(h);c.setIcon(l),c.setPos(i,n),s>0&&c.setLockFish(s),c.run()}},e.prototype.removeBulletNode=function(t){this.bulletPool.put(t)},e.prototype.removeBulletNodeById=function(t){var e=this.node.children;for(var o in e)if(e[o].getComponent(r.default).bulletId==t)return void this.bulletPool.put(e[o])},e.prototype.showHitAni=function(t,e){var o=this.control.getBulletTypeByBaseScore(t.baseScore);this.control.gameView.effectManage.createFishNet(e,o,t.batteryId)},e.prototype.hitFish=function(t,e,o,i){i.isMonitor&&this.control.sendHitFish(i.userId,t,o.fishId,1,o.fishConfig.Id,o)},e.prototype.getBulletCountByBatteryId=function(t){var e=this.node.children,o=0;for(var i in e)e[i].getComponent(r.default).userItem.batteryId==t&&(o+=1);return o},e.prototype.getBulletByBulletId=function(t){var e=this.node.children;for(var o in e){var i=e[o].getComponent(r.default);if(i.bulletId==t)return i}return null},e.prototype.getFishByFishId=function(t){return this.control.gameView.fishManage.getFishByFishId(t)},e.prototype.getNewBulletId=function(){return a.default.generateMixed(16)},s([l(cc.SpriteAtlas)],e.prototype,"atlas_bullet",void 0),s([l(cc.SpriteAtlas)],e.prototype,"atlas_bullet1",void 0),s([l(cc.Prefab)],e.prototype,"bulletPrefab",void 0),s([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./BHBullet":"BHBullet","./BHFishUtil":"BHFishUtil"}],BHBullet:[function(t,e,o){"use strict";cc._RF.push(e,"efe16cLkXZFVozGPOkcJpcB","BHBullet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHDataEntry"),a=t("./BHFish"),c=cc._decorator,h=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.boxCollider=null,e.userItem=null,e.bulletId=null,e.bullteManage=null,e.angle=0,e.pos=null,e.isRun=!1,e.speed=700,e.isLock=!1,e.lockFishId=0,e}return n(e,t),e.prototype.initView=function(t,e,o){this.userItem=t,this.bulletId=e,this.bullteManage=o,this.boxCollider=this.getComponent(cc.BoxCollider),this.isLock=!1,this.lockFishId=0,this.node.active=!0},e.prototype.setIcon=function(t){this.icon.spriteFrame=t,this.boxCollider.size=this.icon.node.getContentSize()},e.prototype.setPos=function(t,e){this.angle=t,this.pos=e,this.node.angle=t,this.node.setPosition(e)},e.prototype.update=function(t){if(this.isRun){if(this.isLock){var e=this.bullteManage.getFishByFishId(this.lockFishId);if(e&&e.fishStatus==r.FishStatus.Swim&&0==e.isOutSwimSize){var o=e.node.getPosition();this.angle=360*Math.atan2(o.y-this.pos.y,o.x-this.pos.x)/(2*Math.PI)}else this.removeLock()}var i=this.speed*t*Math.cos(2*Math.PI/360*this.angle),n=this.speed*t*Math.sin(2*Math.PI/360*this.angle),s=i+this.pos.x,a=n+this.pos.y,c=this.angle,h=this.bullteManage.node.getContentSize();s<-1*h.width/2?(s=-1*h.width/2+1,c=180-c,this.removeLock()):s>h.width/2&&(s=h.width/2-1,c=180-c,this.removeLock()),a<-1*h.height/2?(a=-1*h.height/2+1,c=360-c,this.removeLock()):a>h.height/2&&(a=h.height/2-1,c=360-c,this.removeLock()),this.setPos(c,cc.v2(s,a))}},e.prototype.run=function(){this.isRun=!0},e.prototype.stopRun=function(){this.isRun=!1},e.prototype.onCollisionEnter=function(t,e){var o=t.node.parent.getComponent(a.default);if(1!=this.isLock||this.lockFishId==o.fishId){var i=cc.v2(e.world.aabb.x+e.world.aabb.width/2,e.world.aabb.y+e.world.aabb.height/2);cc.v2(t.world.aabb.x+t.world.aabb.width/2,t.world.aabb.y+t.world.aabb.height/2),o.fishStatus==r.FishStatus.Swim&&(this.bullteManage.hitFish(this.bulletId,1,o,this.userItem),this.bullteManage.showHitAni(this.userItem,cc.v2(i.x,i.y)),this.bullteManage.removeBulletNode(this.node))}},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},e.prototype.setLockFish=function(t){this.isLock=!0,this.lockFishId=t},e.prototype.removeLock=function(){this.isLock=!1,this.lockFishId=0},s([l(cc.Sprite)],e.prototype,"icon",void 0),s([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./BHDataEntry":"BHDataEntry","./BHFish":"BHFish"}],BHComWait:[function(t,e,o){"use strict";cc._RF.push(e,"6863e1oqtdPDY7MhZmv2cb8","BHComWait");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cantent=null,e}return n(e,t),e.prototype.initView=function(){this.node.active=!1},e.prototype.showLoading=function(){1!=this.node.active&&(this.node.active=!0)},e.prototype.closeLoading=function(){this.node.active=!1},s([c(cc.Node)],e.prototype,"cantent",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],BHControl:[function(t,e,o){"use strict";cc._RF.push(e,"d923bh7pFBNtJ4yu4JLexYB","BHControl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHDataEntry"),a=t("./BHGameInfo"),c=t("./BHGameView"),h=t("./BHI18n"),l=t("./BHNetWork"),p=t("./BHAudio"),u=cc._decorator,f=u.ccclass,d=(u.property,function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameView=null,t.gameInfo=null,t.netWork=null,t.i18n=null,t.audioManage=null,t.heartBeattime=0,t.unActiontime=0,t}return n(o,e),o.prototype.start=function(){globalThis.playerInfo=t("PlayerInfo").getInstant,this.gameInfo=new a.BHGameInfo,this.audioManage=this.getComponent(p.default),this.audioManage.initView(),this.gameView=this.getComponent(c.default),this.gameView.initView(this),this.netWork=this.getComponent(l.default),this.netWork.initView(this),this.i18n=this.getComponent(h.default),this.i18n.initView("en"),this.heartBeattime=0,this.unActiontime=0},o.prototype.playAudio=function(t){return this.audioManage.playAudio(t)},o.prototype.showDialogMessage=function(t,e,o){this.gameView.dialog_message.showMessage(t,e,o)},o.prototype.showDialogMessage1=function(t){this.gameView.dialog_unAction.showMessage(t)},o.prototype.showTrip=function(t){this.gameView.showTripMsg(t)},o.prototype.showWaitLoading=function(t){t?this.gameView.comWait.showLoading():this.gameView.comWait.closeLoading()},o.prototype.getFishPosByGroup=function(t,e,o){return this.gameView.fishManage.getFishPosByGroup(t,e,o)},o.prototype.getBulletTypeByBaseScore=function(t){return this.gameInfo.getButlletType(t)},o.prototype.sendLeaveRoom=function(){this.netWork.sendLeaveRoom()},o.prototype.sendChangeBaseScore=function(t){var e=this.gameInfo.getNextBaseScore(t),o=this.gameInfo.selfUserItem.userId;this.netWork.sendChangeBaseScore(o,e)},o.prototype.sendBatteryFire=function(t,e){var o=this.gameInfo.getBaseScore(),i=this.gameInfo.selfUserItem.userId;if(o*this.gameInfo.roomBet>this.gameInfo.selfUserItem.score){var n=this.i18n.getTripStr("coinNotEnough");this.showTrip(n)}else{var s=this.gameInfo.lockFishId,r=this.gameView.bullteManage.getNewBulletId();this.netWork.sendBatteryFire(i,t,e,o,s,r);var a=this.gameInfo.selfUserItem;this.gameView.batteryManage.setBatteryAngle(a.batteryId,e),this.gameView.batteryManage.showFireAniByBattryId(a.batteryId);var c=this.gameView.batteryManage.getBulletStartPos(a.batteryId,e),h=this.getBulletTypeByBaseScore(a.baseScore);this.gameView.bullteManage.createNewBullet(a,r,h,e,c,s)}},o.prototype.sendHitFish=function(t,e,o,i,n,s){var r=0;21==n?r=3*s.group_fishConfig.Double:22==n?r=4*s.group_fishConfig.Double:23==n?r=this.gameView.fishManage.getSameBombFishHP(s.bombSame_fishConfig.Id):25==n&&(r=this.gameView.fishManage.getFullBombFishHP()),this.netWork.sendHitFish(t,e,o,i,0,!1,r)},o.prototype.sendHitFish2=function(t,e,o,i,n,s){void 0===n&&(n=0),void 0===s&&(s=!1),this.netWork.sendHitFish(t,e,o,i,n,s,0)},o.prototype.onUserEnter=function(t){this.gameInfo.addUserItem(t),this.gameInfo.checkSelfByUid(t.userId)?(this.gameView.batteryManage.runNewBattery(t,!0),-1!=[2,3].indexOf(t.batteryId)&&(this.gameView.batteryManage.node.angle=180,this.gameView.fishManage.node.angle=180,this.gameView.bullteManage.node.angle=180,this.gameView.lockManage.node.angle=180)):this.gameView.batteryManage.runNewBattery(t,!1)},o.prototype.onUserLeave=function(t){var e=this.gameInfo.getUserItemByUid(t);this.gameView.batteryManage.clearBattery(e.batteryId),this.gameInfo.removeUseItem(t)},o.prototype.onFishEnter=function(t,e,o,i,n,s,r){this.gameView.fishManage.createFish(t,e,o,i,n,s,r)},o.prototype.onChangeBaseScore=function(t,e){var o=this.gameInfo.getUserItemByUid(t);o&&(o.baseScore=e,this.gameView.batteryManage.changeBatteryBaseScore(o.batteryId,o.baseScore),this.gameInfo.checkSelfByUid(o.userId)&&this.gameInfo.setBaseScore(e))},o.prototype.onBatteryFire=function(t,e,o,i,n){var s=this.gameInfo.getUserItemByUid(t);if(s){s.score=s.score-i*this.gameInfo.roomBet,this.gameView.batteryManage.setBatteryUserScore(s.batteryId);var r=this.gameInfo.checkSelfByUid(s.userId);if(0==r){this.gameView.batteryManage.setBatteryAngle(s.batteryId,o),this.gameView.batteryManage.showFireAniByBattryId(s.batteryId);var a=this.gameView.batteryManage.getBulletStartPos(s.batteryId,o),c=this.getBulletTypeByBaseScore(s.baseScore);this.gameView.bullteManage.createNewBullet(s,e,c,o,a,n)}this.gameView.batteryManage.setBatteryLock(s.batteryId,n),this.gameView.lockManage.setBatteyLockFish(s.batteryId,n),r&&this.playAudio(8)}},o.prototype.onFishDeath=function(t){var e=this;this.gameView.bullteManage.removeBulletNodeById(t.bulletId);var o=this.gameInfo.getUserItemByUid(t.uId),i=t.winScore*this.gameInfo.roomBet,n=this.gameInfo.checkSelfByUid(t.uId),s=this.gameView.fishManage.getFishByFishId(t.fishId);this.gameInfo.isLock&&this.gameInfo.lockFishId==t.fishId&&(this.gameInfo.lockFishId=0);var a=function(){o&&-1!=[0,1,2,6,7].indexOf(t.butype)&&(globalThis.playerInfo.useOneScore?(o.score=o.score+i,e.gameView.batteryManage.setBatteryUserScore(o.batteryId)):(o.winSocre=o.winSocre+i,e.gameView.batteryManage.setBatteryUserScore(o.batteryId)),e.gameView.batteryManage.showBatteryAddScoreAni(o.batteryId,i),n&&e.playAudio(20))};if(null!=o&&null!=s){var c=cc.v2(0,0);c=s.getWorldPos();var h=this.gameView.batteryManage.getPaoTaiPos(o.batteryId);s.fishConfig.Type!=r.FishType.FishDoubel_Single&&s.fishConfig.Type!=r.FishType.FishDoubel_Group||-1==[3,4].indexOf(t.bulletType)&&(this.gameView.effectManage.createScoreIcon(i,c),this.gameView.effectManage.createGoalAni(s.fishConfig.GoalCount,c,h,n));var l=function(){3==t.bulletType?(e.gameView.effectManage.createScoreIcon(i,c),e.gameView.effectManage.createGoalAni(s.fishConfig.GoalCount,c,h,n)):4==t.bulletType&&(e.gameView.effectManage.createScoreIcon(i,c),e.gameView.effectManage.createGoalAni(s.fishConfig.GoalCount,c,h,n))};if(19==s.fishConfig.Id&&this.gameView.effectManage.showDaPengAni(),20==s.fishConfig.Id&&this.gameView.effectManage.showCaiSeFengHuangAni(),s.fishConfig.Id>=16&&s.fishConfig.Id<=23&&(this.gameView.batteryManage.setBatteryBigWin(o.batteryId,i),this.playAudio(18)),s.fishConfig.Type==r.FishType.FishDoubel_Group)this.gameView.effectManage.showYellowBombAni(c),21==s.fishConfig.Id?this.playAudio(23):this.playAudio(17),s.showDeathAni(t.bulletType),a(),l();else if(s.fishConfig.Type==r.FishType.FishBombSame){s.showDeathAni(t.bulletType);var p=this.gameView.fishManage.getFishListByTypeId(s.bombSame_fishConfig.Id);for(var u in console.log("fishList.length",p.length),p)p[u].fishConfig.Type==r.FishType.FishDoubel_Single&&o.isMonitor&&this.sendHitFish2(o.userId,t.bombId,p[u].fishId,3,0,!0);this.gameView.effectManage.showBlueBombAni(c),a(),l()}else if(s.fishConfig.Type==r.FishType.FishBombLocal){var f=s.node.getPosition();if(o.isMonitor)for(var d in p=this.gameView.fishManage.getBombFishList(f,i),console.log("fishList.length",p.length),p)this.sendHitFish2(o.userId,t.bombId,p[d].fishId,3,0,!1);n&&this.playAudio(21),s.showDeathAni(t.bulletType),a(),l()}else if(s.fishConfig.Type==r.FishType.FishBombFull)s.showDeathAni(t.bulletType),cc.tween(this.node).delay(2).call(function(){e.gameView.effectManage.showJiGuanNiaoAni()}).delay(4).call(function(){if(o.isMonitor){var i=e.gameView.fishManage.getAllFish();for(var n in console.log("fishList.length",i.length),i)i[n].fishConfig.Id<17&&e.sendHitFish2(o.userId,t.bombId,i[n].fishId,4,0,!1)}a(),l()}).start();else if(s.fishConfig.Type==r.FishType.FishBombMouse){f=s.node.getPosition();var y=this.gameView.fishManage.getBombFishList(f,i);console.log("fishList.length",y.length);var g=[];for(var d in y)g.push(y[d].getWorldPos());this.playAudio(14),this.gameView.effectManage.showFeiShuAni(o.batteryId,s.node.parent.convertToWorldSpaceAR(f),h,s.node.angle,i,function(){var i=function(i){o.isMonitor&&e.scheduleOnce(function(){e.sendHitFish2(o.userId,t.bombId,y[i].fishId,3,0,!1)},4.1+4*Math.random())};for(var n in y)i(n)}),a(),l(),s.showDeathAni(t.bulletType)}else a(),l(),s.showDeathAni(t.bulletType)}else a()},o.prototype.onUserScoreChange=function(t,e){var o=this.gameInfo.getUserItemByUid(t);o&&(o.score=e,this.gameView.batteryManage.setBatteryUserScore(o.batteryId))},o.prototype.setMap=function(t){this.gameView.mapManage.setMap(t)},o.prototype.switchFishGroupMap=function(t){var e=this;this.gameView.showSwitchFishGroupMapTrip(),this.gameView.batteryManage.fireEnable=!1;var o=this.gameView.fishManage.getAllFish(),i=this.gameView.mapManage.getMapAngle(t),n=this.gameView.mapManage.getMapSpeed(t);for(var s in o)o[s].showOutMoveAni(i,n);this.playAudio(13),this.gameView.showSwitchFishGroupMapAni(t),cc.tween(this.node).delay(1).call(function(){e.gameView.batteryManage.fireEnable=!0,e.netWork.sendChangeScene()}).start()},o.prototype.update=function(t){var e=this;cc.isValid(this.node)&&(this.unActiontime+=t,this.unActiontime>=180&&(this.unActiontime=0,this.showDialogMessage1(function(){e.sendLeaveRoom()})))},s([f],o)}(cc.Component));o.default=d,cc._RF.pop()},{"./BHAudio":"BHAudio","./BHDataEntry":"BHDataEntry","./BHGameInfo":"BHGameInfo","./BHGameView":"BHGameView","./BHI18n":"BHI18n","./BHNetWork":"BHNetWork",PlayerInfo:void 0}],BHDataEntry:[function(t,e,o){"use strict";cc._RF.push(e,"0d9c0u0NbFCy5orGP8clqqD","BHDataEntry"),Object.defineProperty(o,"__esModule",{value:!0}),o.FishStatus=o.PathType=o.FishType=o.UserItem=void 0;o.UserItem=function(){this.niceName=null,this.headId=null,this.userId=null,this.userType=null,this.score=null,this.winSocre=null,this.cannonId=null,this.baseScore=null,this.seatId=null,this.batteryId=null,this.isMonitor=null},function(t){t[t.FishDoubel_Single=1]="FishDoubel_Single",t[t.FishDoubel_Group=2]="FishDoubel_Group",t[t.FishBombSame=3]="FishBombSame",t[t.FishBombLocal=4]="FishBombLocal",t[t.FishBombFull=5]="FishBombFull",t[t.FishBombMouse=6]="FishBombMouse"}(o.FishType||(o.FishType={})),function(t){t[t.Line=1]="Line",t[t.Bezier=2]="Bezier"}(o.PathType||(o.PathType={})),function(t){t[t.Swim=1]="Swim",t[t.Wait=2]="Wait",t[t.Out=3]="Out",t[t.Dead=4]="Dead"}(o.FishStatus||(o.FishStatus={})),cc._RF.pop()},{}],BHDialogHelp:[function(t,e,o){"use strict";cc._RF.push(e,"f2a19vexMhGrocPvalqwKkG","BHDialogHelp");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_close=null,e.control=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.btn_close.on("click",this.onClick_close.bind(this)),this.show(!1)},e.prototype.show=function(t){this.node.active=t},e.prototype.onClick_close=function(){this.control.playAudio(6),this.show(!1)},s([c(cc.Node)],e.prototype,"btn_close",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],BHDialogMessage:[function(t,e,o){"use strict";cc._RF.push(e,"03c2dscHJJAjb7HzByWQvhH","BHDialogMessage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_ok=null,e.btn_cancel=null,e.lbl_message=null,e.control=null,e.funC=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.btn_ok.on("click",this.onClick_ok.bind(this)),this.btn_cancel.on("click",this.onClick_cancel.bind(this)),this.show(!1)},e.prototype.show=function(t){this.node.active=t},e.prototype.onClick_ok=function(){this.control.playAudio(6),this.show(!1),null!=this.funC&&this.funC("ok")},e.prototype.onClick_cancel=function(){this.control.playAudio(6),this.show(!1),null!=this.funC&&this.funC("cancel")},e.prototype.showMessage=function(t,e,o){this.funC=o,this.lbl_message.string=e,this.show(!0),"ok"==t?(this.btn_ok.setPosition(0,-90),this.btn_ok.active=!0,this.btn_cancel.active=!1):"ok_cancel"==t&&(this.btn_ok.setPosition(-100,-90),this.btn_ok.active=!0,this.btn_cancel.setPosition(100,-90),this.btn_cancel.active=!0)},s([c(cc.Node)],e.prototype,"btn_ok",void 0),s([c(cc.Node)],e.prototype,"btn_cancel",void 0),s([c(cc.Label)],e.prototype,"lbl_message",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],BHDialogSetting:[function(t,e,o){"use strict";cc._RF.push(e,"73e72TynUVPaL6kRcwCjSjm","BHDialogSetting");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_close=null,e.btn_music=null,e.btn_sound=null,e.control=null,e}return n(e,t),e.prototype.initView=function(t){this.control=t,this.btn_close.on("click",this.onClick_close.bind(this)),this.btn_music.on("click",this.onClick_music.bind(this)),this.btn_sound.on("click",this.onClick_sound.bind(this));var e=cc.sys.localStorage.getItem("BH_MusicChk");null==e&&(e=1),this.setBtnVolumeStatus("music",1==e);var o=cc.sys.localStorage.getItem("BH_SoundChk");null==o&&(o=1),this.setBtnVolumeStatus("sound",1==o),this.show(!1)},e.prototype.show=function(t){this.node.active=t,1==t&&(this.setBtnVolumeStatus("music",cc.audioEngine.getMusicVolume()>0),this.setBtnVolumeStatus("sound",cc.audioEngine.getEffectsVolume()>0))},e.prototype.onClick_close=function(){this.control.playAudio(6),this.show(!1)},e.prototype.setBtnVolumeStatus=function(t,e){var o=e?1:0;"music"==t?(cc.audioEngine.setMusicVolume(o),cc.sys.localStorage.setItem("BH_MusicChk",o),this.btn_music.getChildByName("icon_1").active=e,this.btn_music.getChildByName("icon_2").active=!e):(cc.audioEngine.setEffectsVolume(o),cc.sys.localStorage.setItem("BH_SoundChk",o),this.btn_sound.getChildByName("icon_1").active=e,this.btn_sound.getChildByName("icon_2").active=!e)},e.prototype.onClick_music=function(){this.control.playAudio(6),cc.audioEngine.getMusicVolume()>=1?this.setBtnVolumeStatus("music",!1):this.setBtnVolumeStatus("music",!0)},e.prototype.onClick_sound=function(){this.control.playAudio(6),cc.audioEngine.getEffectsVolume()>=1?this.setBtnVolumeStatus("sound",!1):this.setBtnVolumeStatus("sound",!0)},s([c(cc.Node)],e.prototype,"btn_close",void 0),s([c(cc.Node)],e.prototype,"btn_music",void 0),s([c(cc.Node)],e.prototype,"btn_sound",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],BHDialogUnAction:[function(t,e,o){"use strict";cc._RF.push(e,"82a35giFn1K97pDwGFyCJYC","BHDialogUnAction");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_ok=null,e.btn_cancel=null,e.lbl_message=null,e.control=null,e.funC=null,e.time=0,e.str_1="Opps,Game will exit in ",e.str_2=" seconds (C001)",e}return n(e,t),e.prototype.start=function(){},e.prototype.update=function(t){this.time>0&&(this.time+=t,this.time>=30?(this.show(!1),this.control.unActiontime=0,this.time=0,null!=this.funC&&this.funC()):this.lbl_message.string=this.str_1+Math.floor(30-this.time)+this.str_2)},e.prototype.initView=function(t){this.control=t,this.btn_ok.on("click",this.onClick_ok.bind(this)),this.btn_cancel.on("click",this.onClick_cancel.bind(this)),this.show(!1),this.time=0},e.prototype.show=function(t){this.node.active=t},e.prototype.onClick_ok=function(){this.control.playAudio(6),this.show(!1),this.control.unActiontime=0,this.time=0},e.prototype.onClick_cancel=function(){this.control.playAudio(6),this.show(!1),this.control.unActiontime=0,this.time=0,null!=this.funC&&this.funC()},e.prototype.showMessage=function(t){this.funC=t,this.time=.02,this.show(!0)},s([c(cc.Node)],e.prototype,"btn_ok",void 0),s([c(cc.Node)],e.prototype,"btn_cancel",void 0),s([c(cc.Label)],e.prototype,"lbl_message",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],BHEffectManage:[function(t,e,o){"use strict";cc._RF.push(e,"ba26e296WlHWqMNa2TU7N6A","BHEffectManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHFishNet"),a=t("./BHFishUtil"),c=t("./BHScore"),h=cc._decorator,l=h.ccclass,p=h.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlas_effect_list=[],e.layer_effect_down=null,e.layer_effect_mid=null,e.fishNetPrefab=null,e.scorePrefab=null,e.goldPrefab=null,e.bombSame_bombPfb=null,e.bomb_goalPfb=null,e.bomb_Pfb=null,e.mouse_Pfb=null,e.bomb_bluePfb=null,e.bomb_yellowPfb=null,e.cai_se_feng_huang_Pfb=null,e.da_peng_Pfb=null,e.ji_guan_niao_Pfb=null,e.ji_guan_niao_bomb_Pfb=null,e.ji_guan_niao_barrel_Pfb=null,e.fei_shu_Pfb=null,e.control=null,e.fishNetPool=null,e.frameList=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.fishNetPool=new cc.NodePool,this.frameList=[];for(var e=0;e<this.atlas_effect_list.length;e++)this.frameList=this.frameList.concat(this.atlas_effect_list[e].getSpriteFrames());this.node.removeAllChildren(),this.layer_effect_down.removeAllChildren(),this.layer_effect_mid.removeAllChildren()},e.prototype.getSpFrame=function(t){var e;for(var o in this.frameList)if(this.frameList[o].name==t){e=this.frameList[o];break}return e},e.prototype.getSpFrameList=function(t,e,o){for(var i=[],n=e;n<o;n++)for(var s in this.frameList)if(this.frameList[s].name==t+""+n){i.push(this.frameList[s]);break}return i},e.prototype.createFishNet=function(t,e,o){console.log("createFishNet",t,e,o);var i=this.fishNetPool.get();null==i&&(i=cc.instantiate(this.fishNetPrefab)),i.parent=this.node;var n=this.node.convertToNodeSpaceAR(t),s="net_"+o+"_"+e+"_",a=this.getSpFrameList(s,0,5);i.getComponent(r.default).initView(this,a,n)},e.prototype.removeFishNetNode=function(t){this.fishNetPool.put(t)},e.prototype.createScoreIcon=function(t,e){console.log("createScoreIcon",t,e);var o=this.node.convertToNodeSpaceAR(e),i=cc.instantiate(this.scorePrefab);i.setPosition(o),i.parent=this.node,i.getComponent(c.default).showAni(t)},e.prototype.createGoalAni=function(t,e,o){console.log("createGoalAni",e,o);for(var i=this.layer_effect_mid.convertToNodeSpaceAR(e),n=this.layer_effect_mid.convertToNodeSpaceAR(o),s=Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2))/1200,r=function(e){var o=cc.instantiate(c.goldPrefab);o.setPosition(i.x+45*(e-(t-1)/2),i.y-10*Math.abs(e-(t-1)/2)-100),o.parent=c.node,o.opacity=0;var r=o.getComponent(cc.Sprite),h=c.getSpFrameList("gold_",0,12);cc.tween(o).delay(.05*e).call(function(){a.default.showFrameAnimation(r,h,1,!1,!0,-1,null)}).to(.2,{opacity:255,y:i.y-10*Math.abs(e-(t-1)/2)}).delay(.8).to(s+.05*Math.abs((t-1)/2-e),{position:cc.v3(n)}).call(function(){o.removeFromParent()}).start()},c=this,h=0;h<t;h++)r(h)},e.prototype.createScoreIconMove=function(t,e,o,i){console.log("createScoreIconMove",t,e,o),e=this.node.convertToNodeSpaceAR(e),o=this.node.convertToNodeSpaceAR(o);var n=cc.instantiate(this.scorePrefab);n.setPosition(e),n.parent=this.layer_effect_mid,n.getComponent(c.default).showMoveAni(t,e,o,i)},e.prototype.playGoalBombAni=function(t,e){console.log("playGoalBombAni",t,e);var o=this.node.convertToNodeSpaceAR(t),i=cc.instantiate(this.bomb_goalPfb);i.setPosition(o),i.parent=this.node;var n=i.getComponent(cc.Sprite),s=this.getSpFrameList("coinEffect_",0,30);a.default.showFrameAnimation(n,s,1.5,!1,!1,-1,function(){i.removeFromParent()})},e.prototype.showBombAni_Local=function(t){console.log("showBombAni_Local",t);var e=this.node.convertToNodeSpaceAR(t),o=[cc.v2(e.x-150,e.y+50),cc.v2(e.x,e.y-50),cc.v2(e.x+150,e.y+50)],i=function(t){var e=cc.instantiate(n.bomb_Pfb);e.setPosition(o[t]),e.parent=n.node;var i=e.getComponent(cc.Sprite),s=n.getSpFrameList("bombEffect_",0,30);a.default.showFrameAnimation(i,s,1,!1,!1,-1,function(){e.removeFromParent()})},n=this;for(var s in o)i(s)},e.prototype.showBombAni_Local_2=function(t,e,o){var i=this;console.log("showBombAni_Local_2",t,e);var n=this.node.convertToNodeSpaceAR(t),s=function(t){var i=r.node.convertToNodeSpaceAR(e[t]),s=Math.atan2(i.y-n.y,i.x-n.x),c=cc.instantiate(r.mouse_Pfb);c.parent=r.node,c.setPosition(n),c.angle=180*s/Math.PI-90;var h="UiFish_Feishu_"+(Math.floor(2.99*Math.random())+1)+"_",l=c.getComponent(cc.Sprite),p=r.getSpFrameList(h,1,7);a.default.showFrameAnimation(l,p,.5,!1,!0,-1,null),cc.tween(c).delay(.3).to(.8,{position:cc.v3(i.x,i.y,0)}).call(function(){c.removeFromParent(),o&&o()}).start()},r=this;for(var c in e)s(c);this.control.playAudio(14),cc.tween(this.node).delay(.3).call(function(){i.control.playAudio(15)}).start()},e.prototype.showBombAni_Full=function(){console.log("showBombAni_Full");var t=[cc.v2(320,540),cc.v2(320,180),cc.v2(640,360),cc.v2(960,540),,cc.v2(960,180)];for(var e in t)t[e].x+=50*Math.random()-25,t[e].y+=200*Math.random()-100;for(var e in t)this.showBombAni_Local(t[e])},e.prototype.showBlueBombAni=function(t){console.log("showBlueBombAni",t);var e=this.node.convertToNodeSpaceAR(t),o=cc.instantiate(this.bomb_bluePfb);o.setPosition(e),o.parent=this.node,cc.tween(o.getChildByName("bomb0")).to(.25,{scale:2}).to(.125,{scale:1}).to(0,{scale:0}).start(),cc.tween(o.getChildByName("bomb1")).to(1,{scale:8}).call(function(){o.removeFromParent()}).start()},e.prototype.showYellowBombAni=function(t){console.log("showYellowBombAni",t);var e=this.node.convertToNodeSpaceAR(t),o=cc.instantiate(this.bomb_yellowPfb);o.setPosition(e),o.parent=this.node;var i=o.getChildByName("bomb0").getComponent(cc.Sprite),n=this.getSpFrameList("bombCoin_",0,16);a.default.showFrameAnimation(i,n,.5,!1,!1,0,null),cc.tween(o.getChildByName("bomb1")).to(1,{scale:8}).call(function(){o.removeFromParent()}).start()},e.prototype.showCaiSeFengHuangAni=function(){var t=this;console.log("showCaiSeFengHuangAni");var e=cc.instantiate(this.cai_se_feng_huang_Pfb);e.parent=this.node;for(var o=0;o<4;o++)cc.tween(e.getChildByName("boss_fly"+o)).delay(1).to(1,{x:0,y:0}).to(.5,{opacity:0}).start();this.control.playAudio(24),cc.tween(e).delay(2.5).call(function(){var o=e.getChildByName("iconSprite").getComponent(cc.Sprite),i=t.getSpFrameList("bossEffect_",0,44);a.default.showFrameAnimation(o,i,4,!1,!1,0,function(){e.removeFromParent()})}).start()},e.prototype.showDaPengAni=function(){console.log("showDaPengAni");var t=cc.instantiate(this.da_peng_Pfb);t.parent=this.node;var e=t.getChildByName("iconSprite").getComponent(cc.Sprite),o=this.getSpFrameList("bombScreen_",0,53);a.default.showFrameAnimation(e,o,4,!1,!1,0,function(){t.removeFromParent()})},e.prototype.showJiGuanNiaoAni=function(){var t=this;console.log("showJiGuanNiaoAni");var e=cc.instantiate(this.ji_guan_niao_Pfb);e.parent=this.node;for(var o=this.getSpFrame("bombBarrel_phoenix"),i=function(t){cc.tween(e.getChildByName("bird_fly"+t)).to(0,{x:t%2*1280-640,scale:4}).to(1,{x:1e3-t%2*2e3}).call(function(){e.getChildByName("bird_fly"+t).getComponent(cc.Sprite).spriteFrame=o}).to(0,{x:t%2*1280-640,scale:1}).to(2,{x:1e3-t%2*2e3}).start()},n=0;n<3;n++)i(n);cc.tween(this.node).delay(2.5).call(function(){var e=[cc.v2(320,540),cc.v2(320,180),cc.v2(640,360),cc.v2(960,540),,cc.v2(960,180)];for(var o in e)e[o].x+=50*Math.random()-25,e[o].y+=200*Math.random()-100;var i=function(o){t.scheduleOnce(function(){t.showJiGuanNiaoBarrelAni(e[o])},.1*Number(o))};for(var o in e)i(o);t.control.playAudio(19)}).delay(1).call(function(){var o=[cc.v2(320,540),cc.v2(320,180),cc.v2(640,360),cc.v2(960,540),,cc.v2(960,180)];for(var i in o)o[i].x+=50*Math.random()-25,o[i].y+=200*Math.random()-100;var n=function(e){t.scheduleOnce(function(){t.showJiGuanNiaoBombAni(o[e])},.1*Number(e))};for(var i in o)n(i);t.control.playAudio(22),e.removeFromParent()}).start()},e.prototype.showJiGuanNiaoBarrelAni=function(t){console.log("showJiGuanNiaoBarrelAni",t);var e=this.node.convertToNodeSpaceAR(t),o=[cc.v2(e.x-150,e.y+50),cc.v2(e.x,e.y-50),cc.v2(e.x+150,e.y+50)],i=function(t){var e=cc.instantiate(n.ji_guan_niao_barrel_Pfb);e.setPosition(o[t]),e.parent=n.node;var i=e.getComponent(cc.Sprite),s=n.getSpFrameList("bombBarrel_",0,19);n.scheduleOnce(function(){a.default.showFrameAnimation(i,s,1,!1,!1,-1,function(){e.removeFromParent()})},.1*Number(t))},n=this;for(var s in o)i(s)},e.prototype.showJiGuanNiaoBombAni=function(t){console.log("showJiGuanNiaoBombAni",t);var e=this.node.convertToNodeSpaceAR(t),o=[cc.v2(e.x-150,e.y+50),cc.v2(e.x,e.y-50),cc.v2(e.x+150,e.y+50)],i=function(t){var e=cc.instantiate(n.ji_guan_niao_bomb_Pfb);e.setPosition(o[t]),e.parent=n.node;var i=e.getComponent(cc.Sprite),s=n.getSpFrameList("bombBarrelFire_",0,19);n.scheduleOnce(function(){a.default.showFrameAnimation(i,s,1,!1,!1,-1,function(){e.removeFromParent()})},.1*Number(t))},n=this;for(var s in o)i(s)},e.prototype.showFeiShuAni=function(t,e,o,i,n,s){var r=this;console.log("showFeiShuAni",t,e,o,i,n),s();var c=this.node.convertToNodeSpaceAR(e),h=this.node.convertToNodeSpaceAR(o),l=cc.instantiate(this.fei_shu_Pfb);l.parent=this.node;var p=l.getChildByName("icon_lingpai");p.setPosition(c),p.angle=i,cc.tween(p).by(.1,{angle:-50}).by(.2,{angle:50}).by(.2,{angle:-50}).by(.2,{angle:50}).by(.2,{angle:-50}).by(.2,{angle:50}).to(1,{angle:0,x:h.x-110,y:h.y+60,scale:.2}).call(function(){var t=l.getChildByName("batteryFire");t.setPosition(h);var e=t.getComponent(cc.Sprite),o=r.getSpFrameList("batteryBomb_",0,5);a.default.showFrameAnimation(e,o,1,!1,!1,-1,function(){})}).delay(.5).call(function(){for(var e=[0,-10,10,-20,20],o=function(t){var o=l.getChildByName("feishuNode"+t);o.active=!0,o.setPosition(h.x+e[t],h.y);var i=o.getChildByName("flySquirrel").getComponent(cc.Sprite),n=r.getSpFrameList("flySquirrel_"+t+"_",0,7),s=o.getChildByName("hitFish").getComponent(cc.Sprite),c=r.getSpFrameList("hitFish_"+t+"_",0,6);r.scheduleOnce(function(){s.node.active=!0,a.default.showFrameAnimation(i,n,1,!1,!0,-1,function(){}),a.default.showFrameAnimation(s,c,1,!1,!0,-1,function(){}),o.getComponent("BHFeiShu").run(),r.control.playAudio(15)},1.5)},i=0;i<5;i++)o(i);r.scheduleOnce(function(){r.control.gameView.batteryManage.showBatteryFireAndRollScore(t,n,!0)},1.5)}).delay(.5).to(.5,{x:h.x}).delay(.5).to(.1,{opacity:0}).delay(4).call(function(){r.control.gameView.batteryManage.showBatteryFireAndRollScore(t,n,!1),l.removeFromParent()}).start()},s([p([cc.SpriteAtlas])],e.prototype,"atlas_effect_list",void 0),s([p(cc.Node)],e.prototype,"layer_effect_down",void 0),s([p(cc.Node)],e.prototype,"layer_effect_mid",void 0),s([p(cc.Prefab)],e.prototype,"fishNetPrefab",void 0),s([p(cc.Prefab)],e.prototype,"scorePrefab",void 0),s([p(cc.Prefab)],e.prototype,"goldPrefab",void 0),s([p(cc.Prefab)],e.prototype,"bombSame_bombPfb",void 0),s([p(cc.Prefab)],e.prototype,"bomb_goalPfb",void 0),s([p(cc.Prefab)],e.prototype,"bomb_Pfb",void 0),s([p(cc.Prefab)],e.prototype,"mouse_Pfb",void 0),s([p(cc.Prefab)],e.prototype,"bomb_bluePfb",void 0),s([p(cc.Prefab)],e.prototype,"bomb_yellowPfb",void 0),s([p(cc.Prefab)],e.prototype,"cai_se_feng_huang_Pfb",void 0),s([p(cc.Prefab)],e.prototype,"da_peng_Pfb",void 0),s([p(cc.Prefab)],e.prototype,"ji_guan_niao_Pfb",void 0),s([p(cc.Prefab)],e.prototype,"ji_guan_niao_bomb_Pfb",void 0),s([p(cc.Prefab)],e.prototype,"ji_guan_niao_barrel_Pfb",void 0),s([p(cc.Prefab)],e.prototype,"fei_shu_Pfb",void 0),s([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./BHFishNet":"BHFishNet","./BHFishUtil":"BHFishUtil","./BHScore":"BHScore"}],BHFeiShu:[function(t,e,o){"use strict";cc._RF.push(e,"330f3eB7LtMVZOo1I0fO7r0","BHFeiShu");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.runAngle=0,e.angle=0,e.pos=null,e.isRun=!1,e.speed=2e3,e}return n(e,t),e.prototype.setPos=function(t,e){this.angle=t,this.pos=e,this.node.angle=t+90,this.node.setPosition(e)},e.prototype.update=function(t){if(this.isRun){var e=this.speed*t*Math.cos(2*Math.PI/360*this.angle),o=this.speed*t*Math.sin(2*Math.PI/360*this.angle),i=e+this.pos.x,n=o+this.pos.y,s=this.angle,r={width:1280,height:720};i<-1*r.width/2?(i=-1*r.width/2+1,s=180-s):i>r.width/2&&(i=r.width/2-1,s=180-s),n<-1*r.height/2?(n=-1*r.height/2+1,s=360-s):n>r.height/2&&(n=r.height/2-1,s=360-s),this.setPos(s,cc.v2(i,n))}},e.prototype.run=function(){this.setPos(this.runAngle,cc.v2(this.node.x,this.node.y)),this.isRun=!0,cc.tween(this.node.getChildByName("flySquirrel")).repeatForever(cc.tween().to(1,{angle:360}).to(0,{angle:0})).start()},e.prototype.stopRun=function(){this.isRun=!1},e.prototype.onCollisionEnter=function(){},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},s([c(cc.Float)],e.prototype,"runAngle",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],BHFishManage:[function(t,e,o){"use strict";cc._RF.push(e,"07a07k9AcxLLoY6Isa04FVc","BHFishManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHDataEntry"),a=t("./BHFish"),c=t("./BHFishPath"),h=cc._decorator,l=h.ccclass,p=h.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fishAtlasList=[],e.fishPrefab=null,e.fishConfigJson=null,e.fishPointConfigJson=null,e.pathConfigJson=null,e.groupConfigJson=null,e.fishSpriteList=[],e.control=null,e.fishPool=null,e.swimEnable=!0,e}return n(e,t),e.prototype.initView=function(t){this.control=t,this.fishPool=new cc.NodePool,this.swimEnable=!0;for(var e=0;e<this.fishAtlasList.length;e++)this.fishSpriteList=this.fishSpriteList.concat(this.fishAtlasList[e].getSpriteFrames())},e.prototype.getSwimSpByFish=function(t){for(var e=[],o=0;o<t.FrameSwimCount;o++)for(var i=0;i<this.fishSpriteList.length;i++)if(this.fishSpriteList[i].name==t.FrameName+"_"+(o+1)){e.push(this.fishSpriteList[i]);break}return e},e.prototype.getDeadSpByFish=function(t){for(var e=[],o=0;o<t.FrameDeadCount;o++)for(var i=0;i<this.fishSpriteList.length;i++)if(this.fishSpriteList[i].name==t.FrameName+"die_"+(o+1)){e.push(this.fishSpriteList[i]);break}return e},e.prototype.getDeadSpByFish1=function(t){for(var e=[],o=0;o<t.FrameDeadCount;o++)for(var i=0;i<this.fishSpriteList.length;i++)if(this.fishSpriteList[i].name=="bombDrum_"+o){e.push(this.fishSpriteList[i]);break}return e},e.prototype.getDeadSpByFish2=function(){for(var t=[],e=0;e<2;e++)for(var o=0;o<this.fishSpriteList.length;o++)if(this.fishSpriteList[o].name=="bombBarrel_shake_"+e){t.push(this.fishSpriteList[o]);break}return t},e.prototype.getCaiSeFengHuangSp=function(){for(var t,e=0;e<this.fishSpriteList.length;e++)if("boss_rotate"==this.fishSpriteList[e].name){t=this.fishSpriteList[e];break}return t},e.prototype.getFishConfig=function(t){for(var e=null,o=0;o<this.fishConfigJson.json.length;o++)this.fishConfigJson.json[o].Id==t&&(e=this.fishConfigJson.json[o]);return e},e.prototype.getFishPoint=function(t){return this.fishPointConfigJson.json[""+t]},e.prototype.getPathConfigById=function(t){for(var e=null,o=this.pathConfigJson.json.data,i=0;i<o.length;i++)o[i].id==""+t&&(e=o[i]);return e},e.prototype.getPathConfigByIndex=function(t){var e=this.pathConfigJson.json.data;return e[t%e.length]},e.prototype.getFishPosByGroup=function(t,e,o){for(var i=cc.v2(0,0),n=0;n<this.groupConfigJson.json.length;n++)this.groupConfigJson.json[n].PathId==t&&this.groupConfigJson.json[n].FishTypeId==e&&null!=this.groupConfigJson.json[n].FishPosLists[o]&&(i=this.groupConfigJson.json[n].FishPosLists[o]);return i},e.prototype.createFish=function(t,e,o,i,n,s,h){void 0===s&&(s=null),void 0===h&&(h=null);var l=this.getFishConfig(e);if(null!=l){var p=this.getFishPoint(e);if(null!=p){var u=this.getPathConfigByIndex(o);if(null!=u){var f=this.fishPool.get();null==f&&(f=cc.instantiate(this.fishPrefab)),f.parent=this.node;var d=new c.default;d.init(u);var y=f.getComponent(a.default);y.initView(this,this.node.getContentSize()),l.Type==r.FishType.FishBombSame?y.bombSame_fishConfig=this.getFishConfig(h):l.Type==r.FishType.FishDoubel_Group&&(y.group_fishConfig=this.getFishConfig(h)),y.initFish(t,l,p,d,i,n),this.swimEnable?y.resumeRun():y.pauseRun()}else cc.log("##########",o+"\uff1a\u6ca1\u6709\u627e\u5230\u8def\u5f84\u4fe1\u606f")}else cc.log("##########",e+"\uff1a\u6ca1\u6709\u627e\u5230\u9c7c\u78b0\u649e\u8282\u70b9\u4fe1\u606f")}else cc.log("##########",e+"\uff1a\u6ca1\u6709\u627e\u5230\u9c7c\u914d\u7f6e\u4fe1\u606f")},e.prototype.onFishSwimOut=function(t){this.control.gameInfo.isLock&&this.control.gameInfo.lockFishId==t.fishId&&(this.control.gameInfo.lockFishId=0)},e.prototype.removeFishNode=function(t){this.control.gameInfo.isLock&&this.control.gameInfo.lockFishId==t.fishId&&(this.control.gameInfo.lockFishId=0),this.fishPool.put(t.node)},e.prototype.clickFish=function(t){if(this.control.gameInfo.isLock){this.control.gameInfo.lockFishId=t.fishId;var e=this.control.gameInfo.selfUserItem;this.control.gameView.batteryManage.setBatteryLock(e.batteryId,t.fishId),this.control.gameView.lockManage.setBatteyLockFish(e.batteryId,t.fishId)}},e.prototype.getFishByFishId=function(t){var e=[],o=this.node.children;for(var i in o){var n=o[i].getComponent(a.default);t==n.getFishID()&&e.push(n)}return e.length>1&&cc.log("\u91cd\u590d\u9c7c\u7684\u6570\u91cf",e.length),e[e.length-1]},e.prototype.getFishListByTypeId=function(t){var e=[],o=this.node.children;for(var i in o){var n=o[i].getComponent(a.default);t==n.fishConfig.Id&&n.fishStatus==r.FishStatus.Swim&&0==n.isOutSwimSize&&e.push(n)}return e},e.prototype.getBombFishList=function(t,e){var o=[];for(var i in this.node.children){var n=this.node.children[i].getComponent(a.default);n.fishConfig.Id<17&&n.fishStatus==r.FishStatus.Swim&&0==n.isOutSwimSize&&o.push(n)}for(i=0;i<o.length-1;i++)for(var s=i+1;s<o.length;s++){var c=Math.sqrt(Math.pow(o[i].node.x-t.x,2)+Math.pow(o[i].node.y-t.y,2));if(Math.sqrt(Math.pow(o[s].node.x-t.x,2)+Math.pow(o[s].node.y-t.y,2))<c){var h=o[i];o[i]=o[s],o[s]=h}}var l=this.control.gameInfo.getBaseScore(),p=[],u=0;for(i=0;i<o.length;i++){var f=o[i].fishConfig.Double*l*this.control.gameInfo.roomBet;u+f<=e&&(u+=f,p.push(o[i]))}return p},e.prototype.getFullBombFishHP=function(){var t=0,e=this.control.gameInfo.getBaseScore();for(var o in this.node.children){var i=this.node.children[o].getComponent(a.default);i.fishConfig.Type==r.FishType.FishDoubel_Single&&i.fishStatus==r.FishStatus.Swim&&0==i.isOutSwimSize&&(t+=i.fishConfig.Double*e*this.control.gameInfo.roomBet)}return t},e.prototype.getSameBombFishHP=function(t){var e=0;for(var o in this.node.children){var i=this.node.children[o].getComponent(a.default);t==i.fishConfig.Id&&i.fishStatus==r.FishStatus.Swim&&0==i.isOutSwimSize&&(e+=i.fishConfig.Double)}return e},e.prototype.getAllSwimFish=function(){var t=[],e=this.node.children;for(var o in e){var i=e[o].getComponent(a.default);i.fishStatus==r.FishStatus.Swim&&0==i.isOutSwimSize&&t.push(i)}return t},e.prototype.getAllFish=function(){var t=[],e=this.node.children;for(var o in e){var i=e[o].getComponent(a.default);i.fishStatus==r.FishStatus.Swim&&t.push(i)}return t},e.prototype.checkLockFish=function(){if(1==this.control.gameInfo.isLock&&0==this.control.gameInfo.lockFishId){var t=this.getAllSwimFish(),e=null;for(var o in t)(null==e||e.fishConfig.Id<t[o].fishConfig.Id)&&(e=t[o]);null!=e&&(this.control.gameInfo.lockFishId=e.fishId)}},e.prototype.update=function(){this.checkLockFish()},s([p([cc.SpriteAtlas])],e.prototype,"fishAtlasList",void 0),s([p(cc.Prefab)],e.prototype,"fishPrefab",void 0),s([p(cc.JsonAsset)],e.prototype,"fishConfigJson",void 0),s([p(cc.JsonAsset)],e.prototype,"fishPointConfigJson",void 0),s([p(cc.JsonAsset)],e.prototype,"pathConfigJson",void 0),s([p(cc.JsonAsset)],e.prototype,"groupConfigJson",void 0),s([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./BHDataEntry":"BHDataEntry","./BHFish":"BHFish","./BHFishPath":"BHFishPath"}],BHFishNet:[function(t,e,o){"use strict";cc._RF.push(e,"42462fO4hdDkY4KY7wnHwoc","BHFishNet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHFishUtil"),a=cc._decorator,c=a.ccclass,h=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.effectManage=null,e}return n(e,t),e.prototype.initView=function(t,e,o){var i=this;this.effectManage=t,this.icon.spriteFrame=e[0],r.default.showFrameAnimation(this.icon,e,.5,!1,!1,1,null),this.node.setPosition(o),cc.tween(this.node).delay(.5).call(function(){i.effectManage.removeFishNetNode(i.node)}).start()},s([h(cc.Sprite)],e.prototype,"icon",void 0),s([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./BHFishUtil":"BHFishUtil"}],BHFishOutGroup:[function(t,e,o){"use strict";cc._RF.push(e,"03b56QAVKtKQpk8qNmAdDHg","BHFishOutGroup");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=new Array;r[0]=new Array,r[0][0]={time:50,inteval:60},r[0][1]={inteval:70,fishType:0,fishPath:95,time:0,fishCount:18,fishLineup:0},r[0][2]={inteval:70,fishType:1,fishPath:95,time:0,fishCount:40,fishLineup:0},r[0][3]={inteval:70,fishType:9,fishPath:95,time:0,fishCount:2,fishLineup:0},r[0][4]={inteval:70,fishType:16,fishPath:95,time:0,fishCount:1,fishLineup:0},r[0][5]={inteval:70,fishType:5,fishPath:95,time:0,fishCount:3,fishLineup:0},r[1]=new Array,r[1][0]={time:50,inteval:60},r[1][1]={inteval:70,fishType:0,fishPath:96,time:0,fishCount:78,fishLineup:0,speed:0},r[1][2]={inteval:70,fishType:2,fishPath:96,time:0,fishCount:56,fishLineup:0,speed:0},r[2]=new Array,r[2][0]={time:50,inteval:60},r[2][1]={inteval:70,fishType:1,fishPath:97,time:0,fishCount:64,fishLineup:0,total:0},r[2][2]={inteval:70,fishType:6,fishPath:97,time:0,fishCount:36,fishLineup:0,total:0},r[2][3]={inteval:70,fishType:3,fishPath:97,time:0,fishCount:8,fishLineup:0,total:0},r[2][4]={inteval:70,fishType:15,fishPath:97,time:0,fishCount:1,fishLineup:0,total:0},r[3]=new Array,r[3][0]={time:50,inteval:60},r[3][1]={inteval:70,fishType:5,fishPath:98,time:0,fishCount:15,fishLineup:0,total:0},r[3][2]={inteval:70,fishType:0,fishPath:98,time:0,fishCount:31,fishLineup:0,total:0},r[3][3]={inteval:70,fishType:3,fishPath:98,time:0,fishCount:15,fishLineup:0,total:0},r[3][4]={inteval:70,fishType:4,fishPath:98,time:0,fishCount:15,fishLineup:0,total:0},r[3][5]={inteval:70,fishType:1,fishPath:98,time:0,fishCount:15,fishLineup:0,total:0},r[3][6]={inteval:70,fishType:2,fishPath:98,time:0,fishCount:15,fishLineup:0,total:0},r[4]=new Array,r[4][0]={time:130,inteval:140},r[4][1]={inteval:160,fishType:0,fishPath:99,time:0,fishCount:16,fishLineup:0,total:0,stop:0},r[4][2]={inteval:160,fishType:2,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:6},r[4][3]={inteval:160,fishType:4,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:14},r[4][4]={inteval:160,fishType:6,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:25},r[4][5]={inteval:160,fishType:7,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:35},r[4][6]={inteval:160,fishType:9,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:47},r[4][7]={inteval:160,fishType:11,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:60},r[4][8]={inteval:160,fishType:13,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:75},r[4][9]={inteval:160,fishType:15,fishPath:99,time:0,fishCount:7,fishLineup:0,total:0,stop:90},r[4][10]={inteval:140,fishType:18,fishPath:99,time:0,fishCount:3,fishLineup:0,total:0,stop:105},r[5]=new Array,r[5][0]={time:130,inteval:140},r[5][1]={inteval:160,fishType:1,fishPath:99,time:0,fishCount:16,fishLineup:0,total:0,stop:0},r[5][2]={inteval:160,fishType:3,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:6},r[5][3]={inteval:160,fishType:5,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:14},r[5][4]={inteval:160,fishType:7,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:25},r[5][5]={inteval:160,fishType:8,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:35},r[5][6]={inteval:160,fishType:10,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:47},r[5][7]={inteval:160,fishType:12,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:60},r[5][8]={inteval:160,fishType:14,fishPath:99,time:0,fishCount:15,fishLineup:0,total:0,stop:75},r[5][9]={inteval:160,fishType:16,fishPath:99,time:0,fishCount:7,fishLineup:0,total:0,stop:90},r[5][10]={inteval:160,fishType:17,fishPath:99,time:0,fishCount:3,fishLineup:0,total:0,stop:105};var a=cc._decorator,c=a.ccclass,h=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.control=null,e.configList=null,e.currTimeList=[],e}return n(e,t),e.prototype.init=function(t){this.control=t,this.configList=r[5];for(var e=1;e<this.configList.length;e++)this.currTimeList[e-1]=160},e.prototype.update=function(t){for(var e=1;e<this.configList.length;e++)this.currTimeList[e-1]+=t;for(e=1;e<this.configList.length;e++)if(this.configList[e].inteval+this.configList[e].stop<=this.currTimeList[e-1]){this.currTimeList[e-1]=this.configList[e].stop;for(var o=0;o<this.configList[e].fishCount;o++){var i=10001+o,n=this.configList[e].fishType,s=this.configList[e].fishPath,r=cc.v2(0,0),a=0;s>=95&&s<=98?r=this.control.getFishPosByGroup(s,n,o):99==s&&(a=360*o/this.configList[e].fishCount),cc.log(n,s,r,a),this.control.onFishEnter(i,n,s,r,a,0,0)}}},s([c],e)}(cc.Component));o.default=h,cc._RF.pop()},{}],BHFishPath:[function(t,e,o){"use strict";cc._RF.push(e,"912e35El9JFvZY30YBPhR8e","BHFishPath"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./BHDataEntry"),n=function(){function t(){this.config=null,this.pathType=i.PathType.Bezier,this.lineList=[],this.bezierList=[],this.lineTotalLen=0,this.currTime=0,this.currPos=null}return t.prototype.init=function(t){this.config=t,0==this.config.controls.length&&(this.pathType=i.PathType.Line),this.pathType==i.PathType.Line&&(this.lineTotalLen=this.getTwoPointLength(this.config.points[0],this.config.points[1]));for(var e=null,o=null,n=0,s=0,r=[],a=0;a<t.points.length-1;a++){o=t.points[a],s=0,r=[];for(var c=1;c<11;c++)e=this.getBezierPoint(t.points[a],t.controls[a],t.points[a+1],c/10),s+=n=this.getTwoPointLength(o,e),this.lineList.push({startPoint:o,endPoint:e,len:n}),this.lineTotalLen=this.lineTotalLen+n,o=e,r.push({len:n,percent:.1});this.bezierList.push({startPoint:t.points[a],endPoint:t.points[a+1],control:t.controls[a],totallen:s,lenList:r})}this.currPos=this.lineList[0].startPoint},t.prototype.getPosByDiffTime=function(t,e){this.currTime=this.currTime+t,this.currTime=Math.min(this.currTime,this.config.time);var o=cc.v2(0,0),i=!0;if(0==this.config.isUniformSpeed&&(i=!1),o=1==i?this.getPosByTime(this.currTime):this.getPosByTime2(this.currTime),0!=e){var n=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),s=180*Math.atan2(o.y,o.x)/Math.PI;s+=e;var r=n*Math.cos(s*Math.PI/180),a=n*Math.sin(s*Math.PI/180);o=cc.v2(r,a)}var c;return c=o.x==this.currPos.x?o.y-this.currPos.y>0?90:-90:180*Math.atan2(o.y-this.currPos.y,o.x-this.currPos.x)/Math.PI,this.currPos=o,{pos:o,angle:c}},t.prototype.checkIsEnd=function(){return this.currTime>=this.config.time},t.prototype.getPosByTime=function(t){var e=t/this.config.time,o=0;null!=this.config.stopTime&&(o=this.config.stopTime);var i=this.config.time/2-o/2,n=this.config.time/2+o/2;o>0&&(t<=i?e=t/(this.config.time-o):t>i&&t<n?e=i/(this.config.time-o):t>n&&(e=(t-o)/(this.config.time-o)));for(var s=this.lineTotalLen*e,r=!1,a=0,c=0,h=0,l=0;l<this.bezierList.length;l++){if(c=l,a+this.bezierList[l].totallen>=s){h=0;for(var p=0;p<this.bezierList[l].lenList.length;p++){if(a+this.bezierList[l].lenList[p].len>=s){h+=(s-a)/this.bezierList[l].lenList[p].len*this.bezierList[l].lenList[p].percent,r=!0;break}h+=this.bezierList[l].lenList[p].percent,a+=this.bezierList[l].lenList[p].len}}if(r)break;a+=this.bezierList[l].totallen}return e>=1&&(h=1),this.getBezierPoint(this.bezierList[c].startPoint,this.bezierList[c].control,this.bezierList[c].endPoint,h)},t.prototype.getPosByTime2=function(t){for(var e=this.config.time/this.bezierList.length,o=0,i=0,n=0;n<this.bezierList.length&&e*n<t;n++)o=n,i=(t-e*n)/e;return i>=1&&(i=1),this.getBezierPoint(this.bezierList[o].startPoint,this.bezierList[o].control,this.bezierList[o].endPoint,i)},t.prototype.getTwoPointLength=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.prototype.getBezierPoint=function(t,e,o,i){var n=Math.pow(1-i,2)*t.x+2*i*(1-i)*e.x+Math.pow(i,2)*o.x;t.x==e.x&&e.x==o.x&&(n=t.x);var s=Math.pow(1-i,2)*t.y+2*i*(1-i)*e.y+Math.pow(i,2)*o.y;return t.y==e.y&&e.x==o.y&&(s=t.y),cc.v2(n,s)},t.prototype.getBezierPointAngle=function(t,e,o,i){var n=2*(1-i)*t.x+(2-4*i)*e.x+2*i*o.x,s=2*(1-i)*t.y+(2-4*i)*e.y+2*i*o.y,r=0;return 0!=n&&(r=180*Math.atan2(s,n)/Math.PI),r},t}();o.default=n,cc._RF.pop()},{"./BHDataEntry":"BHDataEntry"}],BHFishUtil:[function(t,e,o){"use strict";cc._RF.push(e,"384f6d85LtD67aGTUn4Z0jE","BHFishUtil"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){}return t.showFrameAnimation=function(t,e,o,i,n,s,r){var a=t.getComponent(cc.Animation);if(null==a)a=t.addComponent(cc.Animation);else{a.stop(),a.clear();for(var c=a.getClips(),h=c.length-1;h>=0;h--)a.removeClip(c[h],!0)}var l=cc.AnimationClip.createWithSpriteFrames(e,e.length);l.name="ani",l.speed=1/o,a.addClip(l);var p=a.play("ani");p.wrapMode=cc.WrapMode.Normal,1==n&&-1==s?(p.wrapMode=cc.WrapMode.Loop,p.repeatCount=1/0):1==n&&s>0&&(p.wrapMode=cc.WrapMode.Loop,p.repeatCount=s),a.once("finished",function(){i&&(t.spriteFrame=e[0]),t.node.removeComponent(cc.Animation),null!=r&&r()})},t.delFrameAnimation=function(t){var e=t.getComponent(cc.Animation);if(e){e.stop(),e.clear();for(var o=e.getClips(),i=o.length-1;i>=0;i--)e.removeClip(o[i],!0);t.node.removeComponent(cc.Animation)}},t.getFrameList=function(t,e,o,i){for(var n=[],s=o;s<=i;s++)n.push(t.getSpriteFrame(e+""+s));return n},t.generateMixed=function(t){for(var e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],o="",i=0;i<t;i++)o+=e[Math.ceil(35*Math.random())];return o},t}();o.default=i,cc._RF.pop()},{}],BHFish:[function(t,e,o){"use strict";cc._RF.push(e,"a3446Hp7dpKvoNSSQNVhW2x","BHFish");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHDataEntry"),a=t("./BHFishUtil"),c=cc._decorator,h=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.node_gu=null,e.node_bombSame=null,e.icon_bombSame=null,e.icon_mouse=null,e.node_group_1=null,e.sp_List_1=[],e.node_group_2=null,e.sp_List_2=[],e.fishId=null,e.fishConfig=null,e.fishColliderPoint=null,e.fishPath=null,e.offPos=null,e.offAngle=null,e.swimSize=null,e.isOutSwimSize=!0,e.fishManage=null,e.runChk=!1,e.fishStatus=r.FishStatus.Swim,e.bombSame_fishConfig=null,e.group_fishConfig=null,e.outAngle=0,e.outSpeed=0,e.aniSpSpeed=10,e}return n(e,t),e.prototype.initView=function(t,e){this.fishManage=t,this.outAngle=0,this.outSpeed=0,this.node.zIndex=0,this.node.setScale(1),this.icon.node.active=!1,this.node_gu.active=!1,this.node_bombSame.active=!1,this.icon_mouse.active=!1,this.node_group_1.active=!1,this.node_group_2.active=!1,this.swimSize=e,this.isOutSwimSize=!0,this.icon.node.off(cc.Node.EventType.TOUCH_START),this.icon.node.on(cc.Node.EventType.TOUCH_START,this.onFishClick.bind(this)),this.node_gu.off(cc.Node.EventType.TOUCH_START),this.node_gu.on(cc.Node.EventType.TOUCH_START,this.onFishClick.bind(this)),this.icon_bombSame.node.off(cc.Node.EventType.TOUCH_START),this.icon_bombSame.node.on(cc.Node.EventType.TOUCH_START,this.onFishClick.bind(this)),this.icon_mouse.off(cc.Node.EventType.TOUCH_START),this.icon_mouse.on(cc.Node.EventType.TOUCH_START,this.onFishClick.bind(this)),this.node_group_1.off(cc.Node.EventType.TOUCH_START),this.node_group_1.on(cc.Node.EventType.TOUCH_START,this.onFishClick.bind(this)),this.node_group_2.off(cc.Node.EventType.TOUCH_START),this.node_group_2.on(cc.Node.EventType.TOUCH_START,this.onFishClick.bind(this))},e.prototype.initFish=function(t,e,o,i,n,s){this.fishId=t,this.fishConfig=e,this.fishColliderPoint=o,this.fishPath=i,this.offPos=n,this.offAngle=s,e.Id<21||25==e.Id?(this.setNormalFish(),this.node.setContentSize(this.icon.node.getContentSize())):21==e.Id?(this.setFish_21(),this.node.setContentSize(this.node_group_1.getContentSize())):22==e.Id?(this.setFish_22(),this.node.setContentSize(this.node_group_2.getContentSize())):23==e.Id?(this.setFish_23(),this.node.setContentSize(this.node_bombSame.getContentSize())):24==e.Id?(this.setFish_24(),this.node.setContentSize(cc.size(230,270))):26==e.Id&&(this.setFish_26(),this.node.setContentSize(cc.size(200,250))),this.setColliderPoint(this.fishColliderPoint,e.Id);var a=this.fishPath.getPosByDiffTime(.05,this.offAngle);this.setFishPos(a.pos,a.angle),this.runChk=!0,this.fishStatus=r.FishStatus.Swim},e.prototype.setColliderPoint=function(t){if(this.fishConfig.Id<21||25==this.fishConfig.Id){var e=this.icon.getComponent(cc.PolygonCollider);e.points=t,e.enabled=!0}},e.prototype.setNormalFish=function(){this.icon.node.active=!0,this.node_gu.active=!1,this.node_bombSame.active=!1,this.icon_mouse.active=!1,this.node_group_1.active=!1,this.node_group_2.active=!1,this.icon.node.stopAllActions();var t=this.fishManage.getSwimSpByFish(this.fishConfig);this.icon.spriteFrame=t[0],a.default.showFrameAnimation(this.icon,t,t.length/this.aniSpSpeed,!1,!0,-1,null)},e.prototype.setFish_21=function(){this.icon.node.active=!1,this.node_gu.active=!1,this.node_bombSame.active=!1,this.icon_mouse.active=!1,this.node_group_1.active=!0,this.node_group_2.active=!1;for(var t=0;t<3;t++){var e=this.fishManage.getFishConfig(this.group_fishConfig.Id),o=this.fishManage.getSwimSpByFish(e);this.sp_List_1[t].node.setScale(this.group_fishConfig.FishSameScale),a.default.showFrameAnimation(this.sp_List_1[t],o,o.length/this.aniSpSpeed,!1,!0,-1,null)}},e.prototype.setFish_22=function(){this.icon.node.active=!1,this.node_gu.active=!1,this.node_bombSame.active=!1,this.icon_mouse.active=!1,this.node_group_1.active=!1,this.node_group_2.active=!0;for(var t=0;t<4;t++){var e=this.fishManage.getFishConfig(this.group_fishConfig.Id),o=this.fishManage.getSwimSpByFish(e);this.sp_List_2[t].node.setScale(this.group_fishConfig.FishSameScale),a.default.showFrameAnimation(this.sp_List_2[t],o,o.length/this.aniSpSpeed,!1,!0,-1,null)}},e.prototype.setFish_23=function(){this.icon.node.active=!1,this.node_gu.active=!1,this.node_bombSame.active=!0,this.icon_mouse.active=!1,this.node_group_1.active=!1,this.node_group_2.active=!1,this.icon_bombSame.node.setScale(this.bombSame_fishConfig.FishSameScale);var t=this.fishManage.getSwimSpByFish(this.bombSame_fishConfig);this.icon_bombSame.spriteFrame=t[0],a.default.showFrameAnimation(this.icon_bombSame,t,t.length/this.aniSpSpeed,!1,!0,-1,null)},e.prototype.setFish_24=function(){this.icon.node.active=!1,this.node_gu.active=!0,this.node_bombSame.active=!1,this.icon_mouse.active=!1,this.node_group_1.active=!1,this.node_group_2.active=!1,this.node_gu.stopAllActions();var t=this.fishManage.getSwimSpByFish(this.fishConfig);this.node_gu.getComponent(cc.Sprite).spriteFrame=t[0],a.default.showFrameAnimation(this.node_gu.getComponent(cc.Sprite),t,t.length/this.aniSpSpeed,!1,!0,-1,null)},e.prototype.setFish_26=function(){this.icon.node.active=!1,this.node_gu.active=!1,this.node_bombSame.active=!1,this.icon_mouse.active=!0,this.node_group_1.active=!1,this.node_group_2.active=!1},e.prototype.showDeathAni=function(){var t=this;if(this.runChk=!1,this.fishStatus=r.FishStatus.Dead,this.fishConfig.Id<=19){this.node.zIndex=1e3;var e=this.fishManage.getDeadSpByFish(this.fishConfig);a.default.showFrameAnimation(this.icon,e,e.length/this.aniSpSpeed,!1,!0,3,function(){t.fishManage.removeFishNode(t)})}else if(20==this.fishConfig.Id)this.node.zIndex=1e3,this.icon.spriteFrame=this.fishManage.getCaiSeFengHuangSp(),cc.tween(this.icon.node).to(1,{scale:0,angle:180}).call(function(){t.fishManage.removeFishNode(t)}).start();else if(21==this.fishConfig.Id){this.node.zIndex=1e3;for(var o=0;o<this.sp_List_1.length;o++)this.sp_List_1[o].node.active=!1;cc.tween(this.node_group_1).delay(2).call(function(){t.fishManage.removeFishNode(t)}).start()}else if(22==this.fishConfig.Id){for(this.node.zIndex=1e3,o=0;o<this.sp_List_2.length;o++)this.sp_List_2[o].node.active=!1;cc.tween(this.node_group_2).delay(2).call(function(){t.fishManage.removeFishNode(t)}).start()}else 23==this.fishConfig.Id?(this.node.zIndex=1e3,cc.tween(this.node_bombSame).delay(.5).to(1,{angle:180}).to(.5,{scale:0,angle:360}).call(function(){t.fishManage.removeFishNode(t)}).start()):24==this.fishConfig.Id?(this.node.zIndex=1e3,e=this.fishManage.getDeadSpByFish1(this.fishConfig),a.default.showFrameAnimation(this.node_gu.getComponent(cc.Sprite),e,e.length/this.aniSpSpeed,!1,!1,0,function(){t.fishManage.removeFishNode(t)})):25==this.fishConfig.Id?(this.node.zIndex=1e3,e=(e=(e=this.fishManage.getDeadSpByFish2()).concat(e)).concat(e),a.default.showFrameAnimation(this.icon,e,2,!1,!1,0,function(){t.fishManage.removeFishNode(t)})):this.fishManage.removeFishNode(this)},e.prototype.showDeadMoveAni=function(t,e,o,i){var n=this;void 0===i&&(i=null);var s=this.node.parent.convertToNodeSpaceAR(t);cc.tween(this.node).delay(o).call(function(){null!=i&&i()}).to(e,{position:cc.v3(s.x,s.y,this.node.z)}).call(function(){n.fishManage.removeFishNode(n)}).start()},e.prototype.showOutMoveAni=function(t,e){0==this.runChk&&this.fishStatus==r.FishStatus.Swim&&(this.runChk=!0),this.outAngle=t,this.outSpeed=e,this.offPos=cc.v2(0,0),this.setFishPos(this.node.getPosition(),t),this.fishStatus=r.FishStatus.Out},e.prototype.getFishID=function(){return this.fishId},e.prototype.pauseRun=function(){this.runChk=!1},e.prototype.resumeRun=function(){this.runChk=!0},e.prototype.setFishPos=function(t,e){this.node.angle=e;var o=cc.v2(t.x+this.offPos.x,t.y+this.offPos.y);this.node.setPosition(o),this.checkSwimSize(o)},e.prototype.checkSwimSize=function(t){var e=!1,o=this.node.getContentSize();(t.x<-1*(this.swimSize.width/2+o.width/2)||t.x>this.swimSize.width/2+o.width/2)&&(e=!0),(t.y<-1*(this.swimSize.height/2+o.height/2)||t.y>this.swimSize.height/2+o.height/2)&&(e=!0),this.isOutSwimSize=e},e.prototype.update=function(t){if(1==this.runChk){if(t*=this.fishConfig.Speed,this.fishStatus==r.FishStatus.Out){var e=this.node.x+t*this.outSpeed*Math.cos(this.outAngle*Math.PI/180),o=this.node.y+t*this.outSpeed*Math.sin(this.outAngle*Math.PI/180);this.setFishPos(cc.v2(e,o),this.outAngle)}else{var i=this.fishPath.getPosByDiffTime(t,this.offAngle),n=cc.v2(i.pos.x+this.offPos.x,i.pos.y+this.offPos.y);n.x==this.node.x&&n.y==this.node.y?this.setFishPos(i.pos,this.node.angle):this.setFishPos(i.pos,i.angle)}this.isOutSwimSize&&(this.fishManage.onFishSwimOut(this),this.fishStatus==r.FishStatus.Out&&this.fishManage.removeFishNode(this)),this.fishPath.checkIsEnd()&&this.fishManage.removeFishNode(this)}},e.prototype.onFishClick=function(){this.fishStatus==r.FishStatus.Swim&&this.fishManage.clickFish(this)},e.prototype.getWorldPos=function(){var t=this.node.getPosition();return this.node.parent.convertToWorldSpaceAR(t)},s([l(cc.Sprite)],e.prototype,"icon",void 0),s([l(cc.Node)],e.prototype,"node_gu",void 0),s([l(cc.Node)],e.prototype,"node_bombSame",void 0),s([l(cc.Sprite)],e.prototype,"icon_bombSame",void 0),s([l(cc.Node)],e.prototype,"icon_mouse",void 0),s([l(cc.Node)],e.prototype,"node_group_1",void 0),s([l([cc.Sprite])],e.prototype,"sp_List_1",void 0),s([l(cc.Node)],e.prototype,"node_group_2",void 0),s([l([cc.Sprite])],e.prototype,"sp_List_2",void 0),s([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./BHDataEntry":"BHDataEntry","./BHFishUtil":"BHFishUtil"}],BHGameInfo:[function(t,e,o){"use strict";cc._RF.push(e,"2a563/eAmhL14kHdE0TM9KZ","BHGameInfo"),Object.defineProperty(o,"__esModule",{value:!0}),o.BHGameInfo=void 0;var i=function(){function t(){this.baseScoreList=[5,6,7,8,9,10,20,30,40,50,60,70,80,90,100,200],this.baseScoreIndex=0,this.selfUserItem=null,this.userItemList=[],this.isAuto=!1,this.isLock=!1,this.lockFishId=0,this.autoFate=5,this.changeSceneType=0,this.roomBet=0}return t.prototype.getNextBaseScore=function(t){var e=this.baseScoreIndex;return e="add"==t?(this.baseScoreIndex+1)%this.baseScoreList.length:(this.baseScoreIndex-1+this.baseScoreList.length)%this.baseScoreList.length,this.baseScoreList[e]},t.prototype.setBaseScore=function(t){for(var e=0;e<this.baseScoreList.length;e++)if(this.baseScoreList[e]==t){this.baseScoreIndex=e;break}},t.prototype.getBaseScore=function(){return this.baseScoreList[this.baseScoreIndex]},t.prototype.getUserItemByUid=function(t){for(var e=null,o=0;o<this.userItemList.length;o++)if(this.userItemList[o].userId==t){e=this.userItemList[o];break}return e},t.prototype.checkSelfByUid=function(t){return this.selfUserItem.userId==t},t.prototype.addUserItem=function(t){this.userItemList.push(t)},t.prototype.removeUseItem=function(t){for(var e=this.userItemList.length-1;e>=0;e--)this.userItemList[e].userId==t&&this.userItemList.splice(e,1)},t.prototype.getButlletType=function(t){var e=1;return t>=5&&t<=10?e=2:t>10&&t<=60?e=3:t>60&&(e=4),e},t}();o.BHGameInfo=i,cc._RF.pop()},{}],BHGameView:[function(t,e,o){"use strict";cc._RF.push(e,"99a9fpiFmpEVrr88DO0wdMq","BHGameView");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHBatteryManage"),a=t("./BHBulletManage"),c=t("./BHComWait"),h=t("./BHDialogHelp"),l=t("./BHDialogMessage"),p=t("./BHDialogUnAction"),u=t("./BHDialogSetting"),f=t("./BHEffectManage"),d=t("./BHFishManage"),y=t("./BHLockManage"),g=t("./BHMap"),_=cc._decorator,m=_.ccclass,b=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiBg=null,e.btn_back=null,e.btn_set=null,e.btn_music=null,e.btn_help=null,e.btn_auto=null,e.btn_lock=null,e.btn_add=null,e.btn_dec=null,e.panel_tripMsg=null,e.lbl_tripMsg=null,e.batteryManage=null,e.bullteManage=null,e.fishManage=null,e.effectManage=null,e.lockManage=null,e.dialog_help=null,e.dialog_setting=null,e.dialog_message=null,e.dialog_unAction=null,e.mapManage=null,e.comWait=null,e.control=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.uiBg.on("click",this.onClick_set.bind(this)),this.btn_back.node.on("click",this.onClick_back.bind(this)),this.btn_set.node.on("click",this.onClick_set.bind(this)),this.btn_music.node.on("click",this.onClick_music.bind(this)),this.btn_help.node.on("click",this.onClick_help.bind(this)),this.btn_auto.node.on("click",this.onClick_auto.bind(this)),this.btn_lock.node.on("click",this.onClick_lock.bind(this)),this.btn_add.node.on("click",this.onClick_add.bind(this)),this.btn_dec.node.on("click",this.onClick_dec.bind(this)),this.panel_tripMsg.active=!1,this.batteryManage.initView(this.control),this.bullteManage.initView(this.control),this.fishManage.initView(this.control),this.effectManage.initView(this.control),this.lockManage.initView(this.control),this.dialog_help.initView(this.control),this.dialog_setting.initView(this.control),this.dialog_message.initView(this.control),this.dialog_unAction.initView(this.control),this.mapManage.initView(this.control),this.comWait.initView(),cc.director.getCollisionManager().enabled=!0},e.prototype.onClick_back=function(){this.control.playAudio(6),this.control.sendLeaveRoom()},e.prototype.onClick_set=function(){var t=this;if(this.control.playAudio(6),cc.Tween.stopAllByTarget(this.btn_back.node),cc.Tween.stopAllByTarget(this.btn_music.node),cc.Tween.stopAllByTarget(this.btn_help.node),this.btn_back.node.scale=0,this.btn_music.node.scale=0,this.btn_help.node.scale=0,this.btn_set.node.getChildByName("background").getChildByName("icon_1").active){this.uiBg.active=!0,this.btn_set.node.getChildByName("background").getChildByName("icon_1").active=!1,this.btn_set.node.getChildByName("background").getChildByName("icon_2").active=!0;var e=cc.sys.localStorage.getItem("BH_MusicChk");null==e&&(e=1),this.setBtnVolumeStatus("music",1==e);var o=cc.sys.localStorage.getItem("BH_SoundChk");null==o&&(o=1),this.setBtnVolumeStatus("sound",1==o),cc.tween(this.btn_back.node).to(.25,{scale:1},{easing:"backOut"}).start(),this.scheduleOnce(function(){t.uiBg.active&&cc.tween(t.btn_music.node).to(.25,{scale:1},{easing:"backOut"}).start()},.25),this.scheduleOnce(function(){t.uiBg.active&&cc.tween(t.btn_help.node).to(.25,{scale:1},{easing:"backOut"}).start()},.5)}else this.uiBg.active=!1,this.btn_set.node.getChildByName("background").getChildByName("icon_1").active=!0,this.btn_set.node.getChildByName("background").getChildByName("icon_2").active=!1},e.prototype.onClick_music=function(){this.control.playAudio(6),cc.audioEngine.getMusicVolume()>=1?this.setBtnVolumeStatus("music",!1):this.setBtnVolumeStatus("music",!0)},e.prototype.setBtnVolumeStatus=function(t,e){var o=e?1:0;cc.audioEngine.setMusicVolume(o),cc.sys.localStorage.setItem("BH_MusicChk",o),this.btn_music.node.getChildByName("background").getChildByName("icon_1").active=e,this.btn_music.node.getChildByName("background").getChildByName("icon_2").active=!e,cc.audioEngine.setEffectsVolume(o),cc.sys.localStorage.setItem("BH_SoundChk",o)},e.prototype.onClick_help=function(){this.control.playAudio(6),this.dialog_help.show(!0),this.onClick_set(0)},e.prototype.onClick_auto=function(){this.control.playAudio(6),this.control.gameInfo.isAuto=!this.control.gameInfo.isAuto;var t=this.btn_auto.node.getChildByName("icon_1"),e=this.btn_auto.node.getChildByName("icon_2");t.active=0==this.control.gameInfo.isAuto,e.active=1==this.control.gameInfo.isAuto},e.prototype.onClick_lock=function(){this.control.playAudio(6),this.control.gameInfo.isLock=!this.control.gameInfo.isLock,this.control.gameInfo.lockFishId=0;var t=this.btn_lock.node.getChildByName("icon_1"),e=this.btn_lock.node.getChildByName("icon_2");t.active=0==this.control.gameInfo.isLock,e.active=1==this.control.gameInfo.isLock;var o=this.control.gameInfo.selfUserItem;1==this.control.gameInfo.isLock?(this.fishManage.checkLockFish(),this.batteryManage.update(0),this.lockManage.setBatteyLockFish(o.batteryId,this.control.gameInfo.lockFishId)):(this.batteryManage.setBatteryLock(o.batteryId,0),this.lockManage.setBatteyLockFish(o.batteryId,0))},e.prototype.onClick_add=function(){this.control.playAudio(6),this.control.sendChangeBaseScore("add"),this.btn_add.node.getChildByName("icon_1").active=!1,this.btn_add.node.getChildByName("icon_2").active=!0},e.prototype.onClick_dec=function(){this.control.playAudio(6),this.control.sendChangeBaseScore("dec"),this.btn_dec.node.getChildByName("icon_1").active=!1,this.btn_dec.node.getChildByName("icon_2").active=!0},e.prototype.showSwitchFishGroupMapTrip=function(){this.mapManage.showFishGroupTrip()},e.prototype.showSwitchFishGroupMapAni=function(t){this.mapManage.playSwitchAni(t)},e.prototype.showTripMsg=function(t){var e=this;this.lbl_tripMsg.string=t,this.panel_tripMsg.active=!0,this.panel_tripMsg.stopAllActions(),this.panel_tripMsg.opacity=0,cc.tween(this.panel_tripMsg).to(.1,{opacity:255}).delay(.7).to(.3,{opacity:255}).call(function(){e.panel_tripMsg.active=!1}).start()},s([b(cc.Node)],e.prototype,"uiBg",void 0),s([b(cc.Button)],e.prototype,"btn_back",void 0),s([b(cc.Button)],e.prototype,"btn_set",void 0),s([b(cc.Button)],e.prototype,"btn_music",void 0),s([b(cc.Button)],e.prototype,"btn_help",void 0),s([b(cc.Button)],e.prototype,"btn_auto",void 0),s([b(cc.Button)],e.prototype,"btn_lock",void 0),s([b(cc.Button)],e.prototype,"btn_add",void 0),s([b(cc.Button)],e.prototype,"btn_dec",void 0),s([b(cc.Node)],e.prototype,"panel_tripMsg",void 0),s([b(cc.Label)],e.prototype,"lbl_tripMsg",void 0),s([b(r.default)],e.prototype,"batteryManage",void 0),s([b(a.default)],e.prototype,"bullteManage",void 0),s([b(d.default)],e.prototype,"fishManage",void 0),s([b(f.default)],e.prototype,"effectManage",void 0),s([b(y.default)],e.prototype,"lockManage",void 0),s([b(h.default)],e.prototype,"dialog_help",void 0),s([b(u.default)],e.prototype,"dialog_setting",void 0),s([b(l.default)],e.prototype,"dialog_message",void 0),s([b(p.default)],e.prototype,"dialog_unAction",void 0),s([b(g.default)],e.prototype,"mapManage",void 0),s([b(c.default)],e.prototype,"comWait",void 0),s([m],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./BHBatteryManage":"BHBatteryManage","./BHBulletManage":"BHBulletManage","./BHComWait":"BHComWait","./BHDialogHelp":"BHDialogHelp","./BHDialogMessage":"BHDialogMessage","./BHDialogSetting":"BHDialogSetting","./BHDialogUnAction":"BHDialogUnAction","./BHEffectManage":"BHEffectManage","./BHFishManage":"BHFishManage","./BHLockManage":"BHLockManage","./BHMap":"BHMap"}],BHI18n:[function(t,e,o){"use strict";cc._RF.push(e,"fa9ecfYoY5OSbvFPn1QQF1L","BHI18n");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.json_cn=null,e.json_en=null,e.i18n_type="en",e}return n(e,t),e.prototype.initView=function(t){this.i18n_type=t},e.prototype.getTripStr=function(t){return"cn"==this.i18n_type?this.json_cn.json[t]:this.json_en.json[t]},s([c(cc.JsonAsset)],e.prototype,"json_cn",void 0),s([c(cc.JsonAsset)],e.prototype,"json_en",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],BHLightLine:[function(t,e,o){"use strict";cc._RF.push(e,"3b36dlmA0hGGYTtejy4ElmN","BHLightLine");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHFishUtil"),a=cc._decorator,c=a.ccclass,h=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.showAni=function(t,e,o,i){var n=this,s=this.node.parent.convertToNodeSpaceAR(cc.v2((t.x+e.x)/2,(t.y+e.y)/2));this.node.setPosition(s);var a=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));this.node.width=a,this.node.height=82;var c=Math.atan2(e.y-t.y,e.x-t.x);this.node.angle=180*c/Math.PI;var h=this.getComponent(cc.Sprite);r.default.showFrameAnimation(h,i,o/2,!1,!0,2,function(){n.node.removeFromParent()})},s([c],e)}(cc.Component));o.default=h,cc._RF.pop()},{"./BHFishUtil":"BHFishUtil"}],BHLockItem:[function(t,e,o){"use strict";cc._RF.push(e,"8f81f6tVU1MpJofnxbJn4ui","BHLockItem");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_icon=null,e}return n(e,t),e.prototype.initView=function(t){this.setItemSp(t),this.playEnterAni()},e.prototype.setItemSp=function(t){this.sp_icon.spriteFrame=t},e.prototype.playEnterAni=function(){this.node.scale=2,cc.tween(this.node).to(1,{scale:1}).start()},s([c(cc.Sprite)],e.prototype,"sp_icon",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],BHLockManage:[function(t,e,o){"use strict";cc._RF.push(e,"be36fH0tWtIObUkE8tDXHnE","BHLockManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHDataEntry"),a=t("./BHLockItem"),c=cc._decorator,h=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockPrefab_1=null,e.lockPrefab_2=null,e.spAtlas=null,e.control=null,e.lockList=[],e.diffLen=40,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.resetLock()},e.prototype.resetLock=function(){for(var t in this.lockList)this.deleteLock(this.lockList[t]);this.lockList=[]},e.prototype.setBatteyLockFish=function(t,e){if(e>0){for(var o=!1,i=0;i<this.lockList.length;i++)if(this.lockList[i].batteryId==t){this.lockList[i].fishId=e,o=!0;break}0==o&&this.lockList.push({batteryId:t,fishId:e,lockItem_1:null,lockItem_2List:[]})}else for(i=0;i<this.lockList.length;i++)if(this.lockList[i].batteryId==t){this.deleteLock(this.lockList[i]),this.lockList.splice(i,1);break}this.update(0)},e.prototype.deleteLock=function(t){null!=t.lockItem_1&&(t.lockItem_1.removeFromParent(),t.lockItem_1=null);for(var e=t.lockItem_2List.length-1;e>=0;e--)t.lockItem_2List[e].removeFromParent();t.lockItem_2List=null},e.prototype.updateLockItem=function(t){var e=this.control.gameView.fishManage.getFishByFishId(t.fishId),o=this.control.gameView.batteryManage.getBatteryById(t.batteryId);if(null!=e){var i=e.node.getPosition(),n=this.node.convertToNodeSpaceAR(o.getPaoPos()),s=Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)),r=Math.floor((s-180)/this.diffLen);r=Math.min(r,40);var c=Math.atan2(n.y-i.y,n.x-i.x);if(null==t.lockItem_1){(p=cc.instantiate(this.lockPrefab_1)).parent=this.node,p.setPosition(i),t.lockItem_1=p;var h="fish_line_lock_0";1!=t.batteryId&&3!=t.batteryId||(h="fish_line_lock_1"),(u=this.spAtlas.getSpriteFrame(h))&&p.getComponent(a.default).initView(u)}else t.lockItem_1.setPosition(i);for(var l=0;l<t.lockItem_2List.length;l++)t.lockItem_2List[l].active=!1;for(l=0;l<r;l++){var p,u,f=i.x+(100+this.diffLen*l)*Math.cos(c),d=i.y+(100+this.diffLen*l)*Math.sin(c);if(null==t.lockItem_2List[l])(p=cc.instantiate(this.lockPrefab_2)).parent=this.node,p.setPosition(f,d),p.angle=180*c/Math.PI+180,t.lockItem_2List.push(p),h="fish_line_pot_0",1!=t.batteryId&&3!=t.batteryId||(h="fish_line_pot_1"),(u=this.spAtlas.getSpriteFrame(h))&&(p.getComponent(cc.Sprite).spriteFrame=u);else t.lockItem_2List[l].active=!0,t.lockItem_2List[l].setPosition(f,d),t.lockItem_2List[l].angle=180*c/Math.PI+180}}},e.prototype.update=function(){for(var t=this.lockList.length-1;t>=0;t--){var e=this.control.gameView.fishManage.getFishByFishId(this.lockList[t].fishId),o=this.control.gameView.batteryManage.getBatteryById(this.lockList[t].batteryId);null==e||e.fishStatus!=r.FishStatus.Swim||1==e.isOutSwimSize?0==o.isSelf||1==o.isSelf&&0==this.control.gameInfo.isLock?(this.deleteLock(this.lockList[t]),this.lockList.splice(t,1)):this.lockList[t].fishId=this.control.gameInfo.lockFishId:(null==o||0==o.isUse||1==o.isSelf&&0==this.control.gameInfo.isLock)&&(this.deleteLock(this.lockList[t]),this.lockList.splice(t,1))}for(var t in this.lockList)this.updateLockItem(this.lockList[t])},s([l(cc.Prefab)],e.prototype,"lockPrefab_1",void 0),s([l(cc.Prefab)],e.prototype,"lockPrefab_2",void 0),s([l(cc.SpriteAtlas)],e.prototype,"spAtlas",void 0),s([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./BHDataEntry":"BHDataEntry","./BHLockItem":"BHLockItem"}],BHMap:[function(t,e,o){"use strict";cc._RF.push(e,"911449qxkVA9oxmvHZKM3zZ","BHMap");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHFishUtil"),a=cc._decorator,c=a.ccclass,h=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapSpList=[],e.map=null,e.aniNode=null,e.ani_waveSp=null,e.ani_mapSp=null,e.trip_fishGroup=null,e.mapTranslateBg=null,e.ani_hunter=null,e.MapConfig=[{id:0,rect:"right",angle:0,imgNo:0},{id:1,rect:"right",angle:0,imgNo:1},{id:2,rect:"right",angle:0,imgNo:2},{id:3,rect:"right",angle:0,imgNo:1}],e.control=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.setMap(0),this.aniNode.active=!1,r.default.delFrameAnimation(this.ani_waveSp),this.trip_fishGroup.active=!1},e.prototype.setMap=function(t){t%=this.MapConfig.length,this.map.spriteFrame=this.mapSpList[this.MapConfig[t].imgNo],this.control.playAudio(t%6)},e.prototype.getMapAngle=function(t){t%=this.MapConfig.length;var e=this.MapConfig[0].angle;return this.MapConfig[t]&&(e=this.MapConfig[t].angle),e},e.prototype.getMapSpeed=function(t){t%=this.MapConfig.length;var e=this.MapConfig[0];this.MapConfig[t]&&(e=this.MapConfig[t]);var o=this.node.width/1;return"top"!=e.rect&&"down"!=e.rect||(o=this.node.height/1),o},e.prototype.playSwitchAni=function(t){var e=this;t%=this.MapConfig.length;var o=this.MapConfig[0];this.MapConfig[t]&&(o=this.MapConfig[t]),this.ani_mapSp.spriteFrame=this.mapSpList[o.imgNo];var i=null,n=null;"left"==o.rect?(this.ani_waveSp.node.scaleX=-1,this.ani_waveSp.node.angle=0,this.ani_waveSp.node.scaleY=this.node.height/this.ani_waveSp.node.height,this.ani_waveSp.node.setPosition(0,0),this.ani_mapSp.node.setScale(this.node.width/this.ani_mapSp.node.width,this.node.height/this.ani_mapSp.node.height),this.ani_mapSp.node.setAnchorPoint(1,.5),this.ani_mapSp.node.setPosition(0,0),i=cc.v2(this.node.width/2*-1,0),n=cc.v2(this.node.width/2,0)):"right"==o.rect?(this.ani_waveSp.node.scaleX=1,this.ani_waveSp.node.angle=0,this.ani_waveSp.node.scaleY=this.node.height/this.ani_waveSp.node.height,this.ani_waveSp.node.setPosition(0,0),this.ani_mapSp.node.setScale(this.node.width/this.ani_mapSp.node.width,this.node.height/this.ani_mapSp.node.height),this.ani_mapSp.node.setAnchorPoint(0,.5),this.ani_mapSp.node.setPosition(0,0),i=cc.v2(this.node.width,0),n=cc.v2(-1*this.node.width,0)):"top"==o.rect?(this.ani_waveSp.node.scaleX=1,this.ani_waveSp.node.angle=90,this.ani_waveSp.node.scaleY=this.node.width/this.ani_waveSp.node.height,this.ani_waveSp.node.setPosition(0,0),this.ani_mapSp.node.setScale(this.node.width/this.ani_mapSp.node.width,this.node.height/this.ani_mapSp.node.height),this.ani_mapSp.node.setAnchorPoint(.5,0),this.ani_mapSp.node.setPosition(0,0),i=cc.v2(0,this.node.height/2),n=cc.v2(0,-1*this.node.height/2)):"down"==o.rect&&(this.ani_waveSp.node.scaleX=-1,this.ani_waveSp.node.angle=90,this.ani_waveSp.node.scaleY=this.node.width/this.ani_waveSp.node.height,this.ani_waveSp.node.setPosition(0,0),this.ani_mapSp.node.setScale(this.node.width/this.ani_mapSp.node.width,this.node.height/this.ani_mapSp.node.height),this.ani_mapSp.node.setAnchorPoint(.5,1),this.ani_mapSp.node.setPosition(0,0),i=cc.v2(0,-1*this.node.height/2),n=cc.v2(0,this.node.height/2)),this.aniNode.setPosition(i),this.aniNode.active=!0,this.aniNode.stopAllActions(),cc.tween(this.aniNode).to(6,{position:cc.v3(n.x,n.y,this.aniNode.z)}).call(function(){e.aniNode.active=!1,r.default.delFrameAnimation(e.ani_waveSp)}).start(),this.ani_hunter.setPosition(cc.v2(1*this.node.width,0)),this.ani_hunter.active=!0,this.ani_hunter.stopAllActions(),cc.tween(this.ani_hunter).delay(1.5).to(2.5,{position:cc.v3(0,0,this.ani_hunter.z)}).to(.5,{opacity:0}).call(function(){e.ani_hunter.active=!1,e.ani_hunter.opacity=255}).start(),this.mapTranslateBg.active=!0,this.mapTranslateBg.opacity=0,cc.tween(this.mapTranslateBg).to(2.5,{opacity:255}).call(function(){e.setMap(o.id)}).delay(2).to(1.5,{opacity:0}).call(function(){e.mapTranslateBg.active=!1}).start()},e.prototype.showFishGroupTrip=function(){var t=this;this.trip_fishGroup.active=!0,this.trip_fishGroup.opacity=100,cc.tween(this.trip_fishGroup).to(.1,{opacity:255}).delay(.7).to(.3,{opacity:100}).call(function(){t.trip_fishGroup.active=!1}).start()},s([h([cc.SpriteFrame])],e.prototype,"mapSpList",void 0),s([h(cc.Sprite)],e.prototype,"map",void 0),s([h(cc.Node)],e.prototype,"aniNode",void 0),s([h(cc.Sprite)],e.prototype,"ani_waveSp",void 0),s([h(cc.Sprite)],e.prototype,"ani_mapSp",void 0),s([h(cc.Node)],e.prototype,"trip_fishGroup",void 0),s([h(cc.Node)],e.prototype,"mapTranslateBg",void 0),s([h(cc.Node)],e.prototype,"ani_hunter",void 0),s([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./BHFishUtil":"BHFishUtil"}],BHNetWork:[function(t,e,o){"use strict";cc._RF.push(e,"7a7d4O8IcVDu74KC5VNKZEw","BHNetWork");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHDataEntry"),a=cc._decorator,c=a.ccclass,h=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.socket=null,e.control=null,e.url=null,e.clickExit=!1,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.once=this,GameConfig.SubGameMgr.subGameNet=this,this.send("loginGame",{})},e.prototype.onDestroy=function(){},e.prototype.initView=function(t){this.control=t,this.control.showWaitLoading(!0)},e.prototype.send=function(t,e){window.sendNetWorkData&&("heart_beat"!=t&&console.log("send cmd:"+t+",data:",e),window.sendNetWorkData(t,JSON.stringify(e)))},e.prototype.resultToJSON=function(t){return JSON.parse(t)},e.prototype.addNetEvent=function(t,e){var o,i=this,n=e;if("loginGameResult"==t){var s=this.resultToJSON(e);if(cc.log("\u767b\u9646\u6e38\u620f\u670d\u7ed3\u679c",s),s.resultid)(o=new r.UserItem).niceName=s.Obj.nickname,o.userId=s.Obj.id,o.score=s.Obj.score,o.winSocre=s.Obj.wins,o.baseScore=s.Obj.bet,o.isMonitor=!0,this.control.gameInfo.selfUserItem=o,this.control.gameInfo.roomBet=s.Obj.bet,s.Obj.betList&&s.Obj.betList.length>0&&(this.control.gameInfo.baseScoreList=s.Obj.betList),cc.log("\u53d1\u9001\u767b\u5f55\u6e38\u620f\u623f\u95f4\u6d88\u606f"),this.send("LoginRoom",{roomid:1});else{var a=this.control.i18n.getTripStr("socketError");this.control.showDialogMessage("ok",a,function(){i.sendLeaveRoom()})}}if("LoginRoomResult"==t)if(s=this.resultToJSON(e),cc.log("\u767b\u5f55\u623f\u95f4\u7ed3\u679c",s),this.control.showWaitLoading(!1),s.ResultCode){for(var c in this.control.gameInfo.changeSceneType=s.change_scene_type,this.control.setMap(this.control.gameInfo.changeSceneType),s.ResultData.userList){var h=s.ResultData.userList[c];this.control.gameInfo.checkSelfByUid(h.userId)?(this.control.gameInfo.selfUserItem.headId=h.headimgurl,this.control.gameInfo.selfUserItem.userType=h.userType,this.control.gameInfo.selfUserItem.cannonId=h.cannonId,this.control.gameInfo.selfUserItem.seatId=h.seatId,this.control.gameInfo.selfUserItem.batteryId=h.seatId,this.control.gameInfo.selfUserItem.baseScore=Math.max(h.bet,this.control.gameInfo.baseScoreList[0]),this.control.onUserEnter(this.control.gameInfo.selfUserItem)):((o=new r.UserItem).niceName=h.nickname,o.headId=h.headimgurl,o.userId=h.userId,o.userType=h.userType,o.score=h.score,o.winSocre=h.wins,o.cannonId=h.cannonId,o.baseScore=Math.max(h.bet,this.control.gameInfo.baseScoreList[0]),o.seatId=h.seatId,o.batteryId=h.seatId,o.isMonitor=!1,this.control.onUserEnter(o))}this.sendChangeScene()}else a=this.control.i18n.getTripStr("socketError"),this.control.showDialogMessage("ok",a,function(){i.sendLeaveRoom()});("fishSceneChange"==t&&(s=this.resultToJSON(n),cc.log("fishSceneChange:",s),s&&(this.control.gameInfo.changeSceneType=s.change_scene_type,this.control.switchFishGroupMap(this.control.gameInfo.changeSceneType))),"playEnter"==t)&&(s=this.resultToJSON(n),cc.log("\u7528\u6237\u8fdb\u5165:",s),s.ResultCode&&(h=s.ResultData,(o=new r.UserItem).niceName=h.nickname,o.headId=h.headimgurl,o.userId=h.UserId,o.userType=h.userType,o.score=h.score,o.winSocre=h.wins,o.cannonId=h.cannonId,o.baseScore=Math.max(1,this.control.gameInfo.baseScoreList[0]),o.seatId=h.seatId,o.batteryId=h.seatId,o.isMonitor=!1,this.control.onUserEnter(o)));if("PlayerOut"==t&&(s=this.resultToJSON(n),cc.log("\u7528\u6237\u9000\u51fa:",s),this.control.onUserLeave(s.userId)),"FishOut"==t){var l=this.resultToJSON(n);l.fishPath>=95?cc.log("\u7fa4\u9c7c\u4e0b\u53d1:",l):cc.log("\u5355\u9c7c\u4e0b\u53d1:",l);var p=0;null!=l.stop&&(p=l.stop),cc.tween(this.node).delay(p).call(function(){for(var t=0;t<l.fishId.length;t++){var e=l.fishId[t],o=l.fishType,n=l.fishPath,s=l.hp,r=0;l.fishes&&l.fishes.length>0&&(r=l.fishes[0]);var a=cc.v2(0,0),c=0;n>=95&&n<=98?a=i.control.getFishPosByGroup(n,o,t):99==n&&(c=360*t/l.fishId.length),i.control.onFishEnter(e,o,n,a,c,s,r)}}).start()}if("fishShoot"==t){var u=(s=this.resultToJSON(n)).uid,f=s.bulletId,d=s.position.x,y=s.bet,g=s.fishId;console.log("\u53d1\u5c04\u5b50\u5f39\u7ed3\u679c",s),this.control.onBatteryFire(u,f,d,y,g)}if("HitResult"==t&&(s=this.resultToJSON(n),cc.log("\u5b50\u5f39\u51fb\u6740\u7ed3\u679c:",s),1==s.ResultCode)){var _={uId:s.ResultData.userId,fishId:s.ResultData.fishId,butype:s.ResultData.butype,winScore:s.ResultData.hitSocre,bombId:s.ResultData.bombId,bombCount:s.ResultData.bombCount,bulletType:s.hitInfo.bulletType,bulletId:s.hitInfo.bulletId};this.control.onFishDeath(_)}"changePowerResult"==t&&(s=this.resultToJSON(n),cc.log("\u70ae\u53f0\u5e95\u5206\u6539\u53d8:",s),u=s.uid,y=s.bet,this.control.onChangeBaseScore(u,y)),"userGoldUpdate"==t&&(s=this.resultToJSON(n),cc.log("\u73a9\u5bb6\u5206\u6570\u6539\u53d8:",s),this.control.onUserScoreChange(s.userId,s.updateSocre)),"caijinChange"==t&&(s=this.resultToJSON(n),cc.log("\u5f69\u91d1\u53d8\u5316:",s)),"getDownTimeResult"==t&&(s=this.resultToJSON(n),cc.log("getDownTimeResult:",s)),"doubleEnd"==t&&(s=this.resultToJSON(n),cc.log("doubleEnd:",s)),"chargeAllResult"==t&&(s=this.resultToJSON(n),cc.log("doubleEnd:",s)),"useSkillResult"==t&&(s=this.resultToJSON(n),cc.log("useSkillResult:",s)),"fishHit_boardResult"==t&&(s=this.resultToJSON(n),cc.log("fishHit_boardResult:",s)),"pool"==t&&(s=this.resultToJSON(n),cc.log("pool:",s)),"getFishListResult"==t&&(s=this.resultToJSON(n),cc.log("getFishListResult:",s)),"getMoguiCountResult"==t&&(s=this.resultToJSON(n),cc.log("getMoguiCountResult:",s))},e.prototype.sendHeartBeat=function(){cc.log("\u53d1\u9001\u5fc3\u8df3\u5305"),this.send("heart_beat",{})},e.prototype.sendBatteryFire=function(t,e,o,i,n,s){var r={userid:t,seatId:e,bet:i,position:cc.v2(o,0),fishId:n,balance:i*this.control.gameInfo.roomBet,uid:t,bulletId:s,isDrill:!1,boomWay:0,boomPercent:0};cc.log("\u53d1\u5c04\u5b50\u5f39\u6d88\u606f"),this.send("fishShoot",r),this.control.unActiontime=0},e.prototype.sendHitFish=function(t,e,o,i,n,s,r){void 0===n&&(n=0),void 0===s&&(s=!1),void 0===r&&(r=0);var a={uid:t,fishId:o,bulletId:e,bulletType:i,lockFishId:null,format:null,hp:null};n>0&&(a.lockFishId=n),1==s&&(a.format=1),r>0&&(a.hp=r),this.send("fishHit",a)},e.prototype.sendChangeBaseScore=function(t,e){var o={uid:t,bet:e};this.send("changePower",o)},e.prototype.sendChangeScene=function(){this.send("changeScene",{})},e.prototype.sendLeaveRoom=function(){this.clickExit=!0},e.prototype.leave_1=function(){},o=s([c],e)}(cc.Component));o.default=h,cc._RF.pop()},{"./BHDataEntry":"BHDataEntry"}],BHScoreAni:[function(t,e,o){"use strict";cc._RF.push(e,"ee66dwuwLBAC5abfEptbCfg","BHScoreAni");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./BHFishUtil"),a=cc._decorator,c=a.ccclass,h=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblScore=null,e.sp_icon=null,e.sp_ani=null,e.scoreList=[{start:0,single:2,count:5},{start:10,single:10,count:20},{start:210,single:50,count:20},{start:1210,single:200,count:20},{start:5210,single:500,count:20},{start:15210,single:1e3,count:-1}],e.singleHeight=6,e}return n(e,t),e.prototype.start=function(){},e.prototype.showAni=function(t,e){for(var o=this,i=4,n=0;n<this.scoreList.length;n++){if(n==this.scoreList.length-1){i+=Math.ceil((t-this.scoreList[n].start)/this.scoreList[n].single);break}if(t<=this.scoreList[n+1].start){i+=Math.ceil((t-this.scoreList[n].start)/this.scoreList[n].single);break}i+=Math.ceil((this.scoreList[n+1].start-this.scoreList[n].start)/this.scoreList[n].single)}var s=i*this.singleHeight;this.sp_icon.height=4,this.sp_icon.opacity=255,cc.tween(this.sp_icon).to(1,{height:s}).delay(.7).to(.5,{opacity:0}).call(function(){o.node.removeFromParent()}).start(),this.lblScore.string=(t/globalThis.playerInfo.exchangeRate).toFixed(2),this.lblScore.node.active=!1,this.lblScore.node.y=this.lblScore.node.y+s;var a=[];a.push(e.getSpriteFrame("chipPile_coin_0")),a.push(e.getSpriteFrame("chipPile_coin_1")),a.push(e.getSpriteFrame("chipPile_coin_3")),r.default.showFrameAnimation(this.sp_ani,a,.2,!1,!0,6,null),cc.tween(this.sp_ani.node).to(1,{position:cc.v3(this.sp_ani.node.x,this.sp_ani.node.y+s,this.sp_ani.node.z)}).delay(.2).call(function(){o.sp_ani.node.active=!1,o.lblScore.node.active=!0,cc.tween(o.lblScore.node).delay(.5).to(.5,{opacity:0}).start()}).start()},s([h(cc.Label)],e.prototype,"lblScore",void 0),s([h(cc.Node)],e.prototype,"sp_icon",void 0),s([h(cc.Sprite)],e.prototype,"sp_ani",void 0),s([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./BHFishUtil":"BHFishUtil"}],BHScore:[function(t,e,o){"use strict";cc._RF.push(e,"b3e9eKwdKJJsZcjL0RoPw7m","BHScore");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbl=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.showAni=function(t){var e=this;this.lbl.string=(t/globalThis.playerInfo.exchangeRate).toFixed(2),this.node.scale=0,cc.tween(this.node).to(.2,{scale:1.2}).to(.1,{scale:.9}).to(.1,{scale:1}).delay(1.3).to(.5,{position:cc.v3(this.node.x+50,this.node.y,this.node.z),opacity:0}).call(function(){e.node.removeFromParent()}).start()},e.prototype.showMoveAni=function(t,e,o,i){var n=this;this.lbl.string=(t/globalThis.playerInfo.exchangeRate).toFixed(2),this.node.scale=0,this.node.setPosition(e),cc.tween(this.node).to(.2,{scale:1.2}).to(.1,{scale:.9}).to(.1,{scale:1}).delay(.6).to(.5,{position:cc.v3(o.x,o.y,this.node.z)}).call(function(){i&&i(),n.node.removeFromParent()}).start()},s([c(cc.Label)],e.prototype,"lbl",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],BHUIAdapet:[function(t,e,o){"use strict";cc._RF.push(e,"82ca5fqd1JPD5YLe7w3KI25","BHUIAdapet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftNodeList=[],e.rightNodeList=[],e.diffWidth=80,e}return n(e,t),e.prototype.start=function(){if(cc.sys.isNative){var t=cc.director.getWinSize();if(t.width/t.height>=1.9){for(var e in this.leftNodeList)(o=this.leftNodeList[e].getComponent(cc.Widget))?o.left=this.diffWidth:this.leftNodeList[e].x=this.leftNodeList[e].x+this.diffWidth;for(var e in this.rightNodeList){var o;(o=this.leftNodeList[e].getComponent(cc.Widget))?o.right=this.diffWidth:this.leftNodeList[e].x=this.leftNodeList[e].x-this.diffWidth}}}},s([c([cc.Node])],e.prototype,"leftNodeList",void 0),s([c([cc.Node])],e.prototype,"rightNodeList",void 0),s([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{}]},{},["BHAudio","BHBattery","BHBatteryCicle","BHBatteryManage","BHBullet","BHBulletManage","BHComWait","BHControl","BHDataEntry","BHDialogHelp","BHDialogMessage","BHDialogSetting","BHDialogUnAction","BHEffectManage","BHFeiShu","BHFish","BHFishManage","BHFishNet","BHFishPath","BHFishUtil","BHGameInfo","BHGameView","BHI18n","BHLightLine","BHLockItem","BHLockManage","BHMap","BHNetWork","BHScore","BHScoreAni","BHUIAdapet","BHFishOutGroup"]);