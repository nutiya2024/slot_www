window.__require=function t(e,o,i){function n(a,r){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var h=o[a]={exports:{}};e[a][0].call(h.exports,function(t){return n(e[a][1][t]||t)},h,h.exports,t,e,o,i)}return o[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<i.length;a++)n(i[a]);return n}({FBFAudio:[function(t,e,o){"use strict";cc._RF.push(e,"8696bSkYKBJdKbysnmEUNwu","FBFAudio");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioLst={0:{fileName:"music_bg_1",type:"music",remark:"\u80cc\u666f\u97f3\u4e500"},1:{fileName:"music_bg_2",type:"music",remark:"\u80cc\u666f\u97f3\u4e501"},2:{fileName:"music_bg_3",type:"music",remark:"\u80cc\u666f\u97f3\u4e502"},3:{fileName:"music_bg_4",type:"music",remark:"\u80cc\u666f\u97f3\u4e503"},4:{fileName:"music_bg_1",type:"music",remark:"\u80cc\u666f\u97f3\u4e504"},5:{fileName:"music_bg_2",type:"music",remark:"\u80cc\u666f\u97f3\u4e505"},10:{fileName:"fishdie_1",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},11:{fileName:"fishdie_2",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},12:{fileName:"fishdie_3",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},13:{fileName:"fishdie_4",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},14:{fileName:"fishdie_5",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},15:{fileName:"fishdie_6",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},16:{fileName:"fishdie_7",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},17:{fileName:"fishdie_8",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},18:{fileName:"fishdie_9",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},19:{fileName:"fishdie_10",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},20:{fileName:"fishdie_11",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},21:{fileName:"fishdie_12",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},22:{fileName:"fishdie_13",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},23:{fileName:"fishdie_14",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},24:{fileName:"fishdie_zbl_en15",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},25:{fileName:"fishdie_zbl_en16",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},26:{fileName:"fishdie_zbl_en17",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},27:{fileName:"fishdie_zbl_en18",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},28:{fileName:"fishdie_zbl_en19",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},29:{fileName:"fishdie_zbl_en20",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},30:{fileName:"fishdie_zbl_en21",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},31:{fileName:"fishdie_zbl_en22",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},32:{fileName:"fishdie_zbl_en23",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},33:{fileName:"fishdie_djdq_en1",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},34:{fileName:"fishdie_djdq_en2",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},35:{fileName:"fishdie_djdq_en3",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},36:{fileName:"fishdie_djdq_en4",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},37:{fileName:"fishdie_djdq_en5",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},38:{fileName:"fishdie_djdq_en6",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},39:{fileName:"fishdie_djdq_en7",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},40:{fileName:"fishdie_djdq_en6",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},41:{fileName:"fishdie_djdq_en5",type:"effect",remark:"\u9c7c\u6b7b\u4ea1"},46:{fileName:"effect_ui_reset",type:"effect",remark:"\u91cd\u7f6e"},47:{fileName:"effect_ui_uncheck",type:"effect",remark:"\u53d6\u6d88\u9009\u4e2d"},48:{fileName:"effect_ui_check",type:"effect",remark:"\u9009\u4e2d"},49:{fileName:"effect_click_2",type:"effect",remark:"\u83dc\u5355\u6253\u5f00\u5173\u95ed"},50:{fileName:"effect_click_1",type:"effect",remark:"\u6309\u94ae\u70b9\u51fb"},51:{fileName:"effect_battery_change",type:"effect",remark:"\u70ae\u53f0\u51fa\u6765"},52:{fileName:"effect_battery_fire",type:"effect",remark:"\u5b50\u5f39\u53d1\u5c04"},53:{fileName:"effect_hitfish",type:"effect",remark:"\u5b50\u5f39\u78b0\u649e\u9c7c"},54:{fileName:"effect_getgoal",type:"effect",remark:"\u91d1\u5e01"},55:{fileName:"effect_highCredit",type:"effect",remark:"\u70ae\u53f0\u663e\u793a\u9ad8\u5206"},56:{fileName:"effect_map_langhua",type:"effect",remark:"\u5207\u6362\u573a\u666f\u52a8\u753b"},57:{fileName:"effect_battery_light",type:"effect",remark:"\u95ea\u7535"},58:{fileName:"effect_lasershot",type:"effect",remark:"\u6fc0\u5149"},59:{fileName:"effect_bomb_bigBomb",type:"effect",remark:"\u7206\u70b81"},60:{fileName:"effect_rollDigitSound",type:"effect",remark:"\u706f\u5149\u79fb\u52a8"},61:{fileName:"effect_bomb_bomb2",type:"effect",remark:"\u7206\u70b82"},62:{fileName:"effect_bomb_bigSpecialBomb",type:"effect",remark:"\u7206\u70b83"},63:{fileName:"effect_wind_rotate",type:"effect",remark:"\u540c\u7c7b\u70b8\u5f39\u5438\u6536\u9ed1\u6d1e"},64:{fileName:"effect_tigerBall",type:"effect",remark:"\u7ea2\u51e4\u51f0_1"},65:{fileName:"effect_tigerCrash",type:"effect",remark:"\u7ea2\u51e4\u51f0_2"},66:{fileName:"effect_tigerDie",type:"effect",remark:"\u7ea2\u51e4\u51f0_3"},67:{fileName:"effect_tigerShout",type:"effect",remark:"\u7ea2\u51e4\u51f0_4"},68:{fileName:"effect_freezeHit",type:"effect",remark:"\u51b0\u51bb"},69:{fileName:"effect_ztpShoot",type:"effect",remark:"push\u6309\u94ae\u5149\u5708"}},e.bundle=null,e}return n(e,t),e.prototype.initView=function(){this.bundle=cc.assetManager.getBundle(window.BUNDLE_NAME)},e.prototype.playAudio=function(t){var e=this;if(null!=this.audioLst[t+""]){var o="./music/"+this.audioLst[t+""].fileName,i=this.audioLst[t+""].type;return new Promise(function(t){e.bundle.load(o,cc.AudioClip,function(e,o){var n=-1;null==e&&(n="music"==i?cc.audioEngine.playMusic(o,!0):cc.audioEngine.playEffect(o,!1)),t(n)})})}},s([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],FBFBatteryCicleAni:[function(t,e,o){"use strict";cc._RF.push(e,"d54b4lsIkZEOK0HIy90vEqC","FBFBatteryCicleAni");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbl_score=null,e}return n(e,t),e.prototype.initView=function(t){this.node.x=0==t||3==t?200:-200,this.reset()},e.prototype.reset=function(){this.node.stopAllActions(),this.node.active=!1,this.lbl_score.string=""},e.prototype.showAni=function(t){var e=this;this.node.active=!0,this.node.opacity=255,cc.Tween.stopAllByTarget(this.node),this.node.scale=.5,this.lbl_score.string=(t/globalThis.playerInfo.exchangeRate).toFixed(2),cc.tween(this.node).to(.15,{scale:1.1}).to(.15,{scale:.9}).to(.15,{scale:1}).delay(2.5).to(.3,{opacity:0}).call(function(){e.reset()}).start()},s([c(cc.Label)],e.prototype,"lbl_score",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFBatteryHappyAni:[function(t,e,o){"use strict";cc._RF.push(e,"bdd4bb9LzRFc7t28SIp9VHn","FBFBatteryHappyAni");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_score=null,e.lbl_score=null,e.lbl_time=null,e.bg_cicle_1=null,e.bg_cicle_2=null,e.currTime=0,e.addTime=0,e.winScore=0,e}return n(e,t),e.prototype.initView=function(){this.reset()},e.prototype.showAni=function(){var t=this;this.reset(),this.node.active=!0,this.node_score.active=!0,this.node_score.opacity=0,cc.Tween.stopAllByTarget(this.node_score),cc.tween(this.node_score).to(.3,{opacity:255}).start(),this.bg_cicle_1.active=!0,this.bg_cicle_1.opacity=255,this.bg_cicle_1.scale=.3,cc.Tween.stopAllByTarget(this.bg_cicle_1),cc.tween(this.bg_cicle_1).to(1,{scale:4,opacity:0}).start(),this.bg_cicle_2.active=!0,this.bg_cicle_2.scale=1,this.bg_cicle_2.getComponent(cc.Animation).stop(),cc.Tween.stopAllByTarget(this.bg_cicle_2),cc.tween(this.bg_cicle_2).to(.3,{scale:.77}).call(function(){t.bg_cicle_2.getComponent(cc.Animation).play()}).start(),this.currTime=30,this.addTime=0,this.winScore=0,this.lbl_time.string=""+this.currTime},e.prototype.showWinScore=function(t){this.winScore+=t,this.lbl_score.string=""+(this.winScore/globalThis.playerInfo.exchangeRate).toFixed(2)},e.prototype.getWinScore=function(){return this.winScore},e.prototype.reset=function(){this.node.active=!1,this.node_score.active=!1,this.lbl_score.string="0.00",this.lbl_time.string="30",this.bg_cicle_1.active=!1,this.bg_cicle_2.active=!1,this.currTime=0,this.addTime=0,this.winScore=0},e.prototype.update=function(t){this.currTime>0&&(this.addTime+=t,Math.floor(this.addTime)>=1&&(this.currTime=this.currTime-Math.floor(this.addTime),this.currTime=Math.max(this.currTime,0),this.lbl_time.string=""+this.currTime,this.addTime=this.addTime-Math.floor(this.addTime)))},s([c(cc.Node)],e.prototype,"node_score",void 0),s([c(cc.Label)],e.prototype,"lbl_score",void 0),s([c(cc.Label)],e.prototype,"lbl_time",void 0),s([c(cc.Node)],e.prototype,"bg_cicle_1",void 0),s([c(cc.Node)],e.prototype,"bg_cicle_2",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFBatteryManage:[function(t,e,o){"use strict";cc._RF.push(e,"618edJo4wNKNpzG6IlkGCQo","FBFBatteryManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFBattery"),r=t("./FBFDataEntry"),c=cc._decorator,l=c.ccclass,h=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.batteryList=[],e.layerFishNode=null,e.control=null,e.selfBattery=null,e.batteryBulletLimit=100,e.currAutoTime=0,e.fireEnable=!0,e.isLongTouch=!1,e}return n(e,t),e.prototype.initView=function(t){this.control=t,this.fireEnable=!0;for(var e=0;e<this.batteryList.length;e++)this.batteryList[e].initView(this.control,e);this.registerClick()},e.prototype.registerClick=function(){var t=this;if(cc.sys.platform==cc.sys.DESKTOP_BROWSER){var e=function(e){var o=e.getLocation();t.control.gameInfo.weaponType==r.WeaponType.Bullet&&t.control.gameInfo.connType==r.ConnType.Bullet?(t.selfBattery&&0==t.control.gameInfo.lockFishId&&t.setBatteryAngleByPos(t.selfBattery.batteryId,o),e.getType()==cc.Node.EventType.MOUSE_DOWN?t.selfBattery&&(t.clickBatteryFire(o),t.isLongTouch=!0):e.getType()!=cc.Node.EventType.MOUSE_UP&&e.getType()!=cc.Node.EventType.MOUSE_LEAVE||(t.isLongTouch=!1)):t.control.gameInfo.weaponType==r.WeaponType.Laser&&(t.isLongTouch=!1,t.selfBattery&&t.setBatteryAngleByPos(t.selfBattery.batteryId,o),e.getType()==cc.Node.EventType.MOUSE_UP&&t.selfBattery&&t.clickBatteryLaser(o))};this.layerFishNode.on(cc.Node.EventType.MOUSE_DOWN,e),this.layerFishNode.on(cc.Node.EventType.MOUSE_ENTER,e),this.layerFishNode.on(cc.Node.EventType.MOUSE_MOVE,e),this.layerFishNode.on(cc.Node.EventType.MOUSE_LEAVE,e),this.layerFishNode.on(cc.Node.EventType.MOUSE_UP,e)}else{var o=function(e){var o=e.getLocation();return t.control.gameInfo.weaponType==r.WeaponType.Bullet&&t.control.gameInfo.connType==r.ConnType.Bullet?(t.selfBattery&&0==t.control.gameInfo.lockFishId&&t.setBatteryAngleByPos(t.selfBattery.batteryId,o),e.getType()==cc.Node.EventType.TOUCH_START?t.selfBattery&&(t.clickBatteryFire(o),t.isLongTouch=!0):e.getType()!=cc.Node.EventType.TOUCH_END&&e.getType()!=cc.Node.EventType.TOUCH_CANCEL||(t.isLongTouch=!1)):t.control.gameInfo.weaponType==r.WeaponType.Laser&&(t.isLongTouch=!1,t.selfBattery&&t.setBatteryAngleByPos(t.selfBattery.batteryId,o),e.getType()!=cc.Node.EventType.TOUCH_END&&e.getType()!=cc.Node.EventType.TOUCH_CANCEL||t.selfBattery&&t.clickBatteryLaser(o)),console.log(e.getType()),!1};this.layerFishNode.on(cc.Node.EventType.TOUCH_START,o),this.layerFishNode.on(cc.Node.EventType.TOUCH_MOVE,o),this.layerFishNode.on(cc.Node.EventType.TOUCH_END,o),this.layerFishNode.on(cc.Node.EventType.TOUCH_CANCEL,o),this.layerFishNode._touchListener.setSwallowTouches(!1),console.log("GKBatteryManage:\u6ce8\u518c\u4e8b\u4ef6")}},e.prototype.clickBatteryFire=function(t){if(0!=this.fireEnable&&null!=this.selfBattery){var e=this.selfBattery;if(e.hidIconGuide(),this.control.gameView.bullteManage.getBulletCountByBatteryId(e.batteryId)>=this.batteryBulletLimit){var o=this.control.i18n.getTripStr("bulletEnough");this.control.showTrip(o)}else{var i=e.getPaoPos();i=this.node.convertToNodeSpaceAR(i);var n=0;(t=this.node.convertToNodeSpaceAR(t)).x-i.x!=0&&(n=180*Math.atan2(t.y-i.y,t.x-i.x)/Math.PI),this.control.gameInfo.isLock&&(n=e.getPaoAngle()),this.currAutoTime=0,this.control.sendBatteryFire(e.batteryId,n)}}},e.prototype.clickBatteryLaser=function(t){if(0!=this.fireEnable&&null!=this.selfBattery){var e=this.selfBattery;e.hidIconGuide();var o=e.getPaoPos();o=this.node.convertToNodeSpaceAR(o);var i=0;(t=this.node.convertToNodeSpaceAR(t)).x-o.x!=0&&(i=180*Math.atan2(t.y-o.y,t.x-o.x)/Math.PI),this.currAutoTime=0,this.control.gameInfo.weaponType=r.WeaponType.Wait,this.control.sendLaserNotice(e.batteryId,i)}},e.prototype.autoBatteryFire=function(){if(0!=this.fireEnable&&null!=this.selfBattery){var t=this.selfBattery;t.hidIconGuide();var e=this.control.gameView.bullteManage.getBulletCountByBatteryId(t.batteryId);if(this.control.gameInfo.weaponType==r.WeaponType.Bullet&&e>=this.batteryBulletLimit){var o=this.control.i18n.getTripStr("bulletEnough");this.control.showTrip(o)}else{var i=t.getPaoAngle();this.currAutoTime=0,this.control.sendBatteryFire(t.batteryId,i)}}},e.prototype.showFireAniByBattryId=function(t){var e=this.batteryList[t];e&&e.showFireAni()},e.prototype.setBatteryAngle=function(t,e){var o=this.batteryList[t];o&&o.setPaoAngle(e)},e.prototype.setBatteryLock=function(t,e){var o=this.batteryList[t];o&&(e>0?o.showLockFishAni(!0,e):o.showLockFishAni(!1,0))},e.prototype.setBatteryLightFish=function(t,e){var o=this.batteryList[t];o&&(e>0?o.showLightFishAni(!0,e):o.showLightFishAni(!1,0))},e.prototype.setBatteryAngleByPos=function(t,e){var o=this.batteryList[t];if(o){var i=o.getPaoPos();i=this.node.convertToNodeSpaceAR(i);var n=0;(e=this.node.convertToNodeSpaceAR(e)).x-i.x!=0&&(n=180*Math.atan2(e.y-i.y,e.x-i.x)/Math.PI),o.setPaoAngle(n)}},e.prototype.setBatteryUserScore=function(t){var e=this.batteryList[t];e&&e.updateUserScore()},e.prototype.showBatteryAddScoreAni=function(t,e){var o=this.batteryList[t];o&&o.showAddScoreAni(e)},e.prototype.showBatteryCicleAni=function(t,e){var o=this.batteryList[t];o&&o.showCicleAni(e)},e.prototype.runNewBattery=function(t,e){var o=this.batteryList[t.batteryId];if(o)return e&&(this.selfBattery=o),o.initData(t,e)},e.prototype.clearBattery=function(t){var e=this.batteryList[t];if(e)return e.clearData()},e.prototype.changeBatteryBaseScore=function(t,e){var o=this.batteryList[t];o&&o.changeBaseScore(e)},e.prototype.changeBatteryWeapon=function(t,e){var o=this.batteryList[t];o&&o.changeWeapon(e)},e.prototype.getBulletStartPos=function(t,e){var o=null,i=this.batteryList[t];if(i){var n=i.getPaoPos();n=this.node.convertToNodeSpaceAR(n),o=cc.v2(n.x+130*Math.cos(2*Math.PI/360*e),n.y+130*Math.sin(2*Math.PI/360*e))}return o},e.prototype.getPaoTaiPos=function(t){var e=null,o=this.batteryList[t];return o&&(e=o.getPaoPos()),e},e.prototype.getIconGoldPos=function(t){var e=null,o=this.batteryList[t];return o&&(e=o.getIconGoldPos()),e},e.prototype.getPaoTaiAngle=function(t){var e=0,o=this.batteryList[t];return o&&(e=o.getPaoAngle()),e},e.prototype.getBatteryById=function(t){return this.batteryList[t]},e.prototype.update=function(t){if(this.control.gameInfo.weaponType==r.WeaponType.Bullet)if(this.control.gameInfo.connType==r.ConnType.Bullet){if(this.control.gameInfo.isLock&&this.control.gameInfo.lockFishId>0){var e=this.control.gameView.fishManage.getFishByFishId(this.control.gameInfo.lockFishId);if(e&&this.selfBattery){var o=e.getWorldPos();this.setBatteryAngleByPos(this.selfBattery.batteryId,o)}}if((1==this.control.gameInfo.isAuto||this.control.gameInfo.isLock&&this.control.gameInfo.lockFishId>0||1==this.isLongTouch)&&(this.currAutoTime+=t,this.currAutoTime>=1/this.control.gameInfo.autoFate)){this.currAutoTime=0;var i=this.control.gameInfo.lockTrackFishTypeList;if(this.control.gameInfo.isLock&&i.length>0){var n=this.control.gameView.fishManage.getFishByFishId(this.control.gameInfo.lockFishId);n&&-1!=i.indexOf(n.fishConfig.Id)&&this.autoBatteryFire()}else this.autoBatteryFire()}}else this.control.gameInfo.connType==r.ConnType.Light&&this.control.gameInfo.lightFishId>0&&(this.currAutoTime+=t,this.currAutoTime>=1/this.control.gameInfo.autoFate&&(this.currAutoTime=0,this.autoBatteryFire()))},s([h([a.default])],e.prototype,"batteryList",void 0),s([h(cc.Node)],e.prototype,"layerFishNode",void 0),s([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./FBFBattery":"FBFBattery","./FBFDataEntry":"FBFDataEntry"}],FBFBattery:[function(t,e,o){"use strict";cc._RF.push(e,"65e7dv2VvpLUIbYZkzFJwEo","FBFBattery");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFDataEntry"),r=cc._decorator,c=r.ccclass,l=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlas_btttery=null,e.atlas_effect=null,e.node_lock=null,e.node_guide=null,e.lbl_name=null,e.lbl_score_total=null,e.node_winScore=null,e.lbl_score_win=null,e.lbl_score_base=null,e.btn_addScore=null,e.btn_decScore=null,e.node_paoguang=null,e.sp_guang=null,e.sp_leida=null,e.sp_leida_fish=null,e.node_icon_laser=null,e.samefish_node=null,e.samefish_sp_icon=null,e.samefish_lbl_winscore=null,e.samefish_lbl_basescore=null,e.lightfish_node=null,e.lightfish_lbl_basescore=null,e.lightfish_node_icon=null,e.lightfish_lbl_winscore=null,e.drillcrab_node=null,e.drillcrab_lbl_basescore=null,e.drillcrab_lbl_winscore=null,e.isUse=!1,e.batteryId=0,e.userItem=null,e.isSelf=!1,e.control=null,e.lockFishNode=null,e.lockFishId=null,e.lightFishId=null,e.connType=a.ConnType.Bullet,e}return n(e,t),e.prototype.initView=function(t,e){this.control=t,this.isUse=!1,this.batteryId=e,this.lockFishNode=null,this.lockFishId=null,this.node.active=!1,this.node_lock.active=!1,this.node_guide.active=!1,this.samefish_node.active=!1,this.lightfish_node.active=!1,this.drillcrab_node.active=!1,this.node_winScore.active=0==globalThis.playerInfo.useOneScore,this.lbl_name.string="",this.lbl_score_total.string="",this.lbl_score_win.string="0.00",this.lbl_score_base.string="",this.node_paoguang.angle=0,this.sp_guang.spriteFrame=this.atlas_btttery.getSpriteFrame("battery_guang_1"),this.sp_leida.node.active=!1,this.connType=a.ConnType.Bullet,this.node_icon_laser.active=!1,this.btn_addScore.active=!1,this.btn_addScore.targetOff(this),this.btn_addScore.on(cc.Node.EventType.TOUCH_END,this.onClick_addScore,this),this.btn_decScore.active=!1,this.btn_decScore.targetOff(this),this.btn_decScore.on(cc.Node.EventType.TOUCH_END,this.onClick_decScore,this)},e.prototype.initData=function(t,e){this.isUse=!0,this.userItem=t,this.isSelf=e,this.node.active=!0,this.btn_addScore.active=this.isSelf,this.btn_decScore.active=this.isSelf,this.node_guide.active=e,this.lbl_name.string=t.niceName,this.lbl_score_base.string=""+(t.baseScore/globalThis.playerInfo.exchangeRate).toFixed(2),this.lbl_score_total.string=""+(t.score/globalThis.playerInfo.exchangeRate).toFixed(2),this.lbl_score_win.string=""+(t.winSocre/globalThis.playerInfo.exchangeRate).toFixed(2),this.connType=a.ConnType.Bullet,this.sp_guang.getComponent(cc.Animation).play("battery_guang_1"),this.changeBaseScore(t.baseScore),this.changeWeapon(this.userItem.canonId)},e.prototype.clearData=function(){this.initView(this.control,this.batteryId)},e.prototype.getPaoPos=function(){return this.node.convertToWorldSpaceAR(this.node_paoguang.getPosition())},e.prototype.getIconGoldPos=function(){return this.node.convertToWorldSpaceAR(this.node_paoguang.getPosition())},e.prototype.getBulletPos=function(){var t=cc.v2(this.node_paoguang.x,this.node_paoguang.y+80);return this.node.convertToWorldSpaceAR(t)},e.prototype.getLightGuanPos=function(){var t=cc.v2(this.sp_leida.node.x,this.sp_leida.node.y+40);return this.sp_leida.node.parent.convertToWorldSpaceAR(t)},e.prototype.getTripAniPos=function(){var t=cc.v2(this.node_paoguang.x,this.node_paoguang.y+170);return this.node.convertToWorldSpaceAR(t)},e.prototype.getRandomTripAniPos=function(){var t=cc.v2(this.node_paoguang.x+500*Math.random()-250,this.node_paoguang.y+200+200*Math.random()-100);return this.node.convertToWorldSpaceAR(t)},e.prototype.getSameAniPos=function(){var t=cc.v2(this.node_paoguang.x,this.node_paoguang.y+300);return this.node.convertToWorldSpaceAR(t)},e.prototype.setPaoAngle=function(t){this.connType==a.ConnType.Bullet||1==this.node_icon_laser.active?this.node_paoguang.angle=t-this.node.angle-90:this.node_paoguang.angle=0},e.prototype.getPaoAngle=function(){return this.node_paoguang.angle+this.node.angle+90},e.prototype.changeBaseScore=function(t){this.lbl_score_base.string=""+(t/globalThis.playerInfo.exchangeRate).toFixed(2),cc.tween(this.lbl_score_base.node).to(.15,{scale:2}).to(.15,{scale:1}).start()},e.prototype.changeWeapon=function(t){this.control.playAudio(51),this.connType=t,this.setLaserMode(!1),this.connType==a.ConnType.Light?(this.node_paoguang.angle=0,this.sp_guang.getComponent(cc.Animation).play("battery_gun_light"),this.sp_leida_fish.node.active=!1):(this.node_paoguang.angle=0,this.sp_guang.getComponent(cc.Animation).play("battery_gun_normal"),this.sp_leida.node.active=!1)},e.prototype.setLaserMode=function(t){this.node_icon_laser.active=t},e.prototype.updateUserScore=function(){this.lbl_score_total.string=""+(this.userItem.score/globalThis.playerInfo.exchangeRate).toFixed(2),this.lbl_score_win.string=""+(this.userItem.winSocre/globalThis.playerInfo.exchangeRate).toFixed(2)},e.prototype.hidIconGuide=function(){this.node_guide.active=!1},e.prototype.showFireAni=function(){var t=this.sp_guang.getComponent(cc.Animation);t.once("finished",function(){t.play("battery_gun_normal")}),t.play("battery_gun_fire")},e.prototype.showAddScoreAni=function(){cc.tween(this.lbl_score_total.node).to(.15,{scale:1.2}).to(.15,{scale:1}).start()},e.prototype.showCicleAni=function(){},e.prototype.resetCicleAni=function(){},e.prototype.showLockFishAni=function(){},e.prototype.showLightFishAni=function(t,e){if(1==t){this.lightFishId=e;var o=this.control.gameView.fishManage,i=o.getFishByFishId(e);if(i&&22!=i.fishConfig.Id){this.sp_leida_fish.node.active=!0,this.sp_leida_fish.node.angle=90,this.sp_leida_fish.node.scale=.5*i.fishConfig.FishSameScale;var n=o.getSwimSpByFish(i.fishConfig);this.sp_leida_fish.spriteFrame=n[0]}}else this.sp_leida_fish.spriteFrame=null,this.sp_leida_fish.node.active=!1,this.lightFishId=0},e.prototype.showSameFishAni=function(t){var e=this;this.samefish_node.active=!0,this.samefish_sp_icon.node.active=!1,this.samefish_lbl_basescore.string=""+(this.userItem.baseScore/globalThis.playerInfo.exchangeRate).toFixed(2),this.samefish_lbl_winscore.node.active=!1,this.samefish_lbl_winscore.string=""+(t/globalThis.playerInfo.exchangeRate).toFixed(2),this.control.playAudio(63),cc.Tween.stopAllByTarget(this.samefish_node),cc.tween(this.samefish_node).delay(4.3).call(function(){e.samefish_lbl_winscore.node.active=!0,e.control.playAudio(55)}).delay(2.5).call(function(){e.samefish_lbl_winscore.node.active=!1,e.samefish_node.active=!1}).start()},e.prototype.showLightChainAni=function(t){var e=this;this.lightfish_node.active=!0,this.lightfish_lbl_winscore.node.active=!1,this.lightfish_lbl_winscore.string=""+(t/globalThis.playerInfo.exchangeRate).toFixed(2),this.lightfish_lbl_basescore.string=""+(this.userItem.baseScore/globalThis.playerInfo.exchangeRate).toFixed(2),this.lightfish_node_icon.setPosition(cc.v2(0,40)),this.lightfish_node_icon.getComponent(cc.Animation).play("battery_lightfish_1"),cc.Tween.stopAllByTarget(this.lightfish_node),cc.tween(this.lightfish_node).delay(2.3).call(function(){e.lightfish_node_icon.getComponent(cc.Animation).play("battery_lightfish_2"),e.lightfish_lbl_winscore.node.active=!0,e.lightfish_lbl_winscore.getComponent(cc.Animation).play("battery_lightfish_3")}).delay(2.5).call(function(){e.lightfish_lbl_winscore.node.active=!1,e.lightfish_node.active=!1}).start()},e.prototype.showDrillCrabAni=function(t){var e=this;this.drillcrab_node.active=!0,this.drillcrab_lbl_winscore.node.active=!1,this.drillcrab_lbl_winscore.string=""+(t/globalThis.playerInfo.exchangeRate).toFixed(2),this.drillcrab_lbl_basescore.string=""+(this.userItem.baseScore/globalThis.playerInfo.exchangeRate).toFixed(2),cc.tween(this.node).delay(4).call(function(){e.drillcrab_lbl_winscore.node.active=!0}).delay(2).call(function(){e.drillcrab_node.active=!1}).start()},e.prototype.showHappyAni=function(){},e.prototype.showHappyAniWinScore=function(){},e.prototype.getHappyWinScore=function(){return 0},e.prototype.closeHappyAni=function(){},e.prototype.onClick_addScore=function(){this.control.playAudio(50),this.control.sendChangeBaseScore("add")},e.prototype.onClick_decScore=function(){this.control.playAudio(50),this.control.sendChangeBaseScore("dec")},e.prototype.update=function(){if(this.connType==a.ConnType.Light&&this.lightFishId>0&&1==this.sp_leida_fish.node.active){var t=this.control.gameView.fishManage.getFishByFishId(this.lightFishId);(null==t||null!=t&&t.fishStatus!=a.FishStatus.Swim)&&(this.sp_leida_fish.spriteFrame=null,this.sp_leida_fish.node.active=!1,this.lightFishId=0)}},s([l(cc.SpriteAtlas)],e.prototype,"atlas_btttery",void 0),s([l(cc.SpriteAtlas)],e.prototype,"atlas_effect",void 0),s([l(cc.Node)],e.prototype,"node_lock",void 0),s([l(cc.Node)],e.prototype,"node_guide",void 0),s([l(cc.Label)],e.prototype,"lbl_name",void 0),s([l(cc.Label)],e.prototype,"lbl_score_total",void 0),s([l(cc.Node)],e.prototype,"node_winScore",void 0),s([l(cc.Label)],e.prototype,"lbl_score_win",void 0),s([l(cc.Label)],e.prototype,"lbl_score_base",void 0),s([l(cc.Node)],e.prototype,"btn_addScore",void 0),s([l(cc.Node)],e.prototype,"btn_decScore",void 0),s([l(cc.Node)],e.prototype,"node_paoguang",void 0),s([l(cc.Sprite)],e.prototype,"sp_guang",void 0),s([l(cc.Sprite)],e.prototype,"sp_leida",void 0),s([l(cc.Sprite)],e.prototype,"sp_leida_fish",void 0),s([l(cc.Node)],e.prototype,"node_icon_laser",void 0),s([l(cc.Node)],e.prototype,"samefish_node",void 0),s([l(cc.Sprite)],e.prototype,"samefish_sp_icon",void 0),s([l(cc.Label)],e.prototype,"samefish_lbl_winscore",void 0),s([l(cc.Label)],e.prototype,"samefish_lbl_basescore",void 0),s([l(cc.Node)],e.prototype,"lightfish_node",void 0),s([l(cc.Label)],e.prototype,"lightfish_lbl_basescore",void 0),s([l(cc.Node)],e.prototype,"lightfish_node_icon",void 0),s([l(cc.Label)],e.prototype,"lightfish_lbl_winscore",void 0),s([l(cc.Node)],e.prototype,"drillcrab_node",void 0),s([l(cc.Label)],e.prototype,"drillcrab_lbl_basescore",void 0),s([l(cc.Label)],e.prototype,"drillcrab_lbl_winscore",void 0),s([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./FBFDataEntry":"FBFDataEntry"}],FBFBulletDaodan:[function(t,e,o){"use strict";cc._RF.push(e,"46921EGjI1OjISdBDAfZBRq","FBFBulletDaodan");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.motion=null,e.userItem=null,e.bulletId=null,e.control=null,e.angle=0,e.pos=null,e.isRun=!1,e.speed=2e3,e.addSpeed=400,e.winScore=0,e}return n(e,t),e.prototype.initView=function(){var t=this;this.node.active=!0,this.isRun=!0,this.icon.getComponent(cc.Animation).play("fishdie_bulletdaodan_1"),cc.tween(this.node).delay(2).call(function(){t.icon.getComponent(cc.Animation).play("fishdie_bulletdaodan_2")}).start()},e.prototype.setPos=function(t,e){this.angle=t,this.pos=e,this.node.angle=t,this.node.setPosition(e)},e.prototype.update=function(t){if(this.isRun){this.speed=this.speed-t*this.addSpeed,this.speed=Math.max(700,this.speed),this.speed<1200&&(this.icon.angle=this.icon.angle-90*t,this.motion.active=!1);var e=this.speed*t*Math.cos(2*Math.PI/360*this.angle),o=this.speed*t*Math.sin(2*Math.PI/360*this.angle),i=e+this.pos.x,n=o+this.pos.y,s=this.angle,a=this.node.parent.getContentSize();i<-1*a.width/2?(i=-1*a.width/2+1,s=180-s):i>a.width/2&&(i=a.width/2-1,s=180-s),n<-1*a.height/2?(n=-1*a.height/2+1,s=360-s):n>a.height/2&&(n=a.height/2-1,s=360-s),this.setPos(s,cc.v2(i,n))}},e.prototype.stopRun=function(){this.isRun=!1},e.prototype.getWorldPos=function(){var t=this.node.getPosition();return this.node.parent.convertToWorldSpaceAR(t)},s([c(cc.Node)],e.prototype,"icon",void 0),s([c(cc.Node)],e.prototype,"motion",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFBulletManage:[function(t,e,o){"use strict";cc._RF.push(e,"1c3afsIUXxCgpV0e6HVqcix","FBFBulletManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFBullet"),r=t("./FBFFishUtil"),c=cc._decorator,l=c.ccclass,h=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefab=null,e.bulletPool=null,e.control=null,e}return n(e,t),e.prototype.initView=function(t){this.control=t,this.bulletPool=new cc.NodePool},e.prototype.createNewBullet=function(t,e,o,i,n,s){if(null!=n){var r=this.bulletPool.get();null==r&&(r=cc.instantiate(this.bulletPrefab)),r.parent=this.node;var c=r.getComponent(a.default);c.initView(t,e,this),c.setPos(i,n),s>0&&c.setLockFish(s),c.run()}},e.prototype.removeBulletNode=function(t){this.bulletPool.put(t)},e.prototype.removeBulletNodeById=function(t){var e=this.node.children;for(var o in e)if(e[o].getComponent(a.default).bulletId==t)return void this.bulletPool.put(e[o])},e.prototype.showHitAni=function(t,e){this.control.playAudio(53),this.control.gameView.effectManage.createFishNet(e)},e.prototype.hitFish=function(t,e,o,i){i.isMonitor&&this.control.sendHitFish(i.userId,t,o.fishId,1,o)},e.prototype.getBulletCountByBatteryId=function(t){var e=this.node.children,o=0;for(var i in e)e[i].getComponent(a.default).userItem.batteryId==t&&(o+=1);return o},e.prototype.getBulletByBulletId=function(t){var e=this.node.children;for(var o in e){var i=e[o].getComponent(a.default);if(i.bulletId==t)return i}return null},e.prototype.getFishByFishId=function(t){return this.control.gameView.fishManage.getFishByFishId(t)},e.prototype.getNewBulletId=function(){return r.default.generateMixed(16)},s([h(cc.Prefab)],e.prototype,"bulletPrefab",void 0),s([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./FBFBullet":"FBFBullet","./FBFFishUtil":"FBFFishUtil"}],FBFBullet:[function(t,e,o){"use strict";cc._RF.push(e,"af049jIzyBIbanNwerdW0lt","FBFBullet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFDataEntry"),r=t("./FBFFish"),c=cc._decorator,l=c.ccclass,h=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.boxCollider=null,e.userItem=null,e.bulletId=null,e.bullteManage=null,e.angle=0,e.pos=null,e.isRun=!1,e.speed=700,e.isLock=!1,e.lockFishId=0,e}return n(e,t),e.prototype.initView=function(t,e,o){this.node.active=!0,this.userItem=t,this.bulletId=e,this.bullteManage=o,this.boxCollider=this.getComponent(cc.BoxCollider),this.isLock=!1,this.lockFishId=0},e.prototype.setIcon=function(){},e.prototype.setPos=function(t,e){this.angle=t,this.pos=e,this.node.angle=t,this.node.setPosition(e)},e.prototype.update=function(t){if(this.isRun){if(this.isLock){var e=this.bullteManage.getFishByFishId(this.lockFishId);if(e&&e.fishStatus==a.FishStatus.Swim&&0==e.isOutSwimSize){var o=e.node.getPosition();this.angle=360*Math.atan2(o.y-this.pos.y,o.x-this.pos.x)/(2*Math.PI)}else this.removeLock()}var i=this.speed*t*Math.cos(2*Math.PI/360*this.angle),n=this.speed*t*Math.sin(2*Math.PI/360*this.angle),s=i+this.pos.x,r=n+this.pos.y,c=this.angle,l=this.bullteManage.node.getContentSize();s<-1*l.width/2?(s=-1*l.width/2+1,c=180-c,this.removeLock()):s>l.width/2&&(s=l.width/2-1,c=180-c,this.removeLock()),r<-1*l.height/2?(r=-1*l.height/2+1,c=360-c,this.removeLock()):r>l.height/2&&(r=l.height/2-1,c=360-c,this.removeLock()),this.setPos(c,cc.v2(s,r))}},e.prototype.run=function(){this.isRun=!0},e.prototype.stopRun=function(){this.isRun=!1},e.prototype.onCollisionEnter=function(t,e){var o=t.node.getComponent(r.default);if(null==o&&(o=t.node.parent.getComponent(r.default)),1!=this.isLock||this.lockFishId==o.fishId){var i=cc.v2(e.world.aabb.x+e.world.aabb.width/2,e.world.aabb.y+e.world.aabb.height/2);cc.v2(t.world.aabb.x+t.world.aabb.width/2,t.world.aabb.y+t.world.aabb.height/2),o.fishStatus==a.FishStatus.Swim&&(o.showHitAni(),this.bullteManage.hitFish(this.bulletId,1,o,this.userItem),this.bullteManage.showHitAni(this.userItem,cc.v2(i.x,i.y)),this.bullteManage.removeBulletNode(this.node))}},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},e.prototype.setLockFish=function(t){this.isLock=!0,this.lockFishId=t},e.prototype.removeLock=function(){this.isLock=!1,this.lockFishId=0},s([h(cc.Sprite)],e.prototype,"icon",void 0),s([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./FBFDataEntry":"FBFDataEntry","./FBFFish":"FBFFish"}],FBFComWait:[function(t,e,o){"use strict";cc._RF.push(e,"01bb6z9ftlJlasNwMlGfuRl","FBFComWait");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cantent=null,e}return n(e,t),e.prototype.initView=function(){this.node.active=!1},e.prototype.showLoading=function(){var t=this;1!=this.node.active&&(this.node.active=!0,this.cantent.active=!1,this.node.stopAllActions(),cc.tween(this.node).delay(.3).call(function(){t.cantent.active=!0}).start())},e.prototype.closeLoading=function(){this.node.stopAllActions(),this.node.active=!1,this.cantent.active=!1},s([c(cc.Node)],e.prototype,"cantent",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFControl:[function(t,e,o){"use strict";cc._RF.push(e,"a1ea1HUxeZKb5/l6e3BzrIi","FBFControl");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFDataEntry"),r=t("./FBFGameInfo"),c=t("./FBFGameView"),l=t("./FBFI18n"),h=t("./FBFNetWork"),p=t("./FBFAudio"),f=cc._decorator,d=f.ccclass,u=(f.property,function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameView=null,t.gameInfo=null,t.netWork=null,t.i18n=null,t.audioManage=null,t.heartBeattime=0,t.lightAudioID=0,t}return n(o,e),o.prototype.start=function(){globalThis.playerInfo=t("PlayerInfo").getInstant,this.gameInfo=new r.FBFGameInfo,this.gameInfo.baseScoreList=globalThis.playerInfo.fishBetList,this.audioManage=this.getComponent(p.default),this.audioManage.initView(),this.gameView=this.getComponent(c.default),this.gameView.initView(this),this.netWork=this.getComponent(h.default),this.netWork.initView(this),this.i18n=this.getComponent(l.default),this.i18n.initView("en"),this.heartBeattime=0,this.lightAudioID=0,this.gameInfo.lockTrackFishTypeList=[]},o.prototype.playAudio=function(t){return this.audioManage.playAudio(t)},o.prototype.showDialogMessage=function(t,e,o,i){this.gameView.dialog_message.showMessage(t,e,o,i)},o.prototype.hideDialogMessage=function(t){this.gameView.dialog_message.closeView(t)},o.prototype.showTrip=function(t){this.gameView.showTripMsg(t)},o.prototype.showWaitLoading=function(t){t?this.gameView.comWait.showLoading():this.gameView.comWait.closeLoading()},o.prototype.setTrackFish=function(t){this.gameInfo.lockTrackFishTypeList=t,t.length>0&&(this.gameInfo.connType!=a.ConnType.Bullet&&(this.gameInfo.connType=a.ConnType.Bullet,this.gameInfo.selfUserItem.canonId=this.gameInfo.connType,this.sendChangeUserSkill(),this.updateWeaponType(this.gameInfo.selfUserItem.batteryId,this.gameInfo.connType)),this.gameInfo.isLock=!0,this.gameInfo.lockFishId=0,this.gameView.fishManage.checkLockFish(),this.gameView.batteryManage.update(0),this.gameView.batteryManage.setBatteryLock(this.gameInfo.selfUserItem.batteryId,1),this.gameView.lockManage.setBatteyLockFish(this.gameInfo.selfUserItem.batteryId,this.gameInfo.lockFishId),this.gameInfo.isAuto=!0,this.gameView.updataBtnWeapon(),this.gameView.updateBtnAuto(),this.gameView.updateBtnLock())},o.prototype.getFishPosByGroup=function(t,e,o){return this.gameView.fishManage.getFishPosByGroup(t,e,o)},o.prototype.getBulletTypeByBaseScore=function(t){return this.gameInfo.getButlletType(t)},o.prototype.sendLeaveRoom=function(){this.netWork.sendLeaveRoom()},o.prototype.sendChangeBaseScore=function(t){var e=this.gameInfo.getNextBaseScore(t),o=this.gameInfo.selfUserItem.userId;this.netWork.sendChangeBaseScore(o,e)},o.prototype.sendChangeUserSkill=function(){var t=this.gameInfo.selfUserItem.userId;this.netWork.sendChangeUserSkill(t)},o.prototype.updateWeaponType=function(t,e){this.gameView.batteryManage.changeBatteryWeapon(t,e)},o.prototype.sendBatteryFire=function(t,e){var o=this,i=this.gameInfo.getBaseScore(),n=this.gameInfo.selfUserItem.userId;if(i*this.gameInfo.roomBet>this.gameInfo.selfUserItem.score){var s=this.i18n.getTripStr("coinNotEnough");this.showTrip(s)}else{var r=this.gameInfo.lockFishId;this.gameInfo.connType==a.ConnType.Light&&(r=this.gameInfo.lightFishId);var c=this.gameView.bullteManage.getNewBulletId();if(this.netWork.sendBatteryFire(n,t,e,i,r,c),this.gameInfo.connType==a.ConnType.Bullet){var l=this.gameInfo.selfUserItem;this.gameView.batteryManage.setBatteryAngle(l.batteryId,e),this.gameView.batteryManage.showFireAniByBattryId(l.batteryId);var h=this.gameView.batteryManage.getBulletStartPos(l.batteryId,e),p=this.getBulletTypeByBaseScore(l.baseScore);this.gameView.bullteManage.createNewBullet(l,c,p,e,h,r)}this.gameInfo.connType==a.ConnType.Light&&(cc.audioEngine.stop(this.lightAudioID),this.playAudio(57).then(function(t){o.lightAudioID=t}))}},o.prototype.sendHitFish=function(t,e,o,i,n){var s=0;if(n.fishConfig.Type==a.FishType.FishBomb_Same){var r=n.getSameFishList();s=this.gameView.fishManage.getSameBombFishHP(r)}else n.fishConfig.Type==a.FishType.FishBomb_Full&&(s=this.gameView.fishManage.getFullBombFishHP());this.netWork.sendHitFish(t,e,o,i,!1,s)},o.prototype.sendHitFish2=function(t,e,o,i,n){void 0===n&&(n=!1),this.netWork.sendHitFish(t,e,o,i,n,0)},o.prototype.sendHappyPlay=function(){this.netWork.sendHappyPlay()},o.prototype.sendLaserNotice=function(t,e){this.netWork.sendLaserNotice(t,e)},o.prototype.onLaserNotice=function(t,e,o){var i=this,n=this.gameView.batteryManage.getBatteryById(e);n.setPaoAngle(o);var s=n.getPaoPos();this.gameView.effectManage.showLaserAni(s,o-90,function(){if(i.gameInfo.checkSelfByUid(t)){if(null!=i.gameInfo.laserHitInfo){var e=i.gameInfo.laserHitInfo,r=i.gameInfo.selfUserItem,c=e.winScore*i.gameInfo.roomBet,l=i.gameView.fishManage.getLaserFishList(s,o,c);for(var h in l)r.isMonitor&&i.sendHitFish2(r.userId,e.bombId,l[h].fishId,3,!0)}i.gameInfo.weaponType=a.WeaponType.Bullet,i.gameInfo.laserHitInfo=null,n.changeWeapon(i.gameInfo.connType)}})},o.prototype.onUserEnter=function(t){this.gameInfo.addUserItem(t),this.gameInfo.checkSelfByUid(t.userId)?(this.gameView.batteryManage.runNewBattery(t,!0),-1!=[2,3].indexOf(t.batteryId)&&(this.gameView.batteryManage.node.angle=180,this.gameView.fishManage.node.angle=180,this.gameView.bullteManage.node.angle=180,this.gameView.lockManage.node.angle=180)):this.gameView.batteryManage.runNewBattery(t,!1)},o.prototype.onUserLeave=function(t){var e=this.gameInfo.getUserItemByUid(t);this.gameView.batteryManage.clearBattery(e.batteryId),this.gameInfo.removeUseItem(t)},o.prototype.onFishEnter=function(t,e,o,i,n,s,a,r){this.gameView.fishManage.createFish(t,e,o,i,n,s,a,r)},o.prototype.onFishEnter2=function(t,e,o,i){var n=this,s=this.gameView.fishManage.getFishByFishId(i),a=s.getWorldPos();s.removeFishNode();for(var r=function(i){cc.tween(c.node).delay(1.5*i).call(function(){for(var s=0;s<12;s++)if(t[12*i+s]){var r=360*s/12;n.gameView.fishManage.createFish(t[12*i+s],e,o,cc.v2(0,0),r,0,null,null).setPathStartPos(a)}}).start()},c=this,l=0;l<3;l++)r(l)},o.prototype.onChangeBaseScore=function(t,e){var o=this.gameInfo.getUserItemByUid(t);o&&(o.baseScore=e,this.gameView.batteryManage.changeBatteryBaseScore(o.batteryId,o.baseScore),this.gameInfo.checkSelfByUid(o.userId)&&this.gameInfo.setBaseScore(e))},o.prototype.onBatteryFire=function(t,e,o,i,n){var s=this.gameInfo.getUserItemByUid(t);if(s){s.score=s.score-i*this.gameInfo.roomBet,this.gameView.batteryManage.setBatteryUserScore(s.batteryId);var r=this.gameView.batteryManage.getBatteryById(s.batteryId),c=(this.gameView.bullteManage.getBulletByBulletId(e),this.gameInfo.checkSelfByUid(s.userId));if(0==c)if(r.connType==a.ConnType.Bullet){this.gameView.batteryManage.setBatteryAngle(s.batteryId,o),this.gameView.batteryManage.showFireAniByBattryId(s.batteryId);var l=this.gameView.batteryManage.getBulletStartPos(s.batteryId,o),h=this.getBulletTypeByBaseScore(s.baseScore);this.gameView.bullteManage.createNewBullet(s,e,h,o,l,n),this.gameView.lightHitManage.setBatteyLightFish(s.batteryId,null),this.gameView.batteryManage.setBatteryLightFish(s.batteryId,0)}else r.connType==a.ConnType.Light&&(this.gameView.lightHitManage.setBatteyLightFish(s.batteryId,n),this.gameView.batteryManage.setBatteryLightFish(s.batteryId,n));else if(r.connType==a.ConnType.Light)if(c){var p=this.gameInfo.selfUserItem.userId,f=this.gameInfo.lightFishId,d=(h=1,this.gameView.fishManage.getFishByFishId(f));d&&this.sendHitFish(p,e,f,h,d)}else this.gameView.lightHitManage.setBatteyLightFish(s.batteryId,n),this.gameView.batteryManage.setBatteryLightFish(s.batteryId,n);else this.gameView.lightHitManage.setBatteyLightFish(s.batteryId,null),this.gameView.batteryManage.setBatteryLightFish(s.batteryId,0);this.gameInfo.connType==a.ConnType.Bullet&&(this.gameView.lockManage.setBatteyLockFish(s.batteryId,n),0==c&&this.gameView.batteryManage.setBatteryLock(s.batteryId,n),c&&this.playAudio(52))}},o.prototype.onFishDeath=function(t){var e=this;this.gameView.bullteManage.removeBulletNodeById(t.bulletId);var o=this.gameView.fishManage.getFishByFishId(t.fishId),i=this.gameInfo.getUserItemByUid(t.uId),n=this.gameView.batteryManage.getBatteryById(i.batteryId),s=t.winScore*this.gameInfo.roomBet,r=this.gameInfo.checkSelfByUid(t.uId);this.gameInfo.isLock&&this.gameInfo.lockFishId==t.fishId&&(this.gameInfo.lockFishId=0),this.gameInfo.connType==a.ConnType.Light&&this.gameInfo.lightFishId==t.fishId&&(this.gameInfo.lightFishId=0,n&&this.gameView.lightHitManage.setBatteyLightFish(i.batteryId,0));var c=!0;if(o&&-1!=[25,30].indexOf(o.fishConfig.Id)&&(c=!1),i&&-1!=[0,1,2,6,7].indexOf(t.butype)&&c&&(globalThis.playerInfo.useOneScore?i.score=i.score+s:i.winSocre=i.winSocre+s,null==o&&this.gameView.batteryManage.setBatteryUserScore(i.batteryId),this.gameView.batteryManage.showBatteryAddScoreAni(i.batteryId,s)),null!=i&&null!=o){var l=cc.v2(0,0);o&&(l=o.getWorldPos());var h=n.getPaoPos(),p=n.getBulletPos(),f=n.getIconGoldPos(),d=n.getTripAniPos();if(r&&this.playAudio(10+o.fishConfig.Id),o.fishConfig.Type==a.FishType.FishDoubel_Single)-1!=[3,4,5].indexOf(t.bulletType)?(this.gameView.effectManage.createGoalScoreAni(o.fishConfig.GoalCount,l,f,r,s),o.showDeadAni()):o.fishConfig.Id<=12?(this.gameView.effectManage.createGoalScoreAni(o.fishConfig.GoalCount,l,f,r,s),o.showDeadAni()):o.fishConfig.Id>=13&&o.fishConfig.Id<=18&&(o.showDeadMoveCircleAni(d,1.2,1.6,2),this.gameView.effectManage.playFishDeadAni_13_18(o.fishConfig.Id,s,l,d,function(){})),this.gameView.batteryManage.setBatteryUserScore(i.batteryId);else if(o.fishConfig.Type==a.FishType.FishBomb_Same){var u=n.getSameAniPos();o.showDeadStatus(),o.showDeadSameFish(),o.setFishWordPos(u);var g=o.getSameFishList();n.showSameFishAni(s,g[0]);var y=o.getSameFishList(),_=[],m=[];for(var b in y){var v=this.gameView.fishManage.getFishListByTypeId(y[b]);_=_.concat(v)}for(var b in _){var F=u.x+50-100*Math.random(),w=u.y+50-100*Math.random(),B=.4*Math.random();_[b].showDeadStatus(),_[b].showMoveAni(cc.v2(F,w),B,.8,!0),m.push(_[b].fishId)}r&&(this.gameView.batteryManage.fireEnable=!1),this.gameView.effectManage.playFishDeadAni_21(function(n){if("showScore"==n)for(var s in _){var a=_[s].getBitScore(),c=_[s].getWorldPos();e.gameView.effectManage.createGoalScoreAni(_[s].fishConfig.GoalCount,c,f,r,a),_[s].removeFishNode()}else if("sendMsg"==n){for(var l in m)i.isMonitor&&e.sendHitFish2(i.userId,t.bombId,m[l],3,!0);o.removeFishNode(),e.gameView.batteryManage.setBatteryUserScore(i.batteryId)}else"end"==n&&r&&(e.gameView.batteryManage.fireEnable=!0)})}else if(o.fishConfig.Type==a.FishType.FishBomb_LightChain){var I=n.getRandomTripAniPos();o.showDeadStatus(),o.showDeadLightFish(),o.showMoveAni(I,0,.8,!1);var S=this.gameView.fishManage.getLightFishList(s);for(b=0;b<S.length;b++){var P=n.getRandomTripAniPos();S[b].showDeadStatus(),S[b].showDeadLightFish(),S[b].showMoveAni(P,0,.8,!1)}cc.tween(this.node).call(function(){r&&(e.gameView.batteryManage.fireEnable=!1),n.showLightChainAni(s)}).delay(6).call(function(){var n=[];for(var s in S){var a=S[s].getBitScore(),c=S[s].getWorldPos(),l=S[s].fishConfig;n.push(S[s].fishId),e.gameView.effectManage.createGoalScoreAni(l.GoalCount,c,f,r,a),S[s].removeFishNode()}for(var h in n)i.isMonitor&&e.sendHitFish2(i.userId,t.bombId,n[h].fishId,3,!0);o.removeFishNode()}).delay(.3).call(function(){e.gameView.batteryManage.setBatteryUserScore(i.batteryId),r&&(e.gameView.batteryManage.fireEnable=!0)}).start()}else if(o.fishConfig.Type==a.FishType.FishBomb_Drill){r&&(this.gameView.batteryManage.fireEnable=!1),n.showDrillCrabAni(s);var C=n.getPaoAngle();this.gameView.effectManage.showDaoDanAni(p,C,function(o){var n=e.gameView.fishManage.node.convertToNodeSpaceAR(o),a=e.gameView.fishManage.getBombFishList(n,s);for(var c in a)i.isMonitor&&e.sendHitFish2(i.userId,t.bombId,a[c].fishId,3,!0);e.gameView.batteryManage.setBatteryUserScore(i.batteryId),r&&(e.gameView.batteryManage.fireEnable=!0)}),o.showDeadAni()}else if(o.fishConfig.Type==a.FishType.FishBomb_Local){this.gameView.effectManage.showBombAni(2,l),cc.tween(this.node).delay(.3).call(function(){e.gameView.effectManage.showBigScoreAni(h,d,s)}).start();var T=o.node.getPosition();for(var L in v=this.gameView.fishManage.getBombFishList(T,s))i.isMonitor&&this.sendHitFish2(i.userId,t.bombId,v[L].fishId,3,!0);o.showDeadAni(),this.gameView.batteryManage.setBatteryUserScore(i.batteryId)}else if(o.fishConfig.Type==a.FishType.FishBomb_Laser)this.gameView.effectManage.createFishNet(l),i.isMonitor&&(this.gameInfo.laserHitInfo=t,this.gameInfo.weaponType=a.WeaponType.Laser,n.setLaserMode(!0),this.gameInfo.connType==a.ConnType.Light&&(this.gameInfo.lightFishId=0,this.gameView.lightHitManage.setBatteyLightFish(i.batteryId,0))),o.showDeadAni();else if(o.fishConfig.Type==a.FishType.FishBomb_Special){var M=this.gameView.fishManage.getFullBombFish(),k=1+Math.floor(4*Math.random());this.gameView.effectManage.showFishDieRedPhoenixAni(s,o.fishConfig.Id,l,d,k,function(o,n){if("bomb"==o)for(var s=0;s<M.length;s++)i.isMonitor&&s>=M.length*(n/k)&&s<M.length*((n+1)/k)&&e.sendHitFish2(i.userId,t.bombId,M[s].fishId,3,!0);else"end"==o&&e.gameView.batteryManage.setBatteryUserScore(i.batteryId)}),o.showDeadAni()}else if(o.fishConfig.Type==a.FishType.Fish_Freezing)cc.Tween.stopAllByTag(20004),cc.tween(this.node).tag(20004).call(function(){e.gameView.effectManage.showFreezeAni(l)}).delay(.3).call(function(){var t=e.gameView.fishManage.getAllFish();for(var o in e.gameView.fishManage.swimEnable=!1,t)t[o].pauseRun()}).delay(15).call(function(){var t=e.gameView.fishManage.getAllFish();for(var o in e.gameView.fishManage.swimEnable=!0,t)t[o].resumeRun()}).start(),r&&this.playAudio(33),o.showDeadAni(),this.gameView.batteryManage.setBatteryUserScore(i.batteryId);else if(o.fishConfig.Type==a.FishType.FishBomb_Serial){o.showDeadStatus();var A=[],N=cc.tween(this.node);for(b=0;b<3;b++)N=N.call(function(){o.showRandomMoveAni()}).delay(2).call(function(){var t=o.getWorldPos();e.gameView.effectManage.showFishDieLight(t)}).delay(1).call(function(){var t=o.getWorldPos();e.gameView.effectManage.showBombAni(2,t)}).delay(1).call(function(){var t=o.node.getPosition(),i=e.gameView.fishManage.getBombFishList(t,s/3);for(var n in i)i[n].showDeadStatus();A=A.concat(i)});N.call(function(){var n=[];for(var s in A){var a=A[s].getBitScore(),c=A[s].getWorldPos(),l=A[s].fishConfig;n.push(A[s].fishId),e.gameView.effectManage.createGoalScoreAni(l.GoalCount,c,f,r,a),A[s].removeFishNode()}for(var h in n)i.isMonitor&&e.sendHitFish2(i.userId,t.bombId,n[h].fishId,3,!0);o.removeFishNode()}).delay(.5).call(function(){e.gameView.effectManage.showBigScoreAni(h,d,s)}).start()}else if(o.fishConfig.Type==a.FishType.FishBomb_Full){var O=this.gameView.fishManage.getAllFish(),R=[];for(var b in O)R.push(O[b].fishId),O[b].showDeadStatus();o.showDeadStatus(),this.gameView.fishManage.swimEnable=!1;var j=this.node.convertToWorldSpaceAR(cc.v2(0,0));cc.Tween.stopAllByTag(20005),cc.tween(this.node).tag(20005).call(function(){o.showFullBombAni()}).delay(2).call(function(){e.gameView.effectManage.showBombAni(2,j)}).delay(.6).call(function(){e.gameView.effectManage.showFullBombAni()}).delay(.2).call(function(){for(var t in O)O[t].showFullBombMoveAni()}).delay(2).call(function(){for(var t=function(t){var o=Math.min(1,.1*t);cc.tween(e.node).delay(o).call(function(){var o=O[t].getBitScore(),i=O[t].getWorldPos(),n=O[t].fishConfig;e.gameView.effectManage.createGoalScoreAni(n.GoalCount,i,f,r,o),O[t].removeFishNode()}).start()},o=0;o<O.length;o++)t(o)}).delay(2.2).call(function(){for(var o in R)i.isMonitor&&e.sendHitFish2(i.userId,t.bombId,R[o].fishId,3,!0);e.gameView.effectManage.showBombAni(1,j)}).delay(.8).call(function(){e.gameView.effectManage.showBigScoreAni(h,d,s),e.gameView.batteryManage.setBatteryUserScore(i.batteryId),e.gameView.fishManage.swimEnable=!0}).start()}else o.fishConfig.Type==a.FishType.FishBomb_HappayPlay&&(cc.tween(this.node).call(function(){e.gameView.effectManage.showBombAni(3,l)}).delay(1.2).call(function(){n.showHappyAni(),r&&(e.gameView.showBtnPush(!0),e.gameView.batteryManage.fireEnable=!1)}).delay(30).call(function(){r&&(e.gameView.showBtnPush(!1),e.gameView.batteryManage.fireEnable=!0);var t=e.node.convertToWorldSpaceAR(cc.v2(0,0));e.gameView.effectManage.showBombAni(1,t)}).delay(.8).call(function(){var t=n.getHappyWinScore();e.gameView.effectManage.showBigScoreAni(h,d,t),n.closeHappyAni()}).start(),o.showDeadAni())}},o.prototype.onUserScoreChange=function(t,e){var o=this.gameInfo.getUserItemByUid(t);o&&(o.score=e,this.gameView.batteryManage.setBatteryUserScore(o.batteryId))},o.prototype.onStrikeResult=function(t,e){var o=this.gameInfo.getUserItemByUid(t);if(o){globalThis.playerInfo.useOneScore?o.score=o.score+e:o.winSocre=o.winSocre+e;var i=this.gameView.batteryManage.getBatteryById(o.batteryId);i.showHappyAniWinScore(e),i.updateUserScore(),this.gameView.showBtnPushAni()}},o.prototype.setMap=function(t){this.gameView.mapManage.setMap(t)},o.prototype.switchFishGroupMap=function(t){var e=this,o=-1;cc.tween(this.node).call(function(){e.gameView.batteryManage.fireEnable=!1;var i=e.gameView.fishManage.getAllFish();for(var n in i)i[n].showOutMoveAni();e.playAudio(56).then(function(t){o=t}),e.gameView.showSwitchFishGroupMapAni(t)}).delay(1).call(function(){e.gameView.batteryManage.fireEnable=!0,e.netWork.sendChangeScene()}).delay(1).call(function(){-1!=o&&cc.audioEngine.stopEffect(o)}).start()},o.prototype.update=function(){},s([d],o)}(cc.Component));o.default=u,cc._RF.pop()},{"./FBFAudio":"FBFAudio","./FBFDataEntry":"FBFDataEntry","./FBFGameInfo":"FBFGameInfo","./FBFGameView":"FBFGameView","./FBFI18n":"FBFI18n","./FBFNetWork":"FBFNetWork",PlayerInfo:void 0}],FBFDataEntry:[function(t,e,o){"use strict";cc._RF.push(e,"304c2IFxRdKGodoIpTJXxno","FBFDataEntry"),Object.defineProperty(o,"__esModule",{value:!0}),o.ConnType=o.WeaponType=o.FishStatus=o.PathType=o.FishType=o.UserItem=void 0;o.UserItem=function(){this.niceName=null,this.headId=null,this.userId=null,this.userType=null,this.score=null,this.winSocre=null,this.canonId=null,this.baseScore=null,this.seatId=null,this.batteryId=null,this.isMonitor=null},function(t){t[t.FishDoubel_Single=1]="FishDoubel_Single",t[t.FishBomb_Same=2]="FishBomb_Same",t[t.FishBomb_LightChain=3]="FishBomb_LightChain",t[t.FishBomb_Drill=4]="FishBomb_Drill",t[t.FishBomb_Local=5]="FishBomb_Local",t[t.FishBomb_Laser=6]="FishBomb_Laser",t[t.FishBomb_Special=7]="FishBomb_Special",t[t.FishBomb_Serial=10]="FishBomb_Serial",t[t.Fish_Freezing=11]="Fish_Freezing",t[t.FishBomb_Full=12]="FishBomb_Full",t[t.FishBomb_HappayPlay=13]="FishBomb_HappayPlay"}(o.FishType||(o.FishType={})),function(t){t[t.Line=1]="Line",t[t.Bezier=2]="Bezier"}(o.PathType||(o.PathType={})),function(t){t[t.Swim=1]="Swim",t[t.Wait=2]="Wait",t[t.Out=3]="Out",t[t.Dead=4]="Dead"}(o.FishStatus||(o.FishStatus={})),function(t){t[t.Bullet=1]="Bullet",t[t.Laser=2]="Laser",t[t.Wait=3]="Wait"}(o.WeaponType||(o.WeaponType={})),function(t){t[t.Bullet=1]="Bullet",t[t.Light=2]="Light"}(o.ConnType||(o.ConnType={})),cc._RF.pop()},{}],FBFDialogHelp:[function(t,e,o){"use strict";cc._RF.push(e,"737a5W9i4dIBqG9at3boyF4","FBFDialogHelp");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_close=null,e.node_bg=null,e.control=null,e}return n(e,t),e.prototype.initView=function(t){this.control=t,this.btn_close.on("click",this.onClick_close.bind(this)),this.show(!1)},e.prototype.show=function(t){this.node.active=t,1==t&&(this.node_bg.setScale(.5),cc.tween(this.node_bg).to(.1,{scale:1}).start())},e.prototype.onClick_close=function(){this.control.playAudio(50),this.show(!1)},s([c(cc.Node)],e.prototype,"btn_close",void 0),s([c(cc.Node)],e.prototype,"node_bg",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFDialogLockSet:[function(t,e,o){"use strict";cc._RF.push(e,"5cd78FLGLFE9rU44cViWPZb","FBFDialogLockSet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFHelpFishItem"),r=cc._decorator,c=r.ccclass,l=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_close=null,e.btn_reset=null,e.fishNodePanel=null,e.fishPrefab=null,e.control=null,e.fishTypeList=[],e}return n(e,t),e.prototype.initView=function(t){this.control=t,this.initFishList(),this.btn_close.on("click",this.onClick_close.bind(this)),this.btn_reset.on("click",this.onClick_reset.bind(this)),this.show(!1,null)},e.prototype.show=function(t,e){if(0==t)this.node.active=!1,this.fishTypeList=[];else for(var o in this.node.active=!0,this.fishTypeList=e,this.fishNodePanel.children){var i=this.fishNodePanel.children[o].getComponent(a.default),n=-1!=this.fishTypeList.indexOf(i.fishConfig.Id);i.setChoose(n)}},e.prototype.onClick_close=function(){this.control.playAudio(50),this.control.setTrackFish(this.fishTypeList),this.show(!1,null)},e.prototype.onClick_reset=function(){for(var t in this.control.playAudio(46),this.fishTypeList=[],this.fishNodePanel.children)this.fishNodePanel.children[t].getComponent(a.default).setChoose(!1)},e.prototype.initFishList=function(){var t=this.control.gameView.fishManage.fishConfigJson,e=270*Math.ceil(t.json.length/5);this.fishNodePanel.height=e,this.fishNodePanel.removeAllChildren();for(var o=0;o<t.json.length;o++){var i=t.json[o],n=o%5*300-600,s=-1*(135+270*Math.floor(o/5)),r=cc.instantiate(this.fishPrefab);r.parent=this.fishNodePanel,r.setPosition(n,s),r.getComponent(a.default).initView(this.control,i,!0,this.clickChoose.bind(this))}},e.prototype.clickChoose=function(t,e){if(1==t)-1==this.fishTypeList.indexOf(e.Id)&&this.fishTypeList.push(e.Id);else{var o=this.fishTypeList.indexOf(e.Id);-1!=o&&this.fishTypeList.splice(o,1)}},s([l(cc.Node)],e.prototype,"btn_close",void 0),s([l(cc.Node)],e.prototype,"btn_reset",void 0),s([l(cc.Node)],e.prototype,"fishNodePanel",void 0),s([l(cc.Prefab)],e.prototype,"fishPrefab",void 0),s([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./FBFHelpFishItem":"FBFHelpFishItem"}],FBFDialogMessage:[function(t,e,o){"use strict";cc._RF.push(e,"9d5909bYp1LnICamPIvooIe","FBFDialogMessage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_bg=null,e.btn_ok=null,e.btn_cancel=null,e.btn_close=null,e.lbl_message=null,e.msgType=null,e.type=null,e.control=null,e.funC=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.btn_ok.on("click",this.onClick_ok.bind(this)),this.btn_cancel.on("click",this.onClick_cancel.bind(this)),this.btn_close.on("click",this.onClick_cancel.bind(this)),this.show(!1)},e.prototype.show=function(t){this.node.active=t,1==t&&(this.node_bg.setScale(.5),cc.tween(this.node_bg).to(.15,{scale:1}).start())},e.prototype.closeView=function(t){this.msgType==t&&(this.show(!1),this.funC=null)},e.prototype.onClick_ok=function(){this.control.playAudio(50),"leave"!=this.type&&this.show(!1),null!=this.funC&&(this.funC("ok"),this.funC=null)},e.prototype.onClick_cancel=function(){this.control.playAudio(50),this.show(!1),null!=this.funC&&(this.funC("cancel"),this.funC=null)},e.prototype.showMessage=function(t,e,o,i){this.msgType=t,this.type=e,this.funC=i,this.lbl_message.string=o,this.show(!0)},s([c(cc.Node)],e.prototype,"node_bg",void 0),s([c(cc.Node)],e.prototype,"btn_ok",void 0),s([c(cc.Node)],e.prototype,"btn_cancel",void 0),s([c(cc.Node)],e.prototype,"btn_close",void 0),s([c(cc.Label)],e.prototype,"lbl_message",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFDialogMsgTestRoom:[function(t,e,o){"use strict";cc._RF.push(e,"4131bOENo9Adapqn8LHB4CZ","FBFDialogMsgTestRoom");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_ok=null,e.btn_cancel=null,e}return n(e,t),e.prototype.initView=function(){var t=this;this.btn_ok.on(cc.Node.EventType.TOUCH_END,function(){t.closeDialog()}),this.btn_cancel.on(cc.Node.EventType.TOUCH_END,function(){t.closeDialog()}),1==globalThis.Lhjconfig.IsTestRoom?this.showDialog():this.closeDialog()},e.prototype.showDialog=function(){this.node.active=!0},e.prototype.closeDialog=function(){this.node.active=!1},e.prototype.isVisible=function(){return this.node.active},s([c(cc.Node)],e.prototype,"btn_ok",void 0),s([c(cc.Node)],e.prototype,"btn_cancel",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFDialogSetting:[function(t,e,o){"use strict";cc._RF.push(e,"ed5cabaksdKXKUo8edNvwgQ","FBFDialogSetting");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.control=null,e}return n(e,t),e.prototype.initView=function(t){this.control=t,this.show(!1)},e.prototype.show=function(t){this.node.active=t,1==t&&(this.setBtnVolumeStatus("music",cc.audioEngine.getMusicVolume()>0),this.setBtnVolumeStatus("sound",cc.audioEngine.getEffectsVolume()>0))},e.prototype.onClick_close=function(){this.control.playAudio(50),this.show(!1)},e.prototype.setBtnVolumeStatus=function(t,e){var o=e?1:0;"music"==t?(cc.audioEngine.setMusicVolume(o),cc.sys.localStorage.setItem("FMS_MusicChk",o)):(cc.audioEngine.setEffectsVolume(o),cc.sys.localStorage.setItem("FMS_SoundChk",o))},e.prototype.onClick_music=function(){this.control.playAudio(50),cc.audioEngine.getMusicVolume()>=1?this.setBtnVolumeStatus("music",!1):this.setBtnVolumeStatus("music",!0)},e.prototype.onClick_sound=function(){this.control.playAudio(50),cc.audioEngine.getEffectsVolume()>=1?this.setBtnVolumeStatus("sound",!1):this.setBtnVolumeStatus("sound",!0)},s([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],FBFEffectManage:[function(t,e,o){"use strict";cc._RF.push(e,"ef3fdn2w+JPTqWio9VZADLT","FBFEffectManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFBulletDaodan"),r=t("./FBFFishDie_RedPhoenix"),c=t("./FBFFishNet"),l=t("./FBFFishUtil"),h=t("./FBFLightLine"),p=t("./FBFScore"),f=cc._decorator,d=f.ccclass,u=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlas_effect_list=[],e.layer_effect_down=null,e.layer_effect_mid=null,e.fishNetPrefab=null,e.scorePrefab=null,e.goldPrefab=null,e.fishdie_tripPrefab_1=null,e.fishdie_tripPrefab_2=null,e.fishdie_tripPrefab_3=null,e.fishdie_bomb=null,e.fishdie_redPhoenix=null,e.fishdie_laser_Prefab=null,e.fishdie_daodan_Prefab=null,e.freeze_Pfb=null,e.fishDie_light_Prefab=null,e.fishDie_lightLine_Prefab=null,e.fishDie_fullBombLight_Prefab=null,e.control=null,e.fishNetPool=null,e.frameList=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.fishNetPool=new cc.NodePool,this.frameList=[];for(var e=0;e<this.atlas_effect_list.length;e++)this.frameList=this.frameList.concat(this.atlas_effect_list[e].getSpriteFrames());this.node.removeAllChildren(),this.layer_effect_down.removeAllChildren(),this.layer_effect_mid.removeAllChildren()},e.prototype.getSpFrameList=function(t,e,o){for(var i=[],n=e;n<o;n++)for(var s in this.frameList)if(this.frameList[s].name==t+""+n){i.push(this.frameList[s]);break}return i},e.prototype.getSpFrame=function(t){var e=null;for(var o in this.frameList)if(this.frameList[o].name==t){e=this.frameList[o];break}return e},e.prototype.createFishNet=function(t){var e=this.fishNetPool.get();null==e&&(e=cc.instantiate(this.fishNetPrefab)),e.parent=this.layer_effect_mid;var o=this.layer_effect_mid.convertToNodeSpaceAR(t);e.getComponent(c.default).initView(this,null,o)},e.prototype.removeFishNetNode=function(t){this.fishNetPool.put(t)},e.prototype.createGoalScoreAni=function(t,e,o,i,n){var s=this;cc.tween(this.node).call(function(){s.createScoreIcon(n,i,e)}).delay(.5).call(function(){s.createGoalAni(t,e,o,i)}).start()},e.prototype.createGoalAni=function(t,e,o,i){for(var n=this.layer_effect_mid.convertToNodeSpaceAR(e),s=this.layer_effect_mid.convertToNodeSpaceAR(o),a=Math.sqrt(Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2))/400,r=function(e){var o=cc.instantiate(c.goldPrefab);o.setPosition(n.x+45*(e-(t-1)/2),n.y),o.parent=c.node,o.opacity=0,o.scale=.6;var i=o.getComponent(cc.Sprite),r=c.getSpFrameList("\u91d1\u5e01_",0,19);l.default.showFrameAnimation(i,r,1.9,!1,!0,-1,null),cc.tween(o).to(.1*e,{opacity:255}).to(a,{position:cc.v3(s)}).call(function(){o.removeFromParent()}).start()},c=this,h=0;h<t;h++)r(h);i&&this.control.playAudio(54)},e.prototype.createScoreIcon=function(t,e,o){var i=this.node.convertToNodeSpaceAR(o),n=cc.instantiate(this.scorePrefab);n.setPosition(i),n.parent=this.node,n.zIndex=1e3,n.getComponent(p.default).showAni(t,e)},e.prototype.createScoreIconMove=function(t,e,o,i,n){o=this.node.convertToNodeSpaceAR(o),i=this.node.convertToNodeSpaceAR(i);var s=cc.instantiate(this.scorePrefab);s.setPosition(o),s.parent=this.node,s.getComponent(p.default).showMoveAni(t,e,o,i,n)},e.prototype.showLblScore=function(t,e){t.string="0.00";for(var o=cc.tween(t.node),i=function(i){o=o.delay(.1).call(function(){t.string=((i+1)*e/20/globalThis.playerInfo.exchangeRate).toFixed(2)})},n=0;n<20;n++)i(n);o.call(function(){t.string=(e/globalThis.playerInfo.exchangeRate).toFixed(2)}).to(.15,{scale:1.3}).to(.15,{scale:1}).start()},e.prototype.playFishDeadAni_13_18=function(t,e,o,i){var n=this;o=this.node.convertToNodeSpaceAR(o),i=this.node.convertToNodeSpaceAR(i);var s=cc.instantiate(this.fishdie_tripPrefab_1);s.setPosition(o),s.parent=this.node;var a=s.getChildByName("node_score"),r=s.getChildByName("bombSpine");a.active=!1,r.active=!0,r.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),cc.tween(s).delay(1).call(function(){r.active=!1,a.active=!0,n.showLblScore(a.getChildByName("lblScore").getComponent(cc.Label),e),n.control.playAudio(60)}).delay(.2).to(1.6,{position:i}).delay(2).call(function(){a.active=!1}).delay(.5).call(function(){s.removeFromParent()}).start()},e.prototype.playFishDeadAni_18_19=function(t,e,o,i,n){var s=this;o=this.node.convertToNodeSpaceAR(o),i=this.node.convertToNodeSpaceAR(i);var a=cc.instantiate(this.fishdie_tripPrefab_2);a.setPosition(o),a.parent=this.node;var r=a.getChildByName("node_score"),c=a.getChildByName("bombSpine");r.active=!1,c.active=!0;var l="18fish";19==t&&(l="19fish"),c.getComponent(sp.Skeleton).setAnimation(0,l,!1),this.control.playAudio(62),cc.tween(a).delay(.8).call(function(){r.active=!0,r.getChildByName("bg_1").active=!0,r.getChildByName("bg_2").active=!1,r.getChildByName("lblScore").getComponent(cc.Label).string=(e/globalThis.playerInfo.exchangeRate).toFixed(2),s.control.playAudio(60)}).delay(1.2).to(1.5,{position:i}).delay(.3).call(function(){cc.tween(r.getChildByName("lblScore")).to(.15,{scale:1.2}).to(.15,{scale:1}).start()}).delay(1.7).to(.5,{opacity:0}).call(function(){n&&n(),a.removeFromParent()}).start()},e.prototype.playFishDeadAni_21=function(t){cc.tween(this.node).delay(3.4).call(function(){t&&t("showScore")}).delay(.2).call(function(){t&&t("sendMsg")}).delay(3.6).call(function(){t&&t("end")}).start()},e.prototype.showFishDieRedPhoenixAni=function(t,e,o,i,n,s){var a=this.node.convertToNodeSpaceAR(o),c=this.node.convertToNodeSpaceAR(i),l=cc.instantiate(this.fishdie_redPhoenix);l.parent=this.node,l.setPosition(a),l.getComponent(r.default).show(this.control,e,t,n,c,s)},e.prototype.showLaserAni=function(t,e,o){var i=this.node.convertToNodeSpaceAR(t),n=cc.instantiate(this.fishdie_laser_Prefab);n.parent=this.node,n.setPosition(i),n.angle=e,n.getChildByName("icon").getComponent(cc.Animation).play();var s=0;this.control.playAudio(58).then(function(t){s=t}),cc.tween(n).delay(.4).call(function(){o()}).delay(.4).call(function(){cc.audioEngine.stopEffect(s),n.removeFromParent()}).start()},e.prototype.showBombAni=function(t,e){var o=this.node.convertToNodeSpaceAR(e),i=cc.instantiate(this.fishdie_bomb);if(i.setPosition(o),i.parent=this.node,1==t)(n=i.getChildByName("bomb_1")).active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"baozha",!1),this.control.playAudio(59);else if(2==t)(n=i.getChildByName("bomb_2")).active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"26-27SerialBombs",!1),this.control.playAudio(62);else if(3==t){var n;(n=i.getChildByName("bomb_3")).active=!0,n.getComponent(sp.Skeleton).setAnimation(0,"30HappyFish",!1),this.control.playAudio(61)}cc.tween(i).delay(3).call(function(){i.removeFromParent()}).start()},e.prototype.showBigScoreAni=function(t,e,o){var i=this.node.convertToNodeSpaceAR(t),n=this.node.convertToNodeSpaceAR(e),s=cc.instantiate(this.fishdie_tripPrefab_3);s.setPosition(i),s.parent=this.node;var a=s.getChildByName("lblScore");a.getComponent(cc.Label).string=(o/globalThis.playerInfo.exchangeRate).toFixed(2),this.control.playAudio(55),cc.tween(s).delay(.3).to(.8,{position:cc.v3(n)}).delay(.3).call(function(){cc.tween(a).to(.15,{scale:1.2}).to(.15,{scale:1}).start()}).delay(2.5).call(function(){s.removeFromParent()}).start()},e.prototype.showDaoDanAni=function(t,e,o){var i=this,n=this.node.convertToNodeSpaceAR(t),s=cc.instantiate(this.fishdie_daodan_Prefab);s.parent=this.node;var r=s.getComponent(a.default);r.initView(),r.setPos(e,n),cc.tween(this.node).delay(4).call(function(){r.stopRun(),s.opacity=0;var t=r.getWorldPos();i.showBombAni(1,t)}).delay(.3).call(function(){var t=r.getWorldPos();o&&o(t),s.removeFromParent()}).start()},e.prototype.showFreezeAni=function(t){var e=this.node.convertToNodeSpaceAR(t),o=cc.instantiate(this.freeze_Pfb);o.parent=this.node,o.setPosition(e);var i=o.getChildByName("spine").getComponent(sp.Skeleton);i.setAnimation(0,"25FreezingBomb",!1),i.addAnimation(0,"25FreezingBomb2",!1),cc.tween(o).delay(15).call(function(){o.removeFromParent()}).start(),this.control.playAudio(68)},e.prototype.showFishDieLight=function(t){var e=this.node.convertToNodeSpaceAR(t),o=cc.instantiate(this.fishDie_light_Prefab);for(var i in o.parent=this.node,o.setPosition(e),o.children){o.children[i].angle=180*Math.random();var n=o.children[i].getComponent(cc.Sprite),s=this.getSpFrameList("light_",1,8);l.default.showFrameAnimation(n,s,s.length/10,!1,!0,-1,null)}cc.tween(o).delay(1.2).call(function(){o.removeFromParent()}).start()},e.prototype.playLightChainAni=function(t,e){for(var o in this.control.playAudio(57),e){var i=cc.instantiate(this.fishDie_lightLine_Prefab);i.parent=this.node;var n=i.getComponent(h.default),s=this.getSpFrameList("effect3_",0,8);n.showAni(t,e[o],1.2,s)}},e.prototype.showFullBombAni=function(){var t=this,e=cc.instantiate(this.fishDie_fullBombLight_Prefab);e.parent=this.layer_effect_down;var o=e.getChildByName("spine_1"),i=e.getChildByName("spine_2");o.active=!0,i.active=!1;var n=o.getComponent(sp.Skeleton),s=i.getComponent(sp.Skeleton);n.setAnimation(0,"29Bom1",!1),n.addAnimation(0,"29Bomb2",!0),this.control.playAudio(62),cc.tween(e).delay(.3).call(function(){i.active=!0,s.setAnimation(0,"liuxing",!0),t.control.playAudio(63)}).delay(3.9).call(function(){n.setAnimation(0,"29Bomb3",!1),i.active=!1,t.control.playAudio(62)}).delay(.8).call(function(){e.removeFromParent()}).start()},e.prototype.showSpreadGoldAni=function(t,e){var o=this.layer_effect_mid.convertToNodeSpaceAR(t);o=cc.v2(0,0);for(var i=function(t){var i=250-50*Math.floor(t/10)-50*Math.random()+30,s=i/300,a=2*Math.PI*Math.random(),r=cc.v2(Math.cos(a)*i,Math.sin(a)*i),c=cc.instantiate(n.goldPrefab);c.setPosition(o.x,o.y),c.parent=n.node;var h=c.getComponent(cc.Sprite),p="goldjinbi_";0==e&&(p="goldjinbi_");var f=n.getSpFrameList(p,1,17);h.spriteFrame=f[0],c.opacity=0,cc.tween(c).delay(Math.max(0,.9-s)).call(function(){c.opacity=255,l.default.showFrameAnimation(h,f,1,!1,!0,-1,null)}).to(s,{position:cc.v3(r)}).delay(.2+.01*t/2).call(function(){c.removeFromParent()}).start()},n=this,s=0;s<50;s++)i(s)},e.prototype.showDrillAni=function(){},s([u([cc.SpriteAtlas])],e.prototype,"atlas_effect_list",void 0),s([u(cc.Node)],e.prototype,"layer_effect_down",void 0),s([u(cc.Node)],e.prototype,"layer_effect_mid",void 0),s([u(cc.Prefab)],e.prototype,"fishNetPrefab",void 0),s([u(cc.Prefab)],e.prototype,"scorePrefab",void 0),s([u(cc.Prefab)],e.prototype,"goldPrefab",void 0),s([u(cc.Prefab)],e.prototype,"fishdie_tripPrefab_1",void 0),s([u(cc.Prefab)],e.prototype,"fishdie_tripPrefab_2",void 0),s([u(cc.Prefab)],e.prototype,"fishdie_tripPrefab_3",void 0),s([u(cc.Prefab)],e.prototype,"fishdie_bomb",void 0),s([u(cc.Prefab)],e.prototype,"fishdie_redPhoenix",void 0),s([u(cc.Prefab)],e.prototype,"fishdie_laser_Prefab",void 0),s([u(cc.Prefab)],e.prototype,"fishdie_daodan_Prefab",void 0),s([u(cc.Prefab)],e.prototype,"freeze_Pfb",void 0),s([u(cc.Prefab)],e.prototype,"fishDie_light_Prefab",void 0),s([u(cc.Prefab)],e.prototype,"fishDie_lightLine_Prefab",void 0),s([u(cc.Prefab)],e.prototype,"fishDie_fullBombLight_Prefab",void 0),s([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"./FBFBulletDaodan":"FBFBulletDaodan","./FBFFishDie_RedPhoenix":"FBFFishDie_RedPhoenix","./FBFFishNet":"FBFFishNet","./FBFFishUtil":"FBFFishUtil","./FBFLightLine":"FBFLightLine","./FBFScore":"FBFScore"}],FBFFishDie_RedPhoenix:[function(t,e,o){"use strict";cc._RF.push(e,"460dfKaD9VPQ60TUhiQdKxK","FBFFishDie_RedPhoenix");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_bomb_1=null,e.node_fish_left=null,e.node_fish_right=null,e.node_leftList=[],e.node_rightList=[],e.node_ball=null,e.lbl_seqno=null,e.node_bomb_2=null,e.node_cicle=null,e.lbl_winScore=null,e.totalTimes=0,e}return n(e,t),e.prototype.show=function(t,e,o,i,n,s){var a=this;this.totalTimes=i,this.lbl_winScore.string=""+(o/globalThis.playerInfo.exchangeRate).toFixed(2),this.node_fish_left.active=!1,this.node_fish_right.active=!1,this.node_ball.active=!1,this.node_bomb_1.node.active=!1,this.node_bomb_2.node.active=!1,this.node_cicle.active=!1,this.node_leftList[0].active=21==e,this.node_leftList[1].active=22==e,this.node_leftList[2].active=26==e,this.node_leftList[3].active=27==e,this.node_leftList[4].active=28==e,this.node_rightList[0].active=21==e,this.node_rightList[1].active=22==e,this.node_rightList[2].active=26==e,this.node_rightList[3].active=27==e,this.node_rightList[4].active=28==e,t.playAudio(66);for(var r=cc.tween(this.node).call(function(){a.node_bomb_2.node.active=!0,a.node_bomb_2.setAnimation(0,"baozha",!1),t.playAudio(62)}).delay(.8).call(function(){a.node_bomb_2.node.active=!1,a.node_bomb_1.node.active=!0,a.node_bomb_1.setAnimation(0,"boom",!1),t.playAudio(64)}).delay(.5).call(function(){a.lbl_seqno.string="1",a.node_ball.scale=.2,a.node_ball.active=!0,cc.tween(a.node_ball).to(.5,{scale:.4}).start()}).delay(1).call(function(){a.node_bomb_1.node.active=!1}).to(.5,{position:cc.v3(0,0,0)}),c=function(e){r=r.delay(.5).call(function(){a.lbl_seqno.string=""+e,a.node_fish_left.active=!0,a.node_fish_left.setPosition(-900,0),cc.tween(a.node_fish_left).to(.8,{position:cc.v3(900,0,0)}).call(function(){a.node_fish_left.active=!1}).start(),a.node_fish_right.active=!0,a.node_fish_right.setPosition(900,0),cc.tween(a.node_fish_right).to(.8,{position:cc.v3(-900,0,0)}).call(function(){a.node_fish_right.active=!1}).start(),cc.tween(a.node_ball).delay(.2).to(.2,{scale:.6}).call(function(){a.lbl_seqno.string=""+(e+1)}).to(.2,{scale:.4}).start(),t.playAudio(67)}).delay(.4).call(function(){t.playAudio(59),a.node_bomb_2.node.active=!0,a.node_bomb_2.setAnimation(0,"baozha",!1),t.playAudio(65),s("bomb",e-1)}).delay(1.5).call(function(){a.node_bomb_2.node.active=!1})},l=1;l<=this.totalTimes;l++)c(l);r.call(function(){a.node_ball.active=!1,s("end")}).delay(.1).call(function(){a.node_cicle.active=!0,t.playAudio(55)}).to(1,{position:cc.v3(n)}).delay(2).call(function(){a.node.removeFromParent()}).start()},s([c(sp.Skeleton)],e.prototype,"node_bomb_1",void 0),s([c(cc.Node)],e.prototype,"node_fish_left",void 0),s([c(cc.Node)],e.prototype,"node_fish_right",void 0),s([c([cc.Node])],e.prototype,"node_leftList",void 0),s([c(cc.Node)],e.prototype,"node_rightList",void 0),s([c(cc.Node)],e.prototype,"node_ball",void 0),s([c(cc.Label)],e.prototype,"lbl_seqno",void 0),s([c(sp.Skeleton)],e.prototype,"node_bomb_2",void 0),s([c(cc.Node)],e.prototype,"node_cicle",void 0),s([c(cc.Label)],e.prototype,"lbl_winScore",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFFishManage:[function(t,e,o){"use strict";cc._RF.push(e,"da8c3iA5VJP8prtCjZUxLMx","FBFFishManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFDataEntry"),r=t("./FBFFish"),c=t("./FBFFishPath"),l=cc._decorator,h=l.ccclass,p=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fishAtlasList=[],e.fishPrefab=null,e.fishConfigJson=null,e.fishPointConfigJson=null,e.pathConfigJson=null,e.groupConfigJson=null,e.node_black=null,e.fishSpriteList=[],e.control=null,e.fishPool=null,e.swimEnable=!0,e}return n(e,t),e.prototype.initView=function(t){this.control=t,this.fishPool=new cc.NodePool,this.swimEnable=!0;for(var e=0;e<this.fishAtlasList.length;e++)this.fishSpriteList=this.fishSpriteList.concat(this.fishAtlasList[e].getSpriteFrames());this.node_black.active=!1,this.node_black.zIndex=2e3},e.prototype.getSwimSpByFish=function(t){for(var e=[],o=0;o<t.FrameSwimCount;o++)for(var i=0;i<this.fishSpriteList.length;i++)if(this.fishSpriteList[i].name=="fish_"+t.FrameName+"_"+(o+1)){e.push(this.fishSpriteList[i]);break}return e},e.prototype.getDeadSpByFish=function(t){for(var e=[],o=0;o<t.FrameDeadCount;o++)for(var i=0;i<this.fishSpriteList.length;i++)if(this.fishSpriteList[i].name=="fish_"+t.FrameName+"_die_"+(o+1)){e.push(this.fishSpriteList[i]);break}return e},e.prototype.getFishConfig=function(t){for(var e=null,o=0;o<this.fishConfigJson.json.length;o++)this.fishConfigJson.json[o].Id==t&&(e=this.fishConfigJson.json[o]);return e},e.prototype.getFishPoint=function(t){return this.fishPointConfigJson.json[""+t]},e.prototype.getPathConfigById=function(t){for(var e=null,o=this.pathConfigJson.json.data,i=0;i<o.length;i++)o[i].id==""+t&&(e=o[i]);return e},e.prototype.getPathConfigByIndex=function(t){var e=this.pathConfigJson.json.data,o=e[t%e.length],i={id:o.id,mark:o.mark,points:[],controls:[],time:o.time,stopTime:o.stopTime,isUniformSpeed:o.isUniformSpeed};for(var n in o.points)i.points.push(cc.v2(o.points[n].x,o.points[n].y));for(var n in o.controls)i.controls.push(cc.v2(o.controls[n].x,o.controls[n].y));return i},e.prototype.getFishPosByGroup=function(t,e,o){for(var i=cc.v2(0,0),n=0;n<this.groupConfigJson.json.length;n++)this.groupConfigJson.json[n].PathId==t&&this.groupConfigJson.json[n].FishTypeId==e&&null!=this.groupConfigJson.json[n].FishPosLists[o]&&(i=this.groupConfigJson.json[n].FishPosLists[o]);return i},e.prototype.createFish=function(t,e,o,i,n,s,a,l){void 0===s&&(s=0),void 0===a&&(a=null),void 0===l&&(l=null);var h=this.getFishConfig(e);if(null!=h){var p=this.getFishPoint(e);if(null!=p){var f=this.getPathConfigByIndex(o);if(null!=f){var d=this.fishPool.get();null==d&&(d=cc.instantiate(this.fishPrefab)),d.parent=this.node;var u=new c.default;u.init(f);var g=d.getComponent(r.default);g.initView(this,this.node.getContentSize());var y=[];for(var _ in l)y.push(this.getFishConfig(l[_]));return g.initFish(t,h,p,u,i,n,s,y),this.swimEnable?g.resumeRun():g.pauseRun(),g}cc.log("##########",o+"\uff1a\u6ca1\u6709\u627e\u5230\u8def\u5f84\u4fe1\u606f")}else cc.log("##########",e+"\uff1a\u6ca1\u6709\u627e\u5230\u9c7c\u78b0\u649e\u8282\u70b9\u4fe1\u606f")}else cc.log("##########",e+"\uff1a\u6ca1\u6709\u627e\u5230\u9c7c\u914d\u7f6e\u4fe1\u606f")},e.prototype.onFishSwimOut=function(t){this.control.gameInfo.isLock&&this.control.gameInfo.lockFishId==t.fishId&&(this.control.gameInfo.lockFishId=0),this.control.gameInfo.connType==a.ConnType.Light&&this.control.gameInfo.lightFishId==t.fishId&&(this.control.gameInfo.lightFishId=0)},e.prototype.removeFishNode=function(t){this.control.gameInfo.isLock&&this.control.gameInfo.lockFishId==t.fishId&&(this.control.gameInfo.lockFishId=0),this.control.gameInfo.connType==a.ConnType.Light&&this.control.gameInfo.lightFishId==t.fishId&&(this.control.gameInfo.lightFishId=0),this.fishPool.put(t.node)},e.prototype.clickFish=function(t){if(this.control.gameInfo.weaponType==a.WeaponType.Bullet)if(this.control.gameInfo.connType==a.ConnType.Light){this.control.gameInfo.lightFishId=t.fishId;var e=this.control.gameInfo.selfUserItem.batteryId;this.control.gameView.lightHitManage.setBatteyLightFish(e,t.fishId),this.control.gameView.batteryManage.setBatteryLightFish(e,t.fishId)}else this.control.gameInfo.isLock&&(this.control.gameInfo.lockFishId=t.fishId)},e.prototype.getFishByFishId=function(t){var e=null,o=this.node.children;for(var i in o){var n=o[i].getComponent(r.default);null!=n&&t==n.getFishID()&&(e=n)}return e},e.prototype.getFishListByTypeId=function(t){var e=[],o=this.node.children;for(var i in o){var n=o[i].getComponent(r.default);null!=n&&t==n.fishConfig.Id&&n.fishStatus==a.FishStatus.Swim&&0==n.isOutSwimSize&&e.push(n)}return e},e.prototype.getBombFishList=function(t,e){var o=[];for(var i in this.node.children){var n=this.node.children[i].getComponent(r.default);null!=n&&n.fishConfig.Id<=17&&n.fishStatus==a.FishStatus.Swim&&0==n.isOutSwimSize&&o.push(n)}for(i=0;i<o.length-1;i++)for(var s=i+1;s<o.length;s++){var c=Math.sqrt(Math.pow(o[i].node.x-t.x,2)+Math.pow(o[i].node.y-t.y,2));if(Math.sqrt(Math.pow(o[s].node.x-t.x,2)+Math.pow(o[s].node.y-t.y,2))<c){var l=o[i];o[i]=o[s],o[s]=l}}var h=this.control.gameInfo.getBaseScore(),p=[],f=0;for(i=0;i<o.length;i++){var d=o[i].fishConfig.Double*h*this.control.gameInfo.roomBet;f+d<=e&&(f+=d,p.push(o[i]))}return p},e.prototype.getLightFishList=function(t){var e=[];for(var o in this.node.children){var i=this.node.children[o].getComponent(r.default);null!=i&&i.fishConfig.Id<=9&&i.fishStatus==a.FishStatus.Swim&&0==i.isOutSwimSize&&e.push(i)}for(o=0;o<e.length-1;o++){var n=Math.floor(Math.random()*(e.length-.01)),s=e[o];e[o]=e[n],e[n]=s}var c=this.control.gameInfo.getBaseScore(),l=[],h=0;for(o=0;o<e.length;o++){var p=e[o].fishConfig.Double*c*this.control.gameInfo.roomBet;h+p<=t&&(h+=p,l.push(e[o]))}return l},e.prototype.getFullBombFishHP=function(){var t=0;for(var e in this.node.children){var o=this.node.children[e].getComponent(r.default);null!=o&&o.fishConfig.Id<=17&&o.fishStatus==a.FishStatus.Swim&&0==o.isOutSwimSize&&(t+=o.getBitScore())}return t},e.prototype.getSameBombFishHP=function(t){var e=0;for(var o in this.node.children){var i=this.node.children[o].getComponent(r.default);null!=i&&-1!=t.indexOf(i.fishConfig.Id)&&i.fishStatus==a.FishStatus.Swim&&0==i.isOutSwimSize&&(e+=i.getBitScore())}return e},e.prototype.getFullBombFish=function(){var t=[],e=this.node.children;for(var o in e){var i=e[o].getComponent(r.default);null!=i&&i.fishConfig.Id<=17&&i.fishStatus==a.FishStatus.Swim&&0==i.isOutSwimSize&&t.push(i)}return t},e.prototype.getAllFish=function(){var t=[],e=this.node.children;for(var o in e){var i=e[o].getComponent(r.default);null!=i&&i.fishStatus==a.FishStatus.Swim&&t.push(i)}return t},e.prototype.getAllSwimFish=function(){var t=[],e=this.node.children;for(var o in e){var i=e[o].getComponent(r.default);null!=i&&i.fishStatus==a.FishStatus.Swim&&0==i.isOutSwimSize&&t.push(i)}return t},e.prototype.getLaserDistance=function(t,e,o){var i=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2)),n=Math.atan2(o.y-t.y,o.x-t.x)-e*Math.PI/180;return Math.abs(i*Math.sin(n))},e.prototype.getLaserFishList=function(t,e,o){var i=this.node.convertToNodeSpaceAR(t),n=[];for(var s in this.node.children){var c=this.node.children[s].getComponent(r.default);null!=c&&c.fishConfig.Id<=17&&c.fishStatus==a.FishStatus.Swim&&0==c.isOutSwimSize&&n.push(c)}for(s=0;s<n.length-1;s++)for(var l=s+1;l<n.length;l++){var h=this.getLaserDistance(i,e,n[s].node.getPosition());if(this.getLaserDistance(i,e,n[l].node.getPosition())<h){var p=n[s];n[s]=n[l],n[l]=p}}var f=this.control.gameInfo.getBaseScore(),d=[],u=0;for(s=0;s<n.length;s++){var g=n[s].fishConfig.Double*f*this.control.gameInfo.roomBet;u+g<=o&&(u+=g,d.push(n[s]))}return d},e.prototype.checkLockFish=function(){if(1==this.control.gameInfo.isLock&&0==this.control.gameInfo.lockFishId){var t=this.getAllSwimFish(),e=null,o=this.control.gameInfo.lockTrackFishTypeList;for(var i in t)0!=o.length&&-1==o.indexOf(t[i].fishConfig.Id)||(null==e||e.fishConfig.Id<t[i].fishConfig.Id)&&(e=t[i]);null!=e&&(this.control.gameInfo.lockFishId=e.fishId)}},e.prototype.showBlackNode=function(){},e.prototype.update=function(){this.checkLockFish()},s([p([cc.SpriteAtlas])],e.prototype,"fishAtlasList",void 0),s([p(cc.Prefab)],e.prototype,"fishPrefab",void 0),s([p(cc.JsonAsset)],e.prototype,"fishConfigJson",void 0),s([p(cc.JsonAsset)],e.prototype,"fishPointConfigJson",void 0),s([p(cc.JsonAsset)],e.prototype,"pathConfigJson",void 0),s([p(cc.JsonAsset)],e.prototype,"groupConfigJson",void 0),s([p(cc.Node)],e.prototype,"node_black",void 0),s([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./FBFDataEntry":"FBFDataEntry","./FBFFish":"FBFFish","./FBFFishPath":"FBFFishPath"}],FBFFishNet:[function(t,e,o){"use strict";cc._RF.push(e,"35bc3ce83ZHWKSZ3t9fJ8WN","FBFFishNet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.effectManage=null,e}return n(e,t),e.prototype.initView=function(t,e,o){var i=this;this.effectManage=t,this.icon.getComponent(cc.Animation).play(),this.node.setPosition(o),cc.tween(this.node).delay(.35).call(function(){i.effectManage.removeFishNetNode(i.node)}).start()},s([c(cc.Sprite)],e.prototype,"icon",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFFishPath:[function(t,e,o){"use strict";cc._RF.push(e,"551cf/1CQVCkK1u2gYTk+CI","FBFFishPath"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./FBFDataEntry"),n=function(){function t(){this.config=null,this.pathType=i.PathType.Bezier,this.lineList=[],this.bezierList=[],this.lineTotalLen=0,this.currTime=0,this.currPos=null}return t.prototype.init=function(t){this.config=t,this.lineList=[],this.bezierList=[],this.lineTotalLen=0,this.currTime=0,this.currPos=null,0==this.config.controls.length&&(this.pathType=i.PathType.Line),this.pathType==i.PathType.Line&&(this.lineTotalLen=this.getTwoPointLength(this.config.points[0],this.config.points[1]));for(var e=null,o=null,n=0,s=0,a=[],r=0;r<t.points.length-1;r++){o=t.points[r],s=0,a=[];for(var c=1;c<11;c++)e=this.getBezierPoint(t.points[r],t.controls[r],t.points[r+1],c/10),s+=n=this.getTwoPointLength(o,e),this.lineList.push({startPoint:o,endPoint:e,len:n}),this.lineTotalLen=this.lineTotalLen+n,o=e,a.push({len:n,percent:.1});this.bezierList.push({startPoint:t.points[r],endPoint:t.points[r+1],control:t.controls[r],totallen:s,lenList:a})}this.currPos=this.lineList[0].startPoint},t.prototype.setStartPos=function(t){for(var e in this.config.points)this.config.points[e].x+=t.x,this.config.points[e].y+=t.y;for(var e in this.config.controls)this.config.controls[e].x+=t.x,this.config.controls[e].y+=t.y;this.init(this.config)},t.prototype.getPosByDiffTime=function(t,e,o){this.currTime=this.currTime+t,this.currTime=Math.min(this.currTime,this.config.time);var i=cc.v2(0,0),n=!0,s=this.currTime-o;if(s=Math.max(0,s),0==this.config.isUniformSpeed&&(n=!1),i=1==n?this.getPosByTime(s):this.getPosByTime2(s),0!=e){var a=this.config.points[0],r=Math.sqrt(Math.pow(i.x-a.x,2)+Math.pow(i.y-a.y,2)),c=180*Math.atan2(i.y-a.y,i.x-a.x)/Math.PI;c+=e;var l=a.x+r*Math.cos(c*Math.PI/180),h=a.y+r*Math.sin(c*Math.PI/180);i=cc.v2(l,h)}var p;return p=i.x==this.currPos.x?i.y-this.currPos.y>0?90:-90:180*Math.atan2(i.y-this.currPos.y,i.x-this.currPos.x)/Math.PI,this.currPos=i,{pos:i,angle:p}},t.prototype.checkIsEnd=function(){return this.currTime>=this.config.time},t.prototype.getPosByTime=function(t){var e=t/this.config.time,o=0;null!=this.config.stopTime&&(o=this.config.stopTime);var i=this.config.time/2-o/2,n=this.config.time/2+o/2;o>0&&(t<=i?e=t/(this.config.time-o):t>i&&t<n?e=i/(this.config.time-o):t>n&&(e=(t-o)/(this.config.time-o)));for(var s=this.lineTotalLen*e,a=!1,r=0,c=0,l=0,h=0;h<this.bezierList.length;h++){if(c=h,r+this.bezierList[h].totallen>=s){l=0;for(var p=0;p<this.bezierList[h].lenList.length;p++){if(r+this.bezierList[h].lenList[p].len>=s){l+=(s-r)/this.bezierList[h].lenList[p].len*this.bezierList[h].lenList[p].percent,a=!0;break}l+=this.bezierList[h].lenList[p].percent,r+=this.bezierList[h].lenList[p].len}}if(a)break;r+=this.bezierList[h].totallen}return e>=1&&(l=1),this.getBezierPoint(this.bezierList[c].startPoint,this.bezierList[c].control,this.bezierList[c].endPoint,l)},t.prototype.getPosByTime2=function(t){for(var e=this.config.time/this.bezierList.length,o=0,i=0,n=0;n<this.bezierList.length&&e*n<t;n++)o=n,i=(t-e*n)/e;return i>=1&&(i=1),this.getBezierPoint(this.bezierList[o].startPoint,this.bezierList[o].control,this.bezierList[o].endPoint,i)},t.prototype.getTwoPointLength=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.prototype.getBezierPoint=function(t,e,o,i){var n=Math.pow(1-i,2)*t.x+2*i*(1-i)*e.x+Math.pow(i,2)*o.x;t.x==e.x&&e.x==o.x&&(n=t.x);var s=Math.pow(1-i,2)*t.y+2*i*(1-i)*e.y+Math.pow(i,2)*o.y;return t.y==e.y&&e.x==o.y&&(s=t.y),cc.v2(n,s)},t.prototype.getBezierPointAngle=function(t,e,o,i){var n=2*(1-i)*t.x+(2-4*i)*e.x+2*i*o.x,s=2*(1-i)*t.y+(2-4*i)*e.y+2*i*o.y,a=0;return 0!=n&&(a=180*Math.atan2(s,n)/Math.PI),a},t}();o.default=n,cc._RF.pop()},{"./FBFDataEntry":"FBFDataEntry"}],FBFFishPointPrint:[function(t,e,o){"use strict";cc._RF.push(e,"98950migcxCDo1CGsRrPLqi","FBFFishPointPrint");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){for(var t={},e=0;e<this.node.children.length;e++){var o=this.node.children[e].getComponent(cc.PolygonCollider);t[e+""]=o.points}},s([r],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],FBFFishUtil:[function(t,e,o){"use strict";cc._RF.push(e,"9f037ahixZE0YpDZ6aN/L88","FBFFishUtil"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){}return t.showFrameAnimation=function(t,e,o,i,n,s,a){var r=t.getComponent(cc.Animation);if(null==r)r=t.addComponent(cc.Animation);else{r.stop(),r.clear();for(var c=r.getClips(),l=c.length-1;l>=0;l--)r.removeClip(c[l],!0)}var h=cc.AnimationClip.createWithSpriteFrames(e,e.length);h.name="ani",h.speed=1/o,r.addClip(h);var p=r.play("ani");p.wrapMode=cc.WrapMode.Normal,1==n&&-1==s?(p.wrapMode=cc.WrapMode.Loop,p.repeatCount=1/0):1==n&&s>0&&(p.wrapMode=cc.WrapMode.Loop,p.repeatCount=s),r.once("finished",function(){i&&(t.spriteFrame=e[0]),t.node.removeComponent(cc.Animation),null!=a&&a()})},t.delFrameAnimation=function(t){var e=t.getComponent(cc.Animation);if(e){e.stop(),e.clear();for(var o=e.getClips(),i=o.length-1;i>=0;i--)e.removeClip(o[i],!0);t.node.removeComponent(cc.Animation)}},t.getFrameList=function(t,e,o,i){for(var n=[],s=o;s<=i;s++)n.push(t.getSpriteFrame(e+""+s));return n},t.generateMixed=function(t){for(var e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],o="",i=0;i<t;i++)o+=e[Math.ceil(35*Math.random())];return o},t}();o.default=i,cc._RF.pop()},{}],FBFFish:[function(t,e,o){"use strict";cc._RF.push(e,"6e3bc8wrH1E552RDnZRWfaY","FBFFish");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFDataEntry"),r=t("./FBFFishUtil"),c=cc._decorator,l=c.ccclass,h=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon_sprite=null,e.icon_same=null,e.icon_light_blue=null,e.icon_light_red=null,e.icon_light_line=null,e.fish_22=null,e.fish_22_PointList=[],e.node_die_samefish=null,e.fishId=null,e.fishConfig=null,e.fishColliderPoint=null,e.fishPath=null,e.offPos=null,e.offAngle=null,e.offTime=0,e.swimSize=null,e.isOutSwimSize=!0,e.fishManage=null,e.runChk=!1,e.fishStatus=a.FishStatus.Swim,e.deadRunChk=!1,e.deadRunAngle=0,e.subfishConfigList=null,e.fish22Point=[],e.pathTime=0,e.outAngle=0,e.outSpeed=0,e.aniSpSpeed=10,e}return n(e,t),e.prototype.initView=function(t,e){this.fishManage=t,this.outAngle=0,this.outSpeed=0,cc.Tween.stopAllByTarget(this.node),this.node.zIndex=0,this.node.angle=0,this.node.setScale(1),this.node.opacity=255,this.icon_sprite.node.active=!1,this.icon_same.node.active=!1,this.icon_light_blue.active=!1,this.icon_light_red.active=!1,this.icon_light_line.active=!1,this.node_die_samefish.active=!1,this.fish_22.active=!1,this.swimSize=e,this.isOutSwimSize=!0,this.fish22Point=[],this.icon_sprite.node.off(cc.Node.EventType.TOUCH_START),this.icon_sprite.node.on(cc.Node.EventType.TOUCH_START,this.onFishClick.bind(this)),this.icon_same.node.off(cc.Node.EventType.TOUCH_START),this.icon_same.node.on(cc.Node.EventType.TOUCH_START,this.onFishClick.bind(this)),this.icon_light_blue.off(cc.Node.EventType.TOUCH_START),this.icon_light_blue.on(cc.Node.EventType.TOUCH_START,this.onFishClick.bind(this))},e.prototype.initFish=function(t,e,o,i,n,s,r,c){this.fishId=t,this.fishConfig=e,this.fishColliderPoint=o,this.fishPath=i,this.offPos=n,this.offAngle=s,this.offTime=r,this.subfishConfigList=c,this.setFish(),this.setColliderPoint(this.fishColliderPoint);var l=this.fishPath.getPosByDiffTime(.05,this.offAngle,this.offTime);this.setFishPos(l.pos,l.angle),this.runChk=!0,this.fishStatus=a.FishStatus.Swim,this.deadRunChk=!1,this.deadRunAngle=0,this.fish22Point=[],22==this.fishConfig.Id&&(this.runChk=!1,this.setFishPos(cc.v2(this.fishManage.node.width/2*-1,this.fishManage.node.height/2*-1),0),this.pathTime=0)},e.prototype.setFish=function(){if(this.icon_sprite.node.active=!1,this.icon_same.node.active=!1,this.icon_light_blue.active=!1,this.icon_light_red.active=!1,this.fish_22.active=!1,this.node.setScale(this.fishConfig.FishScale),this.icon_sprite.node.scale=1,19==this.fishConfig.Id){this.icon_same.node.active=!0,this.icon_sprite.node.active=!0,this.node.setContentSize(this.icon_same.node.getContentSize()),this.resetNodeColor(this.icon_same.node);var t=this.fishManage.getSwimSpByFish(this.fishConfig);this.icon_same.spriteFrame=t[0],r.default.showFrameAnimation(this.icon_same,t,t.length/this.aniSpSpeed,!1,!0,-1,null),this.resetNodeColor(this.icon_sprite.node);var e=this.fishManage.getSwimSpByFish(this.subfishConfigList[0]);this.icon_sprite.node.scale=this.subfishConfigList[0].FishSameScale,this.icon_sprite.spriteFrame=e[0],r.default.showFrameAnimation(this.icon_sprite,e,e.length/this.aniSpSpeed,!1,!0,-1,null)}else if(20==this.fishConfig.Id){this.icon_light_blue.active=!0,this.icon_sprite.node.active=!0,this.resetNodeColor(this.icon_sprite.node),e=this.fishManage.getSwimSpByFish(this.subfishConfigList[0]),this.icon_sprite.node.scale=this.subfishConfigList[0].FishScale,this.icon_sprite.spriteFrame=e[0],r.default.showFrameAnimation(this.icon_sprite,e,e.length/this.aniSpSpeed,!1,!0,-1,null),this.resetNodeColor(this.icon_light_blue);var o=this.icon_sprite.node.scale*Math.max(this.icon_sprite.node.width,this.icon_sprite.node.height)+30;this.icon_light_blue.setScale(o/this.icon_light_blue.width),this.icon_light_red.setContentSize(cc.size(o,o)),this.node.setContentSize(cc.size(o,o))}else if(22==this.fishConfig.Id)this.fish_22.active=!0,this.fish_22.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.resetNodeColor(this.fish_22);else{this.icon_sprite.node.active=!0,this.resetNodeColor(this.icon_sprite.node);var i=this.fishManage.getSwimSpByFish(this.fishConfig);this.icon_sprite.spriteFrame=i[0],r.default.showFrameAnimation(this.icon_sprite,i,i.length/this.aniSpSpeed,!1,!0,-1,null),this.node.setContentSize(this.icon_sprite.node.getContentSize())}},e.prototype.setColliderPoint=function(t){20==this.fishConfig.Id&&(t=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)]),this.getComponent(cc.PolygonCollider).points=t},e.prototype.getBitScore=function(){var t=0;return this.fishConfig.Type==a.FishType.FishDoubel_Single&&(t=null==this.fishConfig.Double?(this.fishConfig.Double_1+this.fishConfig.Double_2)/2:this.fishConfig.Double),t},e.prototype.getSameFishList=function(){var t=[];if(null!=this.subfishConfigList)for(var e in this.subfishConfigList)t.push(this.subfishConfigList[e].Id);return t},e.prototype.removeFishNode=function(){this.fishManage.removeFishNode(this)},e.prototype.showDeadStatus=function(){this.runChk=!1,this.fishStatus=a.FishStatus.Dead,this.node.zIndex=1e3},e.prototype.showDeadSameFish=function(){this.node.angle=0,this.node.setScale(1),this.node.opacity=255,this.node.zIndex=900,this.icon_sprite.node.active=!1,this.icon_same.node.active=!1,this.icon_light_blue.active=!1,this.icon_light_red.active=!1,this.node_die_samefish.active=!0},e.prototype.getRedLightWidth=function(){return this.icon_sprite.node.scale*Math.max(this.icon_sprite.node.width,this.icon_sprite.node.height)+30},e.prototype.showDeadLightFish=function(){this.resetNodeColor(this.icon_light_blue);var t=this.getRedLightWidth();this.icon_light_red.setContentSize(cc.size(t,t)),this.icon_light_blue.active=!1,this.icon_light_red.active=!0,cc.tween(this.node).by(2,{angle:360}).repeatForever().start()},e.prototype.showDeadAni=function(){var t=this;if(this.showDeadStatus(),this.fishConfig.Id<=18){var e=this.fishManage.getDeadSpByFish(this.fishConfig);r.default.showFrameAnimation(this.icon_sprite,e,e.length/this.aniSpSpeed,!1,!0,1,function(){t.removeFishNode()})}else this.removeFishNode()},e.prototype.showDeadMoveCircleAni=function(t,e,o,i){var n=this;this.showDeadStatus();var s=this.node.parent.convertToNodeSpaceAR(t);cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).delay(e).to(o,{position:cc.v3(s)}).delay(i).call(function(){n.removeFishNode()}).start()},e.prototype.showMoveAni=function(t,e,o,i){var n=this.node.parent.convertToNodeSpaceAR(t),s=i?this.fishConfig.FishSameScale:1;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).delay(e).to(o,{position:cc.v3(n),scale:s}).start()},e.prototype.showFullBombAni=function(){var t=this;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{position:cc.v3(0,0,0)}).to(.15,{scale:1.5}).to(.15,{scale:1.2}).to(.15,{scale:1.7}).to(.15,{scale:1.4}).to(.15,{scale:1.8}).to(.15,{scale:1.5}).to(.15,{scale:2.3}).to(.15,{scale:2}).to(.15,{scale:2.4}).to(.15,{scale:2.1}).to(.15,{scale:2.4}).to(.15,{scale:2.1}).call(function(){t.removeFishNode()}).start()},e.prototype.showFullBombMoveAni=function(){var t=Math.sqrt(Math.pow(this.node.x,2)+Math.pow(this.node.y,2))/400;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(t,{position:cc.v3(30*Math.random(),30*Math.random(),0),scale:0},{easing:"easeOutQuint"}).start()},e.prototype.resetNodeColor=function(t){t.stopActionByTag(2e3),t.color=cc.color(255,255,255)},e.prototype.showColorAni=function(t){t.stopActionByTag(2e3),cc.tween(t).tag(2e3).to(.15,{color:cc.color(234,46,46)}).to(.15,{color:cc.color(255,255,255)}).start()},e.prototype.showHitAni=function(){19==this.fishConfig.Id?(this.showColorAni(this.icon_same.node),this.showColorAni(this.icon_sprite.node)):20==this.fishConfig.Id?(this.showColorAni(this.icon_light_blue),this.showColorAni(this.icon_sprite.node)):22==this.fishConfig.Id?this.showColorAni(this.fish_22):this.showColorAni(this.icon_sprite.node)},e.prototype.showOutMoveAni=function(){var t=this;cc.tween(this.node).to(1,{opacity:0}).call(function(){t.removeFishNode()}).start()},e.prototype.getFishID=function(){return this.fishId},e.prototype.pauseRun=function(){22!=this.fishConfig.Id&&(this.runChk=!1)},e.prototype.resumeRun=function(){22!=this.fishConfig.Id&&(this.runChk=!0)},e.prototype.setPathStartPos=function(t){var e=this.node.parent.convertToNodeSpaceAR(t);this.fishPath.setStartPos(e)},e.prototype.setFishPos=function(t,e){this.node.angle=e,(e>90||e<-90)&&(this.node.scaleY=-1*this.fishConfig.FishScale,this.node.scaleX=1*this.fishConfig.FishScale);var o=cc.v2(t.x+this.offPos.x,t.y+this.offPos.y);this.node.setPosition(o),this.checkSwimSize(o)},e.prototype.setFishWordPos=function(t){var e=this.node.parent.convertToNodeSpaceAR(t);this.node.setPosition(e)},e.prototype.checkSwimSize=function(t){var e=!1,o=this.node.getContentSize();(t.x<-1*(this.swimSize.width/2+o.width/2)||t.x>this.swimSize.width/2+o.width/2)&&(e=!0),(t.y<-1*(this.swimSize.height/2+o.height/2)||t.y>this.swimSize.height/2+o.height/2)&&(e=!0),this.isOutSwimSize=e},e.prototype.update=function(t){if(1==this.runChk){if(t*=this.fishConfig.Speed,this.fishStatus==a.FishStatus.Out){var e=this.node.x+t*this.outSpeed*Math.cos(this.outAngle*Math.PI/180),o=this.node.y+t*this.outSpeed*Math.sin(this.outAngle*Math.PI/180);this.setFishPos(cc.v2(e,o),this.outAngle),this.fishPath.getPosByDiffTime(t,this.offAngle,this.offTime)}else{var i=this.fishPath.getPosByDiffTime(t,this.offAngle,this.offTime),n=cc.v2(i.pos.x+this.offPos.x,i.pos.y+this.offPos.y);n.x==this.node.x&&n.y==this.node.y?this.setFishPos(i.pos,this.node.angle):this.setFishPos(i.pos,i.angle)}this.isOutSwimSize&&(this.fishManage.onFishSwimOut(this),this.fishStatus==a.FishStatus.Out&&this.removeFishNode()),this.fishPath.checkIsEnd()&&this.removeFishNode()}else if(1==this.deadRunChk){var s=700*t*Math.cos(2*Math.PI/360*this.deadRunAngle),r=700*t*Math.sin(2*Math.PI/360*this.deadRunAngle),c=(e=s+this.node.x,o=r+this.node.y,this.deadRunAngle),l=this.fishManage.node.getContentSize();e<-1*l.width/2?(e=-1*l.width/2+1,c=180-c):e>l.width/2&&(e=l.width/2-1,c=180-c),o<-1*l.height/2?(o=-1*l.height/2+1,c=360-c):o>l.height/2&&(o=l.height/2-1,c=360-c),this.deadRunAngle=c,this.node.angle+=720*t,this.node.setPosition(e,o)}if(this.fishConfig&&22==this.fishConfig.Id){for(var h=0;h<this.fish_22_PointList.length;h++){var p=this.fish_22_PointList[h].parent.convertToWorldSpaceAR(this.fish_22_PointList[h].getPosition()),f=this.node.convertToNodeSpaceAR(p);this.fish22Point[h]=f}this.setColliderPoint(this.fish22Point),this.pathTime+=t,this.pathTime>3&&this.removeFishNode()}},e.prototype.onFishClick=function(){cc.log("onFishClick",this.fishPath),this.fishStatus==a.FishStatus.Swim&&this.fishManage.clickFish(this)},e.prototype.getWorldPos=function(){var t=this.node.getPosition(),e=t;return null!=this.node.parent&&(e=this.node.parent.convertToWorldSpaceAR(t)),e},e.prototype.showRandomMoveAni=function(){var t=this;this.deadRunAngle=360*Math.random(),this.deadRunChk=!0,cc.tween(this.node).delay(2).call(function(){t.deadRunChk=!1}).start()},s([h(cc.Sprite)],e.prototype,"icon_sprite",void 0),s([h(cc.Sprite)],e.prototype,"icon_same",void 0),s([h(cc.Node)],e.prototype,"icon_light_blue",void 0),s([h(cc.Node)],e.prototype,"icon_light_red",void 0),s([h(cc.Node)],e.prototype,"icon_light_line",void 0),s([h(cc.Node)],e.prototype,"fish_22",void 0),s([h([cc.Node])],e.prototype,"fish_22_PointList",void 0),s([h(cc.Node)],e.prototype,"node_die_samefish",void 0),s([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./FBFDataEntry":"FBFDataEntry","./FBFFishUtil":"FBFFishUtil"}],FBFGameInfo:[function(t,e,o){"use strict";cc._RF.push(e,"46e2eNVE0hM0pFtpYj7KpAc","FBFGameInfo"),Object.defineProperty(o,"__esModule",{value:!0}),o.FBFGameInfo=void 0;var i=t("./FBFDataEntry"),n=function(){function t(){this.baseScoreList=[10,20,30,40,50,60,70,80,90,100,200,300,400,500,1e3],this.baseScoreIndex=0,this.selfUserItem=null,this.userItemList=[],this.isAuto=!1,this.isLock=!1,this.lockFishId=0,this.lockTrackFishTypeList=[],this.autoFate=4,this.weaponType=i.WeaponType.Bullet,this.connType=i.ConnType.Bullet,this.lightFishId=0,this.laserHitInfo=0,this.changeSceneType=0,this.roomBet=0}return t.prototype.getNextBaseScore=function(t){var e=this.baseScoreIndex;return e="add"==t?(this.baseScoreIndex+1)%this.baseScoreList.length:(this.baseScoreIndex-1+this.baseScoreList.length)%this.baseScoreList.length,this.baseScoreList[e]},t.prototype.setBaseScore=function(t){for(var e=0;e<this.baseScoreList.length;e++)if(this.baseScoreList[e]==t){this.baseScoreIndex=e;break}},t.prototype.getBaseScore=function(){return this.baseScoreList[this.baseScoreIndex]},t.prototype.getUserItemByUid=function(t){for(var e=null,o=0;o<this.userItemList.length;o++)if(this.userItemList[o].userId==t){e=this.userItemList[o];break}return e},t.prototype.checkSelfByUid=function(t){return this.selfUserItem.userId==t},t.prototype.addUserItem=function(t){this.userItemList.push(t)},t.prototype.removeUseItem=function(t){for(var e=this.userItemList.length-1;e>=0;e--)this.userItemList[e].userId==t&&this.userItemList.splice(e,1)},t.prototype.getButlletType=function(t){var e=1;return t>10&&t<=20?e=2:t>20&&t<=30?e=3:t>30&&(e=4),e},t}();o.FBFGameInfo=n,cc._RF.pop()},{"./FBFDataEntry":"FBFDataEntry"}],FBFGameView:[function(t,e,o){"use strict";cc._RF.push(e,"ea035dNPAVKRIih+wPh/uzT","FBFGameView");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFBatteryManage"),r=t("./FBFBulletManage"),c=t("./FBFComWait"),l=t("./FBFDataEntry"),h=t("./FBFDialogHelp"),p=t("./FBFDialogLockSet"),f=t("./FBFDialogMessage"),d=t("./FBFDialogMsgTestRoom"),u=t("./FBFDialogSetting"),g=t("./FBFEffectManage"),y=t("./FBFFishManage"),_=t("./FBFLightHitManage"),m=t("./FBFLockManage"),b=t("./FBFMap"),v=cc._decorator,F=v.ccclass,w=v.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_menu_left=null,e.btn_left_open=null,e.btn_left_close=null,e.node_menu_right=null,e.btn_right_open=null,e.btn_right_close=null,e.btn_help=null,e.btn_voice=null,e.btn_back=null,e.btn_auto=null,e.btn_lock=null,e.btn_weapon=null,e.btn_lockset=null,e.btn_push=null,e.panel_tripMsg=null,e.lbl_tripMsg=null,e.batteryManage=null,e.bullteManage=null,e.fishManage=null,e.effectManage=null,e.lightHitManage=null,e.lockManage=null,e.dialog_help=null,e.dialog_setting=null,e.dialog_message=null,e.dialog_lockset=null,e.mapManage=null,e.comWait=null,e.dialog_mstTestRoom=null,e.control=null,e.leftMenuPos=null,e.rightMenuPos=null,e.initTime=0,e.btnBackEnable=!1,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.leftMenuPos=this.node_menu_left.getPosition(),this.rightMenuPos=this.node_menu_right.getPosition(),this.initTime=0,this.btnBackEnable=!1,this.btn_left_open.node.on("click",this.onClick_left_open.bind(this)),this.btn_left_close.node.on("click",this.onClick_left_close.bind(this)),this.btn_right_open.node.on("click",this.onClick_right_open.bind(this)),this.btn_right_close.node.on("click",this.onClick_right_close.bind(this)),this.btn_left_open.node.active=!1,this.btn_left_close.node.active=!0,this.btn_right_open.node.active=!1,this.btn_right_close.node.active=!0,this.btn_help.node.on("click",this.onClick_help.bind(this)),this.btn_voice.node.on("click",this.onClick_voice.bind(this)),this.btn_back.node.on("click",this.onClick_back.bind(this)),this.btn_back.interactable=!1,this.btn_back.node.getChildByName("lbl_time").active=!0,this.btn_back.node.getChildByName("lbl_time").getComponent(cc.Label).string="10",this.btn_auto.node.on("click",this.onClick_auto.bind(this)),this.btn_lock.node.on("click",this.onClick_lock.bind(this)),this.btn_weapon.node.on("click",this.onClick_weapon.bind(this)),this.btn_lockset.node.on("click",this.onClick_lockset.bind(this)),this.btn_push.node.active=!1,this.btn_push.node.on("click",this.onClick_push.bind(this)),this.panel_tripMsg.active=!1,this.batteryManage.initView(this.control),this.bullteManage.initView(this.control),this.fishManage.initView(this.control),this.effectManage.initView(this.control),this.lightHitManage.initView(this.control),this.lockManage.initView(this.control),this.dialog_help.initView(this.control),this.dialog_message.initView(this.control),this.dialog_lockset.initView(this.control),this.mapManage.initView(this.control),this.comWait.initView(),cc.director.getCollisionManager().enabled=!0,this.dialog_setting.initView(this.control),cc.audioEngine.getMusicVolume()>0?(this.btn_voice.node.getChildByName("icon_on").active=!0,this.btn_voice.node.getChildByName("icon_off").active=!1):(this.btn_voice.node.getChildByName("icon_on").active=!1,this.btn_voice.node.getChildByName("icon_off").active=!0)},e.prototype.onClick_left_open=function(){this.btn_left_open.node.active=!1,this.btn_left_close.node.active=!0,this.control.playAudio(49),cc.Tween.stopAllByTarget(this.node_menu_left),cc.tween(this.node_menu_left).to(.15,{position:cc.v3(this.leftMenuPos.x,this.leftMenuPos.y,0)}).start()},e.prototype.onClick_left_close=function(){this.btn_left_open.node.active=!0,this.btn_left_close.node.active=!1,this.control.playAudio(49),cc.Tween.stopAllByTarget(this.node_menu_left),cc.tween(this.node_menu_left).to(.15,{position:cc.v3(this.leftMenuPos.x-300,this.leftMenuPos.y,0)}).start()},e.prototype.onClick_right_open=function(){this.btn_right_open.node.active=!1,this.btn_right_close.node.active=!0,this.control.playAudio(49),cc.Tween.stopAllByTarget(this.node_menu_right),cc.tween(this.node_menu_right).to(.15,{position:cc.v3(this.rightMenuPos.x,this.rightMenuPos.y,0)}).start()},e.prototype.onClick_right_close=function(){this.btn_right_open.node.active=!0,this.btn_right_close.node.active=!1,this.control.playAudio(49),cc.Tween.stopAllByTarget(this.node_menu_right),cc.tween(this.node_menu_right).to(.15,{position:cc.v3(this.rightMenuPos.x+300,this.rightMenuPos.y,0)}).start()},e.prototype.onClick_back=function(){var t=this;this.control.playAudio(50);var e=this.control.i18n.getTripStr("leaverGame");this.control.showDialogMessage("leaverGame","leave",e,function(e){"ok"==e&&t.control.sendLeaveRoom()})},e.prototype.onClick_voice=function(){this.control.playAudio(50),cc.audioEngine.getMusicVolume()>0?(this.dialog_setting.setBtnVolumeStatus("music",!1),this.dialog_setting.setBtnVolumeStatus("effect",!1),this.btn_voice.node.getChildByName("icon_on").active=!1,this.btn_voice.node.getChildByName("icon_off").active=!0):(this.dialog_setting.setBtnVolumeStatus("music",!0),this.dialog_setting.setBtnVolumeStatus("effect",!0),this.btn_voice.node.getChildByName("icon_on").active=!0,this.btn_voice.node.getChildByName("icon_off").active=!1)},e.prototype.onClick_help=function(){this.control.playAudio(50),this.dialog_help.show(!0)},e.prototype.onClick_auto=function(){this.control.playAudio(50),this.control.gameInfo.isAuto=!this.control.gameInfo.isAuto,this.btn_auto.node.getChildByName("icon_1").active=0==this.control.gameInfo.isAuto,this.btn_auto.node.getChildByName("icon_2").active=1==this.control.gameInfo.isAuto,this.control.gameInfo.connType!=l.ConnType.Bullet&&(this.control.gameInfo.connType=l.ConnType.Bullet,this.control.gameInfo.selfUserItem.canonId=this.control.gameInfo.connType,this.control.sendChangeUserSkill(),this.control.updateWeaponType(this.control.gameInfo.selfUserItem.batteryId,this.control.gameInfo.connType)),this.btn_weapon.node.getChildByName("icon_1").active=!0,this.btn_weapon.node.getChildByName("icon_2").active=!1,this.control.gameInfo.isLock=!1,this.control.gameInfo.lockFishId=0,this.btn_lock.node.getChildByName("icon_1").active=!0,this.btn_lock.node.getChildByName("icon_2").active=!1;var t=this.control.gameInfo.selfUserItem;this.batteryManage.setBatteryLock(t.batteryId,0),this.lockManage.setBatteyLockFish(t.batteryId,0)},e.prototype.onClick_lock=function(){this.control.playAudio(50),this.control.gameInfo.isLock=!this.control.gameInfo.isLock,this.control.gameInfo.lockFishId=0,this.btn_lock.node.getChildByName("icon_1").active=0==this.control.gameInfo.isLock,this.btn_lock.node.getChildByName("icon_2").active=1==this.control.gameInfo.isLock,this.control.gameInfo.connType!=l.ConnType.Bullet&&(this.control.gameInfo.connType=l.ConnType.Bullet,this.control.gameInfo.selfUserItem.canonId=this.control.gameInfo.connType,this.control.sendChangeUserSkill(),this.control.updateWeaponType(this.control.gameInfo.selfUserItem.batteryId,this.control.gameInfo.connType)),this.btn_weapon.node.getChildByName("icon_1").active=!0,this.btn_weapon.node.getChildByName("icon_2").active=!1;var t=this.control.gameInfo.selfUserItem;1==this.control.gameInfo.isLock?(this.fishManage.checkLockFish(),this.batteryManage.update(0),this.batteryManage.setBatteryLock(this.control.gameInfo.selfUserItem.batteryId,1),this.lockManage.setBatteyLockFish(t.batteryId,this.control.gameInfo.lockFishId)):(this.batteryManage.setBatteryLock(t.batteryId,0),this.lockManage.setBatteyLockFish(t.batteryId,0)),this.control.gameInfo.isAuto=!1,this.btn_auto.node.getChildByName("icon_1").active=!0,this.btn_auto.node.getChildByName("icon_2").active=!1},e.prototype.onClick_weapon=function(){this.control.playAudio(50),this.control.gameInfo.connType=this.control.gameInfo.connType==l.ConnType.Bullet?l.ConnType.Light:l.ConnType.Bullet,this.control.gameInfo.selfUserItem.canonId=this.control.gameInfo.connType,this.control.sendChangeUserSkill(),this.control.updateWeaponType(this.control.gameInfo.selfUserItem.batteryId,this.control.gameInfo.connType),this.btn_weapon.node.getChildByName("icon_1").active=this.control.gameInfo.connType==l.ConnType.Bullet,this.btn_weapon.node.getChildByName("icon_2").active=this.control.gameInfo.connType==l.ConnType.Light,this.control.gameInfo.connType==l.ConnType.Bullet&&(this.control.gameInfo.lightFishId=0),this.control.gameInfo.isAuto=!1,this.btn_auto.node.getChildByName("icon_1").active=!0,this.btn_auto.node.getChildByName("icon_2").active=!1,this.control.gameInfo.isLock=!1,this.control.gameInfo.lockFishId=0,this.btn_lock.node.getChildByName("icon_1").active=!0,this.btn_lock.node.getChildByName("icon_2").active=!1;var t=this.control.gameInfo.selfUserItem;this.batteryManage.setBatteryLock(t.batteryId,0),this.lockManage.setBatteyLockFish(t.batteryId,0)},e.prototype.updataBtnWeapon=function(){this.btn_weapon.node.getChildByName("icon_1").active=this.control.gameInfo.connType==l.ConnType.Bullet,this.btn_weapon.node.getChildByName("icon_2").active=this.control.gameInfo.connType==l.ConnType.Light},e.prototype.updateBtnLock=function(){this.btn_lock.node.getChildByName("icon_1").active=0==this.control.gameInfo.isLock,this.btn_lock.node.getChildByName("icon_2").active=1==this.control.gameInfo.isLock},e.prototype.updateBtnAuto=function(){this.btn_auto.node.getChildByName("icon_1").active=0==this.control.gameInfo.isAuto,this.btn_auto.node.getChildByName("icon_2").active=1==this.control.gameInfo.isAuto},e.prototype.onClick_lockset=function(){this.control.playAudio(50),this.dialog_lockset.show(!0,this.control.gameInfo.lockTrackFishTypeList)},e.prototype.showBtnPush=function(t){var e=this;0==t?(cc.Tween.stopAllByTarget(this.btn_push.node),cc.tween(this.btn_push.node).to(.3,{opacity:0}).call(function(){e.btn_push.node.active=!1}).start()):(this.btn_push.node.opacity=255,this.btn_push.node.active=!0)},e.prototype.onClick_push=function(){this.control.sendHappyPlay()},e.prototype.showBtnPushAni=function(){this.btn_push.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.control.playAudio(69)},e.prototype.onClick_add=function(){this.control.playAudio(50),this.control.sendChangeBaseScore("add")},e.prototype.onClick_dec=function(){this.control.playAudio(50),this.control.sendChangeBaseScore("dec")},e.prototype.showFishComeTrip=function(){this.mapManage.showFishComeTrip()},e.prototype.showSwitchFishGroupMapAni=function(t){this.mapManage.playSwitchAni(t)},e.prototype.showTripMsg=function(t){var e=this;this.lbl_tripMsg.string=t,this.panel_tripMsg.active=!0,this.panel_tripMsg.stopAllActions(),this.panel_tripMsg.opacity=0,cc.tween(this.panel_tripMsg).to(.1,{opacity:255}).delay(.7).to(.3,{opacity:255}).call(function(){e.panel_tripMsg.active=!1}).start()},e.prototype.update=function(t){0==this.btnBackEnable&&(this.initTime+=t,this.btn_back.node.getChildByName("lbl_time").getComponent(cc.Label).string=""+Math.max(10-Math.floor(this.initTime),0),this.initTime>=10&&(this.btn_back.interactable=!0,this.btn_back.node.getChildByName("lbl_time").active=!1,this.btnBackEnable=!0))},s([w(cc.Node)],e.prototype,"node_menu_left",void 0),s([w(cc.Button)],e.prototype,"btn_left_open",void 0),s([w(cc.Button)],e.prototype,"btn_left_close",void 0),s([w(cc.Node)],e.prototype,"node_menu_right",void 0),s([w(cc.Button)],e.prototype,"btn_right_open",void 0),s([w(cc.Button)],e.prototype,"btn_right_close",void 0),s([w(cc.Button)],e.prototype,"btn_help",void 0),s([w(cc.Button)],e.prototype,"btn_voice",void 0),s([w(cc.Button)],e.prototype,"btn_back",void 0),s([w(cc.Button)],e.prototype,"btn_auto",void 0),s([w(cc.Button)],e.prototype,"btn_lock",void 0),s([w(cc.Button)],e.prototype,"btn_weapon",void 0),s([w(cc.Button)],e.prototype,"btn_lockset",void 0),s([w(cc.Button)],e.prototype,"btn_push",void 0),s([w(cc.Node)],e.prototype,"panel_tripMsg",void 0),s([w(cc.Label)],e.prototype,"lbl_tripMsg",void 0),s([w(a.default)],e.prototype,"batteryManage",void 0),s([w(r.default)],e.prototype,"bullteManage",void 0),s([w(y.default)],e.prototype,"fishManage",void 0),s([w(g.default)],e.prototype,"effectManage",void 0),s([w(_.default)],e.prototype,"lightHitManage",void 0),s([w(m.default)],e.prototype,"lockManage",void 0),s([w(h.default)],e.prototype,"dialog_help",void 0),s([w(u.default)],e.prototype,"dialog_setting",void 0),s([w(f.default)],e.prototype,"dialog_message",void 0),s([w(p.default)],e.prototype,"dialog_lockset",void 0),s([w(b.default)],e.prototype,"mapManage",void 0),s([w(c.default)],e.prototype,"comWait",void 0),s([w(d.default)],e.prototype,"dialog_mstTestRoom",void 0),s([F],e)}(cc.Component);o.default=B,cc._RF.pop()},{"./FBFBatteryManage":"FBFBatteryManage","./FBFBulletManage":"FBFBulletManage","./FBFComWait":"FBFComWait","./FBFDataEntry":"FBFDataEntry","./FBFDialogHelp":"FBFDialogHelp","./FBFDialogLockSet":"FBFDialogLockSet","./FBFDialogMessage":"FBFDialogMessage","./FBFDialogMsgTestRoom":"FBFDialogMsgTestRoom","./FBFDialogSetting":"FBFDialogSetting","./FBFEffectManage":"FBFEffectManage","./FBFFishManage":"FBFFishManage","./FBFLightHitManage":"FBFLightHitManage","./FBFLockManage":"FBFLockManage","./FBFMap":"FBFMap"}],FBFHelpFishItem:[function(t,e,o){"use strict";cc._RF.push(e,"2c1f7e76JZDab2pxYkJaALD","FBFHelpFishItem");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn=null,e.chooseIcon=null,e.lbl_double=null,e.lbl_name=null,e.sp_fish=null,e.fish_22=null,e.fishConfig=null,e.callFunc=null,e.control=null,e}return n(e,t),e.prototype.initView=function(t,e,o,i){this.control=t,this.fishConfig=e,this.callFunc=i;var n;n=null!=e.Double?"X"+e.Double:"X"+e.Double_1+"-"+e.Double_2,e.Id<=18?(this.lbl_double.string=n,this.lbl_name.string=""):(this.lbl_double.string="",this.lbl_name.string=e.Name);var s=this.control.gameView.fishManage.getSwimSpByFish(e);this.fish_22.active=!1,this.sp_fish.node.active=!1,22==e.Id?(this.fish_22.active=!0,this.fish_22.getComponent(sp.Skeleton).paused=!0):(this.sp_fish.node.active=!0,this.sp_fish.spriteFrame=s[0],this.sp_fish.node.setPosition(0,0)),this.sp_fish.node.setScale(e.FishIconScale),this.setChoose(!1),o&&this.btn.on("click",this.onClick_choose.bind(this))},e.prototype.setChoose=function(t){this.chooseIcon.active=t},e.prototype.onClick_choose=function(){1==this.chooseIcon.active?this.control.playAudio(47):this.control.playAudio(48),this.chooseIcon.active=!this.chooseIcon.active,this.callFunc&&this.callFunc(this.chooseIcon.active,this.fishConfig)},s([c(cc.Node)],e.prototype,"btn",void 0),s([c(cc.Node)],e.prototype,"chooseIcon",void 0),s([c(cc.Label)],e.prototype,"lbl_double",void 0),s([c(cc.Label)],e.prototype,"lbl_name",void 0),s([c(cc.Sprite)],e.prototype,"sp_fish",void 0),s([c(cc.Node)],e.prototype,"fish_22",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFI18n:[function(t,e,o){"use strict";cc._RF.push(e,"22d88QWxLRBNphyd+PKr8CM","FBFI18n");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.json_cn=null,e.json_en=null,e.i18n_type="en",e}return n(e,t),e.prototype.initView=function(t){this.i18n_type=t},e.prototype.getTripStr=function(t){return"cn"==this.i18n_type?this.json_cn.json[t]:this.json_en.json[t]},s([c(cc.JsonAsset)],e.prototype,"json_cn",void 0),s([c(cc.JsonAsset)],e.prototype,"json_en",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFLightHitManage:[function(t,e,o){"use strict";cc._RF.push(e,"b05bfg2T25Hx4n7JNfmBVjt","FBFLightHitManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFDataEntry"),r=cc._decorator,c=r.ccclass,l=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.guanPrefab_1=null,e.guanPrefab_2=null,e.lightPrefab=null,e.control=null,e.lightHitList=[],e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.resetLightHit()},e.prototype.resetLightHit=function(){for(var t in this.lightHitList)this.deleteLightHit(this.lightHitList[t]);this.lightHitList=[]},e.prototype.setBatteyLightFish=function(t,e){if(e>0){for(var o=!1,i=0;i<this.lightHitList.length;i++)if(this.lightHitList[i].batteryId==t){this.lightHitList[i].fishId=e,o=!0;break}0==o&&this.lightHitList.push({batteryId:t,fishId:e,guan_1:null,guan_2:null,light:null})}else for(i=0;i<this.lightHitList.length;i++)if(this.lightHitList[i].batteryId==t){this.deleteLightHit(this.lightHitList[i]),this.lightHitList.splice(i,1);break}this.update(0)},e.prototype.deleteLightHit=function(t){null!=t.guan_1&&(t.guan_1.removeFromParent(),t.guan_1=null),null!=t.guan_2&&(t.guan_2.removeFromParent(),t.guan_2=null),null!=t.light&&(t.light.removeFromParent(),t.light=null)},e.prototype.updateLightHitItem=function(t){var e,o=this.control.gameView.fishManage.getFishByFishId(t.fishId),i=this.control.gameView.batteryManage.getBatteryById(t.batteryId),n=this.node.convertToNodeSpaceAR(o.getWorldPos()),s=this.node.convertToNodeSpaceAR(i.getLightGuanPos()),a=Math.atan2(s.y-n.y,s.x-n.x),r=Math.sqrt(Math.pow(s.y-n.y,2)+Math.pow(s.x-n.x,2));null==t.light?((e=cc.instantiate(this.lightPrefab)).parent=this.node,e.setPosition((n.x+s.x)/2,(n.y+s.y)/2),e.scaleY=r/e.height,e.scaleX=1,e.angle=180*a/Math.PI+90,t.light=e):(t.light.setPosition((n.x+s.x)/2,(n.y+s.y)/2),t.light.scaleY=r/t.light.height,t.light.angle=180*a/Math.PI+90),null==t.guan_1?((e=cc.instantiate(this.guanPrefab_1)).parent=this.node,e.setPosition(s),t.guan_1=e):t.guan_1.setPosition(s),null==t.guan_2?((e=cc.instantiate(this.guanPrefab_2)).parent=this.node,e.setPosition(n),t.guan_2=e):t.guan_2.setPosition(n)},e.prototype.update=function(){for(var t=this.lightHitList.length-1;t>=0;t--){var e=this.control.gameView.fishManage.getFishByFishId(this.lightHitList[t].fishId),o=this.control.gameView.batteryManage.getBatteryById(this.lightHitList[t].batteryId);null==e||e.fishStatus!=a.FishStatus.Swim||1==e.isOutSwimSize?(this.deleteLightHit(this.lightHitList[t]),this.lightHitList.splice(t,1)):null!=o&&0!=o.isUse&&o.connType!=a.ConnType.Bullet||(this.deleteLightHit(this.lightHitList[t]),this.lightHitList.splice(t,1))}for(var t in this.lightHitList)this.updateLightHitItem(this.lightHitList[t])},s([l(cc.Prefab)],e.prototype,"guanPrefab_1",void 0),s([l(cc.Prefab)],e.prototype,"guanPrefab_2",void 0),s([l(cc.Prefab)],e.prototype,"lightPrefab",void 0),s([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./FBFDataEntry":"FBFDataEntry"}],FBFLightLine:[function(t,e,o){"use strict";cc._RF.push(e,"ba5b2XyUjRAMJ1M/YKBL2Vb","FBFLightLine");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFFishUtil"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.showAni=function(t,e,o,i){var n=this,s=this.node.parent.convertToNodeSpaceAR(cc.v2((t.x+e.x)/2,(t.y+e.y)/2));this.node.setPosition(s);var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));this.node.width=r,this.node.height=50;var c=Math.atan2(e.y-t.y,e.x-t.x);this.node.angle=180*c/Math.PI;var l=this.getComponent(cc.Sprite);a.default.showFrameAnimation(l,i,o/2,!1,!0,2,function(){n.node.removeFromParent()})},s([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./FBFFishUtil":"FBFFishUtil"}],FBFLockItem:[function(t,e,o){"use strict";cc._RF.push(e,"e4af296VzNIAaB77m5Xcusj","FBFLockItem");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp_icon=null,e}return n(e,t),e.prototype.initView=function(){this.playEnterAni()},e.prototype.setItemSp=function(t){this.sp_icon.spriteFrame=t},e.prototype.playEnterAni=function(){this.node.scale=5,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{scale:1}).start(),cc.tween(this.node).by(2,{angle:360}).repeatForever().start()},s([c(cc.Sprite)],e.prototype,"sp_icon",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFLockManage:[function(t,e,o){"use strict";cc._RF.push(e,"af8e00HP2ZPMJQ0DxFaW28R","FBFLockManage");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFDataEntry"),r=t("./FBFLockItem"),c=cc._decorator,l=c.ccclass,h=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockPrefab_1=null,e.lockPrefab_2=null,e.control=null,e.lockList=[],e.diffLen=100,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.resetLock()},e.prototype.resetLock=function(){for(var t in this.lockList)this.deleteLock(this.lockList[t]);this.lockList=[]},e.prototype.setBatteyLockFish=function(t,e){if(e>0){for(var o=!1,i=0;i<this.lockList.length;i++)if(this.lockList[i].batteryId==t){this.lockList[i].fishId=e,o=!0;break}0==o&&this.lockList.push({batteryId:t,fishId:e,lockItem_1:null,lockItem_2List:[]})}else for(i=0;i<this.lockList.length;i++)if(this.lockList[i].batteryId==t){this.deleteLock(this.lockList[i]),this.lockList.splice(i,1);break}this.update(0)},e.prototype.deleteLock=function(t){null!=t.lockItem_1&&(t.lockItem_1.removeFromParent(),t.lockItem_1=null);for(var e=t.lockItem_2List.length-1;e>=0;e--)t.lockItem_2List[e].removeFromParent();t.lockItem_2List=null},e.prototype.updateLockItem=function(t){var e=this.control.gameView.fishManage.getFishByFishId(t.fishId),o=this.control.gameView.batteryManage.getBatteryById(t.batteryId);if(null!=e){var i=e.node.getPosition(),n=this.node.convertToNodeSpaceAR(o.getPaoPos()),s=Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)),a=Math.floor((s-180)/this.diffLen);a=Math.min(a,50);var c=Math.atan2(n.y-i.y,n.x-i.x);null==t.lockItem_1?((h=cc.instantiate(this.lockPrefab_1)).parent=this.node,h.setPosition(i),t.lockItem_1=h,h.getComponent(r.default).initView()):t.lockItem_1.setPosition(i);for(var l=0;l<t.lockItem_2List.length;l++)t.lockItem_2List[l].active=!1;for(l=0;l<a;l++){var h,p=i.x+(100+this.diffLen*l)*Math.cos(c),f=i.y+(100+this.diffLen*l)*Math.sin(c);null==t.lockItem_2List[l]?((h=cc.instantiate(this.lockPrefab_2)).parent=this.node,h.setPosition(p,f),h.angle=180*c/Math.PI,t.lockItem_2List.push(h)):(t.lockItem_2List[l].active=!0,t.lockItem_2List[l].setPosition(p,f),t.lockItem_2List[l].angle=180*c/Math.PI)}}},e.prototype.update=function(){for(var t=this.lockList.length-1;t>=0;t--){var e=this.control.gameView.fishManage.getFishByFishId(this.lockList[t].fishId),o=this.control.gameView.batteryManage.getBatteryById(this.lockList[t].batteryId);null==e||e.fishStatus!=a.FishStatus.Swim||1==e.isOutSwimSize?1==o.isSelf&&1==this.control.gameInfo.isLock&&this.control.gameInfo.lockFishId>0?this.lockList[t].fishId=this.control.gameInfo.lockFishId:(this.deleteLock(this.lockList[t]),this.lockList.splice(t,1)):(null==o||0==o.isUse||1==o.isSelf&&0==this.control.gameInfo.isLock)&&(this.deleteLock(this.lockList[t]),this.lockList.splice(t,1))}for(var t in this.lockList)this.updateLockItem(this.lockList[t])},s([h(cc.Prefab)],e.prototype,"lockPrefab_1",void 0),s([h(cc.Prefab)],e.prototype,"lockPrefab_2",void 0),s([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./FBFDataEntry":"FBFDataEntry","./FBFLockItem":"FBFLockItem"}],FBFMap:[function(t,e,o){"use strict";cc._RF.push(e,"07b62IuzB9Hv4FHoRPVlQdF","FBFMap");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapSpList=[],e.map=null,e.map_ani=null,e.node_icon_1=null,e.node_icon_2=null,e.node_icon_list=[],e.MapConfig=[{id:0,imgNo:0},{id:1,imgNo:1},{id:2,imgNo:2},{id:3,imgNo:3}],e.control=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.initView=function(t){this.control=t,this.setMap(0),this.map_ani.node.active=!1,this.node_icon_1.active=!1,this.node_icon_2.active=!1},e.prototype.setMap=function(t){t>=this.MapConfig.length&&(t=0),this.map.spriteFrame=this.mapSpList[this.MapConfig[t].imgNo],this.control.playAudio(t%6),this.control.gameView.fishManage.showBlackNode(2==t)},e.prototype.getMapAngle=function(){return 0},e.prototype.getMapSpeed=function(){return 1280},e.prototype.playSwitchAni=function(t){var e=this;t>=this.MapConfig.length&&(t%=this.MapConfig.length),this.node_icon_1.active=!0,this.node_icon_1.opacity=255,cc.tween(this.node_icon_1).delay(1).to(2,{opacity:0}).call(function(){e.setMap(t),e.node_icon_1.active=!1,e.node_icon_1.opacity=255}).start()},e.prototype.showFishComeTrip=function(){},e.prototype.showMapshake=function(t){void 0===t&&(t=2),cc.Tween.stopAllByTarget(this.map.node),this.map.node.setPosition(0,0);for(var e=[],o=0;o<9;o++)e.push(cc.v3(60*Math.random()-30,50*Math.random()-25,this.map.node.z));cc.tween(this.map.node).sequence(cc.tween().to(.018,{position:e[0]}),cc.tween().to(.018,{position:e[1]}),cc.tween().to(.018,{position:e[2]}),cc.tween().to(.018,{position:e[3]}),cc.tween().to(.018,{position:e[4]}),cc.tween().to(.018,{position:e[5]}),cc.tween().to(.018,{position:e[6]}),cc.tween().to(.018,{position:e[7]}),cc.tween().to(.018,{position:e[8]})).repeat(t).start()},s([c([cc.SpriteFrame])],e.prototype,"mapSpList",void 0),s([c(cc.Sprite)],e.prototype,"map",void 0),s([c(cc.Sprite)],e.prototype,"map_ani",void 0),s([c(cc.Node)],e.prototype,"node_icon_1",void 0),s([c(cc.Node)],e.prototype,"node_icon_2",void 0),s([c([cc.Node])],e.prototype,"node_icon_list",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFNetWork:[function(t,e,o){"use strict";cc._RF.push(e,"a8c30H2T59BCpuXFSaNjFeF","FBFNetWork");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFDataEntry"),r=cc._decorator,c=r.ccclass,l=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.socket=null,e.control=null,e.url=null,e.clickExit=!1,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.once=this,GameConfig.SubGameMgr.subGameNet=this,this.send("loginGame",{})},e.prototype.initView=function(t){this.control=t,this.control.showWaitLoading(!0)},e.prototype.send=function(t,e){window.sendNetWorkData&&("heart_beat"!=t&&console.log("send cmd:"+t+",data:",e),window.sendNetWorkData(t,JSON.stringify(e)))},e.prototype.resultToJSON=function(t){return JSON.parse(t)},e.prototype.addNetEvent=function(t,e){var o,i=this,n=e;if("loginGameResult"==t){var s=this.resultToJSON(e);if(cc.log("\u767b\u9646\u6e38\u620f\u670d\u7ed3\u679c",s),s.resultid){(o=new a.UserItem).niceName=s.Obj.nickname,o.userId=s.Obj.id,o.score=s.Obj.score,o.winSocre=s.Obj.wins,o.baseScore=s.Obj.bet,o.isMonitor=!0,this.control.gameInfo.selfUserItem=o,this.control.gameInfo.roomBet=s.Obj.bet,s.Obj.betList&&s.Obj.betList.length>0&&(this.control.gameInfo.baseScoreList=s.Obj.betList),cc.log("\u53d1\u9001\u767b\u5f55\u6e38\u620f\u623f\u95f4\u6d88\u606f");var r={roomid:1,tableid:null,seatid:null,passwd:null};null!=globalThis.currentFishTableId&&(r.tableid=globalThis.currentFishTableId,r.seatid=globalThis.currentFishSeatId,r.passwd=globalThis.currentFishPassWD),this.send("LoginRoom",r),this.control.hideDialogMessage("socketError")}else{var c=this.control.i18n.getTripStr("socketError");this.control.showDialogMessage("socketError","ok",c,function(){i.sendLeaveRoom()})}}if("LoginRoomResult"==t){s=this.resultToJSON(e);if(cc.log("\u767b\u5f55\u623f\u95f4\u7ed3\u679c",s),this.control.showWaitLoading(!1),s.ResultCode){for(var l in this.control.gameInfo.changeSceneType=s.change_scene_type,this.control.setMap(this.control.gameInfo.changeSceneType),s.ResultData.userList){var h=s.ResultData.userList[l];this.control.gameInfo.checkSelfByUid(h.userId)?(this.control.gameInfo.selfUserItem.headId=h.headimgurl,this.control.gameInfo.selfUserItem.userType=h.userType,this.control.gameInfo.selfUserItem.canonId=h.canonId,this.control.gameInfo.connType=this.control.gameInfo.selfUserItem.canonId,this.control.gameInfo.selfUserItem.seatId=h.seatId,this.control.gameInfo.selfUserItem.batteryId=h.seatId,this.control.gameInfo.selfUserItem.baseScore=Math.max(h.bet,this.control.gameInfo.baseScoreList[0]),this.control.onUserEnter(this.control.gameInfo.selfUserItem),this.control.gameView.updataBtnWeapon()):((o=new a.UserItem).niceName=h.nickname,o.headId=h.headimgurl,o.userId=h.userId,o.userType=h.userType,o.score=h.score,o.winSocre=h.wins,o.canonId=h.canonId,o.baseScore=Math.max(h.bet,this.control.gameInfo.baseScoreList[0]),o.seatId=h.seatId,o.batteryId=h.seatId,o.isMonitor=!1,this.control.onUserEnter(o))}this.sendChangeScene()}else c=this.control.i18n.getTripStr("socketError"),this.control.showDialogMessage("socketError","ok",c,function(){i.sendLeaveRoom()})}if("fishSceneChange"==t&&(s=this.resultToJSON(n),cc.log("fishSceneChange:",s),s&&(this.control.gameInfo.changeSceneType=s.change_scene_type,this.control.switchFishGroupMap(this.control.gameInfo.changeSceneType))),"playEnter"==t&&(s=this.resultToJSON(n),cc.log("\u7528\u6237\u8fdb\u5165:",s),s.ResultCode&&(h=s.ResultData,(o=new a.UserItem).niceName=h.nickname,o.headId=h.headimgurl,o.userId=h.UserId,o.userType=h.userType,o.score=h.score,o.winSocre=h.wins,o.canonId=h.canonId,o.baseScore=Math.max(1,this.control.gameInfo.baseScoreList[0]),o.seatId=h.seatId,o.batteryId=h.seatId,o.isMonitor=!1,this.control.onUserEnter(o))),"PlayerOut"==t&&(s=this.resultToJSON(n),cc.log("\u7528\u6237\u9000\u51fa:",s),this.control.onUserLeave(s.userId)),"FishOut"==t){var p=this.resultToJSON(n);if(null!=p.propFish&&p.propFish,p.fishType>=20&&p.fishType,null!=p.fishId&&p.fishId.length,p.fishType>28)return;var f=null!=p.stop?p.stop:0;cc.tween(this.node).delay(f).call(function(){for(var t=0;t<p.fishId.length;t++){var e=p.fishId[t],o=p.fishType,n=p.fishPath,s=p.hp,a=[];-1!=[19,20].indexOf(o)&&(a=p.fishes);var r=cc.v2(0,0),c=0,l=0;n>=95&&n<=98?r=i.control.getFishPosByGroup(n,o,t):99==n?c=360*t/p.fishId.length:l=1*t,i.control.onFishEnter(e,o,n,r,c,l,s,a)}}).start()}if("fishShoot"==t){var d=(s=this.resultToJSON(n)).uid,u=s.bulletId,g=s.position.x,y=s.bet,_=s.fishId;this.control.onBatteryFire(d,u,g,y,_)}if("HitResult"==t&&1==(s=this.resultToJSON(n)).ResultCode){var m={uId:s.ResultData.userId,fishId:s.ResultData.fishId,butype:s.ResultData.butype,winScore:s.ResultData.hitSocre,bombId:s.ResultData.bombId,bombCount:s.ResultData.bombCount,bulletType:s.hitInfo.bulletType,bulletId:s.hitInfo.bulletId};this.control.onFishDeath(m)}if("changePowerResult"==t&&(d=(s=this.resultToJSON(n)).uid,y=s.bet,this.control.onChangeBaseScore(d,y)),"strikeResult"==t&&(s=this.resultToJSON(n),cc.log("\u6d3b\u52a8\u70b9\u51fb\u6d88\u606f:",s),1==s.ResultCode)){d=s.ResultData.userId;var b=s.ResultData.score;this.control.onStrikeResult(d,b)}("userGoldUpdate"==t&&(s=this.resultToJSON(n),cc.log("\u73a9\u5bb6\u5206\u6570\u6539\u53d8:",s),this.control.onUserScoreChange(s.userId,s.updateSocre)),"caijinChange"==t&&(s=this.resultToJSON(n),cc.log("\u5f69\u91d1\u53d8\u5316:",s)),"getDownTimeResult"==t&&(s=this.resultToJSON(n),cc.log("getDownTimeResult:",s)),"doubleEnd"==t&&(s=this.resultToJSON(n),cc.log("doubleEnd:",s)),"chargeAllResult"==t&&(s=this.resultToJSON(n),cc.log("doubleEnd:",s)),"useSkillResult"==t)&&(s=this.resultToJSON(n),cc.log("useSkillResult:",s),(o=this.control.gameInfo.getUserItemByUid(s.uid)).canonId!=s.canonId&&(o.canonId=s.canonId,this.control.updateWeaponType(o.batteryId,o.canonId),this.control.gameInfo.checkSelfByUid(o.userId)&&(this.control.gameInfo.connType=o.canonId)));if("broadcast"==t){s=this.resultToJSON(n);var v=JSON.parse(s.userdata);cc.log("broadcast:",s,v),"laserFire"==v.type&&this.control.onLaserNotice(v.uid,v.battryId,v.angle)}"fishHit_boardResult"==t&&(s=this.resultToJSON(n),cc.log("fishHit_boardResult:",s)),"pool"==t&&(s=this.resultToJSON(n),cc.log("pool:",s)),"getFishListResult"==t&&(s=this.resultToJSON(n),cc.log("getFishListResult:",s)),"getMoguiCountResult"==t&&(s=this.resultToJSON(n),cc.log("getMoguiCountResult:",s))},e.prototype.sendHeartBeat=function(){this.send("heart_beat",{})},e.prototype.sendBatteryFire=function(t,e,o,i,n,s){var a={userid:t,seatId:e,bet:i,position:cc.v2(o,0),fishId:n,balance:i*this.control.gameInfo.roomBet,uid:t,bulletId:s,isDrill:!1,boomWay:0,boomPercent:0};this.send("fishShoot",a)},e.prototype.sendHitFish=function(t,e,o,i,n,s){void 0===n&&(n=!1),void 0===s&&(s=0);var a={uid:t,fishId:o,bulletId:e,bulletType:i,lockFishId:0,format:null,hp:null};1==n&&(a.format=1),s>0&&(a.hp=s,cc.log("hp:",s)),this.send("fishHit",a)},e.prototype.sendChangeBaseScore=function(t,e){var o={uid:t,bet:e};this.send("changePower",o)},e.prototype.sendChangeUserSkill=function(t){var e={uid:t,sid:2};this.send("useSKill",e)},e.prototype.sendChangeScene=function(){this.send("changeScene",{})},e.prototype.sendLaserNotice=function(t,e){var o={type:"laserFire",uid:this.control.gameInfo.selfUserItem.userId,battryId:t,angle:e};cc.log("\u53d1\u9001\u6fc0\u5149\u6d88\u606f\uff1a",o),this.send("broadcast",o)},e.prototype.sendHappyPlay=function(){cc.log("\u53d1\u9001\uff1afishStrike"),this.send("fishStrike",{})},e.prototype.sendLeaveRoom=function(){Common.backHall("Are you sure you want to leave the game?",function(){})},e.prototype.leave_1=function(){Common.backHall("Are you sure you want to leave the game?",function(){})},e.prototype.isConnected=function(){return this.socket&&this.socket.connected},o=s([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./FBFDataEntry":"FBFDataEntry"}],FBFScoreAni:[function(t,e,o){"use strict";cc._RF.push(e,"7120bbAS85E8LuhCN/byuyF","FBFScoreAni");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./FBFFishUtil"),r=cc._decorator,c=r.ccclass,l=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblScore=null,e.sp_icon=null,e.sp_ani=null,e.scoreList=[{start:0,single:2,count:5},{start:10,single:10,count:20},{start:210,single:50,count:20},{start:1210,single:200,count:20},{start:5210,single:500,count:20},{start:15210,single:1e3,count:-1}],e.singleHeight=4,e}return n(e,t),e.prototype.start=function(){},e.prototype.showAni=function(t,e){for(var o=this,i=0,n=0;n<this.scoreList.length;n++){if(n==this.scoreList.length-1){i+=Math.ceil((t-this.scoreList[n].start)/this.scoreList[n].single);break}if(t<=this.scoreList[n+1].start){i+=Math.ceil((t-this.scoreList[n].start)/this.scoreList[n].single);break}i+=Math.ceil((this.scoreList[n+1].start-this.scoreList[n].start)/this.scoreList[n].single)}var s=i*this.singleHeight;this.sp_icon.height=4,this.sp_icon.opacity=255,cc.tween(this.sp_icon).to(1,{height:s}).delay(.7).to(.5,{opacity:0}).call(function(){o.node.removeFromParent()}).start(),this.lblScore.string=(t/globalThis.playerInfo.exchangeRate).toFixed(2),this.lblScore.node.active=!1,this.lblScore.node.y=this.lblScore.node.y+s;var r=[],c=null;for(n=0;n<6;n++)null!=(c=e.getSpriteFrame("ChipAnimation_"+n))&&r.push(c);a.default.showFrameAnimation(this.sp_ani,r,.2,!1,!0,6,null),cc.tween(this.sp_ani.node).to(1,{position:cc.v3(this.sp_ani.node.x,this.sp_ani.node.y+s,this.sp_ani.node.z)}).delay(.2).call(function(){o.sp_ani.node.active=!1,o.lblScore.node.active=!0,cc.tween(o.lblScore.node).delay(.5).to(.5,{opacity:0}).start()}).start()},s([l(cc.Label)],e.prototype,"lblScore",void 0),s([l(cc.Node)],e.prototype,"sp_icon",void 0),s([l(cc.Sprite)],e.prototype,"sp_ani",void 0),s([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./FBFFishUtil":"FBFFishUtil"}],FBFScore:[function(t,e,o){"use strict";cc._RF.push(e,"c7074MPcYdNfqlWt5goZRzh","FBFScore");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lbl_gold=null,e.lbl_yin=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.showAni=function(t){var e=this;this.lbl_gold.string=(t/globalThis.playerInfo.exchangeRate).toFixed(2),this.lbl_gold.node.active=!0,this.lbl_yin.node.active=!1,cc.tween(this.node).by(.15,{position:cc.v3(0,50,0)}).by(.15,{position:cc.v3(0,-50,0)}).delay(1.3).to(.5,{opacity:0}).call(function(){e.node.removeFromParent()}).start()},e.prototype.showMoveAni=function(t,e,o,i,n){var s=this;e?(this.lbl_gold.string=(t/globalThis.playerInfo.exchangeRate).toFixed(2),this.lbl_gold.node.active=!0,this.lbl_yin.node.active=!1):(this.lbl_yin.string=(t/globalThis.playerInfo.exchangeRate).toFixed(2),this.lbl_gold.node.active=!1,this.lbl_yin.node.active=!0),this.node.scale=0,this.node.setPosition(o),cc.tween(this.node).to(.2,{scale:1.2}).to(.1,{scale:.9}).to(.1,{scale:1}).delay(.6).to(.5,{position:cc.v3(i.x,i.y,this.node.z)}).call(function(){n&&n(),s.node.removeFromParent()}).start()},s([c(cc.Label)],e.prototype,"lbl_gold",void 0),s([c(cc.Label)],e.prototype,"lbl_yin",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FBFUIAdapet:[function(t,e,o){"use strict";cc._RF.push(e,"50677ViMQ9ElbzwATI5GJv1","FBFUIAdapet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,a=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(a=(s<3?n(a):s>3?n(e,o,a):n(e,o))||a);return s>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftNodeList=[],e.rightNodeList=[],e.diffWidth=80,e}return n(e,t),e.prototype.start=function(){if(cc.sys.isNative){var t=cc.director.getWinSize();if(t.width/t.height>=1.9){for(var e in this.leftNodeList)(o=this.leftNodeList[e].getComponent(cc.Widget))?o.left=this.diffWidth:this.leftNodeList[e].x=this.leftNodeList[e].x+this.diffWidth;for(var e in this.rightNodeList){var o;(o=this.leftNodeList[e].getComponent(cc.Widget))?o.right=this.diffWidth:this.leftNodeList[e].x=this.leftNodeList[e].x-this.diffWidth}}}},s([c([cc.Node])],e.prototype,"leftNodeList",void 0),s([c([cc.Node])],e.prototype,"rightNodeList",void 0),s([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}]},{},["FBFAudio","FBFBattery","FBFBatteryCicleAni","FBFBatteryHappyAni","FBFBatteryManage","FBFBullet","FBFBulletDaodan","FBFBulletManage","FBFComWait","FBFControl","FBFDataEntry","FBFDialogHelp","FBFDialogLockSet","FBFDialogMessage","FBFDialogMsgTestRoom","FBFDialogSetting","FBFEffectManage","FBFFish","FBFFishDie_RedPhoenix","FBFFishManage","FBFFishNet","FBFFishPath","FBFFishPointPrint","FBFFishUtil","FBFGameInfo","FBFGameView","FBFHelpFishItem","FBFI18n","FBFLightHitManage","FBFLightLine","FBFLockItem","FBFLockManage","FBFMap","FBFNetWork","FBFScore","FBFScoreAni","FBFUIAdapet"]);